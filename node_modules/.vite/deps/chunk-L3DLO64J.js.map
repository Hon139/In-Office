{
  "version": 3,
  "sources": ["../../melonjs/dist/melonjs.module.js"],
  "sourcesContent": ["/*!\n * melonJS Game Engine - v17.4.0\n * http://www.melonjs.org\n * melonjs is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n * @copyright (C) 2011 - 2024 Olivier Biot (AltByte Pte Ltd)\n */\nvar commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\nfunction getDefaultExportFromCjs (x) {\n\treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\n\nfunction getDefaultExportFromNamespaceIfPresent (n) {\n\treturn n && Object.prototype.hasOwnProperty.call(n, 'default') ? n['default'] : n;\n}\n\nfunction getDefaultExportFromNamespaceIfNotNamed (n) {\n\treturn n && Object.prototype.hasOwnProperty.call(n, 'default') && Object.keys(n).length === 1 ? n['default'] : n;\n}\n\nfunction getAugmentedNamespace(n) {\n  if (n.__esModule) return n;\n  var f = n.default;\n\tif (typeof f == \"function\") {\n\t\tvar a = function a () {\n\t\t\tif (this instanceof a) {\n        return Reflect.construct(f, arguments, this.constructor);\n\t\t\t}\n\t\t\treturn f.apply(this, arguments);\n\t\t};\n\t\ta.prototype = f.prototype;\n  } else a = {};\n  Object.defineProperty(a, '__esModule', {value: true});\n\tObject.keys(n).forEach(function (k) {\n\t\tvar d = Object.getOwnPropertyDescriptor(n, k);\n\t\tObject.defineProperty(a, k, d.get ? d : {\n\t\t\tenumerable: true,\n\t\t\tget: function () {\n\t\t\t\treturn n[k];\n\t\t\t}\n\t\t});\n\t});\n\treturn a;\n}\n\nvar esnext_globalThis = {};\n\nvar es_globalThis = {};\n\n'use strict';\nvar check = function (it) {\n  return it && it.Math === Math && it;\n};\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global$d =\n  // eslint-disable-next-line es/no-global-this -- safe\n  check(typeof globalThis == 'object' && globalThis) ||\n  check(typeof window == 'object' && window) ||\n  // eslint-disable-next-line no-restricted-globals -- safe\n  check(typeof self == 'object' && self) ||\n  check(typeof commonjsGlobal == 'object' && commonjsGlobal) ||\n  check(typeof commonjsGlobal == 'object' && commonjsGlobal) ||\n  // eslint-disable-next-line no-new-func -- fallback\n  (function () { return this; })() || Function('return this')();\n\nvar global$e = /*@__PURE__*/getDefaultExportFromCjs(global$d);\n\nvar objectGetOwnPropertyDescriptor = {};\n\n'use strict';\nvar fails$9 = function (exec) {\n  try {\n    return !!exec();\n  } catch (error) {\n    return true;\n  }\n};\n\nvar fails$a = /*@__PURE__*/getDefaultExportFromCjs(fails$9);\n\n'use strict';\nvar fails$8 = fails$9;\n\n// Detect IE8's incomplete defineProperty implementation\nvar descriptors = !fails$8(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty({}, 1, { get: function () { return 7; } })[1] !== 7;\n});\n\nvar descriptors$1 = /*@__PURE__*/getDefaultExportFromCjs(descriptors);\n\n'use strict';\nvar fails$7 = fails$9;\n\nvar functionBindNative = !fails$7(function () {\n  // eslint-disable-next-line es/no-function-prototype-bind -- safe\n  var test = (function () { /* empty */ }).bind();\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return typeof test != 'function' || test.hasOwnProperty('prototype');\n});\n\nvar functionBindNative$1 = /*@__PURE__*/getDefaultExportFromCjs(functionBindNative);\n\n'use strict';\nvar NATIVE_BIND$1 = functionBindNative;\n\nvar call$4 = Function.prototype.call;\n\nvar functionCall = NATIVE_BIND$1 ? call$4.bind(call$4) : function () {\n  return call$4.apply(call$4, arguments);\n};\n\nvar functionCall$1 = /*@__PURE__*/getDefaultExportFromCjs(functionCall);\n\nvar objectPropertyIsEnumerable = {};\n\n'use strict';\nvar $propertyIsEnumerable = {}.propertyIsEnumerable;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor$1 = Object.getOwnPropertyDescriptor;\n\n// Nashorn ~ JDK8 bug\nvar NASHORN_BUG = getOwnPropertyDescriptor$1 && !$propertyIsEnumerable.call({ 1: 2 }, 1);\n\n// `Object.prototype.propertyIsEnumerable` method implementation\n// https://tc39.es/ecma262/#sec-object.prototype.propertyisenumerable\nvar f$4 = objectPropertyIsEnumerable.f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n  var descriptor = getOwnPropertyDescriptor$1(this, V);\n  return !!descriptor && descriptor.enumerable;\n} : $propertyIsEnumerable;\n\n'use strict';\nvar createPropertyDescriptor$2 = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n\nvar createPropertyDescriptor$3 = /*@__PURE__*/getDefaultExportFromCjs(createPropertyDescriptor$2);\n\n'use strict';\nvar NATIVE_BIND = functionBindNative;\n\nvar FunctionPrototype$1 = Function.prototype;\nvar call$3 = FunctionPrototype$1.call;\nvar uncurryThisWithBind = NATIVE_BIND && FunctionPrototype$1.bind.bind(call$3, call$3);\n\nvar functionUncurryThis = NATIVE_BIND ? uncurryThisWithBind : function (fn) {\n  return function () {\n    return call$3.apply(fn, arguments);\n  };\n};\n\nvar functionUncurryThis$1 = /*@__PURE__*/getDefaultExportFromCjs(functionUncurryThis);\n\n'use strict';\nvar uncurryThis$a = functionUncurryThis;\n\nvar toString$5 = uncurryThis$a({}.toString);\nvar stringSlice$1 = uncurryThis$a(''.slice);\n\nvar classofRaw$1 = function (it) {\n  return stringSlice$1(toString$5(it), 8, -1);\n};\n\nvar classofRaw$2 = /*@__PURE__*/getDefaultExportFromCjs(classofRaw$1);\n\n'use strict';\nvar uncurryThis$9 = functionUncurryThis;\nvar fails$6 = fails$9;\nvar classof$3 = classofRaw$1;\n\nvar $Object$3 = Object;\nvar split = uncurryThis$9(''.split);\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar indexedObject = fails$6(function () {\n  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return !$Object$3('z').propertyIsEnumerable(0);\n}) ? function (it) {\n  return classof$3(it) === 'String' ? split(it, '') : $Object$3(it);\n} : $Object$3;\n\nvar indexedObject$1 = /*@__PURE__*/getDefaultExportFromCjs(indexedObject);\n\n'use strict';\n// we can't use just `it == null` since of `document.all` special case\n// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot-aec\nvar isNullOrUndefined$2 = function (it) {\n  return it === null || it === undefined;\n};\n\nvar isNullOrUndefined$3 = /*@__PURE__*/getDefaultExportFromCjs(isNullOrUndefined$2);\n\n'use strict';\nvar isNullOrUndefined$1 = isNullOrUndefined$2;\n\nvar $TypeError$5 = TypeError;\n\n// `RequireObjectCoercible` abstract operation\n// https://tc39.es/ecma262/#sec-requireobjectcoercible\nvar requireObjectCoercible$3 = function (it) {\n  if (isNullOrUndefined$1(it)) throw new $TypeError$5(\"Can't call method on \" + it);\n  return it;\n};\n\nvar requireObjectCoercible$4 = /*@__PURE__*/getDefaultExportFromCjs(requireObjectCoercible$3);\n\n'use strict';\n// toObject with fallback for non-array-like ES3 strings\nvar IndexedObject = indexedObject;\nvar requireObjectCoercible$2 = requireObjectCoercible$3;\n\nvar toIndexedObject$3 = function (it) {\n  return IndexedObject(requireObjectCoercible$2(it));\n};\n\nvar toIndexedObject$4 = /*@__PURE__*/getDefaultExportFromCjs(toIndexedObject$3);\n\n'use strict';\n// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot\nvar documentAll = typeof document == 'object' && document.all;\n\n// `IsCallable` abstract operation\n// https://tc39.es/ecma262/#sec-iscallable\n// eslint-disable-next-line unicorn/no-typeof-undefined -- required for testing\nvar isCallable$b = typeof documentAll == 'undefined' && documentAll !== undefined ? function (argument) {\n  return typeof argument == 'function' || argument === documentAll;\n} : function (argument) {\n  return typeof argument == 'function';\n};\n\nvar isCallable$c = /*@__PURE__*/getDefaultExportFromCjs(isCallable$b);\n\n'use strict';\nvar isCallable$a = isCallable$b;\n\nvar isObject$5 = function (it) {\n  return typeof it == 'object' ? it !== null : isCallable$a(it);\n};\n\nvar isObject$6 = /*@__PURE__*/getDefaultExportFromCjs(isObject$5);\n\n'use strict';\nvar global$c = global$d;\nvar isCallable$9 = isCallable$b;\n\nvar aFunction = function (argument) {\n  return isCallable$9(argument) ? argument : undefined;\n};\n\nvar getBuiltIn$2 = function (namespace, method) {\n  return arguments.length < 2 ? aFunction(global$c[namespace]) : global$c[namespace] && global$c[namespace][method];\n};\n\nvar getBuiltIn$3 = /*@__PURE__*/getDefaultExportFromCjs(getBuiltIn$2);\n\n'use strict';\nvar uncurryThis$8 = functionUncurryThis;\n\nvar objectIsPrototypeOf = uncurryThis$8({}.isPrototypeOf);\n\nvar objectIsPrototypeOf$1 = /*@__PURE__*/getDefaultExportFromCjs(objectIsPrototypeOf);\n\n'use strict';\nvar engineUserAgent = typeof navigator != 'undefined' && String(navigator.userAgent) || '';\n\nvar engineUserAgent$1 = /*@__PURE__*/getDefaultExportFromCjs(engineUserAgent);\n\n'use strict';\nvar global$b = global$d;\nvar userAgent = engineUserAgent;\n\nvar process$1 = global$b.process;\nvar Deno = global$b.Deno;\nvar versions = process$1 && process$1.versions || Deno && Deno.version;\nvar v8 = versions && versions.v8;\nvar match, version$1;\n\nif (v8) {\n  match = v8.split('.');\n  // in old Chrome, versions of V8 isn't V8 = Chrome / 10\n  // but their correct versions are not interesting for us\n  version$1 = match[0] > 0 && match[0] < 4 ? 1 : +(match[0] + match[1]);\n}\n\n// BrowserFS NodeJS `process` polyfill incorrectly set `.v8` to `0.0`\n// so check `userAgent` even if `.v8` exists, but 0\nif (!version$1 && userAgent) {\n  match = userAgent.match(/Edge\\/(\\d+)/);\n  if (!match || match[1] >= 74) {\n    match = userAgent.match(/Chrome\\/(\\d+)/);\n    if (match) version$1 = +match[1];\n  }\n}\n\nvar engineV8Version = version$1;\n\nvar engineV8Version$1 = /*@__PURE__*/getDefaultExportFromCjs(engineV8Version);\n\n'use strict';\n/* eslint-disable es/no-symbol -- required for testing */\nvar V8_VERSION = engineV8Version;\nvar fails$5 = fails$9;\nvar global$a = global$d;\n\nvar $String$4 = global$a.String;\n\n// eslint-disable-next-line es/no-object-getownpropertysymbols -- required for testing\nvar symbolConstructorDetection = !!Object.getOwnPropertySymbols && !fails$5(function () {\n  var symbol = Symbol('symbol detection');\n  // Chrome 38 Symbol has incorrect toString conversion\n  // `get-own-property-symbols` polyfill symbols converted to object are not Symbol instances\n  // nb: Do not call `String` directly to avoid this being optimized out to `symbol+''` which will,\n  // of course, fail.\n  return !$String$4(symbol) || !(Object(symbol) instanceof Symbol) ||\n    // Chrome 38-40 symbols are not inherited from DOM collections prototypes to instances\n    !Symbol.sham && V8_VERSION && V8_VERSION < 41;\n});\n\nvar symbolConstructorDetection$1 = /*@__PURE__*/getDefaultExportFromCjs(symbolConstructorDetection);\n\n'use strict';\n/* eslint-disable es/no-symbol -- required for testing */\nvar NATIVE_SYMBOL$1 = symbolConstructorDetection;\n\nvar useSymbolAsUid = NATIVE_SYMBOL$1\n  && !Symbol.sham\n  && typeof Symbol.iterator == 'symbol';\n\nvar useSymbolAsUid$1 = /*@__PURE__*/getDefaultExportFromCjs(useSymbolAsUid);\n\n'use strict';\nvar getBuiltIn$1 = getBuiltIn$2;\nvar isCallable$8 = isCallable$b;\nvar isPrototypeOf = objectIsPrototypeOf;\nvar USE_SYMBOL_AS_UID$1 = useSymbolAsUid;\n\nvar $Object$2 = Object;\n\nvar isSymbol$2 = USE_SYMBOL_AS_UID$1 ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  var $Symbol = getBuiltIn$1('Symbol');\n  return isCallable$8($Symbol) && isPrototypeOf($Symbol.prototype, $Object$2(it));\n};\n\nvar isSymbol$3 = /*@__PURE__*/getDefaultExportFromCjs(isSymbol$2);\n\n'use strict';\nvar $String$3 = String;\n\nvar tryToString$1 = function (argument) {\n  try {\n    return $String$3(argument);\n  } catch (error) {\n    return 'Object';\n  }\n};\n\nvar tryToString$2 = /*@__PURE__*/getDefaultExportFromCjs(tryToString$1);\n\n'use strict';\nvar isCallable$7 = isCallable$b;\nvar tryToString = tryToString$1;\n\nvar $TypeError$4 = TypeError;\n\n// `Assert: IsCallable(argument) is true`\nvar aCallable$1 = function (argument) {\n  if (isCallable$7(argument)) return argument;\n  throw new $TypeError$4(tryToString(argument) + ' is not a function');\n};\n\nvar aCallable$2 = /*@__PURE__*/getDefaultExportFromCjs(aCallable$1);\n\n'use strict';\nvar aCallable = aCallable$1;\nvar isNullOrUndefined = isNullOrUndefined$2;\n\n// `GetMethod` abstract operation\n// https://tc39.es/ecma262/#sec-getmethod\nvar getMethod$1 = function (V, P) {\n  var func = V[P];\n  return isNullOrUndefined(func) ? undefined : aCallable(func);\n};\n\nvar getMethod$2 = /*@__PURE__*/getDefaultExportFromCjs(getMethod$1);\n\n'use strict';\nvar call$2 = functionCall;\nvar isCallable$6 = isCallable$b;\nvar isObject$4 = isObject$5;\n\nvar $TypeError$3 = TypeError;\n\n// `OrdinaryToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-ordinarytoprimitive\nvar ordinaryToPrimitive$1 = function (input, pref) {\n  var fn, val;\n  if (pref === 'string' && isCallable$6(fn = input.toString) && !isObject$4(val = call$2(fn, input))) return val;\n  if (isCallable$6(fn = input.valueOf) && !isObject$4(val = call$2(fn, input))) return val;\n  if (pref !== 'string' && isCallable$6(fn = input.toString) && !isObject$4(val = call$2(fn, input))) return val;\n  throw new $TypeError$3(\"Can't convert object to primitive value\");\n};\n\nvar ordinaryToPrimitive$2 = /*@__PURE__*/getDefaultExportFromCjs(ordinaryToPrimitive$1);\n\nvar sharedStore$2 = {exports: {}};\n\n'use strict';\nvar isPure = false;\n\nvar isPure$1 = /*@__PURE__*/getDefaultExportFromCjs(isPure);\n\n'use strict';\nvar global$9 = global$d;\n\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar defineProperty$1 = Object.defineProperty;\n\nvar defineGlobalProperty$3 = function (key, value) {\n  try {\n    defineProperty$1(global$9, key, { value: value, configurable: true, writable: true });\n  } catch (error) {\n    global$9[key] = value;\n  } return value;\n};\n\nvar defineGlobalProperty$4 = /*@__PURE__*/getDefaultExportFromCjs(defineGlobalProperty$3);\n\nvar sharedStore = sharedStore$2.exports;\n\n'use strict';\nvar IS_PURE = isPure;\nvar globalThis$3 = global$d;\nvar defineGlobalProperty$2 = defineGlobalProperty$3;\n\nvar SHARED = '__core-js_shared__';\nvar store$3 = sharedStore$2.exports = globalThis$3[SHARED] || defineGlobalProperty$2(SHARED, {});\n\n(store$3.versions || (store$3.versions = [])).push({\n  version: '3.37.1',\n  mode: IS_PURE ? 'pure' : 'global',\n  copyright: 'Â© 2014-2024 Denis Pushkarev (zloirock.ru)',\n  license: 'https://github.com/zloirock/core-js/blob/v3.37.1/LICENSE',\n  source: 'https://github.com/zloirock/core-js'\n});\n\nvar sharedStoreExports = sharedStore$2.exports;\nvar sharedStore$1 = /*@__PURE__*/getDefaultExportFromCjs(sharedStoreExports);\n\n'use strict';\nvar store$2 = sharedStoreExports;\n\nvar shared$3 = function (key, value) {\n  return store$2[key] || (store$2[key] = value || {});\n};\n\nvar shared$4 = /*@__PURE__*/getDefaultExportFromCjs(shared$3);\n\n'use strict';\nvar requireObjectCoercible$1 = requireObjectCoercible$3;\n\nvar $Object$1 = Object;\n\n// `ToObject` abstract operation\n// https://tc39.es/ecma262/#sec-toobject\nvar toObject$1 = function (argument) {\n  return $Object$1(requireObjectCoercible$1(argument));\n};\n\nvar toObject$2 = /*@__PURE__*/getDefaultExportFromCjs(toObject$1);\n\n'use strict';\nvar uncurryThis$7 = functionUncurryThis;\nvar toObject = toObject$1;\n\nvar hasOwnProperty = uncurryThis$7({}.hasOwnProperty);\n\n// `HasOwnProperty` abstract operation\n// https://tc39.es/ecma262/#sec-hasownproperty\n// eslint-disable-next-line es/no-object-hasown -- safe\nvar hasOwnProperty_1 = Object.hasOwn || function hasOwn(it, key) {\n  return hasOwnProperty(toObject(it), key);\n};\n\nvar hasOwnProperty$1 = /*@__PURE__*/getDefaultExportFromCjs(hasOwnProperty_1);\n\n'use strict';\nvar uncurryThis$6 = functionUncurryThis;\n\nvar id = 0;\nvar postfix = Math.random();\nvar toString$4 = uncurryThis$6(1.0.toString);\n\nvar uid$2 = function (key) {\n  return 'Symbol(' + (key === undefined ? '' : key) + ')_' + toString$4(++id + postfix, 36);\n};\n\nvar uid$3 = /*@__PURE__*/getDefaultExportFromCjs(uid$2);\n\n'use strict';\nvar global$8 = global$d;\nvar shared$2 = shared$3;\nvar hasOwn$6 = hasOwnProperty_1;\nvar uid$1 = uid$2;\nvar NATIVE_SYMBOL = symbolConstructorDetection;\nvar USE_SYMBOL_AS_UID = useSymbolAsUid;\n\nvar Symbol$1 = global$8.Symbol;\nvar WellKnownSymbolsStore = shared$2('wks');\nvar createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol$1['for'] || Symbol$1 : Symbol$1 && Symbol$1.withoutSetter || uid$1;\n\nvar wellKnownSymbol$3 = function (name) {\n  if (!hasOwn$6(WellKnownSymbolsStore, name)) {\n    WellKnownSymbolsStore[name] = NATIVE_SYMBOL && hasOwn$6(Symbol$1, name)\n      ? Symbol$1[name]\n      : createWellKnownSymbol('Symbol.' + name);\n  } return WellKnownSymbolsStore[name];\n};\n\nvar wellKnownSymbol$4 = /*@__PURE__*/getDefaultExportFromCjs(wellKnownSymbol$3);\n\n'use strict';\nvar call$1 = functionCall;\nvar isObject$3 = isObject$5;\nvar isSymbol$1 = isSymbol$2;\nvar getMethod = getMethod$1;\nvar ordinaryToPrimitive = ordinaryToPrimitive$1;\nvar wellKnownSymbol$2 = wellKnownSymbol$3;\n\nvar $TypeError$2 = TypeError;\nvar TO_PRIMITIVE = wellKnownSymbol$2('toPrimitive');\n\n// `ToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-toprimitive\nvar toPrimitive$1 = function (input, pref) {\n  if (!isObject$3(input) || isSymbol$1(input)) return input;\n  var exoticToPrim = getMethod(input, TO_PRIMITIVE);\n  var result;\n  if (exoticToPrim) {\n    if (pref === undefined) pref = 'default';\n    result = call$1(exoticToPrim, input, pref);\n    if (!isObject$3(result) || isSymbol$1(result)) return result;\n    throw new $TypeError$2(\"Can't convert object to primitive value\");\n  }\n  if (pref === undefined) pref = 'number';\n  return ordinaryToPrimitive(input, pref);\n};\n\nvar toPrimitive$2 = /*@__PURE__*/getDefaultExportFromCjs(toPrimitive$1);\n\n'use strict';\nvar toPrimitive = toPrimitive$1;\nvar isSymbol = isSymbol$2;\n\n// `ToPropertyKey` abstract operation\n// https://tc39.es/ecma262/#sec-topropertykey\nvar toPropertyKey$2 = function (argument) {\n  var key = toPrimitive(argument, 'string');\n  return isSymbol(key) ? key : key + '';\n};\n\nvar toPropertyKey$3 = /*@__PURE__*/getDefaultExportFromCjs(toPropertyKey$2);\n\n'use strict';\nvar global$7 = global$d;\nvar isObject$2 = isObject$5;\n\nvar document$1 = global$7.document;\n// typeof document.createElement is 'object' in old IE\nvar EXISTS$1 = isObject$2(document$1) && isObject$2(document$1.createElement);\n\nvar documentCreateElement = function (it) {\n  return EXISTS$1 ? document$1.createElement(it) : {};\n};\n\nvar documentCreateElement$1 = /*@__PURE__*/getDefaultExportFromCjs(documentCreateElement);\n\n'use strict';\nvar DESCRIPTORS$6 = descriptors;\nvar fails$4 = fails$9;\nvar createElement = documentCreateElement;\n\n// Thanks to IE8 for its funny defineProperty\nvar ie8DomDefine = !DESCRIPTORS$6 && !fails$4(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty(createElement('div'), 'a', {\n    get: function () { return 7; }\n  }).a !== 7;\n});\n\nvar ie8DomDefine$1 = /*@__PURE__*/getDefaultExportFromCjs(ie8DomDefine);\n\n'use strict';\nvar DESCRIPTORS$5 = descriptors;\nvar call = functionCall;\nvar propertyIsEnumerableModule = objectPropertyIsEnumerable;\nvar createPropertyDescriptor$1 = createPropertyDescriptor$2;\nvar toIndexedObject$2 = toIndexedObject$3;\nvar toPropertyKey$1 = toPropertyKey$2;\nvar hasOwn$5 = hasOwnProperty_1;\nvar IE8_DOM_DEFINE$1 = ie8DomDefine;\n\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor$1 = Object.getOwnPropertyDescriptor;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\nvar f$3 = objectGetOwnPropertyDescriptor.f = DESCRIPTORS$5 ? $getOwnPropertyDescriptor$1 : function getOwnPropertyDescriptor(O, P) {\n  O = toIndexedObject$2(O);\n  P = toPropertyKey$1(P);\n  if (IE8_DOM_DEFINE$1) try {\n    return $getOwnPropertyDescriptor$1(O, P);\n  } catch (error) { /* empty */ }\n  if (hasOwn$5(O, P)) return createPropertyDescriptor$1(!call(propertyIsEnumerableModule.f, O, P), O[P]);\n};\n\nvar objectDefineProperty = {};\n\n'use strict';\nvar DESCRIPTORS$4 = descriptors;\nvar fails$3 = fails$9;\n\n// V8 ~ Chrome 36-\n// https://bugs.chromium.org/p/v8/issues/detail?id=3334\nvar v8PrototypeDefineBug = DESCRIPTORS$4 && fails$3(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty(function () { /* empty */ }, 'prototype', {\n    value: 42,\n    writable: false\n  }).prototype !== 42;\n});\n\nvar v8PrototypeDefineBug$1 = /*@__PURE__*/getDefaultExportFromCjs(v8PrototypeDefineBug);\n\n'use strict';\nvar isObject$1 = isObject$5;\n\nvar $String$2 = String;\nvar $TypeError$1 = TypeError;\n\n// `Assert: Type(argument) is Object`\nvar anObject$2 = function (argument) {\n  if (isObject$1(argument)) return argument;\n  throw new $TypeError$1($String$2(argument) + ' is not an object');\n};\n\nvar anObject$3 = /*@__PURE__*/getDefaultExportFromCjs(anObject$2);\n\n'use strict';\nvar DESCRIPTORS$3 = descriptors;\nvar IE8_DOM_DEFINE = ie8DomDefine;\nvar V8_PROTOTYPE_DEFINE_BUG = v8PrototypeDefineBug;\nvar anObject$1 = anObject$2;\nvar toPropertyKey = toPropertyKey$2;\n\nvar $TypeError = TypeError;\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar $defineProperty = Object.defineProperty;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar ENUMERABLE = 'enumerable';\nvar CONFIGURABLE$1 = 'configurable';\nvar WRITABLE = 'writable';\n\n// `Object.defineProperty` method\n// https://tc39.es/ecma262/#sec-object.defineproperty\nvar f$2 = objectDefineProperty.f = DESCRIPTORS$3 ? V8_PROTOTYPE_DEFINE_BUG ? function defineProperty(O, P, Attributes) {\n  anObject$1(O);\n  P = toPropertyKey(P);\n  anObject$1(Attributes);\n  if (typeof O === 'function' && P === 'prototype' && 'value' in Attributes && WRITABLE in Attributes && !Attributes[WRITABLE]) {\n    var current = $getOwnPropertyDescriptor(O, P);\n    if (current && current[WRITABLE]) {\n      O[P] = Attributes.value;\n      Attributes = {\n        configurable: CONFIGURABLE$1 in Attributes ? Attributes[CONFIGURABLE$1] : current[CONFIGURABLE$1],\n        enumerable: ENUMERABLE in Attributes ? Attributes[ENUMERABLE] : current[ENUMERABLE],\n        writable: false\n      };\n    }\n  } return $defineProperty(O, P, Attributes);\n} : $defineProperty : function defineProperty(O, P, Attributes) {\n  anObject$1(O);\n  P = toPropertyKey(P);\n  anObject$1(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return $defineProperty(O, P, Attributes);\n  } catch (error) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw new $TypeError('Accessors not supported');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n\n'use strict';\nvar DESCRIPTORS$2 = descriptors;\nvar definePropertyModule$2 = objectDefineProperty;\nvar createPropertyDescriptor = createPropertyDescriptor$2;\n\nvar createNonEnumerableProperty$2 = DESCRIPTORS$2 ? function (object, key, value) {\n  return definePropertyModule$2.f(object, key, createPropertyDescriptor(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n\nvar createNonEnumerableProperty$3 = /*@__PURE__*/getDefaultExportFromCjs(createNonEnumerableProperty$2);\n\nvar makeBuiltIn$3 = {exports: {}};\n\n'use strict';\nvar DESCRIPTORS$1 = descriptors;\nvar hasOwn$4 = hasOwnProperty_1;\n\nvar FunctionPrototype = Function.prototype;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getDescriptor = DESCRIPTORS$1 && Object.getOwnPropertyDescriptor;\n\nvar EXISTS = hasOwn$4(FunctionPrototype, 'name');\n// additional protection from minified / mangled / dropped function names\nvar PROPER = EXISTS && (function something() { /* empty */ }).name === 'something';\nvar CONFIGURABLE = EXISTS && (!DESCRIPTORS$1 || (DESCRIPTORS$1 && getDescriptor(FunctionPrototype, 'name').configurable));\n\nvar functionName = {\n  EXISTS: EXISTS,\n  PROPER: PROPER,\n  CONFIGURABLE: CONFIGURABLE\n};\n\nvar functionName$1 = /*@__PURE__*/getDefaultExportFromCjs(functionName);\n\n'use strict';\nvar uncurryThis$5 = functionUncurryThis;\nvar isCallable$5 = isCallable$b;\nvar store$1 = sharedStoreExports;\n\nvar functionToString = uncurryThis$5(Function.toString);\n\n// this helper broken in `core-js@3.4.1-3.4.4`, so we can't use `shared` helper\nif (!isCallable$5(store$1.inspectSource)) {\n  store$1.inspectSource = function (it) {\n    return functionToString(it);\n  };\n}\n\nvar inspectSource$1 = store$1.inspectSource;\n\nvar inspectSource$2 = /*@__PURE__*/getDefaultExportFromCjs(inspectSource$1);\n\n'use strict';\nvar global$6 = global$d;\nvar isCallable$4 = isCallable$b;\n\nvar WeakMap$1 = global$6.WeakMap;\n\nvar weakMapBasicDetection = isCallable$4(WeakMap$1) && /native code/.test(String(WeakMap$1));\n\nvar weakMapBasicDetection$1 = /*@__PURE__*/getDefaultExportFromCjs(weakMapBasicDetection);\n\n'use strict';\nvar shared$1 = shared$3;\nvar uid = uid$2;\n\nvar keys = shared$1('keys');\n\nvar sharedKey$1 = function (key) {\n  return keys[key] || (keys[key] = uid(key));\n};\n\nvar sharedKey$2 = /*@__PURE__*/getDefaultExportFromCjs(sharedKey$1);\n\n'use strict';\nvar hiddenKeys$3 = {};\n\nvar hiddenKeys$4 = /*@__PURE__*/getDefaultExportFromCjs(hiddenKeys$3);\n\n'use strict';\nvar NATIVE_WEAK_MAP = weakMapBasicDetection;\nvar global$5 = global$d;\nvar isObject = isObject$5;\nvar createNonEnumerableProperty$1 = createNonEnumerableProperty$2;\nvar hasOwn$3 = hasOwnProperty_1;\nvar shared = sharedStoreExports;\nvar sharedKey = sharedKey$1;\nvar hiddenKeys$2 = hiddenKeys$3;\n\nvar OBJECT_ALREADY_INITIALIZED = 'Object already initialized';\nvar TypeError$1 = global$5.TypeError;\nvar WeakMap = global$5.WeakMap;\nvar set, get$1, has;\n\nvar enforce = function (it) {\n  return has(it) ? get$1(it) : set(it, {});\n};\n\nvar getterFor = function (TYPE) {\n  return function (it) {\n    var state;\n    if (!isObject(it) || (state = get$1(it)).type !== TYPE) {\n      throw new TypeError$1('Incompatible receiver, ' + TYPE + ' required');\n    } return state;\n  };\n};\n\nif (NATIVE_WEAK_MAP || shared.state) {\n  var store = shared.state || (shared.state = new WeakMap());\n  /* eslint-disable no-self-assign -- prototype methods protection */\n  store.get = store.get;\n  store.has = store.has;\n  store.set = store.set;\n  /* eslint-enable no-self-assign -- prototype methods protection */\n  set = function (it, metadata) {\n    if (store.has(it)) throw new TypeError$1(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    store.set(it, metadata);\n    return metadata;\n  };\n  get$1 = function (it) {\n    return store.get(it) || {};\n  };\n  has = function (it) {\n    return store.has(it);\n  };\n} else {\n  var STATE = sharedKey('state');\n  hiddenKeys$2[STATE] = true;\n  set = function (it, metadata) {\n    if (hasOwn$3(it, STATE)) throw new TypeError$1(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    createNonEnumerableProperty$1(it, STATE, metadata);\n    return metadata;\n  };\n  get$1 = function (it) {\n    return hasOwn$3(it, STATE) ? it[STATE] : {};\n  };\n  has = function (it) {\n    return hasOwn$3(it, STATE);\n  };\n}\n\nvar internalState = {\n  set: set,\n  get: get$1,\n  has: has,\n  enforce: enforce,\n  getterFor: getterFor\n};\n\nvar internalState$1 = /*@__PURE__*/getDefaultExportFromCjs(internalState);\n\nvar makeBuiltIn_1 = makeBuiltIn$3.exports;\n\n'use strict';\nvar uncurryThis$4 = functionUncurryThis;\nvar fails$2 = fails$9;\nvar isCallable$3 = isCallable$b;\nvar hasOwn$2 = hasOwnProperty_1;\nvar DESCRIPTORS = descriptors;\nvar CONFIGURABLE_FUNCTION_NAME = functionName.CONFIGURABLE;\nvar inspectSource = inspectSource$1;\nvar InternalStateModule = internalState;\n\nvar enforceInternalState = InternalStateModule.enforce;\nvar getInternalState = InternalStateModule.get;\nvar $String$1 = String;\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar defineProperty = Object.defineProperty;\nvar stringSlice = uncurryThis$4(''.slice);\nvar replace$1 = uncurryThis$4(''.replace);\nvar join = uncurryThis$4([].join);\n\nvar CONFIGURABLE_LENGTH = DESCRIPTORS && !fails$2(function () {\n  return defineProperty(function () { /* empty */ }, 'length', { value: 8 }).length !== 8;\n});\n\nvar TEMPLATE = String(String).split('String');\n\nvar makeBuiltIn$1 = makeBuiltIn$3.exports = function (value, name, options) {\n  if (stringSlice($String$1(name), 0, 7) === 'Symbol(') {\n    name = '[' + replace$1($String$1(name), /^Symbol\\(([^)]*)\\).*$/, '$1') + ']';\n  }\n  if (options && options.getter) name = 'get ' + name;\n  if (options && options.setter) name = 'set ' + name;\n  if (!hasOwn$2(value, 'name') || (CONFIGURABLE_FUNCTION_NAME && value.name !== name)) {\n    if (DESCRIPTORS) defineProperty(value, 'name', { value: name, configurable: true });\n    else value.name = name;\n  }\n  if (CONFIGURABLE_LENGTH && options && hasOwn$2(options, 'arity') && value.length !== options.arity) {\n    defineProperty(value, 'length', { value: options.arity });\n  }\n  try {\n    if (options && hasOwn$2(options, 'constructor') && options.constructor) {\n      if (DESCRIPTORS) defineProperty(value, 'prototype', { writable: false });\n    // in V8 ~ Chrome 53, prototypes of some methods, like `Array.prototype.values`, are non-writable\n    } else if (value.prototype) value.prototype = undefined;\n  } catch (error) { /* empty */ }\n  var state = enforceInternalState(value);\n  if (!hasOwn$2(state, 'source')) {\n    state.source = join(TEMPLATE, typeof name == 'string' ? name : '');\n  } return value;\n};\n\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n// eslint-disable-next-line no-extend-native -- required\nFunction.prototype.toString = makeBuiltIn$1(function toString() {\n  return isCallable$3(this) && getInternalState(this).source || inspectSource(this);\n}, 'toString');\n\nvar makeBuiltInExports = makeBuiltIn$3.exports;\nvar makeBuiltIn$2 = /*@__PURE__*/getDefaultExportFromCjs(makeBuiltInExports);\n\n'use strict';\nvar isCallable$2 = isCallable$b;\nvar definePropertyModule$1 = objectDefineProperty;\nvar makeBuiltIn = makeBuiltInExports;\nvar defineGlobalProperty$1 = defineGlobalProperty$3;\n\nvar defineBuiltIn$1 = function (O, key, value, options) {\n  if (!options) options = {};\n  var simple = options.enumerable;\n  var name = options.name !== undefined ? options.name : key;\n  if (isCallable$2(value)) makeBuiltIn(value, name, options);\n  if (options.global) {\n    if (simple) O[key] = value;\n    else defineGlobalProperty$1(key, value);\n  } else {\n    try {\n      if (!options.unsafe) delete O[key];\n      else if (O[key]) simple = true;\n    } catch (error) { /* empty */ }\n    if (simple) O[key] = value;\n    else definePropertyModule$1.f(O, key, {\n      value: value,\n      enumerable: false,\n      configurable: !options.nonConfigurable,\n      writable: !options.nonWritable\n    });\n  } return O;\n};\n\nvar defineBuiltIn$2 = /*@__PURE__*/getDefaultExportFromCjs(defineBuiltIn$1);\n\nvar objectGetOwnPropertyNames = {};\n\n'use strict';\nvar ceil = Math.ceil;\nvar floor = Math.floor;\n\n// `Math.trunc` method\n// https://tc39.es/ecma262/#sec-math.trunc\n// eslint-disable-next-line es/no-math-trunc -- safe\nvar mathTrunc = Math.trunc || function trunc(x) {\n  var n = +x;\n  return (n > 0 ? floor : ceil)(n);\n};\n\nvar mathTrunc$1 = /*@__PURE__*/getDefaultExportFromCjs(mathTrunc);\n\n'use strict';\nvar trunc = mathTrunc;\n\n// `ToIntegerOrInfinity` abstract operation\n// https://tc39.es/ecma262/#sec-tointegerorinfinity\nvar toIntegerOrInfinity$2 = function (argument) {\n  var number = +argument;\n  // eslint-disable-next-line no-self-compare -- NaN check\n  return number !== number || number === 0 ? 0 : trunc(number);\n};\n\nvar toIntegerOrInfinity$3 = /*@__PURE__*/getDefaultExportFromCjs(toIntegerOrInfinity$2);\n\n'use strict';\nvar toIntegerOrInfinity$1 = toIntegerOrInfinity$2;\n\nvar max = Math.max;\nvar min$1 = Math.min;\n\n// Helper for a popular repeating case of the spec:\n// Let integer be ? ToInteger(index).\n// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).\nvar toAbsoluteIndex$1 = function (index, length) {\n  var integer = toIntegerOrInfinity$1(index);\n  return integer < 0 ? max(integer + length, 0) : min$1(integer, length);\n};\n\nvar toAbsoluteIndex$2 = /*@__PURE__*/getDefaultExportFromCjs(toAbsoluteIndex$1);\n\n'use strict';\nvar toIntegerOrInfinity = toIntegerOrInfinity$2;\n\nvar min = Math.min;\n\n// `ToLength` abstract operation\n// https://tc39.es/ecma262/#sec-tolength\nvar toLength$1 = function (argument) {\n  var len = toIntegerOrInfinity(argument);\n  return len > 0 ? min(len, 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n};\n\nvar toLength$2 = /*@__PURE__*/getDefaultExportFromCjs(toLength$1);\n\n'use strict';\nvar toLength = toLength$1;\n\n// `LengthOfArrayLike` abstract operation\n// https://tc39.es/ecma262/#sec-lengthofarraylike\nvar lengthOfArrayLike$1 = function (obj) {\n  return toLength(obj.length);\n};\n\nvar lengthOfArrayLike$2 = /*@__PURE__*/getDefaultExportFromCjs(lengthOfArrayLike$1);\n\n'use strict';\nvar toIndexedObject$1 = toIndexedObject$3;\nvar toAbsoluteIndex = toAbsoluteIndex$1;\nvar lengthOfArrayLike = lengthOfArrayLike$1;\n\n// `Array.prototype.{ indexOf, includes }` methods implementation\nvar createMethod$1 = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIndexedObject$1($this);\n    var length = lengthOfArrayLike(O);\n    if (length === 0) return !IS_INCLUDES && -1;\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (IS_INCLUDES && el !== el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare -- NaN check\n      if (value !== value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) {\n      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\nvar arrayIncludes = {\n  // `Array.prototype.includes` method\n  // https://tc39.es/ecma262/#sec-array.prototype.includes\n  includes: createMethod$1(true),\n  // `Array.prototype.indexOf` method\n  // https://tc39.es/ecma262/#sec-array.prototype.indexof\n  indexOf: createMethod$1(false)\n};\n\nvar arrayIncludes$1 = /*@__PURE__*/getDefaultExportFromCjs(arrayIncludes);\n\n'use strict';\nvar uncurryThis$3 = functionUncurryThis;\nvar hasOwn$1 = hasOwnProperty_1;\nvar toIndexedObject = toIndexedObject$3;\nvar indexOf = arrayIncludes.indexOf;\nvar hiddenKeys$1 = hiddenKeys$3;\n\nvar push = uncurryThis$3([].push);\n\nvar objectKeysInternal = function (object, names) {\n  var O = toIndexedObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) !hasOwn$1(hiddenKeys$1, key) && hasOwn$1(O, key) && push(result, key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (hasOwn$1(O, key = names[i++])) {\n    ~indexOf(result, key) || push(result, key);\n  }\n  return result;\n};\n\nvar objectKeysInternal$1 = /*@__PURE__*/getDefaultExportFromCjs(objectKeysInternal);\n\n'use strict';\n// IE8- don't enum bug keys\nvar enumBugKeys$1 = [\n  'constructor',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  'toString',\n  'valueOf'\n];\n\nvar enumBugKeys$2 = /*@__PURE__*/getDefaultExportFromCjs(enumBugKeys$1);\n\n'use strict';\nvar internalObjectKeys = objectKeysInternal;\nvar enumBugKeys = enumBugKeys$1;\n\nvar hiddenKeys = enumBugKeys.concat('length', 'prototype');\n\n// `Object.getOwnPropertyNames` method\n// https://tc39.es/ecma262/#sec-object.getownpropertynames\n// eslint-disable-next-line es/no-object-getownpropertynames -- safe\nvar f$1 = objectGetOwnPropertyNames.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return internalObjectKeys(O, hiddenKeys);\n};\n\nvar objectGetOwnPropertySymbols = {};\n\n'use strict';\n// eslint-disable-next-line es/no-object-getownpropertysymbols -- safe\nvar f = objectGetOwnPropertySymbols.f = Object.getOwnPropertySymbols;\n\n'use strict';\nvar getBuiltIn = getBuiltIn$2;\nvar uncurryThis$2 = functionUncurryThis;\nvar getOwnPropertyNamesModule = objectGetOwnPropertyNames;\nvar getOwnPropertySymbolsModule = objectGetOwnPropertySymbols;\nvar anObject = anObject$2;\n\nvar concat = uncurryThis$2([].concat);\n\n// all object keys, includes non-enumerable and symbols\nvar ownKeys$1 = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {\n  var keys = getOwnPropertyNamesModule.f(anObject(it));\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  return getOwnPropertySymbols ? concat(keys, getOwnPropertySymbols(it)) : keys;\n};\n\nvar ownKeys$2 = /*@__PURE__*/getDefaultExportFromCjs(ownKeys$1);\n\n'use strict';\nvar hasOwn = hasOwnProperty_1;\nvar ownKeys = ownKeys$1;\nvar getOwnPropertyDescriptorModule = objectGetOwnPropertyDescriptor;\nvar definePropertyModule = objectDefineProperty;\n\nvar copyConstructorProperties$1 = function (target, source, exceptions) {\n  var keys = ownKeys(source);\n  var defineProperty = definePropertyModule.f;\n  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (!hasOwn(target, key) && !(exceptions && hasOwn(exceptions, key))) {\n      defineProperty(target, key, getOwnPropertyDescriptor(source, key));\n    }\n  }\n};\n\nvar copyConstructorProperties$2 = /*@__PURE__*/getDefaultExportFromCjs(copyConstructorProperties$1);\n\n'use strict';\nvar fails$1 = fails$9;\nvar isCallable$1 = isCallable$b;\n\nvar replacement = /#|\\.prototype\\./;\n\nvar isForced$1 = function (feature, detection) {\n  var value = data$1[normalize$1(feature)];\n  return value === POLYFILL ? true\n    : value === NATIVE ? false\n    : isCallable$1(detection) ? fails$1(detection)\n    : !!detection;\n};\n\nvar normalize$1 = isForced$1.normalize = function (string) {\n  return String(string).replace(replacement, '.').toLowerCase();\n};\n\nvar data$1 = isForced$1.data = {};\nvar NATIVE = isForced$1.NATIVE = 'N';\nvar POLYFILL = isForced$1.POLYFILL = 'P';\n\nvar isForced_1 = isForced$1;\n\nvar isForced$2 = /*@__PURE__*/getDefaultExportFromCjs(isForced_1);\n\n'use strict';\nvar global$4 = global$d;\nvar getOwnPropertyDescriptor = objectGetOwnPropertyDescriptor.f;\nvar createNonEnumerableProperty = createNonEnumerableProperty$2;\nvar defineBuiltIn = defineBuiltIn$1;\nvar defineGlobalProperty = defineGlobalProperty$3;\nvar copyConstructorProperties = copyConstructorProperties$1;\nvar isForced = isForced_1;\n\n/*\n  options.target         - name of the target object\n  options.global         - target is the global object\n  options.stat           - export as static methods of target\n  options.proto          - export as prototype methods of target\n  options.real           - real prototype method for the `pure` version\n  options.forced         - export even if the native feature is available\n  options.bind           - bind methods to the target, required for the `pure` version\n  options.wrap           - wrap constructors to preventing global pollution, required for the `pure` version\n  options.unsafe         - use the simple assignment of property instead of delete + defineProperty\n  options.sham           - add a flag to not completely full polyfills\n  options.enumerable     - export as enumerable property\n  options.dontCallGetSet - prevent calling a getter on target\n  options.name           - the .name of the function if it does not match the key\n*/\nvar _export = function (options, source) {\n  var TARGET = options.target;\n  var GLOBAL = options.global;\n  var STATIC = options.stat;\n  var FORCED, target, key, targetProperty, sourceProperty, descriptor;\n  if (GLOBAL) {\n    target = global$4;\n  } else if (STATIC) {\n    target = global$4[TARGET] || defineGlobalProperty(TARGET, {});\n  } else {\n    target = global$4[TARGET] && global$4[TARGET].prototype;\n  }\n  if (target) for (key in source) {\n    sourceProperty = source[key];\n    if (options.dontCallGetSet) {\n      descriptor = getOwnPropertyDescriptor(target, key);\n      targetProperty = descriptor && descriptor.value;\n    } else targetProperty = target[key];\n    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);\n    // contained in target\n    if (!FORCED && targetProperty !== undefined) {\n      if (typeof sourceProperty == typeof targetProperty) continue;\n      copyConstructorProperties(sourceProperty, targetProperty);\n    }\n    // add a flag to not completely full polyfills\n    if (options.sham || (targetProperty && targetProperty.sham)) {\n      createNonEnumerableProperty(sourceProperty, 'sham', true);\n    }\n    defineBuiltIn(target, key, sourceProperty, options);\n  }\n};\n\nvar _export$1 = /*@__PURE__*/getDefaultExportFromCjs(_export);\n\n'use strict';\nvar $$4 = _export;\nvar global$3 = global$d;\n\n// `globalThis` object\n// https://tc39.es/ecma262/#sec-globalthis\n$$4({ global: true, forced: global$3.globalThis !== global$3 }, {\n  globalThis: global$3\n});\n\n'use strict';\n\n'use strict';\n// https://github.com/tc39/proposal-global\n\nvar global$2 = global$d;\n\nvar globalThis$1 = global$2;\n\nvar globalThis$2 = /*@__PURE__*/getDefaultExportFromCjs(globalThis$1);\n\nvar es_string_trimStart = {};\n\nvar es_string_trimLeft = {};\n\n'use strict';\nvar wellKnownSymbol$1 = wellKnownSymbol$3;\n\nvar TO_STRING_TAG$1 = wellKnownSymbol$1('toStringTag');\nvar test = {};\n\ntest[TO_STRING_TAG$1] = 'z';\n\nvar toStringTagSupport = String(test) === '[object z]';\n\nvar toStringTagSupport$1 = /*@__PURE__*/getDefaultExportFromCjs(toStringTagSupport);\n\n'use strict';\nvar TO_STRING_TAG_SUPPORT = toStringTagSupport;\nvar isCallable = isCallable$b;\nvar classofRaw = classofRaw$1;\nvar wellKnownSymbol = wellKnownSymbol$3;\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar $Object = Object;\n\n// ES3 wrong here\nvar CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) === 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (error) { /* empty */ }\n};\n\n// getting tag from ES6+ `Object.prototype.toString`\nvar classof$1 = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {\n  var O, tag, result;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = $Object(it), TO_STRING_TAG)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) === 'Object' && isCallable(O.callee) ? 'Arguments' : result;\n};\n\nvar classof$2 = /*@__PURE__*/getDefaultExportFromCjs(classof$1);\n\n'use strict';\nvar classof = classof$1;\n\nvar $String = String;\n\nvar toString$2 = function (argument) {\n  if (classof(argument) === 'Symbol') throw new TypeError('Cannot convert a Symbol value to a string');\n  return $String(argument);\n};\n\nvar toString$3 = /*@__PURE__*/getDefaultExportFromCjs(toString$2);\n\n'use strict';\n// a string of all valid unicode whitespaces\nvar whitespaces$2 = '\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u1680\\u2000\\u2001\\u2002' +\n  '\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n\nvar whitespaces$3 = /*@__PURE__*/getDefaultExportFromCjs(whitespaces$2);\n\n'use strict';\nvar uncurryThis$1 = functionUncurryThis;\nvar requireObjectCoercible = requireObjectCoercible$3;\nvar toString$1 = toString$2;\nvar whitespaces$1 = whitespaces$2;\n\nvar replace = uncurryThis$1(''.replace);\nvar ltrim = RegExp('^[' + whitespaces$1 + ']+');\nvar rtrim = RegExp('(^|[^' + whitespaces$1 + '])[' + whitespaces$1 + ']+$');\n\n// `String.prototype.{ trim, trimStart, trimEnd, trimLeft, trimRight }` methods implementation\nvar createMethod = function (TYPE) {\n  return function ($this) {\n    var string = toString$1(requireObjectCoercible($this));\n    if (TYPE & 1) string = replace(string, ltrim, '');\n    if (TYPE & 2) string = replace(string, rtrim, '$1');\n    return string;\n  };\n};\n\nvar stringTrim = {\n  // `String.prototype.{ trimLeft, trimStart }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimstart\n  start: createMethod(1),\n  // `String.prototype.{ trimRight, trimEnd }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimend\n  end: createMethod(2),\n  // `String.prototype.trim` method\n  // https://tc39.es/ecma262/#sec-string.prototype.trim\n  trim: createMethod(3)\n};\n\nvar stringTrim$1 = /*@__PURE__*/getDefaultExportFromCjs(stringTrim);\n\n'use strict';\nvar PROPER_FUNCTION_NAME = functionName.PROPER;\nvar fails = fails$9;\nvar whitespaces = whitespaces$2;\n\nvar non = '\\u200B\\u0085\\u180E';\n\n// check that a method works with the correct list\n// of whitespaces and has a correct name\nvar stringTrimForced = function (METHOD_NAME) {\n  return fails(function () {\n    return !!whitespaces[METHOD_NAME]()\n      || non[METHOD_NAME]() !== non\n      || (PROPER_FUNCTION_NAME && whitespaces[METHOD_NAME].name !== METHOD_NAME);\n  });\n};\n\nvar stringTrimForced$1 = /*@__PURE__*/getDefaultExportFromCjs(stringTrimForced);\n\n'use strict';\nvar $trimStart = stringTrim.start;\nvar forcedStringTrimMethod$1 = stringTrimForced;\n\n// `String.prototype.{ trimStart, trimLeft }` method\n// https://tc39.es/ecma262/#sec-string.prototype.trimstart\n// https://tc39.es/ecma262/#String.prototype.trimleft\nvar stringTrimStart = forcedStringTrimMethod$1('trimStart') ? function trimStart() {\n  return $trimStart(this);\n// eslint-disable-next-line es/no-string-prototype-trimstart-trimend -- safe\n} : ''.trimStart;\n\nvar stringTrimStart$1 = /*@__PURE__*/getDefaultExportFromCjs(stringTrimStart);\n\n'use strict';\nvar $$3 = _export;\nvar trimStart$3 = stringTrimStart;\n\n// `String.prototype.trimLeft` method\n// https://tc39.es/ecma262/#sec-string.prototype.trimleft\n// eslint-disable-next-line es/no-string-prototype-trimleft-trimright -- safe\n$$3({ target: 'String', proto: true, name: 'trimStart', forced: ''.trimLeft !== trimStart$3 }, {\n  trimLeft: trimStart$3\n});\n\n'use strict';\n// TODO: Remove this line from `core-js@4`\n\nvar $$2 = _export;\nvar trimStart$2 = stringTrimStart;\n\n// `String.prototype.trimStart` method\n// https://tc39.es/ecma262/#sec-string.prototype.trimstart\n// eslint-disable-next-line es/no-string-prototype-trimstart-trimend -- safe\n$$2({ target: 'String', proto: true, name: 'trimStart', forced: ''.trimStart !== trimStart$2 }, {\n  trimStart: trimStart$2\n});\n\n'use strict';\nvar global$1 = global$d;\nvar uncurryThis = functionUncurryThis;\n\nvar entryUnbind$2 = function (CONSTRUCTOR, METHOD) {\n  return uncurryThis(global$1[CONSTRUCTOR].prototype[METHOD]);\n};\n\nvar entryUnbind$3 = /*@__PURE__*/getDefaultExportFromCjs(entryUnbind$2);\n\n'use strict';\n\nvar entryUnbind$1 = entryUnbind$2;\n\nvar trimStart = entryUnbind$1('String', 'trimLeft');\n\nvar trimStart$1 = /*@__PURE__*/getDefaultExportFromCjs(trimStart);\n\nvar es_string_trimEnd = {};\n\nvar es_string_trimRight = {};\n\n'use strict';\nvar $trimEnd = stringTrim.end;\nvar forcedStringTrimMethod = stringTrimForced;\n\n// `String.prototype.{ trimEnd, trimRight }` method\n// https://tc39.es/ecma262/#sec-string.prototype.trimend\n// https://tc39.es/ecma262/#String.prototype.trimright\nvar stringTrimEnd = forcedStringTrimMethod('trimEnd') ? function trimEnd() {\n  return $trimEnd(this);\n// eslint-disable-next-line es/no-string-prototype-trimstart-trimend -- safe\n} : ''.trimEnd;\n\nvar stringTrimEnd$1 = /*@__PURE__*/getDefaultExportFromCjs(stringTrimEnd);\n\n'use strict';\nvar $$1 = _export;\nvar trimEnd$3 = stringTrimEnd;\n\n// `String.prototype.trimRight` method\n// https://tc39.es/ecma262/#sec-string.prototype.trimend\n// eslint-disable-next-line es/no-string-prototype-trimleft-trimright -- safe\n$$1({ target: 'String', proto: true, name: 'trimEnd', forced: ''.trimRight !== trimEnd$3 }, {\n  trimRight: trimEnd$3\n});\n\n'use strict';\n// TODO: Remove this line from `core-js@4`\n\nvar $ = _export;\nvar trimEnd$2 = stringTrimEnd;\n\n// `String.prototype.trimEnd` method\n// https://tc39.es/ecma262/#sec-string.prototype.trimend\n// eslint-disable-next-line es/no-string-prototype-trimstart-trimend -- safe\n$({ target: 'String', proto: true, name: 'trimEnd', forced: ''.trimEnd !== trimEnd$2 }, {\n  trimEnd: trimEnd$2\n});\n\n'use strict';\n\nvar entryUnbind = entryUnbind$2;\n\nvar trimEnd = entryUnbind('String', 'trimRight');\n\nvar trimEnd$1 = /*@__PURE__*/getDefaultExportFromCjs(trimEnd);\n\nif (typeof globalThis !== \"undefined\") {\n    if (typeof globalThis.console === \"undefined\") {\n        globalThis.console = {};\n        globalThis.console.log = function() {};\n        globalThis.console.assert = function() {};\n        globalThis.console.warn = function() {};\n        globalThis.console.error = function() {\n            alert(Array.prototype.slice.call(arguments).join(\", \"));\n        };\n    }\n}\n\n/*\n * based on https://www.npmjs.com/package/canvas-roundrect-polyfill\n * @version 0.0.1\n */\n(() => {\n\n    \"use strict\";\n\n    /** @ignore */\n    function roundRect(x, y, w, h, radii) {\n\n        if (!([x, y, w, h].every((input) => Number.isFinite(input)))) {\n\n            return;\n\n        }\n\n        radii = parseRadiiArgument(radii);\n\n        let upperLeft, upperRight, lowerRight, lowerLeft;\n\n        if (radii.length === 4) {\n\n            upperLeft = toCornerPoint(radii[0]);\n            upperRight = toCornerPoint(radii[1]);\n            lowerRight = toCornerPoint(radii[2]);\n            lowerLeft = toCornerPoint(radii[3]);\n\n        } else if (radii.length === 3) {\n\n            upperLeft = toCornerPoint(radii[0]);\n            upperRight = toCornerPoint(radii[1]);\n            lowerLeft = toCornerPoint(radii[1]);\n            lowerRight = toCornerPoint(radii[2]);\n\n        } else if (radii.length === 2) {\n\n            upperLeft = toCornerPoint(radii[0]);\n            lowerRight = toCornerPoint(radii[0]);\n            upperRight = toCornerPoint(radii[1]);\n            lowerLeft = toCornerPoint(radii[1]);\n\n        } else if (radii.length === 1) {\n\n            upperLeft = toCornerPoint(radii[0]);\n            upperRight = toCornerPoint(radii[0]);\n            lowerRight = toCornerPoint(radii[0]);\n            lowerLeft = toCornerPoint(radii[0]);\n\n        } else {\n\n            throw new Error(radii.length + \" is not a valid size for radii sequence.\");\n\n        }\n\n        const corners = [upperLeft, upperRight, lowerRight, lowerLeft];\n        const negativeCorner = corners.find(({x, y}) => x < 0 || y < 0);\n        //const negativeValue = negativeCorner?.x < 0 ? negativeCorner.x : negativeCorner?.y\n\n        if (corners.some(({x, y}) => !Number.isFinite(x) || !Number.isFinite(y))) {\n\n            return;\n\n        }\n\n        if (negativeCorner) {\n\n            throw new Error(\"Radius value \" + negativeCorner + \" is negative.\");\n\n        }\n\n        fixOverlappingCorners(corners);\n\n        if (w < 0 && h < 0) {\n\n            this.moveTo(x - upperLeft.x, y);\n            this.ellipse(x + w + upperRight.x, y - upperRight.y, upperRight.x, upperRight.y, 0, -Math.PI * 1.5, -Math.PI);\n            this.ellipse(x + w + lowerRight.x, y + h + lowerRight.y, lowerRight.x, lowerRight.y, 0, -Math.PI, -Math.PI / 2);\n            this.ellipse(x - lowerLeft.x, y + h + lowerLeft.y, lowerLeft.x, lowerLeft.y, 0, -Math.PI / 2, 0);\n            this.ellipse(x - upperLeft.x, y - upperLeft.y, upperLeft.x, upperLeft.y, 0, 0, -Math.PI / 2);\n\n        } else if (w < 0) {\n\n            this.moveTo(x - upperLeft.x, y);\n            this.ellipse(x + w + upperRight.x, y + upperRight.y, upperRight.x, upperRight.y, 0, -Math.PI / 2, -Math.PI, 1);\n            this.ellipse(x + w + lowerRight.x, y + h - lowerRight.y, lowerRight.x, lowerRight.y, 0, -Math.PI, -Math.PI * 1.5, 1);\n            this.ellipse(x - lowerLeft.x, y + h - lowerLeft.y, lowerLeft.x, lowerLeft.y, 0, Math.PI / 2, 0, 1);\n            this.ellipse(x - upperLeft.x, y + upperLeft.y, upperLeft.x, upperLeft.y, 0, 0, -Math.PI / 2, 1);\n\n        } else if (h < 0) {\n\n            this.moveTo(x + upperLeft.x, y);\n            this.ellipse(x + w - upperRight.x, y - upperRight.y, upperRight.x, upperRight.y, 0, Math.PI / 2, 0, 1);\n            this.ellipse(x + w - lowerRight.x, y + h + lowerRight.y, lowerRight.x, lowerRight.y, 0, 0, -Math.PI / 2, 1);\n            this.ellipse(x + lowerLeft.x, y + h + lowerLeft.y, lowerLeft.x, lowerLeft.y, 0, -Math.PI / 2, -Math.PI, 1);\n            this.ellipse(x + upperLeft.x, y - upperLeft.y, upperLeft.x, upperLeft.y, 0, -Math.PI, -Math.PI * 1.5, 1);\n\n        } else {\n\n            this.moveTo(x + upperLeft.x, y);\n            this.ellipse(x + w - upperRight.x, y + upperRight.y, upperRight.x, upperRight.y, 0, -Math.PI / 2, 0);\n            this.ellipse(x + w - lowerRight.x, y + h - lowerRight.y, lowerRight.x, lowerRight.y, 0, 0, Math.PI / 2);\n            this.ellipse(x + lowerLeft.x, y + h - lowerLeft.y, lowerLeft.x, lowerLeft.y, 0, Math.PI / 2, Math.PI);\n            this.ellipse(x + upperLeft.x, y + upperLeft.y, upperLeft.x, upperLeft.y, 0, Math.PI, Math.PI * 1.5);\n\n        }\n\n        this.closePath();\n        this.moveTo(x, y);\n\n        /** @ignore */\n        function toDOMPointInit(value) {\n\n            const {x, y, z, w} = value;\n            return {x, y, z, w};\n\n        }\n\n        /** @ignore */\n        function parseRadiiArgument(value) {\n\n            // https://webidl.spec.whatwg.org/#es-union\n            // with 'optional (unrestricted double or DOMPointInit\n            //   or sequence<(unrestricted double or DOMPointInit)>) radii = 0'\n            const type = typeof value;\n\n            if (type === \"undefined\" || value === null) {\n\n                return [0];\n\n            }\n            if (type === \"function\") {\n\n                return [NaN];\n\n            }\n            if (type === \"object\") {\n\n                if (typeof value[Symbol.iterator] === \"function\") {\n\n                    return [...value].map((elem) => {\n                        // https://webidl.spec.whatwg.org/#es-union\n                        // with '(unrestricted double or DOMPointInit)'\n                        const elemType = typeof elem;\n                        if (elemType === \"undefined\" || elem === null) {\n                            return 0;\n                        }\n                        if (elemType === \"function\") {\n                            return NaN;\n                        }\n                        if (elemType === \"object\") {\n                            return toDOMPointInit(elem);\n                        }\n                        return toUnrestrictedNumber(elem);\n                    });\n\n                }\n\n                return [toDOMPointInit(value)];\n\n            }\n\n            return [toUnrestrictedNumber(value)];\n\n        }\n\n        /** @ignore */\n        function toUnrestrictedNumber(value) {\n\n            return +value;\n\n        }\n\n        /** @ignore */\n        function toCornerPoint(value) {\n\n            const asNumber = toUnrestrictedNumber(value);\n            if (Number.isFinite(asNumber)) {\n\n                return {\n                    x: asNumber,\n                    y: asNumber\n                };\n\n            }\n            if (Object(value) === value) {\n\n                return {\n                    x: toUnrestrictedNumber(value.x || 0),\n                    y: toUnrestrictedNumber(value.y || 0)\n                };\n\n            }\n\n            return {\n                x: NaN,\n                y: NaN\n            };\n\n        }\n\n        /** @ignore */\n        function fixOverlappingCorners(corners) {\n            const [upperLeft, upperRight, lowerRight, lowerLeft] = corners;\n            const factors = [\n                Math.abs(w) / (upperLeft.x + upperRight.x),\n                Math.abs(h) / (upperRight.y + lowerRight.y),\n                Math.abs(w) / (lowerRight.x + lowerLeft.x),\n                Math.abs(h) / (upperLeft.y + lowerLeft.y)\n            ];\n            const minFactor = Math.min(...factors);\n            if (minFactor <= 1) {\n                corners.forEach((radii) => {\n                    radii.x *= minFactor;\n                    radii.y *= minFactor;\n                });\n            }\n        }\n    }\n\n    if (globalThis.CanvasRenderingContext2D) {\n        if (typeof globalThis.Path2D.prototype.roundRect === \"undefined\") {\n            globalThis.Path2D.prototype.roundRect = roundRect;\n        }\n    }\n    if (globalThis.CanvasRenderingContext2D) {\n        if (typeof globalThis.CanvasRenderingContext2D.prototype.roundRect === \"undefined\") {\n            globalThis.CanvasRenderingContext2D.prototype.roundRect = roundRect;\n        }\n    }\n    if (globalThis.OffscreenCanvasRenderingContext2D) {\n        if (typeof globalThis.OffscreenCanvasRenderingContext2D.prototype.roundRect === \"undefined\") {\n            globalThis.OffscreenCanvasRenderingContext2D.prototype.roundRect = roundRect;\n        }\n    }\n\n})();\n\n/* eslint-disable no-prototype-builtins */\nvar g =\n  (typeof globalThis !== 'undefined' && globalThis) ||\n  (typeof self !== 'undefined' && self) ||\n  // eslint-disable-next-line no-undef\n  (typeof global !== 'undefined' && global) ||\n  {};\n\nvar support = {\n  searchParams: 'URLSearchParams' in g,\n  iterable: 'Symbol' in g && 'iterator' in Symbol,\n  blob:\n    'FileReader' in g &&\n    'Blob' in g &&\n    (function() {\n      try {\n        new Blob();\n        return true\n      } catch (e) {\n        return false\n      }\n    })(),\n  formData: 'FormData' in g,\n  arrayBuffer: 'ArrayBuffer' in g\n};\n\nfunction isDataView(obj) {\n  return obj && DataView.prototype.isPrototypeOf(obj)\n}\n\nif (support.arrayBuffer) {\n  var viewClasses = [\n    '[object Int8Array]',\n    '[object Uint8Array]',\n    '[object Uint8ClampedArray]',\n    '[object Int16Array]',\n    '[object Uint16Array]',\n    '[object Int32Array]',\n    '[object Uint32Array]',\n    '[object Float32Array]',\n    '[object Float64Array]'\n  ];\n\n  var isArrayBufferView =\n    ArrayBuffer.isView ||\n    function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    };\n}\n\nfunction normalizeName(name) {\n  if (typeof name !== 'string') {\n    name = String(name);\n  }\n  if (/[^a-z0-9\\-#$%&'*+.^_`|~!]/i.test(name) || name === '') {\n    throw new TypeError('Invalid character in header field name: \"' + name + '\"')\n  }\n  return name.toLowerCase()\n}\n\nfunction normalizeValue(value) {\n  if (typeof value !== 'string') {\n    value = String(value);\n  }\n  return value\n}\n\n// Build a destructive iterator for the value list\nfunction iteratorFor(items) {\n  var iterator = {\n    next: function() {\n      var value = items.shift();\n      return {done: value === undefined, value: value}\n    }\n  };\n\n  if (support.iterable) {\n    iterator[Symbol.iterator] = function() {\n      return iterator\n    };\n  }\n\n  return iterator\n}\n\nfunction Headers(headers) {\n  this.map = {};\n\n  if (headers instanceof Headers) {\n    headers.forEach(function(value, name) {\n      this.append(name, value);\n    }, this);\n  } else if (Array.isArray(headers)) {\n    headers.forEach(function(header) {\n      if (header.length != 2) {\n        throw new TypeError('Headers constructor: expected name/value pair to be length 2, found' + header.length)\n      }\n      this.append(header[0], header[1]);\n    }, this);\n  } else if (headers) {\n    Object.getOwnPropertyNames(headers).forEach(function(name) {\n      this.append(name, headers[name]);\n    }, this);\n  }\n}\n\nHeaders.prototype.append = function(name, value) {\n  name = normalizeName(name);\n  value = normalizeValue(value);\n  var oldValue = this.map[name];\n  this.map[name] = oldValue ? oldValue + ', ' + value : value;\n};\n\nHeaders.prototype['delete'] = function(name) {\n  delete this.map[normalizeName(name)];\n};\n\nHeaders.prototype.get = function(name) {\n  name = normalizeName(name);\n  return this.has(name) ? this.map[name] : null\n};\n\nHeaders.prototype.has = function(name) {\n  return this.map.hasOwnProperty(normalizeName(name))\n};\n\nHeaders.prototype.set = function(name, value) {\n  this.map[normalizeName(name)] = normalizeValue(value);\n};\n\nHeaders.prototype.forEach = function(callback, thisArg) {\n  for (var name in this.map) {\n    if (this.map.hasOwnProperty(name)) {\n      callback.call(thisArg, this.map[name], name, this);\n    }\n  }\n};\n\nHeaders.prototype.keys = function() {\n  var items = [];\n  this.forEach(function(value, name) {\n    items.push(name);\n  });\n  return iteratorFor(items)\n};\n\nHeaders.prototype.values = function() {\n  var items = [];\n  this.forEach(function(value) {\n    items.push(value);\n  });\n  return iteratorFor(items)\n};\n\nHeaders.prototype.entries = function() {\n  var items = [];\n  this.forEach(function(value, name) {\n    items.push([name, value]);\n  });\n  return iteratorFor(items)\n};\n\nif (support.iterable) {\n  Headers.prototype[Symbol.iterator] = Headers.prototype.entries;\n}\n\nfunction consumed(body) {\n  if (body._noBody) return\n  if (body.bodyUsed) {\n    return Promise.reject(new TypeError('Already read'))\n  }\n  body.bodyUsed = true;\n}\n\nfunction fileReaderReady(reader) {\n  return new Promise(function(resolve, reject) {\n    reader.onload = function() {\n      resolve(reader.result);\n    };\n    reader.onerror = function() {\n      reject(reader.error);\n    };\n  })\n}\n\nfunction readBlobAsArrayBuffer(blob) {\n  var reader = new FileReader();\n  var promise = fileReaderReady(reader);\n  reader.readAsArrayBuffer(blob);\n  return promise\n}\n\nfunction readBlobAsText(blob) {\n  var reader = new FileReader();\n  var promise = fileReaderReady(reader);\n  var match = /charset=([A-Za-z0-9_-]+)/.exec(blob.type);\n  var encoding = match ? match[1] : 'utf-8';\n  reader.readAsText(blob, encoding);\n  return promise\n}\n\nfunction readArrayBufferAsText(buf) {\n  var view = new Uint8Array(buf);\n  var chars = new Array(view.length);\n\n  for (var i = 0; i < view.length; i++) {\n    chars[i] = String.fromCharCode(view[i]);\n  }\n  return chars.join('')\n}\n\nfunction bufferClone(buf) {\n  if (buf.slice) {\n    return buf.slice(0)\n  } else {\n    var view = new Uint8Array(buf.byteLength);\n    view.set(new Uint8Array(buf));\n    return view.buffer\n  }\n}\n\nfunction Body$1() {\n  this.bodyUsed = false;\n\n  this._initBody = function(body) {\n    /*\n      fetch-mock wraps the Response object in an ES6 Proxy to\n      provide useful test harness features such as flush. However, on\n      ES5 browsers without fetch or Proxy support pollyfills must be used;\n      the proxy-pollyfill is unable to proxy an attribute unless it exists\n      on the object before the Proxy is created. This change ensures\n      Response.bodyUsed exists on the instance, while maintaining the\n      semantic of setting Request.bodyUsed in the constructor before\n      _initBody is called.\n    */\n    // eslint-disable-next-line no-self-assign\n    this.bodyUsed = this.bodyUsed;\n    this._bodyInit = body;\n    if (!body) {\n      this._noBody = true;\n      this._bodyText = '';\n    } else if (typeof body === 'string') {\n      this._bodyText = body;\n    } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n      this._bodyBlob = body;\n    } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n      this._bodyFormData = body;\n    } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n      this._bodyText = body.toString();\n    } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n      this._bodyArrayBuffer = bufferClone(body.buffer);\n      // IE 10-11 can't handle a DataView body.\n      this._bodyInit = new Blob([this._bodyArrayBuffer]);\n    } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n      this._bodyArrayBuffer = bufferClone(body);\n    } else {\n      this._bodyText = body = Object.prototype.toString.call(body);\n    }\n\n    if (!this.headers.get('content-type')) {\n      if (typeof body === 'string') {\n        this.headers.set('content-type', 'text/plain;charset=UTF-8');\n      } else if (this._bodyBlob && this._bodyBlob.type) {\n        this.headers.set('content-type', this._bodyBlob.type);\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n      }\n    }\n  };\n\n  if (support.blob) {\n    this.blob = function() {\n      var rejected = consumed(this);\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return Promise.resolve(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as blob')\n      } else {\n        return Promise.resolve(new Blob([this._bodyText]))\n      }\n    };\n  }\n\n  this.arrayBuffer = function() {\n    if (this._bodyArrayBuffer) {\n      var isConsumed = consumed(this);\n      if (isConsumed) {\n        return isConsumed\n      } else if (ArrayBuffer.isView(this._bodyArrayBuffer)) {\n        return Promise.resolve(\n          this._bodyArrayBuffer.buffer.slice(\n            this._bodyArrayBuffer.byteOffset,\n            this._bodyArrayBuffer.byteOffset + this._bodyArrayBuffer.byteLength\n          )\n        )\n      } else {\n        return Promise.resolve(this._bodyArrayBuffer)\n      }\n    } else if (support.blob) {\n      return this.blob().then(readBlobAsArrayBuffer)\n    } else {\n      throw new Error('could not read as ArrayBuffer')\n    }\n  };\n\n  this.text = function() {\n    var rejected = consumed(this);\n    if (rejected) {\n      return rejected\n    }\n\n    if (this._bodyBlob) {\n      return readBlobAsText(this._bodyBlob)\n    } else if (this._bodyArrayBuffer) {\n      return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n    } else if (this._bodyFormData) {\n      throw new Error('could not read FormData body as text')\n    } else {\n      return Promise.resolve(this._bodyText)\n    }\n  };\n\n  if (support.formData) {\n    this.formData = function() {\n      return this.text().then(decode$1)\n    };\n  }\n\n  this.json = function() {\n    return this.text().then(JSON.parse)\n  };\n\n  return this\n}\n\n// HTTP methods whose capitalization should be normalized\nvar methods = ['CONNECT', 'DELETE', 'GET', 'HEAD', 'OPTIONS', 'PATCH', 'POST', 'PUT', 'TRACE'];\n\nfunction normalizeMethod(method) {\n  var upcased = method.toUpperCase();\n  return methods.indexOf(upcased) > -1 ? upcased : method\n}\n\nfunction Request(input, options) {\n  if (!(this instanceof Request)) {\n    throw new TypeError('Please use the \"new\" operator, this DOM object constructor cannot be called as a function.')\n  }\n\n  options = options || {};\n  var body = options.body;\n\n  if (input instanceof Request) {\n    if (input.bodyUsed) {\n      throw new TypeError('Already read')\n    }\n    this.url = input.url;\n    this.credentials = input.credentials;\n    if (!options.headers) {\n      this.headers = new Headers(input.headers);\n    }\n    this.method = input.method;\n    this.mode = input.mode;\n    this.signal = input.signal;\n    if (!body && input._bodyInit != null) {\n      body = input._bodyInit;\n      input.bodyUsed = true;\n    }\n  } else {\n    this.url = String(input);\n  }\n\n  this.credentials = options.credentials || this.credentials || 'same-origin';\n  if (options.headers || !this.headers) {\n    this.headers = new Headers(options.headers);\n  }\n  this.method = normalizeMethod(options.method || this.method || 'GET');\n  this.mode = options.mode || this.mode || null;\n  this.signal = options.signal || this.signal || (function () {\n    if ('AbortController' in g) {\n      var ctrl = new AbortController();\n      return ctrl.signal;\n    }\n  }());\n  this.referrer = null;\n\n  if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n    throw new TypeError('Body not allowed for GET or HEAD requests')\n  }\n  this._initBody(body);\n\n  if (this.method === 'GET' || this.method === 'HEAD') {\n    if (options.cache === 'no-store' || options.cache === 'no-cache') {\n      // Search for a '_' parameter in the query string\n      var reParamSearch = /([?&])_=[^&]*/;\n      if (reParamSearch.test(this.url)) {\n        // If it already exists then set the value with the current time\n        this.url = this.url.replace(reParamSearch, '$1_=' + new Date().getTime());\n      } else {\n        // Otherwise add a new '_' parameter to the end with the current time\n        var reQueryString = /\\?/;\n        this.url += (reQueryString.test(this.url) ? '&' : '?') + '_=' + new Date().getTime();\n      }\n    }\n  }\n}\n\nRequest.prototype.clone = function() {\n  return new Request(this, {body: this._bodyInit})\n};\n\nfunction decode$1(body) {\n  var form = new FormData();\n  body\n    .trim()\n    .split('&')\n    .forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=');\n        var name = split.shift().replace(/\\+/g, ' ');\n        var value = split.join('=').replace(/\\+/g, ' ');\n        form.append(decodeURIComponent(name), decodeURIComponent(value));\n      }\n    });\n  return form\n}\n\nfunction parseHeaders(rawHeaders) {\n  var headers = new Headers();\n  // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n  // https://tools.ietf.org/html/rfc7230#section-3.2\n  var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ');\n  // Avoiding split via regex to work around a common IE11 bug with the core-js 3.6.0 regex polyfill\n  // https://github.com/github/fetch/issues/748\n  // https://github.com/zloirock/core-js/issues/751\n  preProcessedHeaders\n    .split('\\r')\n    .map(function(header) {\n      return header.indexOf('\\n') === 0 ? header.substr(1, header.length) : header\n    })\n    .forEach(function(line) {\n      var parts = line.split(':');\n      var key = parts.shift().trim();\n      if (key) {\n        var value = parts.join(':').trim();\n        try {\n          headers.append(key, value);\n        } catch (error) {\n          console.warn('Response ' + error.message);\n        }\n      }\n    });\n  return headers\n}\n\nBody$1.call(Request.prototype);\n\nfunction Response(bodyInit, options) {\n  if (!(this instanceof Response)) {\n    throw new TypeError('Please use the \"new\" operator, this DOM object constructor cannot be called as a function.')\n  }\n  if (!options) {\n    options = {};\n  }\n\n  this.type = 'default';\n  this.status = options.status === undefined ? 200 : options.status;\n  if (this.status < 200 || this.status > 599) {\n    throw new RangeError(\"Failed to construct 'Response': The status provided (0) is outside the range [200, 599].\")\n  }\n  this.ok = this.status >= 200 && this.status < 300;\n  this.statusText = options.statusText === undefined ? '' : '' + options.statusText;\n  this.headers = new Headers(options.headers);\n  this.url = options.url || '';\n  this._initBody(bodyInit);\n}\n\nBody$1.call(Response.prototype);\n\nResponse.prototype.clone = function() {\n  return new Response(this._bodyInit, {\n    status: this.status,\n    statusText: this.statusText,\n    headers: new Headers(this.headers),\n    url: this.url\n  })\n};\n\nResponse.error = function() {\n  var response = new Response(null, {status: 200, statusText: ''});\n  response.ok = false;\n  response.status = 0;\n  response.type = 'error';\n  return response\n};\n\nvar redirectStatuses = [301, 302, 303, 307, 308];\n\nResponse.redirect = function(url, status) {\n  if (redirectStatuses.indexOf(status) === -1) {\n    throw new RangeError('Invalid status code')\n  }\n\n  return new Response(null, {status: status, headers: {location: url}})\n};\n\nvar DOMException = g.DOMException;\ntry {\n  new DOMException();\n} catch (err) {\n  DOMException = function(message, name) {\n    this.message = message;\n    this.name = name;\n    var error = Error(message);\n    this.stack = error.stack;\n  };\n  DOMException.prototype = Object.create(Error.prototype);\n  DOMException.prototype.constructor = DOMException;\n}\n\nfunction fetch$1(input, init) {\n  return new Promise(function(resolve, reject) {\n    var request = new Request(input, init);\n\n    if (request.signal && request.signal.aborted) {\n      return reject(new DOMException('Aborted', 'AbortError'))\n    }\n\n    var xhr = new XMLHttpRequest();\n\n    function abortXhr() {\n      xhr.abort();\n    }\n\n    xhr.onload = function() {\n      var options = {\n        statusText: xhr.statusText,\n        headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n      };\n      // This check if specifically for when a user fetches a file locally from the file system\n      // Only if the status is out of a normal range\n      if (request.url.indexOf('file://') === 0 && (xhr.status < 200 || xhr.status > 599)) {\n        options.status = 200;\n      } else {\n        options.status = xhr.status;\n      }\n      options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL');\n      var body = 'response' in xhr ? xhr.response : xhr.responseText;\n      setTimeout(function() {\n        resolve(new Response(body, options));\n      }, 0);\n    };\n\n    xhr.onerror = function() {\n      setTimeout(function() {\n        reject(new TypeError('Network request failed'));\n      }, 0);\n    };\n\n    xhr.ontimeout = function() {\n      setTimeout(function() {\n        reject(new TypeError('Network request timed out'));\n      }, 0);\n    };\n\n    xhr.onabort = function() {\n      setTimeout(function() {\n        reject(new DOMException('Aborted', 'AbortError'));\n      }, 0);\n    };\n\n    function fixUrl(url) {\n      try {\n        return url === '' && g.location.href ? g.location.href : url\n      } catch (e) {\n        return url\n      }\n    }\n\n    xhr.open(request.method, fixUrl(request.url), true);\n\n    if (request.credentials === 'include') {\n      xhr.withCredentials = true;\n    } else if (request.credentials === 'omit') {\n      xhr.withCredentials = false;\n    }\n\n    if ('responseType' in xhr) {\n      if (support.blob) {\n        xhr.responseType = 'blob';\n      } else if (\n        support.arrayBuffer\n      ) {\n        xhr.responseType = 'arraybuffer';\n      }\n    }\n\n    if (init && typeof init.headers === 'object' && !(init.headers instanceof Headers || (g.Headers && init.headers instanceof g.Headers))) {\n      var names = [];\n      Object.getOwnPropertyNames(init.headers).forEach(function(name) {\n        names.push(normalizeName(name));\n        xhr.setRequestHeader(name, normalizeValue(init.headers[name]));\n      });\n      request.headers.forEach(function(value, name) {\n        if (names.indexOf(name) === -1) {\n          xhr.setRequestHeader(name, value);\n        }\n      });\n    } else {\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value);\n      });\n    }\n\n    if (request.signal) {\n      request.signal.addEventListener('abort', abortXhr);\n\n      xhr.onreadystatechange = function() {\n        // DONE (success or failure)\n        if (xhr.readyState === 4) {\n          request.signal.removeEventListener('abort', abortXhr);\n        }\n      };\n    }\n\n    xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);\n  })\n}\n\nfetch$1.polyfill = true;\n\nif (!g.fetch) {\n  g.fetch = fetch$1;\n  g.Headers = Headers;\n  g.Request = Request;\n  g.Response = Response;\n}\n\n// https://github.com/melonjs/melonJS/issues/1092\n\n/**\n * a collection of math utility functions\n * @namespace Math\n */\n\n/**\n * constant to convert from degrees to radians\n * @type {number}\n * @memberof Math\n */\nconst DEG_TO_RAD = Math.PI / 180.0;\n\n/**\n * constant to convert from radians to degrees\n * @type {number}\n * @memberof Math\n */\nconst RAD_TO_DEG = 180.0 / Math.PI;\n\n/**\n * constant equals to 2 times pi\n * @type {number}\n * @memberof Math\n */\nconst TAU = Math.PI * 2;\n\n/**\n * constant equals to half pi\n * @type {number}\n * @memberof Math\n */\nconst ETA = Math.PI * 0.5;\n\n/**\n * the difference between 1 and the smallest floating point number greater than 1\n * @type {number}\n * @memberof Math\n */\nconst EPSILON = 0.000001;\n\n/**\n * returns true if the given value is a power of two\n * @memberof Math\n * @param {number} val\n * @returns {boolean}\n */\nfunction isPowerOfTwo(val) {\n    return (val & (val - 1)) === 0;\n}\n\n/**\n * returns true if the given value is a power of four\n * @memberof Math\n * @param {number} val\n * @returns {boolean}\n */\nfunction isPowerOfFour(val) {\n    if (val === 0 || val === 2 || val === 3) {\n        return false;\n    }\n    if (val === 1) {\n        return true;\n    }\n\n    if ((val & (val - 1)) === 0) {\n        if ((val & 0xAAAAAAAA) === 0) {\n            return true;\n        }\n    }\n    return false;\n}\n\n/**\n * returns the next power of two for the given value\n * @memberof Math\n * @param {number} val\n * @returns {boolean}\n */\nfunction nextPowerOfTwo(val) {\n    val --;\n    val |= val >> 1;\n    val |= val >> 2;\n    val |= val >> 4;\n    val |= val >> 8;\n    val |= val >> 16;\n    val ++;\n    return val;\n}\n\n/**\n * Converts an angle in degrees to an angle in radians\n * @memberof Math\n * @param {number} angle - angle in degrees\n * @returns {number} corresponding angle in radians\n * @example\n * // convert a specific angle\n * me.Math.degToRad(60); // return 1.0471...\n */\nfunction degToRad(angle) {\n    return angle * DEG_TO_RAD;\n}\n\n/**\n * Converts an angle in radians to an angle in degrees.\n * @memberof Math\n * @param {number} radians - angle in radians\n * @returns {number} corresponding angle in degrees\n * @example\n * // convert a specific angle\n * me.Math.radToDeg(1.0471975511965976); // return 60\n */\nfunction radToDeg(radians) {\n    return radians * RAD_TO_DEG;\n}\n\n/**\n * clamp the given value\n * @memberof Math\n * @param {number} val - the value to clamp\n * @param {number} low - lower limit\n * @param {number} high - higher limit\n * @returns {number} clamped value\n */\nfunction clamp(val, low, high) {\n    return val < low ? low : val > high ? high : +val;\n}\n\n/**\n * return a random integer between min (included) and max (excluded)\n * @memberof Math\n * @param {number} min - minimum value.\n * @param {number} max - maximum value.\n * @returns {number} random value\n * @example\n * // Print a random number; one of 5, 6, 7, 8, 9\n * console.log(me.Math.random(5, 10) );\n */\nfunction random$1(min, max) {\n    return (~~(Math.random() * (max - min)) + min);\n}\n\n/**\n * return a random float between min, max (exclusive)\n * @memberof Math\n * @param {number} min - minimum value.\n * @param {number} max - maximum value.\n * @returns {number} random value\n * @example\n * // Print a random number; one of 5, 6, 7, 8, 9\n * console.log(me.Math.randomFloat(5, 10) );\n */\nfunction randomFloat(min, max) {\n    return (Math.random() * (max - min)) + min;\n}\n\n/**\n * return a weighted random between min, max (exclusive)\n * @memberof Math\n * @param {number} min - minimum value.\n * @param {number} max - maximum value.\n * @returns {number} random value\n * @example\n * // Print a random number; one of 5, 6, 7, 8, 9\n * console.log(me.Math.weightedRandom(5, 10) );\n */\nfunction weightedRandom$1(min, max) {\n    return (~~(Math.pow(Math.random(), 2) * (max - min)) + min);\n}\n\n/**\n * round a value to the specified number of digit\n * @memberof Math\n * @param {number} num - value to be rounded.\n * @param {number} [dec=0] - number of decimal digit to be rounded to.\n * @returns {number} rounded value\n * @example\n * // round a specific value to 2 digits\n * me.Math.round(10.33333, 2); // return 10.33\n */\nfunction round(num, dec = 0) {\n    // if only one argument use the object value\n    const powres = Math.pow(10, dec);\n    return (~~(0.5 + num * powres) / powres);\n}\n\n/**\n * check if the given value is close to the expected one\n * @memberof Math\n * @param {number} expected - value to be compared with.\n * @param {number} actual - actual value to compare\n * @param {number} [precision=2] - float precision for the comparison\n * @returns {boolean} if close to\n * @example\n * // test if the given value is close to 10\n * if (me.Math.toBeCloseTo(10, value)) {\n *     // do something\n * }\n */\nfunction toBeCloseTo(expected, actual, precision = 2) {\n    return Math.abs(expected - actual) < (Math.pow(10, -precision) / 2);\n}\n\n\n/**\n * Calculates the power of a number.\n * @memberof Math\n * @param {number} n - The number to be raised to the power of 2.\n * @returns {number} The result of raising the number to the power of 2.\n */\nfunction pow(n) {\n    return Math.pow(n, 2);\n}\n\nvar math = {\n\t__proto__: null,\n\tDEG_TO_RAD: DEG_TO_RAD,\n\tEPSILON: EPSILON,\n\tETA: ETA,\n\tRAD_TO_DEG: RAD_TO_DEG,\n\tTAU: TAU,\n\tclamp: clamp,\n\tdegToRad: degToRad,\n\tisPowerOfFour: isPowerOfFour,\n\tisPowerOfTwo: isPowerOfTwo,\n\tnextPowerOfTwo: nextPowerOfTwo,\n\tpow: pow,\n\tradToDeg: radToDeg,\n\trandom: random$1,\n\trandomFloat: randomFloat,\n\tround: round,\n\ttoBeCloseTo: toBeCloseTo,\n\tweightedRandom: weightedRandom$1\n};\n\n/**\n * @classdesc\n * Object pooling - a technique that might speed up your game if used properly.<br>\n * If some of your classes will be instantiated and removed a lot at a time, it is a\n * good idea to add the class to this object pool. A separate pool for that class\n * will be created, which will reuse objects of the class. That way they won't be instantiated\n * each time you need a new one (slowing your game), but stored into that pool and taking one\n * already instantiated when you need it.<br><br>\n * This technique is also used by the engine to instantiate objects defined in the map,\n * which means, that on level loading the engine will try to instantiate every object\n * found in the map, based on the user defined name in each Object Properties<br>\n * <img src=\"images/object_properties.png\"/><br>\n * @see {@link pool} the default global instance of ObjectPool\n */\nclass ObjectPool {\n\n    constructor() {\n        this.objectClass = {};\n        this.instance_counter = 0;\n    }\n\n    /**\n     * register an object to the pool. <br>\n     * Pooling must be set to true if more than one such objects will be created. <br>\n     * (Note: for an object to be poolable, it must implements a `onResetEvent` method)\n     * @param {string} className - as defined in the Name field of the Object Properties (in Tiled)\n     * @param {object} classObj - corresponding Class to be instantiated\n     * @param {boolean} [recycling=false] - enables object recycling for the specified class\n     * @example\n     * // implement CherryEntity\n     * class Cherry extends Sprite {\n     *    onResetEvent() {\n     *        // reset object mutable properties\n     *        this.lifeBar = 100;\n     *    }\n     * };\n     * // add our users defined entities in the object pool and enable object recycling\n     * me.pool.register(\"cherrysprite\", Cherry, true);\n     */\n    register(className, classObj, recycling = false) {\n        if (typeof (classObj) !== \"undefined\") {\n            this.objectClass[className] = {\n                \"class\" : classObj,\n                \"pool\" : (recycling ? [] : undefined)\n            };\n        } else {\n            throw new Error(\"Cannot register object '\" + className + \"', invalid class\");\n        }\n    }\n\n    /**\n     * Pull a new instance of the requested object (if added into the object pool)\n     * @param {string} name - as used in {@link pool.register}\n     * @param {...*} [args] - arguments to be passed when instantiating/reinitializing the object\n     * @returns {object} the instance of the requested object\n     * @example\n     * me.pool.register(\"bullet\", BulletEntity, true);\n     * me.pool.register(\"enemy\", EnemyEntity, true);\n     * // ...\n     * // when we need to manually create a new bullet:\n     * let bullet = me.pool.pull(\"bullet\", x, y, direction);\n     * // ...\n     * // params aren't a fixed number\n     * // when we need new enemy we can add more params, that the object construct requires:\n     * let enemy = me.pool.pull(\"enemy\", x, y, direction, speed, power, life);\n     * // ...\n     * // when we want to destroy existing object, the remove\n     * // function will ensure the object can then be reallocated later\n     * me.game.world.removeChild(enemy);\n     * me.game.world.removeChild(bullet);\n     */\n    pull(name, ...args) {\n        let className = this.objectClass[name];\n        if (className) {\n            let proto = className[\"class\"],\n                poolArray = className.pool,\n                obj;\n\n            if (poolArray && ((obj = poolArray.pop()))) {\n                // poolable object must implement a `onResetEvent` method\n                obj.onResetEvent.apply(obj, args);\n                this.instance_counter--;\n            } else {\n                // create a new instance\n                obj = new (proto.bind.apply(proto, [ proto, ...args ]))();\n                if (poolArray) {\n                    obj.className = name;\n                }\n            }\n            return obj;\n        }\n        throw new Error(\"Cannot instantiate object of type '\" + name + \"'\");\n    }\n\n    /**\n     * purge the object pool from any inactive object <br>\n     * Object pooling must be enabled for this function to work<br>\n     * note: this will trigger the garbage collector\n     */\n    purge() {\n        for (let className in this.objectClass) {\n            if (this.objectClass[className]) {\n                this.objectClass[className].pool = [];\n            }\n        }\n        this.instance_counter = 0;\n    }\n\n    /**\n     * Push back an object instance into the object pool <br>\n     * Object pooling for the object class must be enabled,\n     * and object must have been instantiated using {@link pool#pull},\n     * otherwise this function won't work\n     * @throws will throw an error if the object cannot be recycled\n     * @param {object} obj - instance to be recycled\n     * @param {boolean} [throwOnError=true] - throw an exception if the object cannot be recycled\n     * @returns {boolean} true if the object was successfully recycled in the object pool\n     */\n    push(obj, throwOnError = true) {\n        if (!this.poolable(obj)) {\n            if (throwOnError === true) {\n                throw new Error(\"me.pool: object \" + obj + \" cannot be recycled\");\n            } else {\n                return false;\n            }\n        }\n\n        // store back the object instance for later recycling\n        this.objectClass[obj.className].pool.push(obj);\n        this.instance_counter++;\n\n        return true;\n    }\n\n    /**\n     * Check if an object with the provided name is registered\n     * @param {string} name - of the registered object class\n     * @returns {boolean} true if the classname is registered\n     */\n    exists(name) {\n        return name in this.objectClass;\n    }\n\n    /**\n     * Check if an object is poolable\n     * (was properly registered with the recycling feature enable)\n     * @see register\n     * @param {object} obj - object to be checked\n     * @returns {boolean} true if the object is poolable\n     * @example\n     * if (!me.pool.poolable(myCherryEntity)) {\n     *     // object was not properly registered\n     * }\n     */\n    poolable(obj) {\n        let className = obj.className;\n        return (typeof className !== \"undefined\") &&\n                (typeof obj.onResetEvent === \"function\") &&\n                (className in this.objectClass) &&\n                (typeof this.objectClass[className].pool !== \"undefined\");\n\n    }\n\n    /**\n     * returns the amount of object instance currently in the pool\n     * @returns {number} amount of object instance\n     */\n    getInstanceCount() {\n        return this.instance_counter;\n    }\n}\n\nlet pool = new ObjectPool();\n\n// convert a give color component to it hexadecimal value\nconst charLookup = [\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"A\", \"B\", \"C\", \"D\", \"E\", \"F\"];\n\nfunction toHex$1(component) {\n    return charLookup[(component & 0xF0) >> 4] + charLookup[component & 0x0F];\n}\n\nfunction hue2rgb(p, q, t) {\n    if (t < 0) t += 1;\n    if (t > 1) t -= 1;\n    if (t < 1 / 6) return p + (q - p) * 6 * t;\n    if (t < 1 / 2) return q;\n    if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\n    return p;\n}\n\nconst rgbaRx = /^rgba?\\((\\d+), ?(\\d+), ?(\\d+)(, ?([\\d\\.]+))?\\)$/;\nconst hex3Rx = /^#([\\da-fA-F])([\\da-fA-F])([\\da-fA-F])$/;\nconst hex4Rx = /^#([\\da-fA-F])([\\da-fA-F])([\\da-fA-F])([\\da-fA-F])$/;\nconst hex6Rx = /^#([\\da-fA-F]{2})([\\da-fA-F]{2})([\\da-fA-F]{2})$/;\nconst hex8Rx = /^#([\\da-fA-F]{2})([\\da-fA-F]{2})([\\da-fA-F]{2})([\\da-fA-F]{2})$/;\n\nlet cssToRGB = new Map();\n\n[\n    // CSS1\n    [ \"black\",                  [   0,   0,   0 ] ],\n    [ \"silver\",                 [ 192, 192, 129 ] ],\n    [ \"gray\",                   [ 128, 128, 128 ] ],\n    [ \"white\",                  [ 255, 255, 255 ] ],\n    [ \"maroon\",                 [ 128,   0,   0 ] ],\n    [ \"red\",                    [ 255,   0,   0 ] ],\n    [ \"purple\",                 [ 128,   0, 128 ] ],\n    [ \"fuchsia\",                [ 255,   0, 255 ] ],\n    [ \"green\",                  [   0, 128,   0 ] ],\n    [ \"lime\",                   [   0, 255,   0 ] ],\n    [ \"olive\",                  [ 128, 128,   0 ] ],\n    [ \"yellow\",                 [ 255, 255,   0 ] ],\n    [ \"navy\",                   [   0,   0, 128 ] ],\n    [ \"blue\",                   [   0,   0, 255 ] ],\n    [ \"teal\",                   [   0, 128, 128 ] ],\n    [ \"aqua\",                   [   0, 255, 255 ] ],\n\n    // CSS2\n    [ \"orange\",                 [ 255, 165,   0 ] ],\n\n    // CSS3\n    [ \"aliceblue\",              [ 240, 248, 245 ] ],\n    [ \"antiquewhite\",           [ 250, 235, 215 ] ],\n    [ \"aquamarine\",             [ 127, 255, 212 ] ],\n    [ \"azure\",                  [ 240, 255, 255 ] ],\n    [ \"beige\",                  [ 245, 245, 220 ] ],\n    [ \"bisque\",                 [ 255, 228, 196 ] ],\n    [ \"blanchedalmond\",         [ 255, 235, 205 ] ],\n    [ \"blueviolet\",             [ 138,  43, 226 ] ],\n    [ \"brown\",                  [ 165,  42,  42 ] ],\n    [ \"burlywood\",              [ 222, 184,  35 ] ],\n    [ \"cadetblue\",              [  95, 158, 160 ] ],\n    [ \"chartreuse\",             [ 127, 255,   0 ] ],\n    [ \"chocolate\",              [ 210, 105,  30 ] ],\n    [ \"coral\",                  [ 255, 127,  80 ] ],\n    [ \"cornflowerblue\",         [ 100, 149, 237 ] ],\n    [ \"cornsilk\",               [ 255, 248, 220 ] ],\n    [ \"crimson\",                [ 220,  20,  60 ] ],\n    [ \"darkblue\",               [   0,   0, 139 ] ],\n    [ \"darkcyan\",               [   0, 139, 139 ] ],\n    [ \"darkgoldenrod\",          [ 184, 134,  11 ] ],\n    [ \"darkgray[*]\",            [ 169, 169, 169 ] ],\n    [ \"darkgreen\",              [   0, 100,   0 ] ],\n    [ \"darkgrey[*]\",            [ 169, 169, 169 ] ],\n    [ \"darkkhaki\",              [ 189, 183, 107 ] ],\n    [ \"darkmagenta\",            [ 139,   0, 139 ] ],\n    [ \"darkolivegreen\",         [  85, 107,  47 ] ],\n    [ \"darkorange\",             [ 255, 140,   0 ] ],\n    [ \"darkorchid\",             [ 153,  50, 204 ] ],\n    [ \"darkred\",                [ 139,   0,   0 ] ],\n    [ \"darksalmon\",             [ 233, 150, 122 ] ],\n    [ \"darkseagreen\",           [ 143, 188, 143 ] ],\n    [ \"darkslateblue\",          [  72,  61, 139 ] ],\n    [ \"darkslategray\",          [  47,  79,  79 ] ],\n    [ \"darkslategrey\",          [  47,  79,  79 ] ],\n    [ \"darkturquoise\",          [   0, 206, 209 ] ],\n    [ \"darkviolet\",             [ 148,   0, 211 ] ],\n    [ \"deeppink\",               [ 255,  20, 147 ] ],\n    [ \"deepskyblue\",            [   0, 191, 255 ] ],\n    [ \"dimgray\",                [ 105, 105, 105 ] ],\n    [ \"dimgrey\",                [ 105, 105, 105 ] ],\n    [ \"dodgerblue\",             [  30, 144, 255 ] ],\n    [ \"firebrick\",              [ 178,  34,  34 ] ],\n    [ \"floralwhite\",            [ 255, 250, 240 ] ],\n    [ \"forestgreen\",            [  34, 139,  34 ] ],\n    [ \"gainsboro\",              [ 220, 220, 220 ] ],\n    [ \"ghostwhite\",             [ 248, 248, 255 ] ],\n    [ \"gold\",                   [ 255, 215,   0 ] ],\n    [ \"goldenrod\",              [ 218, 165,  32 ] ],\n    [ \"greenyellow\",            [ 173, 255,  47 ] ],\n    [ \"grey\",                   [ 128, 128, 128 ] ],\n    [ \"honeydew\",               [ 240, 255, 240 ] ],\n    [ \"hotpink\",                [ 255, 105, 180 ] ],\n    [ \"indianred\",              [ 205,  92,  92 ] ],\n    [ \"indigo\",                 [  75,   0, 130 ] ],\n    [ \"ivory\",                  [ 255, 255, 240 ] ],\n    [ \"khaki\",                  [ 240, 230, 140 ] ],\n    [ \"lavender\",               [ 230, 230, 250 ] ],\n    [ \"lavenderblush\",          [ 255, 240, 245 ] ],\n    [ \"lawngreen\",              [ 124, 252,   0 ] ],\n    [ \"lemonchiffon\",           [ 255, 250, 205 ] ],\n    [ \"lightblue\",              [ 173, 216, 230 ] ],\n    [ \"lightcoral\",             [ 240, 128, 128 ] ],\n    [ \"lightcyan\",              [ 224, 255, 255 ] ],\n    [ \"lightgoldenrodyellow\",   [ 250, 250, 210 ] ],\n    [ \"lightgray\",              [ 211, 211, 211 ] ],\n    [ \"lightgreen\",             [ 144, 238, 144 ] ],\n    [ \"lightgrey\",              [ 211, 211, 211 ] ],\n    [ \"lightpink\",              [ 255, 182, 193 ] ],\n    [ \"lightsalmon\",            [ 255, 160, 122 ] ],\n    [ \"lightseagreen\",          [  32, 178, 170 ] ],\n    [ \"lightskyblue\",           [ 135, 206, 250 ] ],\n    [ \"lightslategray\",         [ 119, 136, 153 ] ],\n    [ \"lightslategrey\",         [ 119, 136, 153 ] ],\n    [ \"lightsteelblue\",         [ 176, 196, 222 ] ],\n    [ \"lightyellow\",            [ 255, 255, 224 ] ],\n    [ \"limegreen\",              [  50, 205,  50 ] ],\n    [ \"linen\",                  [ 250, 240, 230 ] ],\n    [ \"mediumaquamarine\",       [ 102, 205, 170 ] ],\n    [ \"mediumblue\",             [   0,   0, 205 ] ],\n    [ \"mediumorchid\",           [ 186,  85, 211 ] ],\n    [ \"mediumpurple\",           [ 147, 112, 219 ] ],\n    [ \"mediumseagreen\",         [  60, 179, 113 ] ],\n    [ \"mediumslateblue\",        [ 123, 104, 238 ] ],\n    [ \"mediumspringgreen\",      [   0, 250, 154 ] ],\n    [ \"mediumturquoise\",        [  72, 209, 204 ] ],\n    [ \"mediumvioletred\",        [ 199,  21, 133 ] ],\n    [ \"midnightblue\",           [  25,  25, 112 ] ],\n    [ \"mintcream\",              [ 245, 255, 250 ] ],\n    [ \"mistyrose\",              [ 255, 228, 225 ] ],\n    [ \"moccasin\",               [ 255, 228, 181 ] ],\n    [ \"navajowhite\",            [ 255, 222, 173 ] ],\n    [ \"oldlace\",                [ 253, 245, 230 ] ],\n    [ \"olivedrab\",              [ 107, 142,  35 ] ],\n    [ \"orangered\",              [ 255,  69,   0 ] ],\n    [ \"orchid\",                 [ 218, 112, 214 ] ],\n    [ \"palegoldenrod\",          [ 238, 232, 170 ] ],\n    [ \"palegreen\",              [ 152, 251, 152 ] ],\n    [ \"paleturquoise\",          [ 175, 238, 238 ] ],\n    [ \"palevioletred\",          [ 219, 112, 147 ] ],\n    [ \"papayawhip\",             [ 255, 239, 213 ] ],\n    [ \"peachpuff\",              [ 255, 218, 185 ] ],\n    [ \"peru\",                   [ 205, 133,  63 ] ],\n    [ \"pink\",                   [ 255, 192, 203 ] ],\n    [ \"plum\",                   [ 221, 160, 221 ] ],\n    [ \"powderblue\",             [ 176, 224, 230 ] ],\n    [ \"rosybrown\",              [ 188, 143, 143 ] ],\n    [ \"royalblue\",              [  65, 105, 225 ] ],\n    [ \"saddlebrown\",            [ 139,  69,  19 ] ],\n    [ \"salmon\",                 [ 250, 128, 114 ] ],\n    [ \"sandybrown\",             [ 244, 164,  96 ] ],\n    [ \"seagreen\",               [  46, 139,  87 ] ],\n    [ \"seashell\",               [ 255, 245, 238 ] ],\n    [ \"sienna\",                 [ 160,  82,  45 ] ],\n    [ \"skyblue\",                [ 135, 206, 235 ] ],\n    [ \"slateblue\",              [ 106,  90, 205 ] ],\n    [ \"slategray\",              [ 112, 128, 144 ] ],\n    [ \"slategrey\",              [ 112, 128, 144 ] ],\n    [ \"snow\",                   [ 255, 250, 250 ] ],\n    [ \"springgreen\",            [   0, 255, 127 ] ],\n    [ \"steelblue\",              [  70, 130, 180 ] ],\n    [ \"tan\",                    [ 210, 180, 140 ] ],\n    [ \"thistle\",                [ 216, 191, 216 ] ],\n    [ \"tomato\",                 [ 255,  99,  71 ] ],\n    [ \"turquoise\",              [  64, 224, 208 ] ],\n    [ \"violet\",                 [ 238, 130, 238 ] ],\n    [ \"wheat\",                  [ 245, 222, 179 ] ],\n    [ \"whitesmoke\",             [ 245, 245, 245 ] ],\n    [ \"yellowgreen\",            [ 154, 205,  50 ] ]\n].forEach((value) => {\n    cssToRGB.set(value[0], value[1]);\n});\n\n/**\n * @classdesc\n * A color manipulation object.\n */\nclass Color {\n\n    /**\n     * @param {number} [r=0] - red component [0 .. 255]\n     * @param {number} [g=0] - green component [0 .. 255]\n     * @param {number} [b=0] - blue component [0 .. 255]\n     * @param {number} [alpha=1.0] - alpha value [0.0 .. 1.0]\n     */\n    constructor(r = 0, g = 0, b = 0, alpha = 1.0) {\n        this.onResetEvent(r, g, b, alpha);\n    }\n\n    /**\n     * @ignore\n     */\n    onResetEvent(r = 0, g = 0, b = 0, alpha = 1.0) {\n        if (typeof this.glArray === \"undefined\") {\n            // Color components in a Float32Array suitable for WebGL\n            this.glArray = new Float32Array([ 0.0, 0.0, 0.0, 1.0 ]);\n        }\n        this.setColor(r, g, b, alpha);\n    }\n\n    /**\n     * Color Red Component [0 .. 255]\n     * @type {number}\n     */\n    get r() {\n        return ~~(this.glArray[0] * 255);\n    }\n\n    set r(value) {\n        this.glArray[0] = clamp(~~value || 0, 0, 255) / 255.0;\n    }\n\n\n    /**\n     * Color Green Component [0 .. 255]\n     * @type {number}\n     */\n    get g() {\n        return ~~(this.glArray[1] * 255);\n    }\n\n    set g(value) {\n        this.glArray[1] = clamp(~~value || 0, 0, 255) / 255.0;\n    }\n\n\n    /**\n     * Color Blue Component [0 .. 255]\n     * @type {number}\n     */\n    get b() {\n        return ~~(this.glArray[2] * 255);\n    }\n    set b(value) {\n        this.glArray[2] = clamp(~~value || 0, 0, 255) / 255.0;\n    }\n\n    /**\n     * Color Alpha Component [0.0 .. 1.0]\n     * @type {number}\n     */\n    get alpha() {\n        return this.glArray[3];\n    }\n\n    set alpha(value = 1.0) {\n        this.glArray[3] = clamp(+value, 0, 1.0);\n    }\n\n    /**\n     * Set this color to the specified value.\n     * @param {number} r - red component [0 .. 255]\n     * @param {number} g - green component [0 .. 255]\n     * @param {number} b - blue component [0 .. 255]\n     * @param {number} [alpha=1.0] - alpha value [0.0 .. 1.0]\n     * @returns {Color} Reference to this object for method chaining\n     */\n    setColor(r, g, b, alpha = 1.0) {\n        this.r = r;\n        this.g = g;\n        this.b = b;\n        this.alpha = alpha;\n        return this;\n    }\n\n    /**\n     * set this color to the specified normalized float values\n     * @param {number} r - red component [0.0 .. 1.0]\n     * @param {number} g - green component [0.0 .. 1.0]\n     * @param {number} b - blue component [0.0 .. 1.0]\n     * @param {number} [alpha=1.0] - alpha value [0.0 .. 1.0]\n     * @returns {Color} Reference to this object for method chaining\n     */\n    setFloat(r, g, b, alpha = 1.0) {\n        const a = this.glArray;\n        a[0] = clamp(+r, 0, 1.0);\n        a[1] = clamp(+g, 0, 1.0);\n        a[2] = clamp(+b, 0, 1.0);\n        a[3] = clamp(+alpha, 0, 1.0);\n        return this;\n    }\n\n    /**\n     * set this color to the specified HSV value\n     * @param {number} h - hue (a value from 0 to 1)\n     * @param {number} s - saturation (a value from 0 to 1)\n     * @param {number} v - value (a value from 0 to 1)\n     * @returns {Color} Reference to this object for method chaining\n     */\n    setHSV(h, s, v) {\n        let r, g, b;\n\n        let i = Math.floor(h * 6);\n        let f = h * 6 - i;\n        let p = v * (1 - s);\n        let q = v * (1 - f * s);\n        let t = v * (1 - (1 - f) * s);\n\n        switch (i % 6) {\n            case 0: r = v, g = t, b = p; break;\n            case 1: r = q, g = v, b = p; break;\n            case 2: r = p, g = v, b = t; break;\n            case 3: r = p, g = q, b = v; break;\n            case 4: r = t, g = p, b = v; break;\n            case 5: r = v, g = p, b = q; break;\n        }\n        return this.setColor(r * 255, g * 255, b * 255);\n    }\n\n    /**\n     * set this color to the specified HSL value\n     * @param {number} h - hue (a value from 0 to 1)\n     * @param {number} s - saturation (a value from 0 to 1)\n     * @param {number} l - lightness (a value from 0 to 1)\n     * @returns {Color} Reference to this object for method chaining\n     */\n    setHSL(h, s, l) {\n        let r, g, b;\n\n        if (s === 0) {\n            r = g = b = l; // achromatic\n        } else {\n            let q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n            let p = 2 * l - q;\n\n            r = hue2rgb(p, q, h + 1 / 3);\n            g = hue2rgb(p, q, h);\n            b = hue2rgb(p, q, h - 1 / 3);\n        }\n\n        return this.setColor(r * 255, g * 255, b * 255);\n    }\n\n    /**\n     * Create a new copy of this color object.\n     * @returns {Color} Reference to the newly cloned object\n     */\n    clone() {\n        return pool.pull(\"Color\").copy(this);\n    }\n\n    /**\n     * Copy a color object or CSS color into this one.\n     * @param {Color|string} color\n     * @returns {Color} Reference to this object for method chaining\n     */\n    copy(color) {\n        if (typeof color === \"string\") {\n            return this.parseCSS(color);\n        } else {\n            this.glArray.set(color.glArray);\n            return this;\n        }\n    }\n\n    /**\n     * Blend this color with the given one using addition.\n     * @param {Color} color\n     * @returns {Color} Reference to this object for method chaining\n     */\n    add(color) {\n        this.glArray[0] = clamp(this.glArray[0] + color.glArray[0], 0, 1);\n        this.glArray[1] = clamp(this.glArray[1] + color.glArray[1], 0, 1);\n        this.glArray[2] = clamp(this.glArray[2] + color.glArray[2], 0, 1);\n        this.glArray[3] = (this.glArray[3] + color.glArray[3]) / 2;\n\n        return this;\n    }\n\n    /**\n     * Darken this color value by 0..1\n     * @param {number} scale\n     * @returns {Color} Reference to this object for method chaining\n     */\n    darken(scale) {\n        scale = clamp(scale, 0, 1);\n        this.glArray[0] *= scale;\n        this.glArray[1] *= scale;\n        this.glArray[2] *= scale;\n\n        return this;\n    }\n\n    /**\n     * Linearly interpolate between this color and the given one.\n     * @param {Color} color\n     * @param {number} alpha - with alpha = 0 being this color, and alpha = 1 being the given one.\n     * @returns {Color} Reference to this object for method chaining\n     */\n    lerp(color, alpha) {\n        alpha = clamp(alpha, 0, 1);\n        this.glArray[0] += (color.glArray[0] - this.glArray[0]) * alpha;\n        this.glArray[1] += (color.glArray[1] - this.glArray[1]) * alpha;\n        this.glArray[2] += (color.glArray[2] - this.glArray[2]) * alpha;\n\n        return this;\n    }\n\n    /**\n     * Lighten this color value by 0..1\n     * @param {number} scale\n     * @returns {Color} Reference to this object for method chaining\n     */\n    lighten(scale) {\n        scale = clamp(scale, 0, 1);\n        this.glArray[0] = clamp(this.glArray[0] + (1 - this.glArray[0]) * scale, 0, 1);\n        this.glArray[1] = clamp(this.glArray[1] + (1 - this.glArray[1]) * scale, 0, 1);\n        this.glArray[2] = clamp(this.glArray[2] + (1 - this.glArray[2]) * scale, 0, 1);\n\n        return this;\n    }\n\n    /**\n     * Generate random r,g,b values for this color object\n     * @param {number} [min=0] - minimum value for the random range\n     * @param {number} [max=255] - maxmium value for the random range\n     * @returns {Color} Reference to this object for method chaining\n     */\n    random(min = 0, max = 255) {\n        if (min < 0) {\n            min = 0;\n        }\n        if (max > 255) {\n            max = 255;\n        }\n\n        return this.setColor(\n            random$1(min, max),\n            random$1(min, max),\n            random$1(min, max),\n            this.alpha\n        );\n    }\n\n    /**\n     * Return true if the r,g,b,a values of this color are equal with the\n     * given one.\n     * @param {Color} color\n     * @returns {boolean}\n     */\n    equals(color) {\n        return (\n            (this.glArray[0] === color.glArray[0]) &&\n            (this.glArray[1] === color.glArray[1]) &&\n            (this.glArray[2] === color.glArray[2]) &&\n            (this.glArray[3] === color.glArray[3])\n        );\n    }\n\n    /**\n     * Parse a CSS color string and set this color to the corresponding\n     * r,g,b values\n     * @param {string} cssColor\n     * @returns {Color} Reference to this object for method chaining\n     */\n    parseCSS(cssColor) {\n        // TODO : Memoize this function by caching its input\n\n        if (cssToRGB.has(cssColor)) {\n            return this.setColor.apply(this, cssToRGB.get(cssColor));\n        }\n\n        return this.parseRGB(cssColor);\n    }\n\n    /**\n     * Parse an RGB or RGBA CSS color string\n     * @param {string} rgbColor\n     * @returns {Color} Reference to this object for method chaining\n     */\n    parseRGB(rgbColor) {\n        // TODO : Memoize this function by caching its input\n\n        let match = rgbaRx.exec(rgbColor);\n        if (match) {\n            return this.setColor(+match[1], +match[2], +match[3], +match[5]);\n        }\n\n        return this.parseHex(rgbColor);\n    }\n\n    /**\n     * Parse a Hex color (\"#RGB\", \"#RGBA\" or \"#RRGGBB\", \"#RRGGBBAA\" format) and set this color to\n     * the corresponding r,g,b,a values\n     * @param {string} hexColor\n     * @param {boolean} [argb = false] - true if format is #ARGB, or #AARRGGBB (as opposed to #RGBA or #RGGBBAA)\n     * @returns {Color} Reference to this object for method chaining\n     */\n    parseHex(hexColor, argb = false) {\n        // TODO : Memoize this function by caching its input\n\n        let match;\n        if ((match = hex8Rx.exec(hexColor))) {\n            // #AARRGGBB or #RRGGBBAA\n            return this.setColor(\n                parseInt(match[argb === false ? 1 : 2], 16), // r\n                parseInt(match[argb === false ? 2 : 3], 16), // g\n                parseInt(match[argb === false ? 3 : 4], 16), // b\n                (clamp(parseInt(match[argb === false ? 4 : 1], 16), 0, 255) / 255.0).toFixed(1) // a\n            );\n        }\n\n        if ((match = hex6Rx.exec(hexColor))) {\n            // #RRGGBB\n            return this.setColor(\n                parseInt(match[1], 16),\n                parseInt(match[2], 16),\n                parseInt(match[3], 16)\n            );\n        }\n\n        if ((match = hex4Rx.exec(hexColor))) {\n            // #ARGB or #RGBA\n            let r = match[argb === false ? 1 : 2];\n            let g = match[argb === false ? 2 : 3];\n            let b = match[argb === false ? 3 : 4];\n            let a = match[argb === false ? 4 : 1];\n            return this.setColor(\n                parseInt(r + r, 16), // r\n                parseInt(g + g, 16), // g\n                parseInt(b + b, 16), // b\n                (clamp(parseInt(a + a, 16), 0, 255) / 255.0).toFixed(1) // a\n            );\n        }\n\n        if ((match = hex3Rx.exec(hexColor))) {\n            // #RGB\n            return this.setColor(\n                parseInt(match[1] + match[1], 16),\n                parseInt(match[2] + match[2], 16),\n                parseInt(match[3] + match[3], 16)\n            );\n        }\n\n        throw new Error(\n            \"invalid parameter: \" + hexColor\n        );\n    }\n\n    /**\n     * Pack this color RGB components into a Uint32 ARGB representation\n     * @param {number} [alpha=1.0] - alpha value [0.0 .. 1.0]\n     * @returns {number}\n     */\n    toUint32(alpha = 1.0) {\n        const a = this.glArray;\n\n        const ur = (a[0] * 255) >> 0;\n        const ug = (a[1] * 255) >> 0;\n        const ub = (a[2] * 255) >> 0;\n\n        return (((alpha * 255) >> 0) << 24) | (ur << 16) | (ug << 8) | ub;\n    }\n\n    /**\n     * return an Float Array representation of this object\n     * @returns {Float32Array}\n     */\n    toArray() {\n        return this.glArray;\n    }\n\n\n    /**\n     * return the color in \"#RRGGBB\" format\n     * @returns {string}\n     */\n    toHex() {\n        // TODO : Memoize this function by caching its result until any of\n        // the r,g,b,a values are changed\n\n        return \"#\" + toHex$1(this.r) + toHex$1(this.g) + toHex$1(this.b);\n    }\n\n    /**\n     * Get the color in \"#RRGGBBAA\" format\n     * @returns {string}\n     */\n    toHex8(alpha = this.alpha) {\n        // TODO : Memoize this function by caching its result until any of\n        // the r,g,b,a values are changed\n\n        return \"#\" + toHex$1(this.r) + toHex$1(this.g) + toHex$1(this.b) + toHex$1(alpha * 255);\n    }\n\n    /**\n     * Get the color in \"rgb(R,G,B)\" format\n     * @returns {string}\n     */\n    toRGB() {\n        // TODO : Memoize this function by caching its result until any of\n        // the r,g,b,a values are changed\n\n        return \"rgb(\" +\n            this.r + \",\" +\n            this.g + \",\" +\n            this.b +\n        \")\";\n    }\n\n    /**\n     * Get the color in \"rgba(R,G,B,A)\" format\n     * @param {number} [alpha=1.0] - alpha value [0.0 .. 1.0]\n     * @returns {string}\n     */\n    toRGBA(alpha = this.alpha) {\n        // TODO : Memoize this function by caching its result until any of\n        // the r,g,b,a values are changed\n\n        return \"rgba(\" +\n            this.r + \",\" +\n            this.g + \",\" +\n            this.b + \",\" +\n            alpha +\n        \")\";\n    }\n}\n\n/**\n * @classdesc\n * a generic 2D Vector Object\n */\nclass Vector2d {\n    /**\n     * @param {number} [x=0] - x value of the vector\n     * @param {number} [y=0] - y value of the vector\n     */\n    constructor(x = 0, y = 0) {\n        this.onResetEvent(x, y);\n    }\n\n    /**\n     * @param {number} [x=0] - x value of the vector\n     * @param {number} [y=0] - y value of the vector\n     * @ignore\n     */\n    onResetEvent(x = 0, y = 0) {\n        /**\n         * x value of the vector\n         * @type {number}\n         */\n        this.x = x;\n        /**\n         * y value of the vector\n         * @type {number}\n         */\n        this.y = y;\n    }\n\n    /**\n     * @param {number} [x=0] - x value of the vector\n     * @param {number} [y=0] - y value of the vector\n     * @ignore\n     */\n    _set(x, y) {\n        this.x = x;\n        this.y = y;\n        return this;\n    }\n\n    /**\n     * set the Vector x and y properties to the given values\n     * @param {number} x\n     * @param {number} y\n     * @returns {Vector2d} Reference to this object for method chaining\n     */\n    set(x, y) {\n        if (x !== +x || y !== +y) {\n            throw new Error(\n                \"invalid x,y parameters (not a number)\"\n            );\n        }\n        return this._set(x, y);\n    }\n\n    /**\n     * set the Vector x and y properties to 0\n     * @returns {Vector2d} Reference to this object for method chaining\n     */\n    setZero() {\n        return this.set(0, 0);\n    }\n\n    /**\n     * set the Vector x and y properties using the passed vector\n     * @param {Vector2d} v\n     * @returns {Vector2d} Reference to this object for method chaining\n     */\n    setV(v) {\n        return this._set(v.x, v.y);\n    }\n\n    /**\n     * Add the passed vector to this vector\n     * @param {Vector2d} v\n     * @returns {Vector2d} Reference to this object for method chaining\n     */\n    add(v) {\n        return this._set(this.x + v.x, this.y + v.y);\n    }\n\n    /**\n     * Substract the passed vector to this vector\n     * @param {Vector2d} v\n     * @returns {Vector2d} Reference to this object for method chaining\n     */\n    sub(v) {\n        return this._set(this.x - v.x, this.y - v.y);\n    }\n\n    /**\n     * Multiply this vector values by the given scalar\n     * @param {number} x\n     * @param {number} [y=x]\n     * @returns {Vector2d} Reference to this object for method chaining\n     */\n    scale(x, y = x) {\n        return this._set(this.x * x, this.y * y);\n    }\n\n    /**\n     * Convert this vector into isometric coordinate space\n     * @returns {Vector2d} Reference to this object for method chaining\n     */\n    toIso() {\n        return this._set(this.x - this.y, (this.x + this.y) * 0.5);\n    }\n\n    /**\n     * Convert this vector into 2d coordinate space\n     * @returns {Vector2d} Reference to this object for method chaining\n     */\n    to2d() {\n        return this._set(this.y + this.x / 2, this.y - this.x / 2);\n    }\n\n    /**\n     * Multiply this vector values by the passed vector\n     * @param {Vector2d} v\n     * @returns {Vector2d} Reference to this object for method chaining\n     */\n    scaleV(v) {\n        return this._set(this.x * v.x, this.y * v.y);\n    }\n\n    /**\n     * Divide this vector values by the passed value\n     * @param {number} n - the value to divide the vector by\n     * @returns {Vector2d} Reference to this object for method chaining\n     */\n    div(n) {\n        return this._set(this.x / n, this.y / n);\n    }\n\n    /**\n     * Update this vector values to absolute values\n     * @returns {Vector2d} Reference to this object for method chaining\n     */\n    abs() {\n        return this._set((this.x < 0) ? -this.x : this.x, (this.y < 0) ? -this.y : this.y);\n    }\n\n    /**\n     * Clamp the vector value within the specified value range\n     * @param {number} low\n     * @param {number} high\n     * @returns {Vector2d} new me.Vector2d\n     */\n    clamp(low, high) {\n        return new Vector2d(clamp(this.x, low, high), clamp(this.y, low, high));\n    }\n\n    /**\n     * Clamp this vector value within the specified value range\n     * @param {number} low\n     * @param {number} high\n     * @returns {Vector2d} Reference to this object for method chaining\n     */\n    clampSelf(low, high) {\n        return this._set(clamp(this.x, low, high), clamp(this.y, low, high));\n    }\n\n    /**\n     * Update this vector with the minimum value between this and the passed vector\n     * @param {Vector2d} v\n     * @returns {Vector2d} Reference to this object for method chaining\n     */\n    minV(v) {\n        return this._set((this.x < v.x) ? this.x : v.x, (this.y < v.y) ? this.y : v.y);\n    }\n\n    /**\n     * Update this vector with the maximum value between this and the passed vector\n     * @param {Vector2d} v\n     * @returns {Vector2d} Reference to this object for method chaining\n     */\n    maxV(v) {\n        return this._set((this.x > v.x) ? this.x : v.x, (this.y > v.y) ? this.y : v.y);\n    }\n\n    /**\n     * Floor the vector values\n     * @returns {Vector2d} new me.Vector2d\n     */\n    floor() {\n        return new Vector2d(Math.floor(this.x), Math.floor(this.y));\n    }\n\n    /**\n     * Floor this vector values\n     * @returns {Vector2d} Reference to this object for method chaining\n     */\n    floorSelf() {\n        return this._set(Math.floor(this.x), Math.floor(this.y));\n    }\n\n    /**\n     * Ceil the vector values\n     * @returns {Vector2d} new me.Vector2d\n     */\n    ceil() {\n        return new Vector2d(Math.ceil(this.x), Math.ceil(this.y));\n    }\n\n    /**\n     * Ceil this vector values\n     * @returns {Vector2d} Reference to this object for method chaining\n     */\n    ceilSelf() {\n        return this._set(Math.ceil(this.x), Math.ceil(this.y));\n    }\n\n    /**\n     * Negate the vector values\n     * @returns {Vector2d} new me.Vector2d\n     */\n    negate() {\n        return new Vector2d(-this.x, -this.y);\n    }\n\n    /**\n     * Negate this vector values\n     * @returns {Vector2d} Reference to this object for method chaining\n     */\n    negateSelf() {\n        return this._set(-this.x, -this.y);\n    }\n\n    /**\n     * Copy the x,y values of the passed vector to this one\n     * @param {Vector2d} v\n     * @returns {Vector2d} Reference to this object for method chaining\n     */\n    copy(v) {\n        return this._set(v.x, v.y);\n    }\n\n    /**\n     * return true if this vector is equal to the given values or vector\n     * @param {number|Vector2d} x\n     * @param {number} [y]\n     * @returns {boolean}\n     */\n    equals(...args) {\n        let _x, _y;\n        if (args.length === 2) {\n            // x, y\n            [_x, _y] = args;\n        } else {\n            // vector\n            [_x, _y] = [args[0].x, args[0].y];\n        }\n        return this.x === _x && this.y === _y;\n    }\n\n    /**\n     * normalize this vector (scale the vector so that its magnitude is 1)\n     * @returns {Vector2d} Reference to this object for method chaining\n     */\n    normalize() {\n        return this.div(this.length() || 1);\n    }\n\n    /**\n     * change this vector to be perpendicular to what it was before.<br>\n     * (Effectively rotates it 90 degrees in a clockwise direction)\n     * @returns {Vector2d} Reference to this object for method chaining\n     */\n    perp() {\n        return this._set(this.y, -this.x);\n    }\n\n    /**\n     * Rotate this vector (counter-clockwise) by the specified angle (in radians).\n     * @param {number} angle - The angle to rotate (in radians)\n     * @param {Vector2d} [v] - an optional point to rotate around\n     * @returns {Vector2d} Reference to this object for method chaining\n     */\n    rotate(angle, v) {\n        let cx = 0;\n        let cy = 0;\n\n        if (typeof v === \"object\") {\n            cx = v.x;\n            cy = v.y;\n        }\n\n        let x = this.x - cx;\n        let y = this.y - cy;\n\n        let c = Math.cos(angle);\n        let s = Math.sin(angle);\n\n        return this._set(x * c - y * s + cx, x * s + y * c + cy);\n    }\n\n    /**\n     * return the dot product of this vector and the passed one\n     * @param {Vector2d} v\n     * @returns {number} The dot product.\n     */\n    dot(v) {\n        return this.x * v.x + this.y * v.y;\n    }\n\n    /**\n     * return the cross product of this vector and the passed one\n     * @param {Vector2d} v\n     * @returns {number} The cross product.\n     */\n    cross(v) {\n        return this.x * v.y - this.y * v.x;\n    }\n\n    /**\n    * return the square length of this vector\n    * @returns {number} The length^2 of this vector.\n    */\n    length2() {\n        return this.dot(this);\n    }\n\n    /**\n     * return the length (magnitude) of this vector\n     * @returns {number} the length of this vector\n     */\n    length() {\n        return Math.sqrt(this.length2());\n    }\n\n    /**\n     * Linearly interpolate between this vector and the given one.\n     * @param {Vector2d} v\n     * @param {number} alpha - distance along the line (alpha = 0 will be this vector, and alpha = 1 will be the given one).\n     * @returns {Vector2d} Reference to this object for method chaining\n     */\n    lerp(v, alpha) {\n        this.x += (v.x - this.x) * alpha;\n        this.y += (v.y - this.y) * alpha;\n        return this;\n    }\n\n    /**\n     * interpolate the position of this vector towards the given one by the given maximum step.\n     * @param {Vector2d} target\n     * @param {number} step - the maximum step per iteration (Negative values will push the vector away from the target)\n     * @returns {Vector2d} Reference to this object for method chaining\n     */\n    moveTowards(target, step) {\n        let angle = Math.atan2(target.y - this.y, target.x - this.x);\n\n        let distance = this.distance(target);\n\n        if (distance === 0 || (step >= 0 && distance <= step * step)) {\n            return target;\n        }\n\n        this.x += Math.cos(angle) * step;\n        this.y += Math.sin(angle) * step;\n\n        return this;\n    }\n\n    /**\n     * return the distance between this vector and the passed one\n     * @param {Vector2d} v\n     * @returns {number}\n     */\n    distance(v) {\n        let dx = this.x - v.x, dy = this.y - v.y;\n        return Math.sqrt(dx * dx + dy * dy);\n    }\n\n    /**\n     * return the angle between this vector and the passed one\n     * @param {Vector2d} v\n     * @returns {number} angle in radians\n     */\n    angle(v) {\n        return Math.acos(clamp(this.dot(v) / (this.length() * v.length()), -1, 1));\n    }\n\n    /**\n     * project this vector on to another vector.\n     * @param {Vector2d} v - The vector to project onto.\n     * @returns {Vector2d} Reference to this object for method chaining\n     */\n    project(v) {\n        return this.scale(this.dot(v) / v.length2());\n    }\n\n    /**\n     * Project this vector onto a vector of unit length.<br>\n     * This is slightly more efficient than `project` when dealing with unit vectors.\n     * @param {Vector2d} v - The unit vector to project onto.\n     * @returns {Vector2d} Reference to this object for method chaining\n     */\n    projectN(v) {\n        return this.scale(this.dot(v));\n    }\n\n    /**\n     * return a clone copy of this vector\n     * @returns {Vector2d} new me.Vector2d\n     */\n    clone() {\n        return pool.pull(\"Vector2d\", this.x, this.y);\n    }\n\n    /**\n     * convert the object to a string representation\n     * @returns {string}\n     */\n    toString() {\n        return \"x:\" + this.x + \",y:\" + this.y;\n    }\n}\n\n/**\n * additional import for TypeScript\n * @import Vector2d from \"./vector2.js\";\n */\n\n/**\n * @classdesc\n * a generic 3D Vector Object\n */\nclass Vector3d {\n    /**\n     * @param {number} [x=0] - x value of the vector\n     * @param {number} [y=0] - y value of the vector\n     * @param {number} [z=0] - z value of the vector\n     */\n    constructor(x = 0, y = 0, z = 0) {\n        this.onResetEvent(x, y, z);\n    }\n\n    /**\n     * @param {number} [x=0]\n     * @param {number} [y=0]\n     * @param {number} [z=0]\n     * @ignore\n     */\n    onResetEvent(x = 0, y = 0, z = 0) {\n        /**\n         * x value of the vector\n         * @type {number}\n         */\n        this.x = x;\n\n        /**\n         * y value of the vector\n         * @type {number}\n         */\n        this.y = y;\n\n        /**\n         * z value of the vector\n         * @type {number}\n         */\n        this.z = z;\n    }\n\n    /**\n     * @param {number} x\n     * @param {number} y\n     * @param {number} [z=0]\n     * @ignore\n     */\n    _set(x, y, z = 0) {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n        return this;\n    }\n\n    /**\n     * set the Vector x and y properties to the given values\n     * @param {number} x\n     * @param {number} y\n     * @param {number} [z=0]\n     * @returns {Vector3d} Reference to this object for method chaining\n     */\n    set(x, y, z) {\n        if (x !== +x || y !== +y || (typeof z !== \"undefined\" && z !== +z)) {\n            throw new Error(\n                \"invalid x, y, z parameters (not a number)\"\n            );\n        }\n        return this._set(x, y, z);\n    }\n\n    /**\n     * set the Vector x and y properties to 0\n     * @returns {Vector3d} Reference to this object for method chaining\n     */\n    setZero() {\n        return this.set(0, 0, 0);\n    }\n\n    /**\n     * set the Vector x and y properties using the passed vector\n     * @param {Vector2d|Vector3d} v\n     * @returns {Vector3d} Reference to this object for method chaining\n     */\n    setV(v) {\n        return this._set(v.x, v.y, v.z);\n    }\n\n    /**\n     * Add the passed vector to this vector\n     * @param {Vector2d|Vector3d} v\n     * @returns {Vector3d} Reference to this object for method chaining\n     */\n    add(v) {\n        return this._set(this.x + v.x, this.y + v.y, this.z + (v.z || 0));\n    }\n\n    /**\n     * Substract the passed vector to this vector\n     * @param {Vector2d|Vector3d} v\n     * @returns {Vector3d} Reference to this object for method chaining\n     */\n    sub(v) {\n        return this._set(this.x - v.x, this.y - v.y, this.z - (v.z || 0));\n    }\n\n    /**\n     * Multiply this vector values by the given scalar\n     * @param {number} x\n     * @param {number} [y=x]\n     * @param {number} [z=1]\n     * @returns {Vector3d} Reference to this object for method chaining\n     */\n    scale(x, y = x, z = 1) {\n        return this._set(this.x * x, this.y * y, this.z * z);\n    }\n\n    /**\n     * Multiply this vector values by the passed vector\n     * @param {Vector2d|Vector3d} v\n     * @returns {Vector3d} Reference to this object for method chaining\n     */\n    scaleV(v) {\n        return this.scale(v.x, v.y, v.z);\n    }\n\n    /**\n     * Convert this vector into isometric coordinate space\n     * @returns {Vector3d} Reference to this object for method chaining\n     */\n    toIso() {\n        return this._set(this.x - this.y, (this.x + this.y) * 0.5, this.z);\n    }\n\n    /**\n     * Convert this vector into 2d coordinate space\n     * @returns {Vector3d} Reference to this object for method chaining\n     */\n    to2d() {\n        return this._set(this.y + this.x / 2, this.y - this.x / 2, this.z);\n    }\n\n    /**\n     * Divide this vector values by the passed value\n     * @param {number} n - the value to divide the vector by\n     * @returns {Vector3d} Reference to this object for method chaining\n     */\n    div(n) {\n        return this._set(this.x / n, this.y / n, this.z / n);\n    }\n\n    /**\n     * Update this vector values to absolute values\n     * @returns {Vector3d} Reference to this object for method chaining\n     */\n    abs() {\n        return this._set((this.x < 0) ? -this.x : this.x, (this.y < 0) ? -this.y : this.y, (this.z < 0) ? -this.z : this.z);\n    }\n\n    /**\n     * Clamp the vector value within the specified value range\n     * @param {number} low\n     * @param {number} high\n     * @returns {Vector3d} new me.Vector3d\n     */\n    clamp(low, high) {\n        return new Vector3d(clamp(this.x, low, high), clamp(this.y, low, high), clamp(this.z, low, high));\n    }\n\n    /**\n     * Clamp this vector value within the specified value range\n     * @param {number} low\n     * @param {number} high\n     * @returns {Vector3d} Reference to this object for method chaining\n     */\n    clampSelf(low, high) {\n        return this._set(clamp(this.x, low, high), clamp(this.y, low, high), clamp(this.z, low, high));\n    }\n\n    /**\n     * Update this vector with the minimum value between this and the passed vector\n     * @param {Vector2d|Vector3d} v\n     * @returns {Vector3d} Reference to this object for method chaining\n     */\n    minV(v) {\n        let _vz = v.z || 0;\n        return this._set((this.x < v.x) ? this.x : v.x, (this.y < v.y) ? this.y : v.y, (this.z < _vz) ? this.z : _vz);\n    }\n\n    /**\n     * Update this vector with the maximum value between this and the passed vector\n     * @param {Vector2d|Vector3d} v\n     * @returns {Vector3d} Reference to this object for method chaining\n     */\n    maxV(v) {\n        let _vz = v.z || 0;\n        return this._set((this.x > v.x) ? this.x : v.x, (this.y > v.y) ? this.y : v.y, (this.z > _vz) ? this.z : _vz);\n    }\n\n    /**\n     * Floor the vector values\n     * @returns {Vector3d} new me.Vector3d\n     */\n    floor() {\n        return new Vector3d(Math.floor(this.x), Math.floor(this.y), Math.floor(this.z));\n    }\n\n    /**\n     * Floor this vector values\n     * @returns {Vector3d} Reference to this object for method chaining\n     */\n    floorSelf() {\n        return this._set(Math.floor(this.x), Math.floor(this.y), Math.floor(this.z));\n    }\n\n    /**\n     * Ceil the vector values\n     * @returns {Vector3d} new me.Vector3d\n     */\n    ceil() {\n        return new Vector3d(Math.ceil(this.x), Math.ceil(this.y), Math.ceil(this.z));\n    }\n\n    /**\n     * Ceil this vector values\n     * @returns {Vector3d} Reference to this object for method chaining\n     */\n    ceilSelf() {\n        return this._set(Math.ceil(this.x), Math.ceil(this.y), Math.ceil(this.z));\n    }\n\n    /**\n     * Negate the vector values\n     * @returns {Vector3d} new me.Vector3d\n     */\n    negate() {\n        return new Vector3d(-this.x, -this.y, -this.z);\n    }\n\n    /**\n     * Negate this vector values\n     * @returns {Vector3d} Reference to this object for method chaining\n     */\n    negateSelf() {\n        return this._set(-this.x, -this.y, -this.z);\n    }\n\n    /**\n     * Copy the components of the given vector into this one\n     * @param {Vector2d|Vector3d} v\n     * @returns {Vector3d} Reference to this object for method chaining\n     */\n    copy(v) {\n        return this._set(v.x, v.y, v.z || 0);\n    }\n\n    /**\n     * return true if this vector is equal to the given values or vector\n     * @param {number|Vector2d|Vector3d} x\n     * @param {number} [y]\n     * @param {number} [z]\n     * @returns {boolean} true if both vectros are equals\n     */\n    equals(...args) {\n        let _x, _y, _z;\n        if (args.length >= 2) {\n            // x, y, z\n            [_x, _y, _z] = args;\n        } else {\n            // vector\n            [_x, _y, _z] = [args[0].x, args[0].y, args[0].z];\n        }\n\n        if (typeof _z === \"undefined\") {\n            _z = this.z;\n        }\n\n        return ((this.x === _x) && (this.y === _y) && (this.z === _z));\n    }\n\n    /**\n     * normalize this vector (scale the vector so that its magnitude is 1)\n     * @returns {Vector3d} Reference to this object for method chaining\n     */\n    normalize() {\n        return this.div(this.length() || 1);\n    }\n\n    /**\n     * change this vector to be perpendicular to what it was before.<br>\n     * (Effectively rotates it 90 degrees in a clockwise direction around the z axis)\n     * @returns {Vector3d} Reference to this object for method chaining\n     */\n    perp() {\n        return this._set(this.y, -this.x, this.z);\n    }\n\n    /**\n     * Rotate this vector (counter-clockwise) by the specified angle (in radians) around the z axis\n     * @param {number} angle - The angle to rotate (in radians)\n     * @param {Vector2d} [v] - an optional point to rotate around (on the same z axis)\n     * @returns {Vector3d} Reference to this object for method chaining\n     */\n    rotate(angle, v) {\n        let cx = 0;\n        let cy = 0;\n\n        if (typeof v === \"object\") {\n            cx = v.x;\n            cy = v.y;\n        }\n\n        // TODO also rotate on the z axis if the given vector is a 3d one\n        let x = this.x - cx;\n        let y = this.y - cy;\n\n        let c = Math.cos(angle);\n        let s = Math.sin(angle);\n\n        return this._set(x * c - y * s + cx, x * s + y * c + cy, this.z);\n    }\n\n    /**\n     * return the dot product of this vector and the passed one\n     * @param {Vector2d|Vector3d} v\n     * @returns {number} The dot product.\n     */\n    dot(v) {\n        return this.x * v.x + this.y * v.y + this.z * (typeof(v.z) !== \"undefined\" ? v.z : this.z);\n    }\n\n    /**\n     * calculate the cross product of this vector and the passed one\n     * @param {Vector3d} v\n     * @returns {Vector3d} Reference to this object for method chaining\n     */\n    cross(v) {\n        let ax = this.x, ay = this.y, az = this.z;\n        let bx = v.x, by = v.y, bz = v.z;\n\n        this.x = ay * bz - az * by;\n        this.y = az * bx - ax * bz;\n        this.z = ax * by - ay * bx;\n\n        return this;\n    }\n\n    /**\n    * return the square length of this vector\n    * @returns {number} The length^2 of this vector.\n    */\n    length2() {\n        return this.dot(this);\n    }\n\n    /**\n     * return the length (magnitude) of this vector\n     * @returns {number} the length of this vector\n     */\n    length() {\n        return Math.sqrt(this.length2());\n    }\n\n    /**\n     * Linearly interpolate between this vector and the given one.\n     * @param {Vector3d} v\n     * @param {number} alpha - distance along the line (alpha = 0 will be this vector, and alpha = 1 will be the given one).\n     * @returns {Vector3d} Reference to this object for method chaining\n     */\n    lerp(v, alpha) {\n        this.x += (v.x - this.x) * alpha;\n        this.y += (v.y - this.y) * alpha;\n        this.z += (v.z - this.z) * alpha;\n        return this;\n    }\n\n    /**\n     * interpolate the position of this vector on the x and y axis towards the given one by the given maximum step.\n     * @param {Vector2d|Vector3d} target\n     * @param {number} step - the maximum step per iteration (Negative values will push the vector away from the target)\n     * @returns {Vector3d} Reference to this object for method chaining\n     */\n    moveTowards(target, step) {\n        let angle = Math.atan2(target.y - this.y, target.x - this.x);\n\n        let dx = this.x - target.x;\n        let dy = this.y - target.y;\n\n        let distance = Math.sqrt(dx * dx + dy * dy);\n\n        if (distance === 0 || (step >= 0 && distance <= step * step)) {\n            return target;\n        }\n\n        this.x += Math.cos(angle) * step;\n        this.y += Math.sin(angle) * step;\n\n        return this;\n    }\n\n    /**\n     * return the distance between this vector and the passed one\n     * @param {Vector2d|Vector3d} v\n     * @returns {number}\n     */\n    distance(v) {\n        let dx = this.x - v.x;\n        let dy = this.y - v.y;\n        let dz = this.z - (v.z || 0);\n        return Math.sqrt(dx * dx + dy * dy + dz * dz);\n    }\n\n    /**\n     * return the angle between this vector and the passed one\n     * @param {Vector2d|Vector3d} v\n     * @returns {number} angle in radians\n     */\n    angle(v) {\n        return Math.acos(clamp(this.dot(v) / (this.length() * v.length()), -1, 1));\n    }\n\n    /**\n     * project this vector on to another vector.\n     * @param {Vector2d|Vector3d} v - The vector to project onto.\n     * @returns {Vector3d} Reference to this object for method chaining\n     */\n    project(v) {\n        let ratio = this.dot(v) / v.length2();\n        return this.scale(ratio, ratio, ratio);\n    }\n\n    /**\n     * Project this vector onto a vector of unit length.<br>\n     * This is slightly more efficient than `project` when dealing with unit vectors.\n     * @param {Vector2d|Vector3d} v - The unit vector to project onto.\n     * @returns {Vector3d} Reference to this object for method chaining\n     */\n    projectN(v) {\n        let ratio = this.dot(v) / v.length2();\n        return this.scale(ratio, ratio, ratio);\n    }\n\n    /**\n     * return a clone copy of this vector\n     * @returns {Vector3d} new me.Vector3d\n     */\n    clone() {\n        return pool.pull(\"Vector3d\", this.x, this.y, this.z);\n    }\n\n    /**\n     * convert the object to a string representation\n     * @returns {string}\n     */\n    toString() {\n        return \"x:\" + this.x + \",y:\" + this.y + \",z:\" + this.z;\n    }\n}\n\n/**\n * @classdesc\n * A Vector2d object that provide notification by executing the given callback when the vector is changed.\n * @augments Vector2d\n */\nclass ObservableVector2d extends Vector2d {\n    /**\n     * @param {number} x - x value of the vector\n     * @param {number} y - y value of the vector\n     * @param {object} settings - additional required parameters\n     * @param {Function} settings.onUpdate - the callback to be executed when the vector is changed\n     * @param {Function} [settings.scope] - the value to use as this when calling onUpdate\n     */\n    constructor(x = 0, y = 0, settings) {\n        super(x, y);\n        if (typeof(settings) === \"undefined\") {\n            throw new Error(\n                \"undefined `onUpdate` callback\"\n            );\n        }\n        this.setCallback(settings.onUpdate, settings.scope);\n    }\n\n    /**\n     * @ignore\n     */\n    onResetEvent(x = 0, y = 0, settings) {\n        // init is call by the constructor and does not trigger the cb\n        this.setMuted(x, y);\n        if (typeof settings !== \"undefined\") {\n            this.setCallback(settings.onUpdate, settings.scope);\n        }\n    }\n\n    /**\n     * x value of the vector\n     * @public\n     * @type {number}\n     * @name x\n     * @memberof ObservableVector2d\n     */\n\n    get x() {\n        return this._x;\n    }\n\n    set x(value) {\n        let ret = this.onUpdate.call(this.scope, value, this._y, this._x, this._y);\n        if (ret && \"x\" in ret) {\n            this._x = ret.x;\n        } else {\n            this._x = value;\n        }\n    }\n\n\n    /**\n     * y value of the vector\n     * @public\n     * @type {number}\n     * @name y\n     * @memberof ObservableVector2d\n     */\n\n    get y() {\n        return this._y;\n    }\n\n    set y(value) {\n        let ret = this.onUpdate.call(this.scope, this._x, value, this._x, this._y);\n        if (ret && \"y\" in ret) {\n            this._y = ret.y;\n        } else {\n            this._y = value;\n        }\n    }\n\n    /** @ignore */\n    _set(x, y) {\n        let ret = this.onUpdate.call(this.scope, x, y, this._x, this._y);\n        if (ret && \"x\" in ret && \"y\" in ret) {\n            this._x = ret.x;\n            this._y = ret.y;\n        } else {\n            this._x = x;\n            this._y = y;\n        }\n        return this;\n    }\n\n    /**\n     * set the vector value without triggering the callback\n     * @name setMuted\n     * @memberof ObservableVector2d\n     * @param {number} x - x value of the vector\n     * @param {number} y - y value of the vector\n     * @returns {ObservableVector2d} Reference to this object for method chaining\n     */\n    setMuted(x, y) {\n        this._x = x;\n        this._y = y;\n        return this;\n    }\n\n    /**\n     * set the callback to be executed when the vector is changed\n     * @name setCallback\n     * @memberof ObservableVector2d\n     * @param {Function} fn - callback\n     * @param {Function} [scope=null] - scope\n     * @returns {ObservableVector2d} Reference to this object for method chaining\n     */\n    setCallback(fn, scope = null) {\n        if (typeof(fn) !== \"function\") {\n            throw new Error(\n                \"invalid `onUpdate` callback\"\n            );\n        }\n        this.onUpdate = fn;\n        this.scope = scope;\n        return this;\n    }\n\n    /**\n     * Add the passed vector to this vector\n     * @name add\n     * @memberof ObservableVector2d\n     * @param {ObservableVector2d} v\n     * @returns {ObservableVector2d} Reference to this object for method chaining\n     */\n    add(v) {\n        return this._set(this._x + v.x, this._y + v.y);\n    }\n\n    /**\n     * Substract the passed vector to this vector\n     * @name sub\n     * @memberof ObservableVector2d\n     * @param {ObservableVector2d} v\n     * @returns {ObservableVector2d} Reference to this object for method chaining\n     */\n    sub(v) {\n        return this._set(this._x - v.x, this._y - v.y);\n    }\n\n    /**\n     * Multiply this vector values by the given scalar\n     * @name scale\n     * @memberof ObservableVector2d\n     * @param {number} x\n     * @param {number} [y=x]\n     * @returns {ObservableVector2d} Reference to this object for method chaining\n     */\n    scale(x, y = x) {\n        return this._set(this._x * x, this._y * y);\n    }\n\n    /**\n     * Multiply this vector values by the passed vector\n     * @name scaleV\n     * @memberof ObservableVector2d\n     * @param {ObservableVector2d} v\n     * @returns {ObservableVector2d} Reference to this object for method chaining\n     */\n    scaleV(v) {\n        return this._set(this._x * v.x, this._y * v.y);\n    }\n\n    /**\n     * Divide this vector values by the passed value\n     * @name div\n     * @memberof ObservableVector2d\n     * @param {number} n - the value to divide the vector by\n     * @returns {ObservableVector2d} Reference to this object for method chaining\n     */\n    div(n) {\n        return this._set(this._x / n, this._y / n);\n    }\n\n    /**\n     * Update this vector values to absolute values\n     * @name abs\n     * @memberof ObservableVector2d\n     * @returns {ObservableVector2d} Reference to this object for method chaining\n     */\n    abs() {\n        return this._set((this._x < 0) ? -this._x : this._x, (this._y < 0) ? -this._y : this._y);\n    }\n\n    /**\n     * Clamp the vector value within the specified value range\n     * @name clamp\n     * @memberof ObservableVector2d\n     * @param {number} low\n     * @param {number} high\n     * @returns {ObservableVector2d} new me.ObservableVector2d\n     */\n    clamp(low, high) {\n        return new ObservableVector2d(clamp(this.x, low, high), clamp(this.y, low, high), {onUpdate: this.onUpdate, scope: this.scope});\n    }\n\n    /**\n     * Clamp this vector value within the specified value range\n     * @name clampSelf\n     * @memberof ObservableVector2d\n     * @param {number} low\n     * @param {number} high\n     * @returns {ObservableVector2d} Reference to this object for method chaining\n     */\n    clampSelf(low, high) {\n        return this._set(clamp(this._x, low, high), clamp(this._y, low, high));\n    }\n\n    /**\n     * Update this vector with the minimum value between this and the passed vector\n     * @name minV\n     * @memberof ObservableVector2d\n     * @param {ObservableVector2d} v\n     * @returns {ObservableVector2d} Reference to this object for method chaining\n     */\n    minV(v) {\n        return this._set((this._x < v.x) ? this._x : v.x, (this._y < v.y) ? this._y : v.y);\n    }\n\n    /**\n     * Update this vector with the maximum value between this and the passed vector\n     * @name maxV\n     * @memberof ObservableVector2d\n     * @param {ObservableVector2d} v\n     * @returns {ObservableVector2d} Reference to this object for method chaining\n     */\n    maxV(v) {\n        return this._set((this._x > v.x) ? this._x : v.x, (this._y > v.y) ? this._y : v.y);\n    }\n\n    /**\n     * Floor the vector values\n     * @name floor\n     * @memberof ObservableVector2d\n     * @returns {ObservableVector2d} new me.ObservableVector2d\n     */\n    floor() {\n        return new ObservableVector2d(Math.floor(this._x), Math.floor(this._y), {onUpdate: this.onUpdate, scope: this.scope});\n    }\n\n    /**\n     * Floor this vector values\n     * @name floorSelf\n     * @memberof ObservableVector2d\n     * @returns {ObservableVector2d} Reference to this object for method chaining\n     */\n    floorSelf() {\n        return this._set(Math.floor(this._x), Math.floor(this._y));\n    }\n\n    /**\n     * Ceil the vector values\n     * @name ceil\n     * @memberof ObservableVector2d\n     * @returns {ObservableVector2d} new me.ObservableVector2d\n     */\n    ceil() {\n        return new ObservableVector2d(Math.ceil(this._x), Math.ceil(this._y), {onUpdate: this.onUpdate, scope: this.scope});\n    }\n\n    /**\n     * Ceil this vector values\n     * @name ceilSelf\n     * @memberof ObservableVector2d\n     * @returns {ObservableVector2d} Reference to this object for method chaining\n     */\n    ceilSelf() {\n        return this._set(Math.ceil(this._x), Math.ceil(this._y));\n    }\n\n    /**\n     * Negate the vector values\n     * @name negate\n     * @memberof ObservableVector2d\n     * @returns {ObservableVector2d} new me.ObservableVector2d\n     */\n    negate() {\n        return new ObservableVector2d(-this._x, -this._y, {onUpdate: this.onUpdate, scope: this.scope});\n    }\n\n    /**\n     * Negate this vector values\n     * @name negateSelf\n     * @memberof ObservableVector2d\n     * @returns {ObservableVector2d} Reference to this object for method chaining\n     */\n    negateSelf() {\n        return this._set(-this._x, -this._y);\n    }\n\n    /**\n     * Copy the x,y values of the passed vector to this one\n     * @name copy\n     * @memberof ObservableVector2d\n     * @param {ObservableVector2d} v\n     * @returns {ObservableVector2d} Reference to this object for method chaining\n     */\n    copy(v) {\n        return this._set(v.x, v.y);\n    }\n\n    /**\n     * return true if the two vectors are the same\n     * @name equals\n     * @memberof ObservableVector2d\n     * @param {ObservableVector2d} v\n     * @returns {boolean}\n     */\n    equals(v) {\n        return ((this._x === v.x) && (this._y === v.y));\n    }\n\n    /**\n     * change this vector to be perpendicular to what it was before.<br>\n     * (Effectively rotates it 90 degrees in a clockwise direction)\n     * @name perp\n     * @memberof ObservableVector2d\n     * @returns {ObservableVector2d} Reference to this object for method chaining\n     */\n    perp() {\n        return this._set(this._y, -this._x);\n    }\n\n    /**\n     * Rotate this vector (counter-clockwise) by the specified angle (in radians).\n     * @name rotate\n     * @memberof ObservableVector2d\n     * @param {number} angle - The angle to rotate (in radians)\n     * @param {Vector2d|ObservableVector2d} [v] - an optional point to rotate around\n     * @returns {ObservableVector2d} Reference to this object for method chaining\n     */\n    rotate(angle, v) {\n        let cx = 0;\n        let cy = 0;\n\n        if (typeof v === \"object\") {\n            cx = v.x;\n            cy = v.y;\n        }\n\n        let x = this._x - cx;\n        let y = this._y - cy;\n\n        let c = Math.cos(angle);\n        let s = Math.sin(angle);\n\n        return this._set(x * c - y * s + cx, x * s + y * c + cy);\n    }\n\n    /**\n     * return the dot product of this vector and the passed one\n     * @name dot\n     * @memberof ObservableVector2d\n     * @param {Vector2d|ObservableVector2d} v\n     * @returns {number} The dot product.\n     */\n    dot(v) {\n        return this._x * v.x + this._y * v.y;\n    }\n\n    /**\n     * return the cross product of this vector and the passed one\n     * @name cross\n     * @memberof ObservableVector2d\n     * @param {Vector2d|ObservableVector2d} v\n     * @returns {number} The cross product.\n     */\n    cross(v) {\n        return this._x * v.y - this._y * v.x;\n    }\n\n    /**\n     * Linearly interpolate between this vector and the given one.\n     * @name lerp\n     * @memberof ObservableVector2d\n     * @param {Vector2d|ObservableVector2d} v\n     * @param {number} alpha - distance along the line (alpha = 0 will be this vector, and alpha = 1 will be the given one).\n     * @returns {ObservableVector2d} Reference to this object for method chaining\n     */\n    lerp(v, alpha) {\n        return this._set(\n            this._x + (v.x - this._x) * alpha,\n            this._y + (v.y - this._y) * alpha\n        );\n    }\n\n    /**\n     * interpolate the position of this vector towards the given one while nsure that the distance never exceeds the given step.\n     * @name moveTowards\n     * @memberof ObservableVector2d\n     * @param {Vector2d|ObservableVector2d} target\n     * @param {number} step - the maximum step per iteration (Negative values will push the vector away from the target)\n     * @returns {ObservableVector2d} Reference to this object for method chaining\n     */\n    moveTowards(target, step) {\n        let angle = Math.atan2(target.y - this._y, target.x - this._x);\n\n        let distance = this.distance(target);\n\n        if (distance === 0 || (step >= 0 && distance <= step * step)) {\n            return target;\n        }\n\n        this._x += Math.cos(angle) * step;\n        this._y += Math.sin(angle) * step;\n\n        return this;\n    }\n\n    /**\n     * return the distance between this vector and the passed one\n     * @name distance\n     * @memberof ObservableVector2d\n     * @param {ObservableVector2d} v\n     * @returns {number}\n     */\n    distance(v) {\n        return Math.sqrt((this._x - v.x) * (this._x - v.x) + (this._y - v.y) * (this._y - v.y));\n    }\n\n    /**\n     * return a clone copy of this vector\n     * @name clone\n     * @memberof ObservableVector2d\n     * @returns {ObservableVector2d} new me.ObservableVector2d\n     */\n    clone() {\n        return pool.pull(\"ObservableVector2d\", this._x, this._y, {onUpdate: this.onUpdate, scope: this.scope});\n    }\n\n    /**\n     * return a `me.Vector2d` copy of this `me.ObservableVector2d` object\n     * @name toVector2d\n     * @memberof ObservableVector2d\n     * @returns {Vector2d} new me.Vector2d\n     */\n    toVector2d() {\n        return pool.pull(\"Vector2d\", this._x, this._y);\n    }\n\n    /**\n     * convert the object to a string representation\n     * @name toString\n     * @memberof ObservableVector2d\n     * @returns {string}\n     */\n    toString() {\n        return \"x:\" + this._x + \",y:\" + this._y;\n    }\n}\n\n/**\n * additional import for TypeScript\n * @import ObservableVector2d from \"./observable_vector2.js\";\n * @import Vector2d from \"./vector2.js\";\n */\n\n/**\n * @classdesc\n * A Vector3d object that provide notification by executing the given callback when the vector is changed.\n * @augments Vector3d\n */\nclass ObservableVector3d extends Vector3d {\n    /**\n     * @param {number} x - x value of the vector\n     * @param {number} y - y value of the vector\n     * @param {number} z - z value of the vector\n     * @param {object} settings - additional required parameters\n     * @param {Function} settings.onUpdate - the callback to be executed when the vector is changed\n     * @param {object} [settings.scope] - the value to use as this when calling onUpdate\n     */\n    constructor(x = 0, y = 0, z = 0, settings) {\n        super(x, y, z);\n        if (typeof(settings) === \"undefined\") {\n            throw new Error(\n                \"undefined `onUpdate` callback\"\n            );\n        }\n        this.setCallback(settings.onUpdate, settings.scope);\n    }\n\n    /**\n     * @ignore\n     */\n    onResetEvent(x = 0, y = 0, z = 0, settings) {\n        // init is call by the constructor and does not trigger the cb\n        this.setMuted(x, y, z);\n        if (typeof settings !== \"undefined\") {\n            this.setCallback(settings.onUpdate, settings.scope);\n        }\n        return this;\n    }\n\n    /**\n     * x value of the vector\n     * @public\n     * @type {number}\n     * @name x\n     * @memberof ObservableVector3d\n     */\n\n    get x() {\n        return this._x;\n    }\n\n    set x(value) {\n        let ret = this.onUpdate.call(this.scope, value, this._y, this._z, this._x, this._y, this._z);\n        if (ret && \"x\" in ret) {\n            this._x = ret.x;\n        } else {\n            this._x = value;\n        }\n    }\n\n    /**\n     * y value of the vector\n     * @public\n     * @type {number}\n     * @name y\n     * @memberof ObservableVector3d\n     */\n\n    get y() {\n        return this._y;\n    }\n\n    set y(value) {\n        let ret = this.onUpdate.call(this.scope, this._x, value, this._z, this._x, this._y, this._z);\n        if (ret && \"y\" in ret) {\n            this._y = ret.y;\n        } else {\n            this._y = value;\n        }\n    }\n\n\n    /**\n     * z value of the vector\n     * @public\n     * @type {number}\n     * @name z\n     * @memberof ObservableVector3d\n     */\n\n\n    get z() {\n        return this._z;\n    }\n\n    set z(value) {\n        let ret = this.onUpdate.call(this.scope, this._x, this._y, value, this._x, this._y, this._z);\n        if (ret && \"z\" in ret) {\n            this._z = ret.z;\n        } else {\n            this._z = value;\n        }\n    }\n\n    /**\n     * @ignore\n     */\n    _set(x, y, z) {\n        let ret = this.onUpdate.call(this.scope, x, y, z, this._x, this._y, this._z);\n        if (ret && \"x\" in ret && \"y\" in ret && \"z\" in ret) {\n            this._x = ret.x;\n            this._y = ret.y;\n            this._z = ret.z;\n        } else {\n            this._x = x;\n            this._y = y;\n            this._z = z || 0;\n        }\n        return this;\n    }\n\n    /**\n     * set the vector value without triggering the callback\n     * @name setMuted\n     * @memberof ObservableVector3d\n     * @param {number} x - x value of the vector\n     * @param {number} y - y value of the vector\n     * @param {number} [z=0] - z value of the vector\n     * @returns {ObservableVector3d} Reference to this object for method chaining\n     */\n    setMuted(x, y, z) {\n        this._x = x;\n        this._y = y;\n        this._z = z || 0;\n        return this;\n    }\n\n    /**\n     * set the callback to be executed when the vector is changed\n     * @name setCallback\n     * @memberof ObservableVector3d\n     * @param {Function} fn - callback\n     * @param {Function} [scope=null] - scope\n     * @returns {ObservableVector3d} Reference to this object for method chaining\n     */\n    setCallback(fn, scope = null) {\n        if (typeof(fn) !== \"function\") {\n            throw new Error(\n                \"invalid `onUpdate` callback\"\n            );\n        }\n        this.onUpdate = fn;\n        this.scope = scope;\n        return this;\n    }\n\n    /**\n     * Add the passed vector to this vector\n     * @name add\n     * @memberof ObservableVector3d\n     * @param {Vector2d|Vector3d|ObservableVector2d|ObservableVector3d} v\n     * @returns {ObservableVector3d} Reference to this object for method chaining\n     */\n    add(v) {\n        return this._set(this._x + v.x, this._y + v.y, this._z + (v.z || 0));\n    }\n\n    /**\n     * Substract the passed vector to this vector\n     * @name sub\n     * @memberof ObservableVector3d\n     * @param {Vector2d|Vector3d|ObservableVector2d|ObservableVector3d} v\n     * @returns {ObservableVector3d} Reference to this object for method chaining\n     */\n    sub(v) {\n        return this._set(this._x - v.x, this._y - v.y, this._z - (v.z || 0));\n    }\n\n    /**\n     * Multiply this vector values by the given scalar\n     * @name scale\n     * @memberof ObservableVector3d\n     * @param {number} x\n     * @param {number} [y=x]\n     * @param {number} [z=1]\n     * @returns {ObservableVector3d} Reference to this object for method chaining\n     */\n    scale(x, y = x, z = 1) {\n        return this._set(this._x * x, this._y * y, this._z * z);\n    }\n\n    /**\n     * Multiply this vector values by the passed vector\n     * @name scaleV\n     * @memberof ObservableVector3d\n     * @param {Vector2d|Vector3d|ObservableVector2d|ObservableVector3d} v\n     * @returns {ObservableVector3d} Reference to this object for method chaining\n     */\n    scaleV(v) {\n        return this._set(this._x * v.x, this._y * v.y, this._z * (v.z || 1));\n    }\n\n    /**\n     * Divide this vector values by the passed value\n     * @name div\n     * @memberof ObservableVector3d\n     * @param {number} n - the value to divide the vector by\n     * @returns {ObservableVector3d} Reference to this object for method chaining\n     */\n    div(n) {\n        return this._set(this._x / n, this._y / n, this._z / n);\n    }\n\n    /**\n     * Update this vector values to absolute values\n     * @name abs\n     * @memberof ObservableVector3d\n     * @returns {ObservableVector3d} Reference to this object for method chaining\n     */\n    abs() {\n        return this._set(\n            (this._x < 0) ? -this._x : this._x,\n            (this._y < 0) ? -this._y : this._y,\n            (this._Z < 0) ? -this._z : this._z\n        );\n    }\n\n    /**\n     * Clamp the vector value within the specified value range\n     * @name clamp\n     * @memberof ObservableVector3d\n     * @param {number} low\n     * @param {number} high\n     * @returns {ObservableVector3d} new me.ObservableVector3d\n     */\n    clamp(low, high) {\n        return new ObservableVector3d(\n            clamp(this._x, low, high),\n            clamp(this._y, low, high),\n            clamp(this._z, low, high),\n            {onUpdate: this.onUpdate, scope: this.scope}\n        );\n    }\n\n    /**\n     * Clamp this vector value within the specified value range\n     * @name clampSelf\n     * @memberof ObservableVector3d\n     * @param {number} low\n     * @param {number} high\n     * @returns {ObservableVector3d} Reference to this object for method chaining\n     */\n    clampSelf(low, high) {\n        return this._set(\n            clamp(this._x, low, high),\n            clamp(this._y, low, high),\n            clamp(this._z, low, high)\n        );\n    }\n\n    /**\n     * Update this vector with the minimum value between this and the passed vector\n     * @name minV\n     * @memberof ObservableVector3d\n     * @param {Vector2d|Vector3d|ObservableVector2d|ObservableVector3d} v\n     * @returns {ObservableVector3d} Reference to this object for method chaining\n     */\n    minV(v) {\n        let _vz = v.z || 0;\n        return this._set(\n            (this._x < v.x) ? this._x : v.x,\n            (this._y < v.y) ? this._y : v.y,\n            (this._z < _vz) ? this._z : _vz\n        );\n    }\n\n    /**\n     * Update this vector with the maximum value between this and the passed vector\n     * @name maxV\n     * @memberof ObservableVector3d\n     * @param {Vector2d|Vector3d|ObservableVector2d|ObservableVector3d} v\n     * @returns {ObservableVector3d} Reference to this object for method chaining\n     */\n    maxV(v) {\n        let _vz = v.z || 0;\n        return this._set(\n            (this._x > v.x) ? this._x : v.x,\n            (this._y > v.y) ? this._y : v.y,\n            (this._z > _vz) ? this._z : _vz\n        );\n    }\n\n    /**\n     * Floor the vector values\n     * @name floor\n     * @memberof ObservableVector3d\n     * @returns {ObservableVector3d} new me.ObservableVector3d\n     */\n    floor() {\n        return new ObservableVector3d(\n            Math.floor(this._x),\n            Math.floor(this._y),\n            Math.floor(this._z),\n            {onUpdate: this.onUpdate, scope: this.scope}\n        );\n    }\n\n    /**\n     * Floor this vector values\n     * @name floorSelf\n     * @memberof ObservableVector3d\n     * @returns {ObservableVector3d} Reference to this object for method chaining\n     */\n    floorSelf() {\n        return this._set(Math.floor(this._x), Math.floor(this._y), Math.floor(this._z));\n    }\n\n    /**\n     * Ceil the vector values\n     * @name ceil\n     * @memberof ObservableVector3d\n     * @returns {ObservableVector3d} new me.ObservableVector3d\n     */\n    ceil() {\n        return new ObservableVector3d(\n            Math.ceil(this._x),\n            Math.ceil(this._y),\n            Math.ceil(this._z),\n            {onUpdate: this.onUpdate, scope: this.scope}\n        );\n    }\n\n    /**\n     * Ceil this vector values\n     * @name ceilSelf\n     * @memberof ObservableVector3d\n     * @returns {ObservableVector3d} Reference to this object for method chaining\n     */\n    ceilSelf() {\n        return this._set(Math.ceil(this._x), Math.ceil(this._y), Math.ceil(this._z));\n    }\n\n    /**\n     * Negate the vector values\n     * @name negate\n     * @memberof ObservableVector3d\n     * @returns {ObservableVector3d} new me.ObservableVector3d\n     */\n    negate() {\n        return new ObservableVector3d(\n            -this._x,\n            -this._y,\n            -this._z,\n            {onUpdate: this.onUpdate, scope: this.scope}\n        );\n    }\n\n    /**\n     * Negate this vector values\n     * @name negateSelf\n     * @memberof ObservableVector3d\n     * @returns {ObservableVector3d} Reference to this object for method chaining\n     */\n    negateSelf() {\n        return this._set(-this._x, -this._y, -this._z);\n    }\n\n    /**\n     * Copy the components of the given vector into this one\n     * @name copy\n     * @memberof ObservableVector3d\n     * @param {Vector2d|Vector3d|ObservableVector2d|ObservableVector3d} v\n     * @returns {ObservableVector3d} Reference to this object for method chaining\n     */\n    copy(v) {\n        return this._set(v.x, v.y, v.z || 0);\n    }\n\n    /**\n     * return true if the two vectors are the same\n     * @name equals\n     * @memberof ObservableVector3d\n     * @param {Vector2d|Vector3d|ObservableVector2d|ObservableVector3d} v\n     * @returns {boolean}\n     */\n    equals(v) {\n        return ((this._x === v.x) && (this._y === v.y) && (this._z === (v.z || this._z)));\n    }\n\n    /**\n     * change this vector to be perpendicular to what it was before.<br>\n     * (Effectively rotates it 90 degrees in a clockwise direction)\n     * @name perp\n     * @memberof ObservableVector3d\n     * @returns {ObservableVector3d} Reference to this object for method chaining\n     */\n    perp() {\n        return this._set(this._y, -this._x, this._z);\n    }\n\n    /**\n     * Rotate this vector (counter-clockwise) by the specified angle (in radians).\n     * @name rotate\n     * @memberof ObservableVector3d\n     * @param {number} angle - The angle to rotate (in radians)\n     * @param {Vector2d|ObservableVector2d} [v] - an optional point to rotate around (on the same z axis)\n     * @returns {ObservableVector3d} Reference to this object for method chaining\n     */\n    rotate(angle, v) {\n        let cx = 0;\n        let cy = 0;\n\n        if (typeof v === \"object\") {\n            cx = v.x;\n            cy = v.y;\n        }\n\n        // TODO also rotate on the z axis if the given vector is a 3d one\n        let x = this.x - cx;\n        let y = this.y - cy;\n\n        let c = Math.cos(angle);\n        let s = Math.sin(angle);\n\n        return this._set(x * c - y * s + cx, x * s + y * c + cy, this.z);\n    }\n\n    /**\n     * return the dot product of this vector and the passed one\n     * @name dot\n     * @memberof ObservableVector3d\n     * @param {Vector2d|Vector3d|ObservableVector2d|ObservableVector3d} v\n     * @returns {number} The dot product.\n     */\n    dot(v) {\n        return this._x * v.x + this._y * v.y + this._z * (v.z || 1);\n    }\n\n    /**\n     * calculate the cross product of this vector and the passed one\n     * @name cross\n     * @memberof ObservableVector3d\n     * @param {Vector3d|ObservableVector3d} v\n     * @returns {ObservableVector3d} Reference to this object for method chaining\n     */\n    cross(v) {\n        let ax = this._x, ay = this._y, az = this._z;\n        let bx = v.x, by = v.y, bz = v.z;\n\n        return this._set(\n            ay * bz - az * by,\n            az * bx - ax * bz,\n            ax * by - ay * bx\n        );\n    }\n\n    /**\n     * Linearly interpolate between this vector and the given one.\n     * @name lerp\n     * @memberof ObservableVector3d\n     * @param {Vector3d|ObservableVector3d} v\n     * @param {number} alpha - distance along the line (alpha = 0 will be this vector, and alpha = 1 will be the given one).\n     * @returns {ObservableVector3d} Reference to this object for method chaining\n     */\n    lerp(v, alpha) {\n        return this._set(\n            this._x + (v.x - this._x) * alpha,\n            this._y + (v.y - this._y) * alpha,\n            this._z + (v.z - this._z) * alpha\n        );\n    }\n\n    /**\n     * interpolate the position of this vector on the x and y axis towards the given one while ensure that the distance never exceeds the given step.\n     * @name moveTowards\n     * @memberof ObservableVector3d\n     * @param {Vector2d|ObservableVector2d|Vector3d|ObservableVector3d} target\n     * @param {number} step - the maximum step per iteration (Negative values will push the vector away from the target)\n     * @returns {ObservableVector3d} Reference to this object for method chaining\n     */\n    moveTowards(target, step) {\n        let angle = Math.atan2(target.y - this._y, target.x - this._x);\n\n        let dx = this._x - target.x;\n        let dy = this._y - target.y;\n\n        let distance = Math.sqrt(dx * dx + dy * dy);\n\n        if (distance === 0 || (step >= 0 && distance <= step * step)) {\n            return target;\n        }\n\n        return this._set(\n            this._x + Math.cos(angle) * step,\n            this._y + Math.sin(angle) * step,\n            this._z\n        );\n    }\n\n    /**\n     * return the distance between this vector and the passed one\n     * @name distance\n     * @memberof ObservableVector3d\n     * @param {Vector2d|Vector3d|ObservableVector2d|ObservableVector3d} v\n     * @returns {number}\n     */\n    distance(v) {\n        let dx = this._x - v.x;\n        let dy = this._y - v.y;\n        let dz = this._z - (v.z || 0);\n        return Math.sqrt(dx * dx + dy * dy + dz * dz);\n    }\n\n    /**\n     * return a clone copy of this vector\n     * @name clone\n     * @memberof ObservableVector3d\n     * @returns {ObservableVector3d} new me.ObservableVector3d\n     */\n    clone() {\n        return pool.pull(\"ObservableVector3d\",\n            this._x,\n            this._y,\n            this._z,\n            {onUpdate: this.onUpdate}\n        );\n    }\n\n    /**\n     * return a `me.Vector3d` copy of this `me.ObservableVector3d` object\n     * @name toVector3d\n     * @memberof ObservableVector3d\n     * @returns {Vector3d} new me.Vector3d\n     */\n    toVector3d() {\n        return pool.pull(\"Vector3d\", this._x, this._y, this._z);\n    }\n\n    /**\n     * convert the object to a string representation\n     * @name toString\n     * @memberof ObservableVector3d\n     * @returns {string}\n     */\n    toString() {\n        return \"x:\" + this._x + \",y:\" + this._y + \",z:\" + this._z;\n    }\n}\n\n/**\n * additional import for TypeScript\n * @import Matrix3d from \"./matrix3.js\";\n * @import Vector2d from \"./vector2.js\";\n * @import Vector3d from \"./vector3.js\";\n */\n\n\n/**\n * @classdesc\n * a Matrix2d Object.<br>\n * the identity matrix and parameters position : <br>\n * <img src=\"images/identity-matrix_2x.png\"/>\n */\nclass Matrix2d {\n    /**\n     * @param {(Matrix2d|Matrix3d|...number)} args - an instance of me.Matrix2d or me.Matrix3d to copy from, or individual matrix components (See {@link Matrix2d.setTransform}). If not arguments are given, the matrix will be set to Identity.\n     */\n    constructor(...args) {\n        this.onResetEvent(...args);\n    }\n\n    /**\n     * @ignore\n     */\n    onResetEvent() {\n        const arg0 = arguments[0];\n        const argLen = arguments.length;\n\n        if (typeof this.val === \"undefined\") {\n            this.val = new Float32Array(9);\n        }\n\n        if (argLen === 1) {\n            // matrix2d or matrix3d\n            if (arg0.val.length === 9) {\n                this.copy(arg0);\n            } else if (arg0.val.length === 16) {\n                this.fromMat3d(arguments[0]);\n            } else {\n                throw new Error(\"invalid Matrix2d constructor parameter\");\n            }\n        } else if (arguments.length >= 6) {\n            // individual components\n            this.setTransform.apply(this, arguments);\n        } else {\n            // invalid or no arguments\n            this.identity();\n        }\n    }\n\n    /**\n     * tx component of the matrix\n     * @type {number}\n     * @see Matrix2d.translate\n     */\n    get tx() {\n        return this.val[6];\n    }\n\n    /**\n     * ty component of the matrix\n     * @type {number}\n     * @see Matrix2d.translate\n     */\n    get ty() {\n        return this.val[7];\n    }\n\n    /**\n     * reset the transformation matrix to the identity matrix (no transformation).<br>\n     * the identity matrix and parameters position : <br>\n     * <img src=\"images/identity-matrix_2x.png\"/>\n     * @returns {Matrix2d} Reference to this object for method chaining\n     */\n    identity() {\n        this.setTransform(\n            1, 0, 0,\n            0, 1, 0,\n            0, 0, 1\n        );\n        return this;\n    }\n\n    /**\n     * set the matrix to the specified value\n     * @param {number} a\n     * @param {number} b\n     * @param {number} c\n     * @param {number} d\n     * @param {number} e\n     * @param {number} f\n     * @param {number} [g=0]\n     * @param {number} [h=0]\n     * @param {number} [i=1]\n     * @returns {Matrix2d} Reference to this object for method chaining\n     */\n    setTransform() {\n        let a = this.val;\n\n        if (arguments.length === 9) {\n            a[0] = arguments[0]; // a - m00\n            a[1] = arguments[1]; // b - m10\n            a[2] = arguments[2]; // c - m20\n            a[3] = arguments[3]; // d - m01\n            a[4] = arguments[4]; // e - m11\n            a[5] = arguments[5]; // f - m21\n            a[6] = arguments[6]; // g - m02\n            a[7] = arguments[7]; // h - m12\n            a[8] = arguments[8]; // i - m22\n        } else if (arguments.length === 6) {\n            a[0] = arguments[0]; // a\n            a[1] = arguments[2]; // c\n            a[2] = arguments[4]; // e\n            a[3] = arguments[1]; // b\n            a[4] = arguments[3]; // d\n            a[5] = arguments[5]; // f\n            a[6] = 0; // g\n            a[7] = 0; // h\n            a[8] = 1; // i\n        }\n\n        return this;\n    }\n\n    /**\n     * Multiplies the current transformation with the matrix described by the arguments of this method\n     * @param {number} a\n     * @param {number} b\n     * @param {number} c\n     * @param {number} d\n     * @param {number} e\n     * @param {number} f\n     * @returns {Matrix2d} Reference to this object for method chaining\n     */\n    transform(a, b, c, d, e, f) {\n        let v = this.val,\n            a0 = v[0],\n            a1 = v[1],\n            a3 = v[3],\n            a4 = v[4],\n\n            b0 = a,\n            b1 = b,\n            b3 = c,\n            b4 = d,\n            b6 = e,\n            b7 = f;\n\n        v[0] = a0 * b0 + a3 * b1;\n        v[1] = a1 * b0 + a4 * b1;\n        v[3] = a0 * b3 + a3 * b4;\n        v[4] = a1 * b3 + a4 * b4;\n        v[6] += a0 * b6 + a3 * b7;\n        v[7] += a1 * b6 + a4 * b7;\n\n        return this;\n    }\n\n    /**\n     * Copies over the values from another me.Matrix2d.\n     * @param {Matrix2d} m - the matrix object to copy from\n     * @returns {Matrix2d} Reference to this object for method chaining\n     */\n    copy(m) {\n        this.val.set(m.val);\n        return this;\n    }\n\n    /**\n     * Copies over the upper-left 3x3 values from the given me.Matrix3d\n     * @param {Matrix3d} m - the matrix object to copy from\n     * @returns {Matrix2d} Reference to this object for method chaining\n     */\n    fromMat3d(m) {\n        let b = m.val;\n        let a = this.val;\n\n        a[0] = b[0];\n        a[1] = b[1];\n        a[2] = b[2];\n        a[3] = b[4];\n        a[4] = b[5];\n        a[5] = b[6];\n        a[6] = b[8];\n        a[7] = b[9];\n        a[8] = b[10];\n\n        return this;\n    }\n\n    /**\n     * multiply both matrix\n     * @param {Matrix2d} m - the other matrix\n     * @returns {Matrix2d} Reference to this object for method chaining\n     */\n    multiply(m) {\n        let b = m.val;\n        let a = this.val,\n            a0 = a[0],\n            a1 = a[1],\n            a3 = a[3],\n            a4 = a[4],\n            b0 = b[0],\n            b1 = b[1],\n            b3 = b[3],\n            b4 = b[4],\n            b6 = b[6],\n            b7 = b[7];\n\n        a[0] = a0 * b0 + a3 * b1;\n        a[1] = a1 * b0 + a4 * b1;\n        a[3] = a0 * b3 + a3 * b4;\n        a[4] = a1 * b3 + a4 * b4;\n        a[6] += a0 * b6 + a3 * b7;\n        a[7] += a1 * b6 + a4 * b7;\n\n        return this;\n    }\n\n    /**\n     * Transpose the value of this matrix.\n     * @returns {Matrix2d} Reference to this object for method chaining\n     */\n    transpose() {\n        let a = this.val,\n            a1 = a[1],\n            a2 = a[2],\n            a5 = a[5];\n\n        a[1] = a[3];\n        a[2] = a[6];\n        a[3] = a1;\n        a[5] = a[7];\n        a[6] = a2;\n        a[7] = a5;\n\n        return this;\n    }\n\n    /**\n     * invert this matrix, causing it to apply the opposite transformation.\n     * @returns {Matrix2d} Reference to this object for method chaining\n     */\n    invert() {\n        let val = this.val;\n\n        let a = val[ 0 ], b = val[ 1 ], c = val[ 2 ],\n            d = val[ 3 ], e = val[ 4 ], f = val[ 5 ],\n            g = val[ 6 ], h = val[ 7 ], i = val[ 8 ];\n\n        let ta = i * e - f * h,\n            td = f * g - i * d,\n            tg = h * d - e * g;\n\n        let n = a * ta + b * td + c * tg;\n\n        val[ 0 ] = ta / n;\n        val[ 1 ] = (c * h - i * b) / n;\n        val[ 2 ] = (f * b - c * e) / n;\n\n        val[ 3 ] = td / n;\n        val[ 4 ] = (i * a - c * g) / n;\n        val[ 5 ] = (c * d - f * a) / n;\n\n        val[ 6 ] = tg / n;\n        val[ 7 ] = (b * g - h * a) / n;\n        val[ 8 ] = (e * a - b * d) / n;\n\n        return this;\n    }\n\n    /**\n    * apply the current transform to the given 2d or 3d vector\n    * @param {Vector2d|Vector3d} v - the vector object to be transformed\n    * @returns {Vector2d|Vector3d} result vector object.\n    */\n    apply(v) {\n        let a = this.val,\n            x = v.x,\n            y = v.y,\n            z = (typeof v.z !== \"undefined\") ? v.z : 1;\n\n        v.x = x * a[0] + y * a[3] + z * a[6];\n        v.y = x * a[1] + y * a[4] + z * a[7];\n\n        if (typeof v.z !== \"undefined\") {\n            v.z = x * a[2] + y * a[5] + z * a[8];\n        }\n\n        return v;\n    }\n\n    /**\n     * apply the inverted current transform to the given 2d vector\n     * @param {Vector2d} v - the vector object to be transformed\n     * @returns {Vector2d} result vector object.\n     */\n    applyInverse(v) {\n        let a = this.val,\n            x = v.x,\n            y = v.y;\n\n        let invD = 1 / ((a[0] * a[4]) + (a[3] * -a[1]));\n\n        v.x = (a[4] * invD * x) + (-a[3] * invD * y) + (((a[7] * a[3]) - (a[6] * a[4])) * invD);\n        v.y = (a[0] * invD * y) + (-a[1] * invD * x) + (((-a[7] * a[0]) + (a[6] * a[1])) * invD);\n\n        return v;\n    }\n\n    /**\n     * scale the matrix\n     * @param {number} x - a number representing the abscissa of the scaling vector.\n     * @param {number} [y=x] - a number representing the ordinate of the scaling vector.\n     * @returns {Matrix2d} Reference to this object for method chaining\n     */\n    scale(x, y = x) {\n        let a = this.val;\n\n        a[0] *= x;\n        a[1] *= x;\n        //a[2] *= x; // z axis remains unchanged for 2d scale operation\n\n        a[3] *= y;\n        a[4] *= y;\n        //a[5] *= y; // w axis remains unchanged for 2d scale operation\n\n        return this;\n    }\n\n    /**\n     * adds a 2D scaling transformation.\n     * @param {Vector2d} v - scaling vector\n     * @returns {Matrix2d} Reference to this object for method chaining\n     */\n    scaleV(v) {\n        return this.scale(v.x, v.y);\n    }\n\n    /**\n     * specifies a 2D scale operation using the [sx, 1] scaling vector\n     * @param {number} x - x scaling vector\n     * @returns {Matrix2d} Reference to this object for method chaining\n     */\n    scaleX(x) {\n        return this.scale(x, 1);\n    }\n\n    /**\n     * specifies a 2D scale operation using the [1,sy] scaling vector\n     * @param {number} y - y scaling vector\n     * @returns {Matrix2d} Reference to this object for method chaining\n     */\n    scaleY(y) {\n        return this.scale(1, y);\n    }\n\n    /**\n     * rotate the matrix (counter-clockwise) by the specified angle (in radians).\n     * @param {number} angle - Rotation angle in radians.\n     * @returns {Matrix2d} Reference to this object for method chaining\n     */\n    rotate(angle) {\n        if (angle !== 0) {\n            let a = this.val,\n                a00 = a[0],\n                a01 = a[1],\n                a02 = a[2],\n                a10 = a[3],\n                a11 = a[4],\n                a12 = a[5],\n                s = Math.sin(angle),\n                c = Math.cos(angle);\n\n            a[0] = c * a00 + s * a10;\n            a[1] = c * a01 + s * a11;\n            a[2] = c * a02 + s * a12;\n\n            a[3] = c * a10 - s * a00;\n            a[4] = c * a11 - s * a01;\n            a[5] = c * a12 - s * a02;\n        }\n        return this;\n    }\n\n    /**\n     * translate the matrix position on the horizontal and vertical axis\n     * @param {number|Vector2d} x - the x coordindates or a vector to translate the matrix by\n     * @param {number} [y] - the y coordindates to translate the matrix by\n     * @returns {Matrix2d} Reference to this object for method chaining\n     */\n    translate() {\n        let a = this.val;\n        let _x, _y;\n\n        if (arguments.length === 2) {\n            // x, y\n            _x = arguments[0];\n            _y = arguments[1];\n        } else {\n            // vector\n            _x = arguments[0].x;\n            _y = arguments[0].y;\n        }\n\n        a[6] += a[0] * _x + a[3] * _y;\n        a[7] += a[1] * _x + a[4] * _y;\n\n        return this;\n    }\n\n    /**\n     * returns true if the matrix is an identity matrix.\n     * @returns {boolean}\n     */\n    isIdentity() {\n        let a = this.val;\n\n        return (\n            a[0] === 1 &&\n            a[1] === 0 &&\n            a[2] === 0 &&\n            a[3] === 0 &&\n            a[4] === 1 &&\n            a[5] === 0 &&\n            a[6] === 0 &&\n            a[7] === 0 &&\n            a[8] === 1\n        );\n    }\n\n    /**\n     * return true if the two matrices are identical\n     * @param {Matrix2d} m - the other matrix\n     * @returns {boolean} true if both are equals\n     */\n    equals(m) {\n        let b = m.val;\n        let a = this.val;\n\n        return (\n            (a[0] === b[0]) &&\n            (a[1] === b[1]) &&\n            (a[2] === b[2]) &&\n            (a[3] === b[3]) &&\n            (a[4] === b[4]) &&\n            (a[5] === b[5]) &&\n            (a[6] === b[6]) &&\n            (a[7] === b[7]) &&\n            (a[8] === b[8])\n        );\n    }\n\n    /**\n     * Clone the Matrix\n     * @returns {Matrix2d}\n     */\n    clone() {\n        return pool.pull(\"Matrix2d\", this);\n    }\n\n    /**\n     * return an array representation of this Matrix\n     * @returns {Float32Array}\n     */\n    toArray() {\n        return this.val;\n    }\n\n    /**\n     * convert the object to a string representation\n     * @returns {string}\n     */\n    toString() {\n        let a = this.val;\n\n        return \"me.Matrix2d(\" +\n            a[0] + \", \" + a[1] + \", \" + a[2] + \", \" +\n            a[3] + \", \" + a[4] + \", \" + a[5] + \", \" +\n            a[6] + \", \" + a[7] + \", \" + a[8] +\n        \")\";\n    }\n}\n\n/**\n * additional import for TypeScript\n * @import Matrix2d from \"./matrix2.js\";\n * @import Vector2d from \"./vector2.js\";\n * @import Vector3d from \"./vector3.js\";\n */\n\n/**\n * @classdesc\n * a 4x4 Matrix3d Object\n */\nclass Matrix3d {\n    /**\n     * @param {(Matrix3d|...number)} args - An instance of me.Matrix3d to copy from, or individual Matrix components (See {@link Matrix3d.setTransform}). If not arguments are given, the matrix will be set to Identity.\n     */\n    constructor(...args) {\n        this.onResetEvent(...args);\n    }\n\n    /**\n     * @ignore\n     */\n    onResetEvent() {\n        const arg0 = arguments[0];\n        const argLen = arguments.length;\n\n        if (typeof this.val === \"undefined\") {\n            this.val = new Float32Array(16);\n        }\n\n        if (argLen === 1 && arg0.val.length === 16) {\n            // matrix3d\n            this.copy(arg0);\n        } else if (argLen === 16) {\n            // individual components\n            this.setTransform.apply(this, arguments);\n        } else {\n            // invalid or no arguments\n            this.identity();\n        }\n    }\n\n    /**\n     * tx component of the matrix\n     * @type {number}\n     */\n    get tx() {\n        return this.val[12];\n    }\n\n    /**\n     * ty component of the matrix\n     * @type {number}\n     */\n    get ty() {\n        return this.val[13];\n    }\n\n    /**\n     * ty component of the matrix\n     * @type {number}\n     */\n    get tz() {\n        return this.val[14];\n    }\n\n    /**\n     * reset the transformation matrix to the identity matrix (no transformation).<br>\n     * the identity matrix and parameters position : <br>\n     * <img src=\"images/identity-matrix_2x.png\"/>\n     * @returns {Matrix3d} Reference to this object for method chaining\n     */\n    identity() {\n        return this.setTransform(\n            1, 0, 0, 0,\n            0, 1, 0, 0,\n            0, 0, 1, 0,\n            0, 0, 0, 1\n        );\n    }\n\n    /**\n     * set the matrix to the specified value\n     * @param {number} m00\n     * @param {number} m01\n     * @param {number} m02\n     * @param {number} m03\n     * @param {number} m10\n     * @param {number} m11\n     * @param {number} m12\n     * @param {number} m13\n     * @param {number} m20\n     * @param {number} m21\n     * @param {number} m22\n     * @param {number} m23\n     * @param {number} m30\n     * @param {number} m31\n     * @param {number} m32\n     * @param {number} m33\n     * @returns {Matrix3d} Reference to this object for method chaining\n     */\n    setTransform(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n        let a = this.val;\n\n        a[0] = m00;\n        a[1] = m01;\n        a[2] = m02;\n        a[3] = m03;\n        a[4] = m10;\n        a[5] = m11;\n        a[6] = m12;\n        a[7] = m13;\n        a[8] = m20;\n        a[9] = m21;\n        a[10] = m22;\n        a[11] = m23;\n        a[12] = m30;\n        a[13] = m31;\n        a[14] = m32;\n        a[15] = m33;\n\n        return this;\n    }\n\n    /**\n     * Copies over the values from another me.Matrix3d.\n     * @param {Matrix3d} m - the matrix object to copy from\n     * @returns {Matrix3d} Reference to this object for method chaining\n     */\n    copy(m) {\n        this.val.set(m.val);\n        return this;\n    }\n\n    /**\n     * Copies over the upper-left 2x2 values from the given me.Matrix2d\n     * @param {Matrix2d} m - the matrix object to copy from\n     * @returns {Matrix2d} Reference to this object for method chaining\n     */\n    fromMat2d(m) {\n        let b = m.val;\n        return this.setTransform(\n            b[0], b[3], b[6], 0,\n            b[1], b[4], b[7], 0,\n            b[2], b[5], b[8], 0,\n            0,    0,    0,    1\n\n        );\n    }\n\n    /**\n     * multiply both matrix\n     * @param {Matrix3d} m - Other matrix\n     * @returns {Matrix3d} Reference to this object for method chaining\n     */\n    multiply(m) {\n        let a = this.val;\n        let b = m.val;\n\n        let a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];\n        let a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];\n        let a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];\n        let a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\n        let b0 = b[0], b1 = b[1], b2 = b[2], b3 = b[3];\n\n        a[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n        a[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n        a[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n        a[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n\n        b0 = b[4];\n        b1 = b[5];\n        b2 = b[6];\n        b3 = b[7];\n\n        a[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n        a[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n        a[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n        a[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n\n        b0 = b[8];\n        b1 = b[9];\n        b2 = b[10];\n        b3 = b[11];\n\n        a[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n        a[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n        a[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n        a[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n\n        b0 = b[12];\n        b1 = b[13];\n        b2 = b[14];\n        b3 = b[15];\n\n        a[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n        a[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n        a[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n        a[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n\n        return this;\n    }\n\n    /**\n     * Transpose the value of this matrix.\n     * @returns {Matrix3d} Reference to this object for method chaining\n     */\n    transpose() {\n        let a = this.val,\n            a01 = a[1],\n            a02 = a[2],\n            a03 = a[3],\n            a12 = a[6],\n            a13 = a[7],\n            a23 = a[11];\n\n        a[1] = a[4];\n        a[2] = a[8];\n        a[3] = a[12];\n        a[4] = a01;\n        a[6] = a[9];\n        a[7] = a[13];\n        a[8] = a02;\n        a[9] = a12;\n        a[11] = a[14];\n        a[12] = a03;\n        a[13] = a13;\n        a[14] = a23;\n\n        return this;\n    }\n\n    /**\n     * invert this matrix, causing it to apply the opposite transformation.\n     * @returns {Matrix3d} Reference to this object for method chaining\n     */\n    invert() {\n        let a = this.val;\n\n        let a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];\n        let a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];\n        let a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];\n        let a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\n\n        let b00 = a00 * a11 - a01 * a10;\n        let b01 = a00 * a12 - a02 * a10;\n        let b02 = a00 * a13 - a03 * a10;\n        let b03 = a01 * a12 - a02 * a11;\n\n        let b04 = a01 * a13 - a03 * a11;\n        let b05 = a02 * a13 - a03 * a12;\n        let b06 = a20 * a31 - a21 * a30;\n        let b07 = a20 * a32 - a22 * a30;\n\n        let b08 = a20 * a33 - a23 * a30;\n        let b09 = a21 * a32 - a22 * a31;\n        let b10 = a21 * a33 - a23 * a31;\n        let b11 = a22 * a33 - a23 * a32;\n\n        // Calculate the determinant\n        let det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n        if (!det)\n        {\n            return null;\n        }\n\n        det = 1 / det;\n\n        a[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n        a[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n        a[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n        a[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n        a[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n        a[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n        a[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n        a[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n        a[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n        a[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n        a[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n        a[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n        a[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n        a[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n        a[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n        a[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n\n        return this;\n    }\n\n    /**\n     * apply the current transform to the given 2d or 3d vector\n     * @param {Vector2d|Vector3d} v - the vector object to be transformed\n     * @returns {Vector2d|Vector3d} result vector object.\n     */\n    apply(v) {\n        let a = this.val,\n            x = v.x,\n            y = v.y,\n            z = (typeof v.z !== \"undefined\") ? v.z : 1;\n\n        let w = (a[3] * x + a[7] * y + a[11] * z + a[15]) || 1.0;\n\n        v.x = (a[0] * x + a[4] * y + a[8] * z + a[12]) / w;\n        v.y = (a[1] * x + a[5] * y + a[9] * z + a[13]) / w;\n\n        if (typeof v.z !== \"undefined\") {\n            v.z = (a[2] * x + a[6] * y + a[10] * z + a[14]) / w;\n        }\n\n        return v;\n    }\n\n    /**\n      * apply the inverted current transform to the given 2d or 3d vector\n      * @param {Vector2d|Vector3d} v - the vector object to be transformed\n      * @returns {Vector2d|Vector3d} result vector object.\n      */\n    applyInverse(v) {\n        // invert the current matrix\n        let im = pool.pull(\"Matrix3d\", this).invert();\n\n        // apply the inverted matrix\n        im.apply(v);\n\n        pool.push(im);\n\n        return v;\n    }\n\n    /**\n     * generate an orthogonal projection matrix, with the result replacing the current matrix\n     * <img src=\"images/glOrtho.gif\"/><br>\n     * @param {number} left - farthest left on the x-axis\n     * @param {number} right - farthest right on the x-axis\n     * @param {number} bottom - farthest down on the y-axis\n     * @param {number} top - farthest up on the y-axis\n     * @param {number} near - distance to the near clipping plane along the -Z axis\n     * @param {number} far - distance to the far clipping plane along the -Z axis\n     * @returns {Matrix3d} Reference to this object for method chaining\n     */\n    ortho(left, right, bottom, top, near, far) {\n        let a = this.val;\n        let leftRight = 1.0 / (left - right);\n        let bottomTop = 1.0 / (bottom - top);\n        let nearFar = 1.0 / (near - far);\n\n        a[0] = -2.0 * leftRight;\n        a[1] = 0.0;\n        a[2] = 0.0;\n        a[3] = 0.0;\n        a[4] = 0.0;\n        a[5] = -2.0 * bottomTop;\n        a[6] = 0.0;\n        a[7] = 0.0;\n        a[8] = 0.0;\n        a[9] = 0.0;\n        a[10] = 2.0 * nearFar;\n        a[11] = 0.0;\n        a[12] = (left + right) * leftRight;\n        a[13] = (top + bottom) * bottomTop;\n        a[14] = (far + near) * nearFar;\n        a[15] = 1.0;\n\n        return this;\n    }\n\n    /**\n     * scale the matrix\n     * @param {number} x - a number representing the abscissa of the scaling vector.\n     * @param {number} [y=x] - a number representing the ordinate of the scaling vector.\n     * @param {number} [z=0] - a number representing the depth vector\n     * @returns {Matrix3d} Reference to this object for method chaining\n     */\n    scale(x, y = x, z = 0) {\n        let a = this.val;\n\n        a[0] = a[0] * x;\n        a[1] = a[1] * x;\n        a[2] = a[2] * x;\n        a[3] = a[3] * x;\n\n        a[4] = a[4] * y;\n        a[5] = a[5] * y;\n        a[6] = a[6] * y;\n        a[7] = a[7] * y;\n\n        a[8] = a[8] * z;\n        a[9] = a[9] * z;\n        a[10] = a[10] * z;\n        a[11] = a[11] * z;\n\n        return this;\n    }\n\n    /**\n     * adds a 2D scaling transformation.\n     * @param {Vector2d|Vector3d} v - scaling vector\n     * @returns {Matrix3d} Reference to this object for method chaining\n     */\n    scaleV(v) {\n        return this.scale(v.x, v.y, v.z);\n    }\n\n    /**\n     * specifies a 2D scale operation using the [sx, 1] scaling vector\n     * @param {number} x - x scaling vector\n     * @returns {Matrix3d} Reference to this object for method chaining\n     */\n    scaleX(x) {\n        return this.scale(x, 1);\n    }\n\n    /**\n     * specifies a 2D scale operation using the [1,sy] scaling vector\n     * @param {number} y - y scaling vector\n     * @returns {Matrix3d} Reference to this object for method chaining\n     */\n    scaleY(y) {\n        return this.scale(1, y);\n    }\n\n    /**\n     * rotate this matrix (counter-clockwise) by the specified angle (in radians).\n     * @param {number} angle - Rotation angle in radians.\n     * @param {Vector3d} v - the axis to rotate around\n     * @returns {Matrix3d} Reference to this object for method chaining\n     */\n    rotate(angle, v) {\n        if (angle !== 0) {\n            let a = this.val,\n                x = v.x,\n                y = v.y,\n                z = v.z;\n\n            let len = Math.sqrt(x * x + y * y + z * z);\n\n            let s, c, t;\n            let a00, a01, a02, a03;\n            let a10, a11, a12, a13;\n            let a20, a21, a22, a23;\n            let b00, b01, b02;\n            let b10, b11, b12;\n            let b20, b21, b22;\n\n            if (len < EPSILON) {\n                return null;\n            }\n\n            len = 1 / len;\n            x *= len;\n            y *= len;\n            z *= len;\n\n            s = Math.sin(angle);\n            c = Math.cos(angle);\n            t = 1 - c;\n\n            a00 = a[0];\n            a01 = a[1];\n            a02 = a[2];\n            a03 = a[3];\n            a10 = a[4];\n            a11 = a[5];\n            a12 = a[6];\n            a13 = a[7];\n            a20 = a[8];\n            a21 = a[9];\n            a22 = a[10];\n            a23 = a[11];\n\n            // Construct the elements of the rotation matrix\n            b00 = x * x * t + c;\n            b01 = y * x * t + z * s;\n            b02 = z * x * t - y * s;\n            b10 = x * y * t - z * s;\n            b11 = y * y * t + c;\n            b12 = z * y * t + x * s;\n            b20 = x * z * t + y * s;\n            b21 = y * z * t - x * s;\n            b22 = z * z * t + c;\n\n            // Perform rotation-specific matrix multiplication\n            a[0] = a00 * b00 + a10 * b01 + a20 * b02;\n            a[1] = a01 * b00 + a11 * b01 + a21 * b02;\n            a[2] = a02 * b00 + a12 * b01 + a22 * b02;\n            a[3] = a03 * b00 + a13 * b01 + a23 * b02;\n            a[4] = a00 * b10 + a10 * b11 + a20 * b12;\n            a[5] = a01 * b10 + a11 * b11 + a21 * b12;\n            a[6] = a02 * b10 + a12 * b11 + a22 * b12;\n            a[7] = a03 * b10 + a13 * b11 + a23 * b12;\n            a[8] = a00 * b20 + a10 * b21 + a20 * b22;\n            a[9] = a01 * b20 + a11 * b21 + a21 * b22;\n            a[10] = a02 * b20 + a12 * b21 + a22 * b22;\n            a[11] = a03 * b20 + a13 * b21 + a23 * b22;\n        }\n        return this;\n    }\n\n    /**\n     * translate the matrix position using the given vector\n     * @param {number|Vector2d|Vector3d} x - a number representing the abscissa of the vector, or a vector object\n     * @param {number} [y] - a number representing the ordinate of the vector.\n     * @param {number} [z=0] - a number representing the depth of the vector\n     * @returns {Matrix3d} Reference to this object for method chaining\n     */\n    translate() {\n        let a = this.val;\n        let _x, _y, _z;\n\n        if (arguments.length > 1) {\n            // x, y (, z)\n            _x = arguments[0];\n            _y = arguments[1];\n            _z = typeof(arguments[2]) === \"undefined\" ?  0 : arguments[2];\n        } else {\n            // 2d/3d vector\n            _x = arguments[0].x;\n            _y = arguments[0].y;\n            _z = typeof(arguments[0].z) === \"undefined\" ? 0 : arguments[0].z;\n        }\n\n        a[12] = a[0] * _x + a[4] * _y + a[8] * _z + a[12];\n        a[13] = a[1] * _x + a[5] * _y + a[9] * _z + a[13];\n        a[14] = a[2] * _x + a[6] * _y + a[10] * _z + a[14];\n        a[15] = a[3] * _x + a[7] * _y + a[11] * _z + a[15];\n\n        return this;\n    }\n\n    /**\n     * returns true if the matrix is an identity matrix.\n     * @returns {boolean}\n     */\n    isIdentity() {\n        let a = this.val;\n\n        return (\n            (a[0] === 1) &&\n            (a[1] === 0) &&\n            (a[2] === 0) &&\n            (a[3] === 0) &&\n            (a[4] === 0) &&\n            (a[5] === 1) &&\n            (a[6] === 0) &&\n            (a[7] === 0) &&\n            (a[8] === 0) &&\n            (a[9] === 0) &&\n            (a[10] === 1) &&\n            (a[11] === 0) &&\n            (a[12] === 0) &&\n            (a[13] === 0) &&\n            (a[14] === 0) &&\n            (a[15] === 1)\n        );\n    }\n\n    /**\n     * return true if the two matrices are identical\n     * @param {Matrix3d} m - the other matrix\n     * @returns {boolean} true if both are equals\n     */\n    equals(m) {\n        let b = m.val;\n        let a = this.val;\n\n        return (\n            (a[0] === b[0]) &&\n            (a[1] === b[1]) &&\n            (a[2] === b[2]) &&\n            (a[3] === b[3]) &&\n            (a[4] === b[4]) &&\n            (a[5] === b[5]) &&\n            (a[6] === b[6]) &&\n            (a[7] === b[7]) &&\n            (a[8] === b[8]) &&\n            (a[9] === b[9]) &&\n            (a[10] === b[10]) &&\n            (a[11] === b[11]) &&\n            (a[12] === b[12]) &&\n            (a[13] === b[13]) &&\n            (a[14] === b[14]) &&\n            (a[15] === b[15])\n        );\n    }\n\n    /**\n     * Clone the Matrix\n     * @returns {Matrix3d}\n     */\n    clone() {\n        return pool.pull(\"Matrix3d\", this);\n    }\n\n    /**\n     * return an array representation of this Matrix\n     * @returns {Float32Array}\n     */\n    toArray() {\n        return this.val;\n    }\n\n    /**\n     * convert the object to a string representation\n     * @returns {string}\n     */\n    toString() {\n        let a = this.val;\n\n        return \"me.Matrix3d(\" +\n            a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" +\n            a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" +\n            a[8] + \", \" + a[9] + \", \" + a[10] + \", \" + a[11] + \", \" +\n            a[12] + \", \" + a[13] + \", \" + a[14] + \", \" + a[15] +\n        \")\";\n    }\n}\n\nvar earcut$2 = {exports: {}};\n\nvar earcut_1 = earcut$2.exports;\n\n'use strict';\n\nearcut$2.exports = earcut;\nvar _default = earcut$2.exports.default = earcut;\n\nfunction earcut(data, holeIndices, dim) {\n\n    dim = dim || 2;\n\n    var hasHoles = holeIndices && holeIndices.length,\n        outerLen = hasHoles ? holeIndices[0] * dim : data.length,\n        outerNode = linkedList(data, 0, outerLen, dim, true),\n        triangles = [];\n\n    if (!outerNode || outerNode.next === outerNode.prev) return triangles;\n\n    var minX, minY, maxX, maxY, x, y, invSize;\n\n    if (hasHoles) outerNode = eliminateHoles(data, holeIndices, outerNode, dim);\n\n    // if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\n    if (data.length > 80 * dim) {\n        minX = maxX = data[0];\n        minY = maxY = data[1];\n\n        for (var i = dim; i < outerLen; i += dim) {\n            x = data[i];\n            y = data[i + 1];\n            if (x < minX) minX = x;\n            if (y < minY) minY = y;\n            if (x > maxX) maxX = x;\n            if (y > maxY) maxY = y;\n        }\n\n        // minX, minY and invSize are later used to transform coords into integers for z-order calculation\n        invSize = Math.max(maxX - minX, maxY - minY);\n        invSize = invSize !== 0 ? 32767 / invSize : 0;\n    }\n\n    earcutLinked(outerNode, triangles, dim, minX, minY, invSize, 0);\n\n    return triangles;\n}\n\n// create a circular doubly linked list from polygon points in the specified winding order\nfunction linkedList(data, start, end, dim, clockwise) {\n    var i, last;\n\n    if (clockwise === (signedArea(data, start, end, dim) > 0)) {\n        for (i = start; i < end; i += dim) last = insertNode(i, data[i], data[i + 1], last);\n    } else {\n        for (i = end - dim; i >= start; i -= dim) last = insertNode(i, data[i], data[i + 1], last);\n    }\n\n    if (last && equals(last, last.next)) {\n        removeNode(last);\n        last = last.next;\n    }\n\n    return last;\n}\n\n// eliminate colinear or duplicate points\nfunction filterPoints(start, end) {\n    if (!start) return start;\n    if (!end) end = start;\n\n    var p = start,\n        again;\n    do {\n        again = false;\n\n        if (!p.steiner && (equals(p, p.next) || area(p.prev, p, p.next) === 0)) {\n            removeNode(p);\n            p = end = p.prev;\n            if (p === p.next) break;\n            again = true;\n\n        } else {\n            p = p.next;\n        }\n    } while (again || p !== end);\n\n    return end;\n}\n\n// main ear slicing loop which triangulates a polygon (given as a linked list)\nfunction earcutLinked(ear, triangles, dim, minX, minY, invSize, pass) {\n    if (!ear) return;\n\n    // interlink polygon nodes in z-order\n    if (!pass && invSize) indexCurve(ear, minX, minY, invSize);\n\n    var stop = ear,\n        prev, next;\n\n    // iterate through ears, slicing them one by one\n    while (ear.prev !== ear.next) {\n        prev = ear.prev;\n        next = ear.next;\n\n        if (invSize ? isEarHashed(ear, minX, minY, invSize) : isEar(ear)) {\n            // cut off the triangle\n            triangles.push(prev.i / dim | 0);\n            triangles.push(ear.i / dim | 0);\n            triangles.push(next.i / dim | 0);\n\n            removeNode(ear);\n\n            // skipping the next vertex leads to less sliver triangles\n            ear = next.next;\n            stop = next.next;\n\n            continue;\n        }\n\n        ear = next;\n\n        // if we looped through the whole remaining polygon and can't find any more ears\n        if (ear === stop) {\n            // try filtering points and slicing again\n            if (!pass) {\n                earcutLinked(filterPoints(ear), triangles, dim, minX, minY, invSize, 1);\n\n            // if this didn't work, try curing all small self-intersections locally\n            } else if (pass === 1) {\n                ear = cureLocalIntersections(filterPoints(ear), triangles, dim);\n                earcutLinked(ear, triangles, dim, minX, minY, invSize, 2);\n\n            // as a last resort, try splitting the remaining polygon into two\n            } else if (pass === 2) {\n                splitEarcut(ear, triangles, dim, minX, minY, invSize);\n            }\n\n            break;\n        }\n    }\n}\n\n// check whether a polygon node forms a valid ear with adjacent nodes\nfunction isEar(ear) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    // now make sure we don't have other points inside the potential ear\n    var ax = a.x, bx = b.x, cx = c.x, ay = a.y, by = b.y, cy = c.y;\n\n    // triangle bbox; min & max are calculated like this for speed\n    var x0 = ax < bx ? (ax < cx ? ax : cx) : (bx < cx ? bx : cx),\n        y0 = ay < by ? (ay < cy ? ay : cy) : (by < cy ? by : cy),\n        x1 = ax > bx ? (ax > cx ? ax : cx) : (bx > cx ? bx : cx),\n        y1 = ay > by ? (ay > cy ? ay : cy) : (by > cy ? by : cy);\n\n    var p = c.next;\n    while (p !== a) {\n        if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.next;\n    }\n\n    return true;\n}\n\nfunction isEarHashed(ear, minX, minY, invSize) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    var ax = a.x, bx = b.x, cx = c.x, ay = a.y, by = b.y, cy = c.y;\n\n    // triangle bbox; min & max are calculated like this for speed\n    var x0 = ax < bx ? (ax < cx ? ax : cx) : (bx < cx ? bx : cx),\n        y0 = ay < by ? (ay < cy ? ay : cy) : (by < cy ? by : cy),\n        x1 = ax > bx ? (ax > cx ? ax : cx) : (bx > cx ? bx : cx),\n        y1 = ay > by ? (ay > cy ? ay : cy) : (by > cy ? by : cy);\n\n    // z-order range for the current triangle bbox;\n    var minZ = zOrder(x0, y0, minX, minY, invSize),\n        maxZ = zOrder(x1, y1, minX, minY, invSize);\n\n    var p = ear.prevZ,\n        n = ear.nextZ;\n\n    // look for points inside the triangle in both directions\n    while (p && p.z >= minZ && n && n.z <= maxZ) {\n        if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 && p !== a && p !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) && area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n\n        if (n.x >= x0 && n.x <= x1 && n.y >= y0 && n.y <= y1 && n !== a && n !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, n.x, n.y) && area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    // look for remaining points in decreasing z-order\n    while (p && p.z >= minZ) {\n        if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 && p !== a && p !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) && area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n    }\n\n    // look for remaining points in increasing z-order\n    while (n && n.z <= maxZ) {\n        if (n.x >= x0 && n.x <= x1 && n.y >= y0 && n.y <= y1 && n !== a && n !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, n.x, n.y) && area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    return true;\n}\n\n// go through all polygon nodes and cure small local self-intersections\nfunction cureLocalIntersections(start, triangles, dim) {\n    var p = start;\n    do {\n        var a = p.prev,\n            b = p.next.next;\n\n        if (!equals(a, b) && intersects$3(a, p, p.next, b) && locallyInside(a, b) && locallyInside(b, a)) {\n\n            triangles.push(a.i / dim | 0);\n            triangles.push(p.i / dim | 0);\n            triangles.push(b.i / dim | 0);\n\n            // remove two nodes involved\n            removeNode(p);\n            removeNode(p.next);\n\n            p = start = b;\n        }\n        p = p.next;\n    } while (p !== start);\n\n    return filterPoints(p);\n}\n\n// try splitting polygon into two and triangulate them independently\nfunction splitEarcut(start, triangles, dim, minX, minY, invSize) {\n    // look for a valid diagonal that divides the polygon into two\n    var a = start;\n    do {\n        var b = a.next.next;\n        while (b !== a.prev) {\n            if (a.i !== b.i && isValidDiagonal(a, b)) {\n                // split the polygon in two by the diagonal\n                var c = splitPolygon(a, b);\n\n                // filter colinear points around the cuts\n                a = filterPoints(a, a.next);\n                c = filterPoints(c, c.next);\n\n                // run earcut on each half\n                earcutLinked(a, triangles, dim, minX, minY, invSize, 0);\n                earcutLinked(c, triangles, dim, minX, minY, invSize, 0);\n                return;\n            }\n            b = b.next;\n        }\n        a = a.next;\n    } while (a !== start);\n}\n\n// link every hole into the outer loop, producing a single-ring polygon without holes\nfunction eliminateHoles(data, holeIndices, outerNode, dim) {\n    var queue = [],\n        i, len, start, end, list;\n\n    for (i = 0, len = holeIndices.length; i < len; i++) {\n        start = holeIndices[i] * dim;\n        end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n        list = linkedList(data, start, end, dim, false);\n        if (list === list.next) list.steiner = true;\n        queue.push(getLeftmost(list));\n    }\n\n    queue.sort(compareX);\n\n    // process holes from left to right\n    for (i = 0; i < queue.length; i++) {\n        outerNode = eliminateHole(queue[i], outerNode);\n    }\n\n    return outerNode;\n}\n\nfunction compareX(a, b) {\n    return a.x - b.x;\n}\n\n// find a bridge between vertices that connects hole with an outer ring and and link it\nfunction eliminateHole(hole, outerNode) {\n    var bridge = findHoleBridge(hole, outerNode);\n    if (!bridge) {\n        return outerNode;\n    }\n\n    var bridgeReverse = splitPolygon(bridge, hole);\n\n    // filter collinear points around the cuts\n    filterPoints(bridgeReverse, bridgeReverse.next);\n    return filterPoints(bridge, bridge.next);\n}\n\n// David Eberly's algorithm for finding a bridge between hole and outer polygon\nfunction findHoleBridge(hole, outerNode) {\n    var p = outerNode,\n        hx = hole.x,\n        hy = hole.y,\n        qx = -Infinity,\n        m;\n\n    // find a segment intersected by a ray from the hole's leftmost point to the left;\n    // segment's endpoint with lesser x will be potential connection point\n    do {\n        if (hy <= p.y && hy >= p.next.y && p.next.y !== p.y) {\n            var x = p.x + (hy - p.y) * (p.next.x - p.x) / (p.next.y - p.y);\n            if (x <= hx && x > qx) {\n                qx = x;\n                m = p.x < p.next.x ? p : p.next;\n                if (x === hx) return m; // hole touches outer segment; pick leftmost endpoint\n            }\n        }\n        p = p.next;\n    } while (p !== outerNode);\n\n    if (!m) return null;\n\n    // look for points inside the triangle of hole point, segment intersection and endpoint;\n    // if there are no points found, we have a valid connection;\n    // otherwise choose the point of the minimum angle with the ray as connection point\n\n    var stop = m,\n        mx = m.x,\n        my = m.y,\n        tanMin = Infinity,\n        tan;\n\n    p = m;\n\n    do {\n        if (hx >= p.x && p.x >= mx && hx !== p.x &&\n                pointInTriangle(hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y)) {\n\n            tan = Math.abs(hy - p.y) / (hx - p.x); // tangential\n\n            if (locallyInside(p, hole) &&\n                (tan < tanMin || (tan === tanMin && (p.x > m.x || (p.x === m.x && sectorContainsSector(m, p)))))) {\n                m = p;\n                tanMin = tan;\n            }\n        }\n\n        p = p.next;\n    } while (p !== stop);\n\n    return m;\n}\n\n// whether sector in vertex m contains sector in vertex p in the same coordinates\nfunction sectorContainsSector(m, p) {\n    return area(m.prev, m, p.prev) < 0 && area(p.next, m, m.next) < 0;\n}\n\n// interlink polygon nodes in z-order\nfunction indexCurve(start, minX, minY, invSize) {\n    var p = start;\n    do {\n        if (p.z === 0) p.z = zOrder(p.x, p.y, minX, minY, invSize);\n        p.prevZ = p.prev;\n        p.nextZ = p.next;\n        p = p.next;\n    } while (p !== start);\n\n    p.prevZ.nextZ = null;\n    p.prevZ = null;\n\n    sortLinked(p);\n}\n\n// Simon Tatham's linked list merge sort algorithm\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\nfunction sortLinked(list) {\n    var i, p, q, e, tail, numMerges, pSize, qSize,\n        inSize = 1;\n\n    do {\n        p = list;\n        list = null;\n        tail = null;\n        numMerges = 0;\n\n        while (p) {\n            numMerges++;\n            q = p;\n            pSize = 0;\n            for (i = 0; i < inSize; i++) {\n                pSize++;\n                q = q.nextZ;\n                if (!q) break;\n            }\n            qSize = inSize;\n\n            while (pSize > 0 || (qSize > 0 && q)) {\n\n                if (pSize !== 0 && (qSize === 0 || !q || p.z <= q.z)) {\n                    e = p;\n                    p = p.nextZ;\n                    pSize--;\n                } else {\n                    e = q;\n                    q = q.nextZ;\n                    qSize--;\n                }\n\n                if (tail) tail.nextZ = e;\n                else list = e;\n\n                e.prevZ = tail;\n                tail = e;\n            }\n\n            p = q;\n        }\n\n        tail.nextZ = null;\n        inSize *= 2;\n\n    } while (numMerges > 1);\n\n    return list;\n}\n\n// z-order of a point given coords and inverse of the longer side of data bbox\nfunction zOrder(x, y, minX, minY, invSize) {\n    // coords are transformed into non-negative 15-bit integer range\n    x = (x - minX) * invSize | 0;\n    y = (y - minY) * invSize | 0;\n\n    x = (x | (x << 8)) & 0x00FF00FF;\n    x = (x | (x << 4)) & 0x0F0F0F0F;\n    x = (x | (x << 2)) & 0x33333333;\n    x = (x | (x << 1)) & 0x55555555;\n\n    y = (y | (y << 8)) & 0x00FF00FF;\n    y = (y | (y << 4)) & 0x0F0F0F0F;\n    y = (y | (y << 2)) & 0x33333333;\n    y = (y | (y << 1)) & 0x55555555;\n\n    return x | (y << 1);\n}\n\n// find the leftmost node of a polygon ring\nfunction getLeftmost(start) {\n    var p = start,\n        leftmost = start;\n    do {\n        if (p.x < leftmost.x || (p.x === leftmost.x && p.y < leftmost.y)) leftmost = p;\n        p = p.next;\n    } while (p !== start);\n\n    return leftmost;\n}\n\n// check if a point lies within a convex triangle\nfunction pointInTriangle(ax, ay, bx, by, cx, cy, px, py) {\n    return (cx - px) * (ay - py) >= (ax - px) * (cy - py) &&\n           (ax - px) * (by - py) >= (bx - px) * (ay - py) &&\n           (bx - px) * (cy - py) >= (cx - px) * (by - py);\n}\n\n// check if a diagonal between two polygon nodes is valid (lies in polygon interior)\nfunction isValidDiagonal(a, b) {\n    return a.next.i !== b.i && a.prev.i !== b.i && !intersectsPolygon(a, b) && // dones't intersect other edges\n           (locallyInside(a, b) && locallyInside(b, a) && middleInside(a, b) && // locally visible\n            (area(a.prev, a, b.prev) || area(a, b.prev, b)) || // does not create opposite-facing sectors\n            equals(a, b) && area(a.prev, a, a.next) > 0 && area(b.prev, b, b.next) > 0); // special zero-length case\n}\n\n// signed area of a triangle\nfunction area(p, q, r) {\n    return (q.y - p.y) * (r.x - q.x) - (q.x - p.x) * (r.y - q.y);\n}\n\n// check if two points are equal\nfunction equals(p1, p2) {\n    return p1.x === p2.x && p1.y === p2.y;\n}\n\n// check if two segments intersect\nfunction intersects$3(p1, q1, p2, q2) {\n    var o1 = sign(area(p1, q1, p2));\n    var o2 = sign(area(p1, q1, q2));\n    var o3 = sign(area(p2, q2, p1));\n    var o4 = sign(area(p2, q2, q1));\n\n    if (o1 !== o2 && o3 !== o4) return true; // general case\n\n    if (o1 === 0 && onSegment(p1, p2, q1)) return true; // p1, q1 and p2 are collinear and p2 lies on p1q1\n    if (o2 === 0 && onSegment(p1, q2, q1)) return true; // p1, q1 and q2 are collinear and q2 lies on p1q1\n    if (o3 === 0 && onSegment(p2, p1, q2)) return true; // p2, q2 and p1 are collinear and p1 lies on p2q2\n    if (o4 === 0 && onSegment(p2, q1, q2)) return true; // p2, q2 and q1 are collinear and q1 lies on p2q2\n\n    return false;\n}\n\n// for collinear points p, q, r, check if point q lies on segment pr\nfunction onSegment(p, q, r) {\n    return q.x <= Math.max(p.x, r.x) && q.x >= Math.min(p.x, r.x) && q.y <= Math.max(p.y, r.y) && q.y >= Math.min(p.y, r.y);\n}\n\nfunction sign(num) {\n    return num > 0 ? 1 : num < 0 ? -1 : 0;\n}\n\n// check if a polygon diagonal intersects any polygon segments\nfunction intersectsPolygon(a, b) {\n    var p = a;\n    do {\n        if (p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\n                intersects$3(p, p.next, a, b)) return true;\n        p = p.next;\n    } while (p !== a);\n\n    return false;\n}\n\n// check if a polygon diagonal is locally inside the polygon\nfunction locallyInside(a, b) {\n    return area(a.prev, a, a.next) < 0 ?\n        area(a, b, a.next) >= 0 && area(a, a.prev, b) >= 0 :\n        area(a, b, a.prev) < 0 || area(a, a.next, b) < 0;\n}\n\n// check if the middle point of a polygon diagonal is inside the polygon\nfunction middleInside(a, b) {\n    var p = a,\n        inside = false,\n        px = (a.x + b.x) / 2,\n        py = (a.y + b.y) / 2;\n    do {\n        if (((p.y > py) !== (p.next.y > py)) && p.next.y !== p.y &&\n                (px < (p.next.x - p.x) * (py - p.y) / (p.next.y - p.y) + p.x))\n            inside = !inside;\n        p = p.next;\n    } while (p !== a);\n\n    return inside;\n}\n\n// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\nfunction splitPolygon(a, b) {\n    var a2 = new Node$1(a.i, a.x, a.y),\n        b2 = new Node$1(b.i, b.x, b.y),\n        an = a.next,\n        bp = b.prev;\n\n    a.next = b;\n    b.prev = a;\n\n    a2.next = an;\n    an.prev = a2;\n\n    b2.next = a2;\n    a2.prev = b2;\n\n    bp.next = b2;\n    b2.prev = bp;\n\n    return b2;\n}\n\n// create a node and optionally link it with previous one (in a circular doubly linked list)\nfunction insertNode(i, x, y, last) {\n    var p = new Node$1(i, x, y);\n\n    if (!last) {\n        p.prev = p;\n        p.next = p;\n\n    } else {\n        p.next = last.next;\n        p.prev = last;\n        last.next.prev = p;\n        last.next = p;\n    }\n    return p;\n}\n\nfunction removeNode(p) {\n    p.next.prev = p.prev;\n    p.prev.next = p.next;\n\n    if (p.prevZ) p.prevZ.nextZ = p.nextZ;\n    if (p.nextZ) p.nextZ.prevZ = p.prevZ;\n}\n\nfunction Node$1(i, x, y) {\n    // vertex index in coordinates array\n    this.i = i;\n\n    // vertex coordinates\n    this.x = x;\n    this.y = y;\n\n    // previous and next vertex nodes in a polygon ring\n    this.prev = null;\n    this.next = null;\n\n    // z-order curve value\n    this.z = 0;\n\n    // previous and next nodes in z-order\n    this.prevZ = null;\n    this.nextZ = null;\n\n    // indicates whether this is a steiner point\n    this.steiner = false;\n}\n\n// return a percentage difference between the polygon area and its triangulation area;\n// used to verify correctness of triangulation\nearcut.deviation = function (data, holeIndices, dim, triangles) {\n    var hasHoles = holeIndices && holeIndices.length;\n    var outerLen = hasHoles ? holeIndices[0] * dim : data.length;\n\n    var polygonArea = Math.abs(signedArea(data, 0, outerLen, dim));\n    if (hasHoles) {\n        for (var i = 0, len = holeIndices.length; i < len; i++) {\n            var start = holeIndices[i] * dim;\n            var end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n            polygonArea -= Math.abs(signedArea(data, start, end, dim));\n        }\n    }\n\n    var trianglesArea = 0;\n    for (i = 0; i < triangles.length; i += 3) {\n        var a = triangles[i] * dim;\n        var b = triangles[i + 1] * dim;\n        var c = triangles[i + 2] * dim;\n        trianglesArea += Math.abs(\n            (data[a] - data[c]) * (data[b + 1] - data[a + 1]) -\n            (data[a] - data[b]) * (data[c + 1] - data[a + 1]));\n    }\n\n    return polygonArea === 0 && trianglesArea === 0 ? 0 :\n        Math.abs((trianglesArea - polygonArea) / polygonArea);\n};\n\nfunction signedArea(data, start, end, dim) {\n    var sum = 0;\n    for (var i = start, j = end - dim; i < end; i += dim) {\n        sum += (data[j] - data[i]) * (data[i + 1] + data[j + 1]);\n        j = i;\n    }\n    return sum;\n}\n\n// turn a polygon in a multi-dimensional array form (e.g. as in GeoJSON) into a form Earcut accepts\nearcut.flatten = function (data) {\n    var dim = data[0][0].length,\n        result = {vertices: [], holes: [], dimensions: dim},\n        holeIndex = 0;\n\n    for (var i = 0; i < data.length; i++) {\n        for (var j = 0; j < data[i].length; j++) {\n            for (var d = 0; d < dim; d++) result.vertices.push(data[i][j][d]);\n        }\n        if (i > 0) {\n            holeIndex += data[i - 1].length;\n            result.holes.push(holeIndex);\n        }\n    }\n    return result;\n};\n\nvar earcutExports = earcut$2.exports;\nvar earcut$1 = /*@__PURE__*/getDefaultExportFromCjs(earcutExports);\n\n/**\n * additional import for TypeScript\n * @import Vector2d from \"./../math/vector2.js\";\n * @import ObservableVector2d from \"./../math/observable_vector2.js\";\n * @import Matrix2d from \"./../math/matrix2.js\";\n * @import Bounds from \"./../physics/bounds.js\";\n */\n\n/**\n * @classdesc\n * a polygon Object.<br>\n * Please do note that melonJS implements a simple Axis-Aligned Boxes collision algorithm, which requires all polygons used for collision to be convex with all vertices defined with clockwise winding.\n * A polygon is convex when all line segments connecting two points in the interior do not cross any edge of the polygon\n * (which means that all angles are less than 180 degrees), as described here below : <br>\n * <center><img src=\"images/convex_polygon.png\"/></center><br>\n * A polygon's `winding` is clockwise if its vertices (points) are declared turning to the right. The image above shows COUNTERCLOCKWISE winding.\n */\nclass Polygon {\n    /**\n     * @param {number} [x=0] - origin point of the Polygon\n     * @param {number} [y=0] - origin point of the Polygon\n     * @param {Vector2d[]} points - array of vector defining the Polygon\n     */\n    constructor(x = 0, y = 0, points) {\n        /**\n         * origin point of the Polygon\n         * @type {Vector2d}\n         */\n        this.pos = pool.pull(\"Vector2d\");\n\n        /**\n         * Array of points defining the Polygon <br>\n         * Note: If you manually change `points`, you **must** call `recalc`afterwards so that the changes get applied correctly.\n         * @type {Vector2d[]}\n         */\n        this.points = [];\n\n        /**\n         * The edges here are the direction of the `n`th edge of the polygon, relative to\n         * the `n`th point. If you want to draw a given edge from the edge value, you must\n         * first translate to the position of the starting point.\n         * @ignore\n         */\n        this.edges = [];\n\n        /**\n         * a list of indices for all vertices composing this polygon (@see earcut)\n         * @ignore\n         */\n        this.indices = [];\n\n        /**\n         * The normals here are the direction of the normal for the `n`th edge of the polygon, relative\n         * to the position of the `n`th point. If you want to draw an edge normal, you must first\n         * translate to the position of the starting point.\n         * @ignore\n         */\n        this.normals = [];\n\n        // The bounding rectangle for this shape\n        this._bounds;\n\n        /**\n         * the shape type (used internally)\n         * @type {string}\n         * @default \"Polygon\"\n         */\n        this.type = \"Polygon\";\n        this.setShape(x, y, points);\n    }\n\n    /** @ignore */\n    onResetEvent(x, y, points) {\n        this.setShape(x, y, points);\n    }\n\n    /**\n     * set new value to the Polygon\n     * @param {number} x - position of the Polygon\n     * @param {number} y - position of the Polygon\n     * @param {Vector2d[]|number[]} points - array of vector or vertice defining the Polygon\n     * @returns {Polygon} this instance for objecf chaining\n     */\n    setShape(x, y, points) {\n        this.pos.set(x, y);\n        this.setVertices(points);\n        return this;\n    }\n\n    /**\n     * set the vertices defining this Polygon\n     * @param {Vector2d[]} vertices - array of vector or vertice defining the Polygon\n     * @returns {Polygon} this instance for objecf chaining\n     */\n    setVertices(vertices) {\n        if (!Array.isArray(vertices)) {\n            return this;\n        }\n\n        if (typeof vertices[0] === \"object\") {\n            if (typeof vertices[0].setV === \"function\") {\n                // array of Vector2d\n                this.points = vertices;\n            } else {\n                // array of {x,y} objects\n                this.points.length = 0; // fix potential memory leak\n                vertices.forEach((vertice) => {\n                    this.points.push(pool.pull(\"Vector2d\", vertice.x, vertice.y));\n                });\n            }\n        } else {\n            // it's a flat array of numbers\n            let verticesLength = vertices.length;\n            this.points.length = 0; // fix potential memory leak\n            for (let p = 0; p < verticesLength; p += 2) {\n                this.points.push(pool.pull(\"Vector2d\", vertices[p], vertices[p + 1]));\n            }\n        }\n\n        this.recalc();\n        this.updateBounds();\n        return this;\n    }\n\n    /**\n     * apply the given transformation matrix to this Polygon\n     * @param {Matrix2d} m - the transformation matrix\n     * @returns {Polygon} Reference to this object for method chaining\n     */\n    transform(m) {\n        let points = this.points;\n        let len = points.length;\n        for (let i = 0; i < len; i++) {\n            m.apply(points[i]);\n        }\n        this.recalc();\n        this.updateBounds();\n        return this;\n    }\n\n    /**\n     * apply an isometric projection to this shape\n     * @returns {Polygon} Reference to this object for method chaining\n     */\n    toIso() {\n        return this.rotate(Math.PI / 4).scale(Math.SQRT2, Math.SQRT1_2);\n    }\n\n    /**\n     * apply a 2d projection to this shapen\n     * @returns {Polygon} Reference to this object for method chaining\n     */\n    to2d() {\n        return this.scale(Math.SQRT1_2, Math.SQRT2).rotate(-Math.PI / 4);\n    }\n\n    /**\n     * Rotate this Polygon (counter-clockwise) by the specified angle (in radians).\n     * @param {number} angle - The angle to rotate (in radians)\n     * @param {Vector2d|ObservableVector2d} [v] - an optional point to rotate around\n     * @returns {Polygon} Reference to this object for method chaining\n     */\n    rotate(angle, v) {\n        if (angle !== 0) {\n            let points = this.points;\n            let len = points.length;\n            for (let i = 0; i < len; i++) {\n                points[i].rotate(angle, v);\n            }\n            this.recalc();\n            this.updateBounds();\n        }\n        return this;\n    }\n\n    /**\n     * Scale this Polygon by the given scalar.\n     * @param {number} x\n     * @param {number} [y=x]\n     * @returns {Polygon} Reference to this object for method chaining\n     */\n    scale(x, y = x) {\n        let points = this.points;\n        let len = points.length;\n        for (let i = 0; i < len; i++) {\n            points[i].scale(x, y);\n        }\n        this.recalc();\n        this.updateBounds();\n        return this;\n    }\n\n    /**\n     * Scale this Polygon by the given vector\n     * @param {Vector2d} v\n     * @returns {Polygon} Reference to this object for method chaining\n     */\n    scaleV(v) {\n        return this.scale(v.x, v.y);\n    }\n\n    /**\n     * Computes the calculated collision polygon.\n     * This **must** be called if the `points` array, `angle`, or `offset` is modified manually.\n     * @returns {Polygon} Reference to this object for method chaining\n     */\n    recalc() {\n        let edges = this.edges;\n        let normals = this.normals;\n        let indices = this.indices;\n\n        // Copy the original points array and apply the offset/angle\n        let points = this.points;\n        let len = points.length;\n\n        if (len < 3) {\n            throw new Error(\"Requires at least 3 points\");\n        }\n\n        // Calculate the edges/normals\n        for (let i = 0; i < len; i++) {\n            let edge = edges[i];\n            if (typeof edge === \"undefined\") {\n                edge = edges[i] = pool.pull(\"Vector2d\");\n            }\n            edge.copy(points[(i + 1) % len]).sub(points[i]);\n\n            let normal = normals[i];\n            if (typeof normal === \"undefined\") {\n                normal = normals[i] = pool.pull(\"Vector2d\");\n            }\n            normal.copy(edge).perp().normalize();\n        }\n\n        // Release any existing Vector2d objects back to the pool\n        for (let i = len; i < edges.length; i++) {\n            pool.push(edges[i]);\n            pool.push(normals[i]);\n        }\n\n        // trunc array\n        edges.length = len;\n        normals.length = len;\n\n        // do not do anything here, indices will be computed by\n        // getIndices if array is empty upon function call\n        indices.length = 0;\n\n        return this;\n    }\n\n\n    /**\n     * returns a list of indices for all triangles defined in this polygon\n     * @returns {Array.<number>} an array of vertex indices for all triangles forming this polygon.\n     */\n    getIndices() {\n        if (this.indices.length === 0) {\n            this.indices = earcut$1(this.points.flatMap(p => [p.x, p.y]));\n        }\n        return this.indices;\n    }\n\n    /**\n     * Returns true if the vertices composing this polygon form a convex shape (vertices must be in clockwise order).\n     * @returns {boolean} true if the vertices are convex, false if not, null if not computable\n     */\n    isConvex() {\n        // http://paulbourke.net/geometry/polygonmesh/\n        // Copyright (c) Paul Bourke (use permitted)\n\n        let flag = 0,\n            vertices = this.points,\n            n = vertices.length;\n\n        if (n < 3) {\n            return null;\n        }\n\n        for (let i = 0; i < n; i++) {\n            let j = (i + 1) % n;\n            let k = (i + 2) % n;\n            let z = (vertices[j].x - vertices[i].x) * (vertices[k].y - vertices[j].y);\n            z -= (vertices[j].y - vertices[i].y) * (vertices[k].x - vertices[j].x);\n\n            if (z < 0) {\n                flag |= 1;\n            } else if (z > 0) {\n                flag |= 2;\n            }\n\n            if (flag === 3) {\n                return false;\n            }\n        }\n\n        if (flag !== 0) {\n            return true;\n        } else {\n            return null;\n        }\n    }\n\n    /**\n     * translate the Polygon by the specified offset\n     * @param {number|Vector2d} x -  x offset or a vector point to translate by\n     * @param {number} [y] - y offset\n     * @returns {Polygon} Reference to this object for method chaining\n     * @example\n     * polygon.translate(10, 10);\n     * // or\n     * polygon.translate(myVector2d);\n     */\n    translate() {\n        let _x, _y;\n\n        if (arguments.length === 2) {\n            // x, y\n            _x = arguments[0];\n            _y = arguments[1];\n        } else {\n            // vector\n            _x = arguments[0].x;\n            _y = arguments[0].y;\n        }\n\n        this.pos.x += _x;\n        this.pos.y += _y;\n        this.getBounds().translate(_x, _y);\n\n        return this;\n    }\n\n    /**\n     * Shifts the Polygon to the given position vector.\n     * @param {number|Vector2d} x -  x coordinate or a vector point to shift to\n     * @param {number} [y]\n     * @example\n     * polygon.shift(10, 10);\n     * // or\n     * polygon.shift(myVector2d);\n     */\n    shift() {\n        let _x, _y;\n        if (arguments.length === 2) {\n            // x, y\n            _x = arguments[0];\n            _y = arguments[1];\n        } else {\n            // vector\n            _x = arguments[0].x;\n            _y = arguments[0].y;\n        }\n        this.pos.x = _x;\n        this.pos.y = _y;\n        this.updateBounds();\n    }\n\n    /**\n     * Returns true if the polygon contains the given point. <br>\n     * (Note: it is highly recommended to first do a hit test on the corresponding <br>\n     *  bounding rect, as the function can be highly consuming with complex shapes)\n     * @param {number|Vector2d} x -  x coordinate or a vector point to check\n     * @param {number} [y] - y coordinate\n     * @returns {boolean} True if the polygon contain the point, otherwise false\n     * @example\n     * if (polygon.contains(10, 10)) {\n     *   // do something\n     * }\n     * // or\n     * if (polygon.contains(myVector2d)) {\n     *   // do something\n     * }\n     */\n    contains(...args) {\n        let [_x, _y] = args.length === 2 ? args : [args[0].x, args[0].y];\n\n        let intersects = false;\n        let posx = this.pos.x, posy = this.pos.y;\n        let points = this.points;\n        let len = points.length;\n\n        //http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html\n        for (let i = 0, j = len - 1; i < len; j = i++) {\n            const iy = points[i].y + posy, ix = points[i].x + posx,\n                jy = points[j].y + posy, jx = points[j].x + posx;\n            if (((iy > _y) !== (jy > _y)) && (_x < (jx - ix) * (_y - iy) / (jy - iy) + ix)) {\n                intersects = !intersects;\n            }\n        }\n        return intersects;\n    }\n\n    /**\n     * returns the bounding box for this shape, the smallest Rectangle object completely containing this shape.\n     * @returns {Bounds} this shape bounding box Rectangle object\n     */\n    getBounds() {\n        if (typeof this._bounds === \"undefined\") {\n            this._bounds = pool.pull(\"Bounds\");\n        }\n        return this._bounds;\n    }\n\n    /**\n     * update the bounding box for this shape.\n     * @returns {Bounds} this shape bounding box Rectangle object\n     */\n    updateBounds() {\n        let bounds = this.getBounds();\n\n        bounds.update(this.points);\n        bounds.translate(this.pos);\n\n        return bounds;\n    }\n\n    /**\n     * clone this Polygon\n     * @returns {Polygon} new Polygon\n     */\n    clone() {\n        let copy = [];\n        this.points.forEach((point) => {\n            copy.push(point.clone());\n        });\n        return new Polygon(this.pos.x, this.pos.y, copy);\n    }\n}\n\n/**\n * additional import for TypeScript\n * @import Vector2d from \"./../math/vector2d.js\";\n */\n\n/**\n * @classdesc\n * a line segment Object\n * @augments Polygon\n * @param {number} x - origin point of the Line\n * @param {number} y - origin point of the Line\n * @param {Vector2d[]} points - array of vectors defining the Line\n */\n\nclass Line extends Polygon {\n\n    /**\n     * Returns true if the Line contains the given point\n     * @param {number|Vector2d} x -  x coordinate or a vector point to check\n     * @param {number} [y] -  y coordinate\n     * @returns {boolean} true if contains\n     * @example\n     * if (line.contains(10, 10)) {\n     *   // do something\n     * }\n     * // or\n     * if (line.contains(myVector2d)) {\n     *   // do something\n     * }\n     */\n    contains() {\n        let _x, _y;\n\n        if (arguments.length === 2) {\n            // x, y\n            _x = arguments[0];\n            _y = arguments[1];\n        } else {\n            // vector\n            _x = arguments[0].x;\n            _y = arguments[0].y;\n        }\n\n        // translate the given coordinates,\n        // rather than creating temp translated vectors\n        _x -= this.pos.x; // Cx\n        _y -= this.pos.y; // Cy\n        let start = this.points[0]; // Ax/Ay\n        let end = this.points[1]; // Bx/By\n\n        //(Cy - Ay) * (Bx - Ax) = (By - Ay) * (Cx - Ax)\n        return (_y - start.y) * (end.x - start.x) === (end.y - start.y) * (_x - start.x);\n    }\n\n    /**\n     * Computes the calculated collision edges and normals.\n     * This **must** be called if the `points` array, `angle`, or `offset` is modified manually.\n     * @returns {Line} this instance for objecf chaining\n     */\n    recalc() {\n        let edges = this.edges;\n        let normals = this.normals;\n        let indices = this.indices;\n\n        // Copy the original points array and apply the offset/angle\n        let points = this.points;\n\n        if (points.length !== 2) {\n            throw new Error(\"Requires exactly 2 points\");\n        }\n\n        // Calculate the edges/normals\n        if (edges[0] === undefined) {\n            edges[0] = pool.pull(\"Vector2d\");\n        }\n        edges[0].copy(points[1]).sub(points[0]);\n        if (normals[0] === undefined) {\n            normals[0] = pool.pull(\"Vector2d\");\n        }\n        normals[0].copy(edges[0]).perp().normalize();\n\n        // do not do anything here, indices will be computed by\n        // toIndices if array is empty upon function call\n        indices.length = 0;\n\n        return this;\n    }\n\n    /**\n     * clone this line segment\n     * @returns {Line} new Line\n     */\n    clone() {\n        let copy = [];\n        this.points.forEach((point) => {\n            copy.push(point.clone());\n        });\n        return new Line(this.pos.x, this.pos.y, copy);\n    }\n\n}\n\n/**\n * additional import for TypeScript\n * @import Vector2d from \"./../math/vector2.js\";\n * @import ObservableVector2d from \"./../math/observable_vector2.js\";\n * @import Matrix2d from \"./../math/matrix2.js\";\n * @import Bounds from \"./../physics/bounds.js\";\n */\n\n/**\n * @classdesc\n * an ellipse Object\n */\nclass Ellipse {\n    /**\n     * @param {number} x - the center x coordinate of the ellipse\n     * @param {number} y - the center y coordinate of the ellipse\n     * @param {number} w - width (diameter) of the ellipse\n     * @param {number} h - height (diameter) of the ellipse\n     */\n    constructor(x, y, w, h) {\n        /**\n         * the center coordinates of the ellipse\n         * @public\n         * @type {Vector2d}\n         */\n        this.pos = pool.pull(\"Vector2d\");\n\n        /**\n         * The bounding rectangle for this shape\n         * @private\n         */\n        this._bounds = undefined;\n\n        /**\n         * Maximum radius of the ellipse\n         * @public\n         * @type {number}\n         */\n        this.radius = NaN;\n\n        /**\n         * Pre-scaled radius vector for ellipse\n         * @public\n         * @type {Vector2d}\n         */\n        this.radiusV = pool.pull(\"Vector2d\");\n\n        /**\n         * Radius squared, for pythagorean theorom\n         * @public\n         * @type {Vector2d}\n         */\n        this.radiusSq = pool.pull(\"Vector2d\");\n\n        /**\n         * x/y scaling ratio for ellipse\n         * @public\n         * @type {Vector2d}\n         */\n        this.ratio = pool.pull(\"Vector2d\");\n\n        /**\n         * the shape type (used internally)\n         * @type {string}\n         * @default \"Ellipse\"\n         */\n        this.type = \"Ellipse\";\n        this.setShape(x, y, w, h);\n    }\n\n    /** @ignore */\n    onResetEvent(x, y, w, h) {\n        this.setShape(x, y, w, h);\n    }\n\n    /**\n     * set new value to the Ellipse shape\n     * @param {number} x - the center x coordinate of the ellipse\n     * @param {number} y - the center y coordinate of the ellipse\n     * @param {number} w - width (diameter) of the ellipse\n     * @param {number} h - height (diameter) of the ellipse\n     * @returns {Ellipse} this instance for objecf chaining\n     */\n    setShape(x, y, w, h) {\n        const hW = w / 2;\n        const hH = h / 2;\n        const radius = Math.max(hW, hH);\n        const r = radius * radius;\n\n        this.pos.set(x, y);\n        this.radius = radius;\n        this.ratio.set(hW / radius, hH / radius);\n        this.radiusV.set(radius, radius).scaleV(this.ratio);\n        this.radiusSq.set(r, r).scaleV(this.ratio);\n\n        let bounds = this.getBounds();\n        // update the corresponding bounds\n        bounds.setMinMax(x, y, x + w, x + h);\n        // elipse position is the center of the cirble, bounds position are top left\n        bounds.translate(-this.radiusV.x, -this.radiusV.y);\n\n        return this;\n    }\n\n    /**\n     * Rotate this Ellipse (counter-clockwise) by the specified angle (in radians).\n     * @param {number} angle - The angle to rotate (in radians)\n     * @param {Vector2d|ObservableVector2d} [v] - an optional point to rotate around\n     * @returns {Ellipse} Reference to this object for method chaining\n     */\n    rotate(angle, v) {\n        let bounds = this.getBounds();\n        // TODO : only works for circle\n        this.pos.rotate(angle, v);\n        bounds.shift(this.pos);\n        bounds.translate(-this.radiusV.x, -this.radiusV.y);\n        return this;\n    }\n\n    /**\n     * Scale this Ellipse by the specified scalar.\n     * @param {number} x - the scale factor along the x-axis\n     * @param {number} [y=x] - the scale factor along the y-axis\n     * @returns {Ellipse} Reference to this object for method chaining\n     */\n    scale(x, y = x) {\n        return this.setShape(\n            this.pos.x,\n            this.pos.y,\n            this.radiusV.x * 2 * x,\n            this.radiusV.y * 2 * y\n        );\n    }\n\n    /**\n     * Scale this Ellipse by the specified vector.\n     * @param {Vector2d} v\n     * @returns {Ellipse} Reference to this object for method chaining\n     */\n    scaleV(v) {\n        return this.scale(v.x, v.y);\n    }\n\n    /**\n     * apply the given transformation matrix to this ellipse\n     * @param {Matrix2d} matrix - the transformation matrix\n     * @returns {Ellipse} Reference to this object for method chaining\n     */\n    transform(matrix) { // eslint-disable-line no-unused-vars\n        // TODO\n        return this;\n    }\n\n    /**\n     * translate the circle/ellipse by the specified offset\n     * @param {number|Vector2d} x -  x coordinate or a vector point to translate by\n     * @param {number} [y] - y offset\n     * @returns {Ellipse} this ellipse\n     * @example\n     * ellipse.translate(10, 10);\n     * // or\n     * ellipse.translate(myVector2d);\n     */\n    translate() {\n        let _x, _y;\n\n        if (arguments.length === 2) {\n            // x, y\n            _x = arguments[0];\n            _y = arguments[1];\n        } else {\n            // vector\n            _x = arguments[0].x;\n            _y = arguments[0].y;\n        }\n\n        this.pos.x += _x;\n        this.pos.y += _y;\n        this.getBounds().translate(_x, _y);\n\n        return this;\n    }\n\n    /**\n     * check if this circle/ellipse contains the specified point\n     * @param {number|Vector2d} x -  x coordinate or a vector point to check\n     * @param {number} [y] -  y coordinate\n     * @returns {boolean} true if contains\n     * @example\n     * if (circle.contains(10, 10)) {\n     *   // do something\n     * }\n     * // or\n     * if (circle.contains(myVector2d)) {\n     *  // do something\n     * }\n     */\n    contains(...args) {\n        let _x, _y;\n\n        if (args.length === 2) {\n            // x, y\n            [_x, _y] = args;\n        } else {\n            // vector\n            [_x, _y] = [args[0].x, args[0].y];\n        }\n\n        // Make position relative to object center point.\n        _x -= this.pos.x;\n        _y -= this.pos.y;\n        // Pythagorean theorem.\n        return (\n            ((_x * _x) / this.radiusSq.x) +\n            ((_y * _y) / this.radiusSq.y)\n        ) <= 1.0;\n    }\n\n    /**\n     * returns the bounding box for this shape, the smallest Rectangle object completely containing this shape.\n     * @returns {Bounds} this shape bounding box Rectangle object\n     */\n    getBounds() {\n        if (typeof this._bounds === \"undefined\") {\n            this._bounds = pool.pull(\"Bounds\");\n        }\n        return this._bounds;\n    }\n\n    /**\n     * clone this Ellipse\n     * @returns {Ellipse} new Ellipse\n     */\n    clone() {\n        return new Ellipse(\n            this.pos.x,\n            this.pos.y,\n            this.radiusV.x * 2,\n            this.radiusV.y * 2\n        );\n    }\n}\n\n/**\n * additional import for TypeScript\n * @import Vector2d from \"./../math/vector2.js\";\n **/\n\n/**\n * @classdesc\n * represents a point in a 2d space\n */\nclass Point {\n    constructor(x = 0, y = 0) {\n        /**\n         * the position of the point on the horizontal axis\n         * @type {number}\n         * @default 0\n         */\n        this.x = x;\n\n        /**\n         * the position of the point on the vertical axis\n         * @type {number}\n         * @default 0\n         */\n        this.y = y;\n\n        /**\n         * the shape type (used internally)\n         * @type {string}\n         * @default \"Point\"\n         */\n        this.type = \"Point\";\n    }\n\n    /** @ignore */\n    onResetEvent(x = 0, y = 0) {\n        this.set(x, y);\n    }\n\n    /**\n     * set the Point x and y properties to the given values\n     * @param {number} x\n     * @param {number} y\n     * @returns {Point} Reference to this object for method chaining\n     */\n    set(x = 0, y = 0) {\n        this.x = x;\n        this.y = y;\n        return this;\n    }\n\n    /**\n     * return true if this point is equal to the given point\n     * @param {number|Point|Vector2d} x\n     * @param {number} [y]\n     * @returns {boolean}\n     */\n    equals(...args) {\n        let _x, _y;\n        if (args.length === 2) {\n            // x, y\n            [_x, _y] = args;\n        } else {\n            // point\n            [_x, _y] = [args[0].x, args[0].y];\n        }\n        return this.x === _x && this.y === _y;\n    }\n\n    /**\n     * clone this Point\n     * @returns {Point} new Point\n     */\n    clone() {\n        return new Point(this.x, this.y);\n    }\n}\n\n/**\n * additional import for TypeScript\n * @import Vector2d from \"./../math/vector2.js\";\n **/\n\n/**\n * @classdesc\n * a rectangle Object\n * @augments Polygon\n */\nclass Rect extends Polygon {\n    /**\n     * @param {number} x - position of the Rectangle\n     * @param {number} y - position of the Rectangle\n     * @param {number} w - width of the rectangle\n     * @param {number} h - height of the rectangle\n     */\n    constructor(x, y, w, h) {\n        // parent constructor\n        super(x, y, [\n            pool.pull(\"Vector2d\", 0, 0), // 0, 0\n            pool.pull(\"Vector2d\", w, 0), // 1, 0\n            pool.pull(\"Vector2d\", w, h), // 1, 1\n            pool.pull(\"Vector2d\", 0, h)  // 0, 1\n        ]);\n\n        /**\n         * the shape type (used internally)\n         * @type {string}\n         * @default \"Rectangle\"\n         */\n        this.type = \"Rectangle\";\n    }\n\n    /** @ignore */\n    onResetEvent(x, y, w, h) {\n        this.setShape(x, y, w, h);\n    }\n\n    /**\n     * set new value to the rectangle shape\n     * @param {number} x - position of the Rectangle\n     * @param {number} y - position of the Rectangle\n     * @param {number|Vector2d[]} w - width of the rectangle, or an array of vector defining the rectangle\n     * @param {number} [h] - height of the rectangle, if a numeral width parameter is specified\n     * @returns {Rect} this rectangle\n     */\n    setShape(x, y, w, h) {\n        let points = w; // assume w is an array by default\n\n        this.pos.set(x, y);\n\n        if (arguments.length === 4) {\n            points = this.points;\n            points[0].set(0, 0); // 0, 0\n            points[1].set(w, 0); // 1, 0\n            points[2].set(w, h); // 1, 1\n            points[3].set(0, h); // 0, 1\n        }\n\n        this.setVertices(points);\n        return this;\n    }\n\n\n    /**\n     * left coordinate of the Rectangle\n     * @type {number}\n     */\n    get left() {\n        return this.pos.x;\n    }\n\n    /**\n     * right coordinate of the Rectangle\n     * @type {number}\n     */\n    get right() {\n        let w = this.width;\n        return (this.left + w) || w;\n    }\n\n    /**\n     * top coordinate of the Rectangle\n     * @type {number}\n     */\n    get top() {\n        return this.pos.y;\n    }\n\n    /**\n     * bottom coordinate of the Rectangle\n     * @type {number}\n     */\n    get bottom() {\n        let h = this.height;\n        return (this.top + h) || h;\n    }\n\n    /**\n     * width of the Rectangle\n     * @type {number}\n     */\n    get width() {\n        return this.points[2].x;\n    }\n    set width(value) {\n        this.points[1].x = this.points[2].x = value;\n        this.recalc();\n        this.updateBounds();\n    }\n\n    /**\n     * height of the Rectangle\n     * @type {number}\n     */\n    get height() {\n        return this.points[2].y;\n    }\n    set height(value) {\n        this.points[2].y = this.points[3].y = value;\n        this.recalc();\n        this.updateBounds();\n    }\n\n    /**\n     * absolute center of this rectangle on the horizontal axis\n     * @type {number}\n     */\n    get centerX() {\n        if (isFinite(this.width)) {\n            return this.left + (this.width / 2);\n        } else {\n            return this.width;\n        }\n    }\n    set centerX (value) {\n        this.pos.x = value - (this.width / 2);\n        this.recalc();\n        this.updateBounds();\n    }\n\n    /**\n     * absolute center of this rectangle on the vertical axis\n     * @type {number}\n     */\n    get centerY() {\n        if (isFinite(this.height)) {\n            return this.top + (this.height / 2);\n        } else {\n            return this.height;\n        }\n    }\n    set centerY(value) {\n        this.pos.y = value - (this.height / 2);\n        this.recalc();\n        this.updateBounds();\n    }\n\n    /**\n     * center the rectangle position around the given coordinates\n     * @param {number} x - the x coordinate around which to center this rectangle\n     * @param {number} y - the y coordinate around which to center this rectangle\n     * @returns {Rect} this rectangle\n     */\n    centerOn(x, y) {\n        this.centerX = x;\n        this.centerY = y;\n        return this;\n    }\n\n    /**\n     * resize the rectangle\n     * @param {number} w - new width of the rectangle\n     * @param {number} h - new height of the rectangle\n     * @returns {Rect} this rectangle\n     */\n    resize(w, h) {\n        this.width = w;\n        this.height = h;\n        return this;\n    }\n\n    /**\n     * scale the rectangle\n     * @param {number} x - a number representing the abscissa of the scaling vector.\n     * @param {number} [y=x] - a number representing the ordinate of the scaling vector.\n     * @returns {Rect} this rectangle\n     */\n    scale(x, y = x) {\n        this.width *= x;\n        this.height *= y;\n        return this;\n    }\n\n    /**\n     * clone this rectangle\n     * @returns {Rect} new rectangle\n     */\n    clone() {\n        return new Rect(this.left, this.top, this.width, this.height);\n    }\n\n    /**\n     * copy the position and size of the given rectangle into this one\n     * @param {Rect} rect - Source rectangle\n     * @returns {Rect} new rectangle\n     */\n    copy(rect) {\n        return this.setShape(rect.left, rect.top, rect.width, rect.height);\n    }\n\n    /**\n     * merge this rectangle with another one\n     * @param {Rect} rect - other rectangle to union with\n     * @returns {Rect} the union(ed) rectangle\n     */\n    union(rect) {\n        let x1 = Math.min(this.left, rect.left);\n        let y1 = Math.min(this.top, rect.top);\n\n        this.resize(\n            Math.max(this.right, rect.right) - x1,\n            Math.max(this.bottom, rect.bottom) - y1\n        );\n\n        this.pos.set(x1, y1);\n\n        return this;\n    }\n\n    /**\n     * check if this rectangle is intersecting with the specified one\n     * @param {Rect} rect\n     * @returns {boolean} true if overlaps\n     */\n    overlaps(rect) {\n        return (\n            this.left < rect.right &&\n            rect.left < this.right &&\n            this.top < rect.bottom &&\n            rect.top < this.bottom\n        );\n    }\n\n    /**\n     * Returns true if the rectangle contains the given point or rectangle\n     * @param {number|Vector2d|Rect} x -  x coordinate or a vector point, or a rectangle to test\n     * @param {number} [y] - y coordinate\n     * @returns {boolean} True if the rectangle contain the given point or rectangle, otherwise false\n     * @example\n     * if (rect.contains(10, 10)) {\n     *   // do something\n     * }\n     * // or\n     * if (rect.contains(myVector2d)) {\n     *   // do something\n     * }\n     * if (rect.contains(myRect)) {\n     *   // do something\n     * }\n     */\n    contains() {\n        let arg0 = arguments[0];\n        let _x1, _x2, _y1, _y2;\n        if (arguments.length === 2) {\n            // x, y\n            _x1 = _x2 = arg0;\n            _y1 = _y2 = arguments[1];\n        } else {\n            // only Rect based objects define a top and bottom properties\n            if (typeof arg0.bottom === \"number\") {\n                // me.Rect\n                _x1 = arg0.left;\n                _x2 = arg0.right;\n                _y1 = arg0.top;\n                _y2 = arg0.bottom;\n            } else {\n                // vector\n                _x1 = _x2 = arg0.x;\n                _y1 = _y2 = arg0.y;\n            }\n        }\n        return (\n            _x1 >= this.left &&\n             _x2 <= this.right &&\n             _y1 >= this.top &&\n             _y2 <= this.bottom\n        );\n    }\n\n    /**\n     * check if this rectangle is identical to the specified one\n     * @param {Rect} rect\n     * @returns {boolean} true if equals\n     */\n    equals(rect) {\n        return (\n            rect.left === this.left &&\n            rect.right === this.right &&\n            rect.top === this.top &&\n            rect.bottom === this.bottom\n        );\n    }\n\n    /**\n     * determines whether all coordinates of this rectangle are finite numbers.\n     * @returns {boolean} false if all coordinates are positive or negative Infinity or NaN; otherwise, true.\n     */\n    isFinite() {\n        return (isFinite(this.left) && isFinite(this.top) && isFinite(this.width) && isFinite(this.height));\n    }\n\n    /**\n     * Returns a polygon whose edges are the same as this box.\n     * @returns {Polygon} a new Polygon that represents this rectangle.\n     */\n    toPolygon() {\n        return pool.pull(\"Polygon\",\n            this.left, this.top, this.points\n        );\n    }\n}\n\n// https://developer.chrome.com/blog/canvas2d/#round-rect\n\n/**\n * @classdesc\n * a rectangle object with rounded corners\n * @augments Rect\n */\nclass RoundRect extends Rect {\n    /**\n     * @param {number} x - position of the rounded rectangle\n     * @param {number} y - position of the rounded rectangle\n     * @param {number} width - the rectangle width\n     * @param {number} height - the rectangle height\n     * @param {number} [radius=20] - the radius of the rounded corner\n     */\n    constructor(x, y, width, height, radius = 20) {\n        // parent constructor\n        super(x, y, width, height);\n\n        /**\n         * the shape type (used internally)\n         * @type {string}\n         * @default \"RoundRect\"\n         */\n        this.type = \"RoundRect\";\n\n        // set the corner radius\n        this.radius = radius;\n    }\n\n    /** @ignore */\n    onResetEvent(x, y, w, h, radius) {\n        super.setShape(x, y, w, h);\n        this.radius = radius;\n    }\n\n\n    /**\n     * the radius of the rounded corner\n     * @type {number}\n     * @default 20\n     */\n    get radius() {\n        return this._radius;\n    }\n    set radius(value) {\n        // verify the rectangle is at least as wide and tall as the rounded corners.\n        if (this.width < 2 * value) {\n            value = this.width / 2;\n        }\n        if (this.height < 2 * value) {\n            value = this.height / 2;\n        }\n        this._radius = value;\n    }\n\n    /**\n     * copy the position, size and radius of the given rounded rectangle into this one\n     * @param {RoundRect} rrect - source rounded rectangle\n     * @returns {RoundRect} new rectangle\n     */\n    copy(rrect) {\n        super.setShape(rrect.pos.x, rrect.pos.y, rrect.width, rrect.height);\n        this.radius = rrect.radius;\n        return this;\n    }\n\n    /**\n     * Returns true if the rounded rectangle contains the given point or rectangle\n     * @param {number|Vector2d|Rect} x -  x coordinate or a vector point, or a Rect to test\n     * @param {number} [y] - y coordinate\n     * @returns {boolean} True if the rounded rectangle contain the given point or rectangle, otherwise false\n     * @example\n     * if (rect.contains(10, 10)) {\n     *   // do something\n     * }\n     * // or\n     * if (rect.contains(myVector2d)) {\n     *   // do something\n     * }\n     * if (rect.contains(myRect)) {\n     *   // do something\n     * }\n     */\n    contains() {\n        let arg0 = arguments[0];\n        let _x, _y;\n        if (arguments.length === 2) {\n            // x, y\n            _x = arg0;\n            _y = arguments[1];\n        } else {\n            if ((typeof arg0.radius === \"undefined\") && (typeof arg0.bottom === \"number\")) {\n                // it's a rect\n                return super.contains(arg0);\n            } else {\n                // else a vector or point\n                _x = arg0.x;\n                _y = arg0.y;\n            }\n        }\n\n        // check whether point is outside the bounding box\n        if (_x < this.left || _x >= this.right || _y < this.top || _y >= this.bottom) {\n            return false; // outside bounding box\n        }\n\n        // check whether point is within the bounding box minus radius\n        if ((_x >= this.left + this.radius && _x <= this.right - this.radius) || (_y >= this.top + this.radius && _y <= this.bottom - this.radius)) {\n            return true;\n        }\n\n        // check whether point is in one of the rounded corner areas\n        let tx, ty;\n        const radiusX =  Math.max(0, Math.min(this.radius, this.width / 2));\n        const radiusY =  Math.max(0, Math.min(this.radius, this.height / 2));\n\n        if (_x < this.left + radiusX && _y < this.top + radiusY) {\n            tx = _x - this.left - radiusX;\n            ty = _y - this.top - radiusY;\n        } else if (_x > this.right - radiusX && _y < this.top + radiusY) {\n            tx = _x - this.right + radiusX;\n            ty = _y - this.top - radiusY;\n        } else if (_x > this.right - radiusX && _y > this.bottom - radiusY) {\n            tx = _x - this.right + radiusX;\n            ty = _y - this.bottom + radiusY;\n        } else if (_x < this.left + radiusX && _y > this.bottom - radiusY) {\n            tx = _x - this.left - radiusX;\n            ty = _y - this.bottom + radiusY;\n        } else {\n            return false; // inside and not within the rounded corner area\n        }\n\n        // Pythagorean theorem.\n        return ((tx * tx) + (ty * ty) <= (radiusX * radiusY));\n    }\n\n    /**\n     * check if this RoundRect is identical to the specified one\n     * @param {RoundRect} rrect\n     * @returns {boolean} true if equals\n     */\n    equals(rrect) {\n        return super.equals(rrect) && this.radius === rrect.radius;\n    }\n\n    /**\n     * clone this RoundRect\n     * @returns {RoundRect} new RoundRect\n     */\n    clone() {\n        return new RoundRect(this.pos.x, this.pos.y, this.width, this.height, this.radius);\n    }\n}\n\n/**\n * a collection of array utility functions\n * @namespace utils.array\n */\n\n/**\n * Remove the specified object from the given Array\n * @public\n * @memberof utils.array\n * @name remove\n * @param {Array.<number|string|Object>} arr - array from which to remove an object\n * @param {object} obj - to be removed\n * @returns {Array.<number|string|Object>} the modified Array\n * let arr = [ \"foo\", \"bar\", \"baz\" ];\n * // remove \"foo\" from the array\n * me.utils.array.remove(arr, \"foo\");\n */\nfunction remove(arr, obj) {\n    let i = Array.prototype.indexOf.call(arr, obj);\n    if (i !== -1) {\n        Array.prototype.splice.call(arr, i, 1);\n    }\n    return arr;\n}\n\n/**\n * return a random array element\n * @public\n * @memberof utils.array\n * @name random\n * @param {Array.<number|string|Object>} arr - array to pick a element\n * @returns {any} random member of array\n * @example\n * // Select a random array element\n * let arr = [ \"foo\", \"bar\", \"baz\" ];\n * console.log(me.utils.array.random(arr));\n */\nfunction random(arr) {\n    return arr[random$1(0, arr.length)];\n}\n\n/**\n * return a weighted random array element, favoring the earlier entries\n * @public\n * @memberof utils.array\n * @name weightedRandom\n * @param {Array.<number|string|Object>} arr - array to pick a element\n * @returns {any} random member of array\n */\nfunction weightedRandom(arr) {\n    return arr[weightedRandom$1(0, arr.length)];\n}\n\nvar array$1 = {\n\t__proto__: null,\n\trandom: random,\n\tremove: remove,\n\tweightedRandom: weightedRandom\n};\n\n/**\n * @import World from \"./world.js\";\n * @import Container from \"./../renderable/container.js\";\n * @import Bounds from \"./bounds.js\";\n */\n\n/*\n * A QuadTree implementation in JavaScript, a 2d spatial subdivision algorithm.\n * Based on the QuadTree Library by Timo Hausmann and released under the MIT license\n * https://github.com/timohausmann/quadtree-js/\n**/\n\n/**\n * a pool of `QuadTree` objects\n * @ignore\n */\nlet QT_ARRAY = [];\n\n/**\n * will pop a quadtree object from the array\n * or create a new one if the array is empty\n * @ignore\n */\nfunction QT_ARRAY_POP(world, bounds, max_objects = 4, max_levels = 4, level = 0) {\n    if (QT_ARRAY.length > 0) {\n        let _qt =  QT_ARRAY.pop();\n        _qt.world = world;\n        _qt.bounds = bounds;\n        _qt.max_objects = max_objects;\n        _qt.max_levels  = max_levels;\n        _qt.level = level;\n        return _qt;\n    } else {\n        return new QuadTree(world, bounds, max_objects, max_levels, level);\n    }\n}\n\n/**\n * Push back a quadtree back into the array\n * @ignore\n */\nfunction QT_ARRAY_PUSH(qt) {\n    QT_ARRAY.push(qt);\n}\n\n/**\n * a temporary vector object to be reused\n * @ignore\n */\nlet QT_VECTOR = new Vector2d();\n\n/**\n * @classdesc\n * a QuadTree implementation in JavaScript, a 2d spatial subdivision algorithm.\n * @see game.world.broadphase\n */\nclass QuadTree {\n    /**\n     * @param {World} world - the physic world this QuadTree belongs to\n     * @param {Bounds} bounds - bounds of the node\n     * @param {number} [max_objects=4] - max objects a node can hold before splitting into 4 subnodes\n     * @param {number} [max_levels=4] - total max levels inside root Quadtree\n     * @param {number} [level] - deepth level, required for subnodes\n     */\n    constructor(world, bounds, max_objects = 4, max_levels = 4, level = 0) {\n\n        this.world = world;\n        this.bounds = bounds;\n\n        this.max_objects = max_objects;\n        this.max_levels  = max_levels;\n\n        this.level = level;\n\n        this.objects = [];\n        this.nodes = [];\n    }\n\n    /*\n     * Split the node into 4 subnodes\n     */\n    split() {\n        let nextLevel = this.level + 1,\n            subWidth  = this.bounds.width / 2,\n            subHeight = this.bounds.height / 2,\n            left = this.bounds.left,\n            top = this.bounds.top;\n\n        //top right node\n        this.nodes[0] = QT_ARRAY_POP(\n            this.world,\n            {\n                left : left + subWidth,\n                top : top,\n                width : subWidth,\n                height : subHeight\n            },\n            this.max_objects,\n            this.max_levels,\n            nextLevel\n        );\n\n        //top left node\n        this.nodes[1] = QT_ARRAY_POP(\n            this.world,\n            {\n                left : left,\n                top: top,\n                width : subWidth,\n                height : subHeight\n            },\n            this.max_objects,\n            this.max_levels,\n            nextLevel\n        );\n\n        //bottom left node\n        this.nodes[2] = QT_ARRAY_POP(\n            this.world,\n            {\n                left : left,\n                top : top + subHeight,\n                width : subWidth,\n                height : subHeight\n            },\n            this.max_objects,\n            this.max_levels,\n            nextLevel\n        );\n\n        //bottom right node\n        this.nodes[3] = QT_ARRAY_POP(\n            this.world,\n            {\n                left : left + subWidth,\n                top : top + subHeight,\n                width : subWidth,\n                height : subHeight\n            },\n            this.max_objects,\n            this.max_levels,\n            nextLevel\n        );\n    }\n\n    /*\n     * Determine which node the object belongs to\n     * @param {Rect} rect bounds of the area to be checked\n     * @returns Integer index of the subnode (0-3), or -1 if rect cannot completely fit within a subnode and is part of the parent node\n     */\n    getIndex(item) {\n        let pos;\n        let bounds = item.getBounds();\n\n        // use game world coordinates for floating items\n        if (item.isFloating === true) {\n            pos = this.world.app.viewport.localToWorld(bounds.left, bounds.top, QT_VECTOR);\n        } else {\n            pos = QT_VECTOR.set(item.left, item.top);\n        }\n\n        let index = -1,\n            rx = pos.x,\n            ry = pos.y,\n            rw = bounds.width,\n            rh = bounds.height,\n            verticalMidpoint = this.bounds.left + (this.bounds.width / 2),\n            horizontalMidpoint = this.bounds.top + (this.bounds.height / 2),\n            //rect can completely fit within the top quadrants\n            topQuadrant = (ry < horizontalMidpoint && ry + rh < horizontalMidpoint),\n            //rect can completely fit within the bottom quadrants\n            bottomQuadrant = (ry > horizontalMidpoint);\n\n        //rect can completely fit within the left quadrants\n        if (rx < verticalMidpoint && rx + rw < verticalMidpoint) {\n            if (topQuadrant) {\n                index = 1;\n            } else if (bottomQuadrant) {\n                index = 2;\n            }\n        } else if (rx > verticalMidpoint) {\n            //rect can completely fit within the right quadrants\n            if (topQuadrant) {\n                index = 0;\n            } else if (bottomQuadrant) {\n                index = 3;\n            }\n        }\n\n        return index;\n    }\n\n    /**\n     * Insert the given object container into the node.\n     * @name insertContainer\n     * @memberof QuadTree\n     * @param {Container} container - group of objects to be added\n     */\n    insertContainer(container) {\n        const children = container.children;\n        const childrenLength = children.length;\n        for (let i = childrenLength, child; i--, (child = children[i]);) {\n            if (child.isKinematic !== true) {\n                if (typeof child.addChild === \"function\") {\n                    if (child.name !== \"rootContainer\") {\n                        this.insert(child);\n                    }\n                    // recursivly insert all childs\n                    this.insertContainer(child);\n                } else {\n                    // only insert object with a bounding box\n                    // Probably redundant with `isKinematic`\n                    if (typeof (child.getBounds) === \"function\") {\n                        this.insert(child);\n                    }\n                }\n            }\n        }\n    }\n\n    /**\n     * Insert the given object into the node. If the node\n     * exceeds the capacity, it will split and add all\n     * objects to their corresponding subnodes.\n     * @name insert\n     * @memberof QuadTree\n     * @param {object} item - object to be added\n     */\n    insert(item) {\n        let index = -1;\n\n        //if we have subnodes ...\n        if (this.nodes.length > 0) {\n            index = this.getIndex(item);\n\n            if (index !== -1) {\n                this.nodes[index].insert(item);\n                return;\n            }\n        }\n\n        this.objects.push(item);\n\n        if (this.objects.length > this.max_objects && this.level < this.max_levels) {\n\n            //split if we don't already have subnodes\n            if (this.nodes.length === 0) {\n                this.split();\n            }\n\n            let i = 0;\n\n            //add all objects to there corresponding subnodes\n            while (i < this.objects.length) {\n\n                index = this.getIndex(this.objects[i]);\n\n                if (index !== -1) {\n                    this.nodes[index].insert(this.objects.splice(i, 1)[0]);\n                } else {\n                    i = i + 1;\n                }\n            }\n        }\n    }\n\n    /**\n     * Return all objects that could collide with the given object\n     * @name retrieve\n     * @memberof QuadTree\n     * @param {object} item - object to be checked against\n     * @param {object} [fn] - a sorting function for the returned array\n     * @returns {object[]} array with all detected objects\n     */\n    retrieve(item, fn) {\n        let returnObjects = this.objects;\n\n        //if we have subnodes ...\n        if (this.nodes.length > 0) {\n\n            let index = this.getIndex(item);\n\n            //if rect fits into a subnode ..\n            if (index !== -1) {\n                returnObjects = returnObjects.concat(this.nodes[index].retrieve(item));\n            } else {\n                //if rect does not fit into a subnode, check it against all subnodes\n                for (let i = 0; i < this.nodes.length; i = i + 1) {\n                    returnObjects = returnObjects.concat(this.nodes[i].retrieve(item));\n                }\n            }\n        }\n\n        if (typeof(fn) === \"function\") {\n            returnObjects.sort(fn);\n        }\n\n        return returnObjects;\n    }\n\n    /**\n     * Remove the given item from the quadtree.\n     * (this function won't recalculate the impacted node)\n     * @name remove\n     * @memberof QuadTree\n     * @param {object} item - object to be removed\n     * @returns {boolean} true if the item was found and removed.\n     */\n    remove(item) {\n        let found = false;\n\n        if (typeof (item.getBounds) === \"undefined\") {\n            // ignore object that cannot be added in the first place\n            return false;\n        }\n\n        //if we have subnodes ...\n        if (this.nodes.length > 0) {\n            // determine to which node the item belongs to\n            let index = this.getIndex(item);\n\n            if (index !== -1) {\n                found = remove(this.nodes[index], item);\n                // trim node if empty\n                if (found && this.nodes[index].isPrunable()) {\n                    this.nodes.splice(index, 1);\n                }\n            }\n        }\n\n        if (found === false) {\n            // try and remove the item from the list of items in this node\n            if (this.objects.indexOf(item) !== -1) {\n                remove(this.objects, item);\n                found = true;\n            }\n        }\n\n        return found;\n    }\n\n    /**\n     * return true if the node is prunable\n     * @name isPrunable\n     * @memberof QuadTree\n     * @returns {boolean} true if the node is prunable\n     */\n    isPrunable() {\n        return !(this.hasChildren() || (this.objects.length > 0));\n    }\n\n    /**\n     * return true if the node has any children\n     * @name hasChildren\n     * @memberof QuadTree\n     * @returns {boolean} true if the node has any children\n     */\n    hasChildren() {\n        for (let i = 0; i < this.nodes.length; i = i + 1) {\n            const subnode = this.nodes[i];\n            if (subnode.length > 0 || subnode.objects.length > 0) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * clear the quadtree\n     * @name clear\n     * @memberof QuadTree\n     * @param {Bounds} [bounds=this.bounds] - the bounds to be cleared\n     */\n    clear(bounds) {\n        this.objects.length = 0;\n\n        for (let i = 0; i < this.nodes.length; i++) {\n            this.nodes[i].clear();\n            // recycle the quadTree object\n            QT_ARRAY_PUSH(this.nodes[i]);\n        }\n        // empty the array\n        this.nodes.length = 0;\n\n        // resize the root bounds if required\n        if (typeof bounds !== \"undefined\") {\n            this.bounds.setMinMax(bounds.min.x, bounds.min.y, bounds.max.x, bounds.max.y);\n        }\n    }\n}\n\n/**\n * @import Point from \"./../geometries/point.js\";\n * @import Rect from \"./../geometries/rectangle.js\";\n * @import Polygon from \"./../geometries/poly.js\";\n **/\n\n/**\n * @classdesc\n * a bound object contains methods for creating and manipulating axis-aligned bounding boxes (AABB).\n */\nclass Bounds {\n    /**\n     * @param {Vector2d[]|Point[]} [vertices] - an array of Vector2d or Point\n     */\n    constructor(vertices) {\n        // @ignore\n        this._center = new Vector2d();\n        this.onResetEvent(vertices);\n\n        /**\n         * the object type (used internally)\n         * @type {string}\n         * @default \"Bounds\"\n         */\n        this.type = \"Bounds\";\n    }\n\n    /**\n     * @ignore\n     */\n    onResetEvent(vertices) {\n        if (typeof this.min === \"undefined\") {\n            this.min = { x: Infinity,  y: Infinity };\n            this.max = { x: -Infinity, y: -Infinity };\n        } else {\n            this.clear();\n        }\n        if (typeof vertices !== \"undefined\") {\n            this.update(vertices);\n        }\n    }\n\n    /**\n     * reset the bound\n     */\n    clear() {\n        this.setMinMax(Infinity, Infinity, -Infinity, -Infinity);\n\n    }\n\n    /**\n     * sets the bounds to the given min and max value\n     * @param {number} minX\n     * @param {number} minY\n     * @param {number} maxX\n     * @param {number} maxY\n     */\n    setMinMax(minX, minY, maxX, maxY) {\n        this.min.x = minX;\n        this.min.y = minY;\n\n        this.max.x = maxX;\n        this.max.y = maxY;\n    }\n\n    /**\n     * x position of the bound\n     * @type {number}\n     */\n    get x() {\n        return this.min.x;\n    }\n\n    set x(value) {\n        let deltaX = this.max.x - this.min.x;\n        this.min.x = value;\n        this.max.x = value + deltaX;\n    }\n\n    /**\n     * y position of the bounds\n     * @type {number}\n     */\n    get y() {\n        return this.min.y;\n    }\n\n    set y(value) {\n        let deltaY = this.max.y - this.min.y;\n\n        this.min.y = value;\n        this.max.y = value + deltaY;\n    }\n\n    /**\n     * width of the bounds\n     * @type {number}\n     */\n    get width() {\n        return this.max.x - this.min.x;\n    }\n\n    set width(value) {\n        this.max.x = this.min.x + value;\n    }\n\n    /**\n     * width of the bounds\n     * @type {number}\n     */\n    get height() {\n        return this.max.y - this.min.y;\n    }\n\n    set height(value) {\n        this.max.y = this.min.y + value;\n    }\n\n    /**\n     * left coordinate of the bound\n     * @type {number}\n     */\n    get left() {\n        return this.min.x;\n    }\n\n    /**\n     * right coordinate of the bound\n     * @type {number}\n     */\n    get right() {\n        return this.max.x;\n    }\n\n    /**\n     * top coordinate of the bound\n     * @type {number}\n     */\n    get top() {\n        return this.min.y;\n    }\n\n    /**\n     * bottom coordinate of the bound\n     * @type {number}\n     */\n    get bottom() {\n        return this.max.y;\n    }\n\n    /**\n     * center position of the bound on the x axis\n     * @type {number}\n     */\n    get centerX() {\n        return this.min.x + (this.width / 2);\n    }\n\n    /**\n     * center position of the bound on the y axis\n     * @type {number}\n     */\n    get centerY() {\n        return this.min.y + (this.height / 2);\n    }\n\n    /**\n     * return the center position of the bound\n     * @type {Vector2d}\n     */\n    get center() {\n        return this._center.set(this.centerX, this.centerY);\n    }\n\n    /**\n     * center the bounds position around the given coordinates\n     * @param {number} x - the x coordinate around which to center this bounds\n     * @param {number} y - the y coordinate around which to center this bounds\n     */\n    centerOn(x, y) {\n        this.shift(x - this.width / 2, y - this.height / 2);\n        return this;\n    }\n\n    /**\n     * Updates bounds using the given vertices\n     * @param {Vector2d[]|Point[]} vertices - an array of Vector2d or Point\n     */\n    update(vertices) {\n        this.add(vertices, true);\n    }\n\n    /**\n     * add the given vertices to the bounds definition.\n     * @param {Vector2d[]|Point[]} vertices - an array of Vector2d or Point\n     * @param {boolean} [clear=false] - either to reset the bounds before adding the new vertices\n     */\n    add(vertices, clear = false) {\n        const verticeCount = vertices.length;\n        if (clear === true) {\n            this.clear();\n        }\n        for (let i = 0; i < verticeCount; i++) {\n            const vertex = vertices[i];\n            if (vertex.x > this.max.x) this.max.x = vertex.x;\n            if (vertex.x < this.min.x) this.min.x = vertex.x;\n            if (vertex.y > this.max.y) this.max.y = vertex.y;\n            if (vertex.y < this.min.y) this.min.y = vertex.y;\n        }\n    }\n\n    /**\n     * add the given bounds to the bounds definition.\n     * @param {Bounds} bounds\n     * @param {boolean} [clear=false] - either to reset the bounds before adding the new vertices\n     */\n    addBounds(bounds, clear = false) {\n        if (clear === true) {\n            this.max.x = bounds.max.x;\n            this.min.x = bounds.min.x;\n            this.max.y = bounds.max.y;\n            this.min.y = bounds.min.y;\n        } else {\n            if (bounds.max.x > this.max.x) this.max.x = bounds.max.x;\n            if (bounds.min.x < this.min.x) this.min.x = bounds.min.x;\n            if (bounds.max.y > this.max.y) this.max.y = bounds.max.y;\n            if (bounds.min.y < this.min.y) this.min.y = bounds.min.y;\n        }\n    }\n\n    /**\n     * add the given point to the bounds definition.\n     * @param {Vector2d|Point} point - the vector or point to be added to the bounds\n     * @param {Matrix2d} [m] - an optional transform to apply to the given point (if the given point is a Vector2d)\n     */\n    addPoint(point, m) {\n        if ((typeof m !== \"undefined\")) {\n            // only Vectors object have a rotate function\n            point = m.apply(point);\n        }\n        this.min.x = Math.min(this.min.x, point.x);\n        this.max.x = Math.max(this.max.x, point.x);\n        this.min.y = Math.min(this.min.y, point.y);\n        this.max.y = Math.max(this.max.y, point.y);\n    }\n\n    /**\n     * add the given quad coordinates to this bound definition, multiplied by the given matrix\n     * @param {number} x0 - left X coordinates of the quad\n     * @param {number} y0 - top Y coordinates of the quad\n     * @param {number} x1 - right X coordinates of the quad\n     * @param {number} y1 - bottom y coordinates of the quad\n     * @param {Matrix2d} [m] - an optional transform to apply to the given frame coordinates\n     */\n    addFrame(x0, y0, x1, y1, m) {\n        let v = pool.pull(\"Point\");\n\n        this.addPoint(v.set(x0, y0), m);\n        this.addPoint(v.set(x1, y0), m);\n        this.addPoint(v.set(x0, y1), m);\n        this.addPoint(v.set(x1, y1), m);\n\n        pool.push(v);\n    }\n\n    /**\n     * Returns true if the bounds contains the given point.\n     * @param {number|Vector2d} x -  x coordinate or a vector point to check\n     * @param {number} [y] - y coordinate\n     * @returns {boolean} True if the bounds contain the point, otherwise false\n     * @example\n     * if (bounds.contains(10, 10)) {\n     *   // do something\n     * }\n     * // or\n     * if (bounds.contains(myVector2d)) {\n     *   // do something\n     * }\n     */\n    contains() {\n        let arg0 = arguments[0];\n        let _x1, _x2, _y1, _y2;\n        if (arguments.length === 2) {\n            // x, y\n            _x1 = _x2 = arg0;\n            _y1 = _y2 = arguments[1];\n        } else {\n            if (typeof arg0.max !== \"undefined\") {\n                // only bounds define min and max properties\n                _x1 = arg0.min.x;\n                _x2 = arg0.max.x;\n                _y1 = arg0.min.y;\n                _y2 = arg0.max.y;\n            } else {\n                // vector\n                _x1 = _x2 = arg0.x;\n                _y1 = _y2 = arg0.y;\n            }\n        }\n\n        return _x1 >= this.min.x && _x2 <= this.max.x\n            && _y1 >= this.min.y && _y2 <= this.max.y;\n    }\n\n    /**\n     * Returns true if the two bounds intersect.\n     * @param {Bounds|Rect} bounds\n     * @returns {boolean} True if the bounds overlap, otherwise false\n     */\n    overlaps(bounds) {\n        return !(this.right < bounds.left || this.left > bounds.right ||\n                 this.bottom < bounds.top || this.top > bounds.bottom);\n    }\n\n    /**\n     * determines whether all coordinates of this bounds are finite numbers.\n     * @returns {boolean} false if all coordinates are positive or negative Infinity or NaN; otherwise, true.\n     */\n    isFinite() {\n        return (isFinite(this.min.x) && isFinite(this.max.x) && isFinite(this.min.y) && isFinite(this.max.y));\n    }\n\n    /**\n     * Translates the bounds by the given point\n     * @param {number|Vector2d} x -  x coordinate or a vector point to translate by\n     * @param {number} [y]\n     * @example\n     * bounds.translate(10, 10);\n     * // or\n     * bounds.translate(myVector2d);\n     */\n    translate() {\n        let _x, _y;\n        if (arguments.length === 2) {\n            // x, y\n            _x = arguments[0];\n            _y = arguments[1];\n        } else {\n            // vector\n            _x = arguments[0].x;\n            _y = arguments[0].y;\n        }\n        this.min.x += _x;\n        this.max.x += _x;\n        this.min.y += _y;\n        this.max.y += _y;\n    }\n\n    /**\n     * Shifts the bounds to the given x, y position.\n     * @param {number|Vector2d} x -  x coordinate or a vector point to shift to\n     * @param {number} [y]\n     * @example\n     * bounds.shift(10, 10);\n     * // or\n     * bounds.shift(myVector2d);\n     */\n    shift() {\n        let _x, _y;\n\n        if (arguments.length === 2) {\n            // x, y\n            _x = arguments[0];\n            _y = arguments[1];\n        } else {\n            // vector\n            _x = arguments[0].x;\n            _y = arguments[0].y;\n        }\n\n        let deltaX = this.max.x - this.min.x,\n            deltaY = this.max.y - this.min.y;\n\n        this.min.x = _x;\n        this.max.x = _x + deltaX;\n        this.min.y = _y;\n        this.max.y = _y + deltaY;\n    }\n\n    /**\n     * clone this bounds\n     * @returns {Bounds}\n     */\n    clone() {\n        let bounds = new Bounds();\n        bounds.addBounds(this);\n        return bounds;\n    }\n\n    /**\n     * Returns a polygon whose edges are the same as this bounds.\n     * @returns {Polygon} a new Polygon that represents this bounds.\n     */\n    toPolygon () {\n        return pool.pull(\"Polygon\", this.x, this.y, [\n            pool.pull(\"Vector2d\", 0,          0),\n            pool.pull(\"Vector2d\", this.width, 0),\n            pool.pull(\"Vector2d\", this.width, this.height),\n            pool.pull(\"Vector2d\", 0,          this.height)\n        ]);\n    }\n\n}\n\n/**\n * @import Line from \"./../geometries/line.js\";\n * @import Renderable from \"./../renderable/renderable.js\";\n **/\n\n/**\n * Collision detection (and projection-based collision response) of 2D shapes.<br>\n * Based on the Separating Axis Theorem and supports detecting collisions between simple Axis-Aligned Boxes, convex polygons and circles based shapes.\n * @namespace collision\n */\n\nlet collision = {\n\n    /**\n      * The maximum number of children that a quadtree node can contain before it is split into sub-nodes.\n      * @name maxChildren\n      * @memberof collision\n      * @public\n      * @type {number}\n      * @default 8\n      * @see game.world.broadphase\n      */\n    maxChildren : 8,\n\n    /**\n      * The maximum number of levels that the quadtree will create.\n      * @name maxDepth\n      * @memberof collision\n      * @public\n      * @type {number}\n      * @default 4\n      * @see game.world.broadphase\n      */\n    maxDepth : 4,\n\n    /**\n     * Enum for collision type values.\n     * @property {number} NO_OBJECT to disable collision check\n     * @property {number} PLAYER_OBJECT playbable characters\n     * @property {number} NPC_OBJECT non playable characters\n     * @property {number} ENEMY_OBJECT enemies objects\n     * @property {number} COLLECTABLE_OBJECT collectable objects\n     * @property {number} ACTION_OBJECT e.g. doors\n     * @property {number} PROJECTILE_OBJECT e.g. missiles\n     * @property {number} WORLD_SHAPE e.g. walls; for map collision shapes\n     * @property {number} USER user-defined collision types (see example)\n     * @property {number} ALL_OBJECT all of the above (including user-defined types)\n     * @readonly\n     * @enum {number}\n     * @name types\n     * @memberof collision\n     * @see Body.setCollisionMask\n     * @see Body.collisionType\n     * @example\n     * // set the body collision type\n     * myEntity.body.collisionType = me.collision.types.PLAYER_OBJECT;\n     *\n     * // filter collision detection with collision shapes, enemies and collectables\n     * myEntity.body.setCollisionMask(\n     *     me.collision.types.WORLD_SHAPE |\n     *     me.collision.types.ENEMY_OBJECT |\n     *     me.collision.types.COLLECTABLE_OBJECT\n     * );\n     *\n     * // User-defined collision types are defined using BITWISE LEFT-SHIFT:\n     * game.collisionTypes = {\n     *     LOCKED_DOOR : me.collision.types.USER << 0,\n     *     OPEN_DOOR   : me.collision.types.USER << 1,\n     *     LOOT        : me.collision.types.USER << 2,\n     * };\n     *\n     * // Set collision type for a door entity\n     * myDoorEntity.body.collisionType = game.collisionTypes.LOCKED_DOOR;\n     *\n     * // Set collision mask for the player entity, so it collides with locked doors and loot\n     * myPlayerEntity.body.setCollisionMask(\n     *     me.collision.types.ENEMY_OBJECT |\n     *     me.collision.types.WORLD_SHAPE |\n     *     game.collisionTypes.LOCKED_DOOR |\n     *     game.collisionTypes.LOOT\n     * );\n     */\n    types : {\n        /** to disable collision check */\n        NO_OBJECT           : 0,\n        PLAYER_OBJECT       : 1 << 0,\n        NPC_OBJECT          : 1 << 1,\n        ENEMY_OBJECT        : 1 << 2,\n        COLLECTABLE_OBJECT  : 1 << 3,\n        ACTION_OBJECT       : 1 << 4, // door, etc...\n        PROJECTILE_OBJECT   : 1 << 5, // missiles, etc...\n        WORLD_SHAPE         : 1 << 6, // walls, etc...\n        USER                : 1 << 7, // user-defined types start here...\n        ALL_OBJECT          : 0xFFFFFFFF // all objects\n    },\n\n    /**\n     * Checks for object colliding with the given line\n     * @name rayCast\n     * @memberof collision\n     * @public\n     * @param {Line} line - line to be tested for collision\n     * @param {Array.<Renderable>} [result] - a user defined array that will be populated with intersecting physic objects.\n     * @returns {Array.<Renderable>} an array of intersecting physic objects\n     * @example\n     *    // define a line accross the viewport\n     *    let ray = new me.Line(\n     *        // absolute position of the line\n     *        0, 0, [\n     *        // starting point relative to the initial position\n     *        new me.Vector2d(0, 0),\n     *        // ending point\n     *        new me.Vector2d(me.game.viewport.width, me.game.viewport.height)\n     *    ]);\n     *\n     *    // check for collition\n     *    result = me.collision.rayCast(ray);\n     *\n     *    if (result.length > 0) {\n     *        // ...\n     *    }\n     */\n    rayCast(line, result) { return game.world.detector.rayCast(line, result); }\n};\n\n/**\n * a collection of utility functions\n * @namespace utils.function\n */\n\n/**\n * Executes a function as soon as the interpreter is idle (stack empty).\n * @public\n * @memberof utils.function\n * @name defer\n * @param {Function} func - The function to be deferred.\n * @param {object} thisArg - The value to be passed as the this parameter to the target function when the deferred function is called\n * @param {...*} args - Optional additional arguments to carry for the function.\n * @returns {number} id that can be used to clear the deferred function using\n * clearTimeout\n * @example\n * // execute myFunc() when the stack is empty,\n * // with the current context and [1, 2, 3] as parameter\n * me.utils.function.defer(myFunc, this, 1, 2, 3);\n */\nfunction defer(func, thisArg, ...args) {\n    return setTimeout(func.bind(thisArg), 0.01, ...args);\n}\n\n/**\n * returns a function that, when invoked will only be triggered at most once during a given window of time\n * @public\n * @memberof utils.function\n * @name throttle\n * @param {Function} fn - the function to be throttled.\n * @param {number} delay - The delay in ms\n * @param {no_trailing} no_trailing - disable the execution on the trailing edge\n * @returns {Function} the function that will be throttled\n */\nfunction throttle(fn, delay, no_trailing) {\n    let last = globalThis.performance.now(), deferTimer;\n    // `no_trailing` defaults to false.\n    if (typeof no_trailing !== \"boolean\") {\n        no_trailing = false;\n    }\n    return function () {\n        let now = globalThis.performance.now();\n        let elasped = now - last;\n        let args = arguments;\n        if (elasped < delay) {\n            if (no_trailing === false) {\n                // hold on to it\n                clearTimeout(deferTimer);\n                deferTimer = setTimeout(() => {\n                    last = now;\n                    return fn.apply(null, args);\n                }, elasped);\n            }\n        }\n        else {\n            last = now;\n            return fn.apply(null, args);\n        }\n    };\n}\n\nvar _function = {\n\t__proto__: null,\n\tdefer: defer,\n\tthrottle: throttle\n};\n\nvar eventemitter3$1 = {exports: {}};\n\nvar eventemitter3 = eventemitter3$1.exports;\n\n(function (module) {\n\t'use strict';\n\n\tvar has = Object.prototype.hasOwnProperty\n\t  , prefix = '~';\n\n\t/**\n\t * Constructor to create a storage for our `EE` objects.\n\t * An `Events` instance is a plain object whose properties are event names.\n\t *\n\t * @constructor\n\t * @private\n\t */\n\tfunction Events() {}\n\n\t//\n\t// We try to not inherit from `Object.prototype`. In some engines creating an\n\t// instance in this way is faster than calling `Object.create(null)` directly.\n\t// If `Object.create(null)` is not supported we prefix the event names with a\n\t// character to make sure that the built-in object properties are not\n\t// overridden or used as an attack vector.\n\t//\n\tif (Object.create) {\n\t  Events.prototype = Object.create(null);\n\n\t  //\n\t  // This hack is needed because the `__proto__` property is still inherited in\n\t  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n\t  //\n\t  if (!new Events().__proto__) prefix = false;\n\t}\n\n\t/**\n\t * Representation of a single event listener.\n\t *\n\t * @param {Function} fn The listener function.\n\t * @param {*} context The context to invoke the listener with.\n\t * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n\t * @constructor\n\t * @private\n\t */\n\tfunction EE(fn, context, once) {\n\t  this.fn = fn;\n\t  this.context = context;\n\t  this.once = once || false;\n\t}\n\n\t/**\n\t * Add a listener for a given event.\n\t *\n\t * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n\t * @param {(String|Symbol)} event The event name.\n\t * @param {Function} fn The listener function.\n\t * @param {*} context The context to invoke the listener with.\n\t * @param {Boolean} once Specify if the listener is a one-time listener.\n\t * @returns {EventEmitter}\n\t * @private\n\t */\n\tfunction addListener(emitter, event, fn, context, once) {\n\t  if (typeof fn !== 'function') {\n\t    throw new TypeError('The listener must be a function');\n\t  }\n\n\t  var listener = new EE(fn, context || emitter, once)\n\t    , evt = prefix ? prefix + event : event;\n\n\t  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n\t  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n\t  else emitter._events[evt] = [emitter._events[evt], listener];\n\n\t  return emitter;\n\t}\n\n\t/**\n\t * Clear event by name.\n\t *\n\t * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n\t * @param {(String|Symbol)} evt The Event name.\n\t * @private\n\t */\n\tfunction clearEvent(emitter, evt) {\n\t  if (--emitter._eventsCount === 0) emitter._events = new Events();\n\t  else delete emitter._events[evt];\n\t}\n\n\t/**\n\t * Minimal `EventEmitter` interface that is molded against the Node.js\n\t * `EventEmitter` interface.\n\t *\n\t * @constructor\n\t * @public\n\t */\n\tfunction EventEmitter() {\n\t  this._events = new Events();\n\t  this._eventsCount = 0;\n\t}\n\n\t/**\n\t * Return an array listing the events for which the emitter has registered\n\t * listeners.\n\t *\n\t * @returns {Array}\n\t * @public\n\t */\n\tEventEmitter.prototype.eventNames = function eventNames() {\n\t  var names = []\n\t    , events\n\t    , name;\n\n\t  if (this._eventsCount === 0) return names;\n\n\t  for (name in (events = this._events)) {\n\t    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n\t  }\n\n\t  if (Object.getOwnPropertySymbols) {\n\t    return names.concat(Object.getOwnPropertySymbols(events));\n\t  }\n\n\t  return names;\n\t};\n\n\t/**\n\t * Return the listeners registered for a given event.\n\t *\n\t * @param {(String|Symbol)} event The event name.\n\t * @returns {Array} The registered listeners.\n\t * @public\n\t */\n\tEventEmitter.prototype.listeners = function listeners(event) {\n\t  var evt = prefix ? prefix + event : event\n\t    , handlers = this._events[evt];\n\n\t  if (!handlers) return [];\n\t  if (handlers.fn) return [handlers.fn];\n\n\t  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n\t    ee[i] = handlers[i].fn;\n\t  }\n\n\t  return ee;\n\t};\n\n\t/**\n\t * Return the number of listeners listening to a given event.\n\t *\n\t * @param {(String|Symbol)} event The event name.\n\t * @returns {Number} The number of listeners.\n\t * @public\n\t */\n\tEventEmitter.prototype.listenerCount = function listenerCount(event) {\n\t  var evt = prefix ? prefix + event : event\n\t    , listeners = this._events[evt];\n\n\t  if (!listeners) return 0;\n\t  if (listeners.fn) return 1;\n\t  return listeners.length;\n\t};\n\n\t/**\n\t * Calls each of the listeners registered for a given event.\n\t *\n\t * @param {(String|Symbol)} event The event name.\n\t * @returns {Boolean} `true` if the event had listeners, else `false`.\n\t * @public\n\t */\n\tEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n\t  var evt = prefix ? prefix + event : event;\n\n\t  if (!this._events[evt]) return false;\n\n\t  var listeners = this._events[evt]\n\t    , len = arguments.length\n\t    , args\n\t    , i;\n\n\t  if (listeners.fn) {\n\t    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n\t    switch (len) {\n\t      case 1: return listeners.fn.call(listeners.context), true;\n\t      case 2: return listeners.fn.call(listeners.context, a1), true;\n\t      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n\t      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n\t      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n\t      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n\t    }\n\n\t    for (i = 1, args = new Array(len -1); i < len; i++) {\n\t      args[i - 1] = arguments[i];\n\t    }\n\n\t    listeners.fn.apply(listeners.context, args);\n\t  } else {\n\t    var length = listeners.length\n\t      , j;\n\n\t    for (i = 0; i < length; i++) {\n\t      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n\t      switch (len) {\n\t        case 1: listeners[i].fn.call(listeners[i].context); break;\n\t        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n\t        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n\t        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n\t        default:\n\t          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n\t            args[j - 1] = arguments[j];\n\t          }\n\n\t          listeners[i].fn.apply(listeners[i].context, args);\n\t      }\n\t    }\n\t  }\n\n\t  return true;\n\t};\n\n\t/**\n\t * Add a listener for a given event.\n\t *\n\t * @param {(String|Symbol)} event The event name.\n\t * @param {Function} fn The listener function.\n\t * @param {*} [context=this] The context to invoke the listener with.\n\t * @returns {EventEmitter} `this`.\n\t * @public\n\t */\n\tEventEmitter.prototype.on = function on(event, fn, context) {\n\t  return addListener(this, event, fn, context, false);\n\t};\n\n\t/**\n\t * Add a one-time listener for a given event.\n\t *\n\t * @param {(String|Symbol)} event The event name.\n\t * @param {Function} fn The listener function.\n\t * @param {*} [context=this] The context to invoke the listener with.\n\t * @returns {EventEmitter} `this`.\n\t * @public\n\t */\n\tEventEmitter.prototype.once = function once(event, fn, context) {\n\t  return addListener(this, event, fn, context, true);\n\t};\n\n\t/**\n\t * Remove the listeners of a given event.\n\t *\n\t * @param {(String|Symbol)} event The event name.\n\t * @param {Function} fn Only remove the listeners that match this function.\n\t * @param {*} context Only remove the listeners that have this context.\n\t * @param {Boolean} once Only remove one-time listeners.\n\t * @returns {EventEmitter} `this`.\n\t * @public\n\t */\n\tEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n\t  var evt = prefix ? prefix + event : event;\n\n\t  if (!this._events[evt]) return this;\n\t  if (!fn) {\n\t    clearEvent(this, evt);\n\t    return this;\n\t  }\n\n\t  var listeners = this._events[evt];\n\n\t  if (listeners.fn) {\n\t    if (\n\t      listeners.fn === fn &&\n\t      (!once || listeners.once) &&\n\t      (!context || listeners.context === context)\n\t    ) {\n\t      clearEvent(this, evt);\n\t    }\n\t  } else {\n\t    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n\t      if (\n\t        listeners[i].fn !== fn ||\n\t        (once && !listeners[i].once) ||\n\t        (context && listeners[i].context !== context)\n\t      ) {\n\t        events.push(listeners[i]);\n\t      }\n\t    }\n\n\t    //\n\t    // Reset the array, or remove it completely if we have no more listeners.\n\t    //\n\t    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n\t    else clearEvent(this, evt);\n\t  }\n\n\t  return this;\n\t};\n\n\t/**\n\t * Remove all listeners, or those of the specified event.\n\t *\n\t * @param {(String|Symbol)} [event] The event name.\n\t * @returns {EventEmitter} `this`.\n\t * @public\n\t */\n\tEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n\t  var evt;\n\n\t  if (event) {\n\t    evt = prefix ? prefix + event : event;\n\t    if (this._events[evt]) clearEvent(this, evt);\n\t  } else {\n\t    this._events = new Events();\n\t    this._eventsCount = 0;\n\t  }\n\n\t  return this;\n\t};\n\n\t//\n\t// Alias methods names because people roll like that.\n\t//\n\tEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\tEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n\t//\n\t// Expose the prefix.\n\t//\n\tEventEmitter.prefixed = prefix;\n\n\t//\n\t// Allow `EventEmitter` to be imported as module namespace.\n\t//\n\tEventEmitter.EventEmitter = EventEmitter;\n\n\t//\n\t// Expose the module.\n\t//\n\tif ('undefined' !== 'object') {\n\t  module.exports = EventEmitter;\n\t} \n} (eventemitter3$1));\n\nvar eventemitter3Exports = eventemitter3$1.exports;\nvar EventEmitter = /*@__PURE__*/getDefaultExportFromCjs(eventemitter3Exports);\n\n/**\n * an event system based on nodeJS EventEmitter interface\n * @namespace event\n */\n\n// internal instance of the event emiter\nlet eventEmitter = new EventEmitter();\n\n/**\n * event when the DOM is Ready is booting\n * @public\n * @constant\n * @type {string}\n * @name DOM_READY\n * @memberof event\n * @see event.on\n */\nconst DOM_READY = \"dom_ready\";\n\n/**\n * event when the system is booting\n * @public\n * @constant\n * @type {string}\n * @name BOOT\n * @memberof event\n * @see event.on\n */\nconst BOOT = \"me.boot\";\n\n/**\n * event generated when the system update the engine and the renderer by one step\n * @public\n * @constant\n * @type {string}\n * @name TICK\n * @memberof event\n * @see event.on\n */\nconst TICK = \"me.tick\";\n\n/**\n * event generated when the main browser or window is losing focus\n * @public\n * @constant\n * @type {string}\n * @name BLUR\n * @memberof event\n * @see event.on\n */\nconst BLUR = \"me.blur\";\n\n/**\n * event generated when the main browser or window is gaining back focus\n * @public\n * @constant\n * @type {string}\n * @name FOCUS\n * @memberof event\n * @see event.on\n */\nconst FOCUS = \"me.focus\";\n\n/**\n * event when the game is paused <br>\n * Data passed : none <br>\n * @public\n * @constant\n * @type {string}\n * @name STATE_PAUSE\n * @memberof event\n * @see event.on\n */\nconst STATE_PAUSE = \"me.state.onPause\";\n\n/**\n * event for when the game is resumed <br>\n * Data passed : {number} time in ms the game was paused\n * @public\n * @constant\n * @type {string}\n * @name STATE_RESUME\n * @memberof event\n * @see event.on\n */\nconst STATE_RESUME = \"me.state.onResume\";\n\n/**\n * event when the game is stopped <br>\n * Data passed : none <br>\n * @public\n * @constant\n * @type {string}\n * @name STATE_STOP\n * @memberof event\n * @see event.on\n */\nconst STATE_STOP = \"me.state.onStop\";\n\n/**\n * event for when the game is restarted <br>\n * Data passed : {number} time in ms the game was stopped\n * @public\n * @constant\n * @type {string}\n * @name STATE_RESTART\n * @memberof event\n * @see event.on\n */\nconst STATE_RESTART = \"me.state.onRestart\";\n\n/**\n * event for when the changing to a different stage\n * @public\n * @constant\n * @type {string}\n * @name STATE_CHANGE\n * @memberof event\n * @see event.on\n */\nconst STATE_CHANGE = \"me.state.onChange\";\n\n/**\n * event for when a stage is resetted\n * @public\n * @constant\n * @type {string}\n * @name STAGE_RESET\n * @memberof event\n * @see event.on\n*/\nconst STAGE_RESET = \"me.stage.onReset\";\n\n/**\n * event for when the video is initialized<br>\n * Data passed : {Renderer} the renderer instance created\n * @public\n * @constant\n * @type {string}\n * @name VIDEO_INIT\n * @memberof event\n * @see video.init\n * @see event.on\n */\nconst VIDEO_INIT = \"me.video.onInit\";\n\n/**\n * event for when the game manager is initialized <br>\n * Data passed : none <br>\n * @public\n * @constant\n * @type {string}\n * @name GAME_INIT\n * @memberof event\n * @see event.on\n */\nconst GAME_INIT = \"me.game.onInit\";\n\n/**\n * event for when the game manager is resetted <br>\n * Data passed : none <br>\n * @public\n * @constant\n * @type {string}\n * @name GAME_RESET\n * @memberof event\n * @see event.on\n */\nconst GAME_RESET = \"me.game.onReset\";\n\n/**\n * event for when the engine is about to start a new game loop\n * Data passed : {number} time the current time stamp\n * @public\n * @constant\n * @type {string}\n * @name GAME_BEFORE_UPDATE\n * @memberof event\n * @see event.on\n */\nconst GAME_BEFORE_UPDATE = \"me.game.beforeUpdate\";\n\n/**\n * event for the end of the update loop\n * Data passed : {number} time the current time stamp\n * @public\n * @constant\n * @type {string}\n * @name GAME_AFTER_UPDATE\n * @memberof event\n * @see event.on\n */\nconst GAME_AFTER_UPDATE = \"me.game.afterUpdate\";\n\n/**\n * Event for when the game is updated (will be impacted by frame skip, frame interpolation and pause/resume state) <br>\n * Data passed : {number} time the current time stamp\n * @public\n * @constant\n * @type {string}\n * @name GAME_UPDATE\n * @memberof event\n * @see event.on\n */\nconst GAME_UPDATE = \"me.game.onUpdate\";\n\n/**\n * Event for the end of the draw loop\n * Data passed : {number} time the current time stamp\n * @public\n * @constant\n * @type {string}\n * @name GAME_BEFORE_DRAW\n * @memberof event\n * @see event.on\n */\nconst GAME_BEFORE_DRAW = \"me.game.beforeDraw\";\n\n/**\n * Event for the start of the draw loop\n * Data passed : {number} time the current time stamp\n * @public\n * @constant\n * @type {string}\n * @name GAME_AFTER_DRAW\n * @memberof event\n * @see event.on\n */\nconst GAME_AFTER_DRAW = \"me.game.afterDraw\";\n\n\n/**\n * Event for when the physic world is updated\n * Data passed : {number} time the current time stamp\n * @public\n * @constant\n * @type {string}\n * @name WORLD_STEP\n * @memberof event\n * @see event.on\n */\nconst WORLD_STEP = \"me.world.step\";\n\n/**\n * Event for when a level is loaded <br>\n * Data passed : {string} Level Name\n * @public\n * @constant\n * @type {string}\n * @name LEVEL_LOADED\n * @memberof event\n * @see event.on\n */\nconst LEVEL_LOADED = \"me.game.onLevelLoaded\";\n\n/**\n * Event for when everything has loaded <br>\n * Data passed : none <br>\n * @public\n * @constant\n * @type {string}\n * @name LOADER_COMPLETE\n * @memberof event\n * @see event.on\n */\nconst LOADER_COMPLETE = \"me.loader.onload\";\n\n/**\n * Event for displaying a load progress indicator <br>\n * Data passed : {number} [0 .. 1], {Resource} resource object<br>\n * @public\n * @constant\n * @type {string}\n * @name LOADER_PROGRESS\n * @memberof event\n * @see event.on\n */\nconst LOADER_PROGRESS = \"me.loader.onProgress\";\n\n/**\n * Event for when an error occur during preloading <br>\n * Data passed : {Resource} resource object<br>\n * @public\n * @constant\n * @type {string}\n * @name LOADER_ERROR\n * @memberof event\n * @see event.on\n */\nconst LOADER_ERROR = \"me.loader.onError\";\n\n/**\n * Event for pressing a binded key <br>\n * Data passed : {string} user-defined action, {number} keyCode,\n * {boolean} edge state <br>\n * Edge-state is for detecting \"locked\" key bindings. When a locked key\n * is pressed and held, the first event will have the third argument\n * set true. Subsequent events will continue firing with the third\n * argument set false.\n * @public\n * @constant\n * @type {string}\n * @name KEYDOWN\n * @memberof event\n * @see event.on\n * @example\n * me.input.bindKey(me.input.KEY.X, \"jump\", true); // Edge-triggered\n * me.input.bindKey(me.input.KEY.Z, \"shoot\"); // Level-triggered\n * me.event.on(me.event.KEYDOWN, (action, keyCode, edge) => {\n *   // Checking bound keys\n *   if (action === \"jump\") {\n *       if (edge) {\n *           this.doJump();\n *       }\n *\n *       // Make character fall slower when holding the jump key\n *       this.vel.y = this.body.gravity;\n *   }\n * });\n */\nconst KEYDOWN = \"me.input.keydown\";\n\n/**\n * Event for releasing a binded key <br>\n * Data passed : {string} user-defined action, {number} keyCode\n * @public\n * @constant\n * @type {string}\n * @name KEYUP\n * @memberof event\n * @see event.on\n * @example\n * me.event.on(me.event.KEYUP, (action, keyCode) => {\n *   // Checking unbound keys\n *   if (keyCode == me.input.KEY.ESC) {\n *       if (me.state.isPaused()) {\n *           me.state.resume();\n *       }\n *       else {\n *           me.state.pause();\n *       }\n *   }\n * });\n */\nconst KEYUP = \"me.input.keyup\";\n\n/**\n * Event for when a gamepad is connected <br>\n * Data passed : {object} gamepad object\n * @public\n * @constant\n * @type {string}\n * @name GAMEPAD_CONNECTED\n * @memberof event\n * @see event.on\n */\nconst GAMEPAD_CONNECTED = \"gamepad.connected\";\n\n/**\n * Event for when a gamepad is disconnected <br>\n * Data passed : {object} gamepad object\n * @public\n * @constant\n * @type {string}\n * @name GAMEPAD_DISCONNECTED\n * @memberof event\n * @see event.on\n */\nconst GAMEPAD_DISCONNECTED = \"gamepad.disconnected\";\n\n/**\n * Event for when gamepad button/axis state is updated <br>\n * Data passed : {number} index <br>\n * Data passed : {string} type : \"axes\" or \"buttons\" <br>\n * Data passed : {number} button <br>\n * Data passed : {number} current.value <br>\n * Data passed : {boolean} current.pressed\n * @public\n * @constant\n * @type {string}\n * @name GAMEPAD_UPDATE\n * @memberof event\n * @see event.on\n */\nconst GAMEPAD_UPDATE = \"gamepad.update\";\n\n/**\n * Event for pointermove events on the screen area <br>\n * Data passed : {me.Pointer} a Pointer object\n * @public\n * @constant\n * @type {string}\n * @name POINTERMOVE\n * @memberof event\n * @see event.on\n */\nconst POINTERMOVE = \"me.event.pointermove\";\n\n/**\n * Event for onPointerLockChange event <br>\n * Data passed : {boolean} pointer lock status (true/false)\n * @public\n * @constant\n * @type {string}\n * @name POINTERLOCKCHANGE\n * @memberof event\n * @see event.on\n */\nconst POINTERLOCKCHANGE = \"me.event.pointerlockChange\";\n\n/**\n * Event for dragstart events on a Draggable entity <br>\n * Data passed:\n * {object} the drag event <br>\n * {object} the Draggable entity\n * @public\n * @constant\n * @type {string}\n * @name DRAGSTART\n * @memberof event\n * @see event.on\n */\nconst DRAGSTART = \"me.game.dragstart\";\n\n/**\n * Event for dragend events on a Draggable entity <br>\n * Data passed:\n * {object} the drag event <br>\n * {object} the Draggable entity\n * @public\n * @constant\n * @type {string}\n * @name DRAGEND\n * @memberof event\n * @see event.on\n */\nconst DRAGEND = \"me.game.dragend\";\n\n/**\n * Event for when the (browser) window is resized <br>\n * Data passed : {Event} Event object\n * @public\n * @constant\n * @type {string}\n * @name WINDOW_ONRESIZE\n * @memberof event\n * @see event.on\n */\nconst WINDOW_ONRESIZE = \"globalThis.onresize\";\n\n/**\n * Event for when the canvas is resized <br>\n * (this usually follows a WINDOW_ONRESIZE event).<br>\n * Data passed : {number} canvas width <br>\n * Data passed : {number} canvas height\n * @public\n * @constant\n * @type {string}\n * @name CANVAS_ONRESIZE\n * @memberof event\n * @see event.on\n */\nconst CANVAS_ONRESIZE = \"canvas.onresize\";\n\n/**\n * Event for when the viewport is resized <br>\n * (this usually follows a WINDOW_ONRESIZE event, when using the `flex` scaling mode is used and after the viewport was updated).<br>\n * Data passed : {number} viewport width <br>\n * Data passed : {number} viewport height <br>\n * Data passed : {Camera2d} a reference to the camera viewport being resized\n * @public\n * @constant\n * @type {string}\n * @name VIEWPORT_ONRESIZE\n * @memberof event\n * @see event.on\n */\nconst VIEWPORT_ONRESIZE = \"viewport.onresize\";\n\n/**\n * Event for when the device is rotated <br>\n * Data passed : {Event} Event object <br>\n * @public\n * @constant\n * @type {string}\n * @name WINDOW_ONORIENTATION_CHANGE\n * @memberof event\n * @see event.on\n */\nconst WINDOW_ONORIENTATION_CHANGE = \"globalThis.orientationchange\";\n\n/**\n * Event for when the (browser) window is scrolled <br>\n * Data passed : {Event} Event object\n * @public\n * @constant\n * @type {string}\n * @name WINDOW_ONSCROLL\n * @memberof event\n * @see event.on\n */\nconst WINDOW_ONSCROLL = \"globalThis.onscroll\";\n\n/**\n * Event for when the viewport position is updated <br>\n * Data passed : {me.Vector2d} viewport position vector\n * @public\n * @constant\n * @type {string}\n * @name VIEWPORT_ONCHANGE\n * @memberof event\n * @see event.on\n */\nconst VIEWPORT_ONCHANGE = \"viewport.onchange\";\n\n/**\n * Event for when the current context is lost <br>\n * Data passed : {me.Renderer} the current renderer instance\n * @public\n * @constant\n * @type {string}\n * @name WEBGL_ONCONTEXT_LOST\n * @memberof event\n * @see event.on\n */\nconst ONCONTEXT_LOST = \"renderer.contextlost\";\n\n/**\n * Event for when the current context is restored <br>\n * Data passed : {me.Renderer} the current renderer instance`\n * @public\n * @constant\n * @type {string}\n * @name ONCONTEXT_RESTORED\n * @memberof event\n * @see event.on\n */\nconst ONCONTEXT_RESTORED = \"renderer.contextrestored\";\n\n/**\n * calls each of the listeners registered for a given event.\n * @function event.emit\n * @param {string|symbol} eventName - The event name.\n * @param {...*} [args] - arguments to be passed to all listeners\n * @returns {boolean} true if the event had listeners, false otherwise.\n * @example\n * me.event.emit(\"event-name\", a, b, c);\n */\nfunction emit(eventName, ...args) {\n    return eventEmitter.emit(eventName, ...args);\n}\n\n/**\n * Add a listener for a given event.\n * @function event.on\n * @param {string|symbol} eventName - The event name.\n * @param {Function} listener - The listener function.\n * @param {*} [context=this] - The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n * @example\n * me.event.on(\"event-name\", myFunction, this);\n */\nfunction on(eventName, listener, context) {\n    return eventEmitter.on(eventName, listener, context);\n}\n\n/**\n * Add a one-time listener for a given event.\n * @function event.once\n * @param {string|symbol} eventName - The event name.\n * @param {Function} listener - The listener function.\n * @param {*} [context=this] - The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n * @example\n * me.event.once(\"event-name\", myFunction, this);\n */\nfunction once(eventName, listener, context) {\n    return eventEmitter.once(eventName, listener, context);\n}\n\n/**\n * remove the given listener for a given event.\n * @function event.off\n * @param {string|symbol} eventName - The event name.\n * @param {Function} listener - The listener function.\n * @returns {EventEmitter} `this`.\n * @public\n * @example\n * me.event.off(\"event-name\", myFunction);\n */\nfunction off(eventName, listener) {\n    return eventEmitter.off(eventName, listener);\n}\n\nvar event = {\n\t__proto__: null,\n\tBLUR: BLUR,\n\tBOOT: BOOT,\n\tCANVAS_ONRESIZE: CANVAS_ONRESIZE,\n\tDOM_READY: DOM_READY,\n\tDRAGEND: DRAGEND,\n\tDRAGSTART: DRAGSTART,\n\tFOCUS: FOCUS,\n\tGAMEPAD_CONNECTED: GAMEPAD_CONNECTED,\n\tGAMEPAD_DISCONNECTED: GAMEPAD_DISCONNECTED,\n\tGAMEPAD_UPDATE: GAMEPAD_UPDATE,\n\tGAME_AFTER_DRAW: GAME_AFTER_DRAW,\n\tGAME_AFTER_UPDATE: GAME_AFTER_UPDATE,\n\tGAME_BEFORE_DRAW: GAME_BEFORE_DRAW,\n\tGAME_BEFORE_UPDATE: GAME_BEFORE_UPDATE,\n\tGAME_INIT: GAME_INIT,\n\tGAME_RESET: GAME_RESET,\n\tGAME_UPDATE: GAME_UPDATE,\n\tKEYDOWN: KEYDOWN,\n\tKEYUP: KEYUP,\n\tLEVEL_LOADED: LEVEL_LOADED,\n\tLOADER_COMPLETE: LOADER_COMPLETE,\n\tLOADER_ERROR: LOADER_ERROR,\n\tLOADER_PROGRESS: LOADER_PROGRESS,\n\tONCONTEXT_LOST: ONCONTEXT_LOST,\n\tONCONTEXT_RESTORED: ONCONTEXT_RESTORED,\n\tPOINTERLOCKCHANGE: POINTERLOCKCHANGE,\n\tPOINTERMOVE: POINTERMOVE,\n\tSTAGE_RESET: STAGE_RESET,\n\tSTATE_CHANGE: STATE_CHANGE,\n\tSTATE_PAUSE: STATE_PAUSE,\n\tSTATE_RESTART: STATE_RESTART,\n\tSTATE_RESUME: STATE_RESUME,\n\tSTATE_STOP: STATE_STOP,\n\tTICK: TICK,\n\tVIDEO_INIT: VIDEO_INIT,\n\tVIEWPORT_ONCHANGE: VIEWPORT_ONCHANGE,\n\tVIEWPORT_ONRESIZE: VIEWPORT_ONRESIZE,\n\tWINDOW_ONORIENTATION_CHANGE: WINDOW_ONORIENTATION_CHANGE,\n\tWINDOW_ONRESIZE: WINDOW_ONRESIZE,\n\tWINDOW_ONSCROLL: WINDOW_ONSCROLL,\n\tWORLD_STEP: WORLD_STEP,\n\temit: emit,\n\toff: off,\n\ton: on,\n\tonce: once\n};\n\nvar howler$1 = {};\n\n/*!\n *  howler.js v2.2.4\n *  howlerjs.com\n *\n *  (c) 2013-2020, James Simpson of GoldFire Studios\n *  goldfirestudios.com\n *\n *  MIT License\n */\n\n(function (exports) {\n\t(function() {\n\n\t  'use strict';\n\n\t  /** Global Methods **/\n\t  /***************************************************************************/\n\n\t  /**\n\t   * Create the global controller. All contained methods and properties apply\n\t   * to all sounds that are currently playing or will be in the future.\n\t   */\n\t  var HowlerGlobal = function() {\n\t    this.init();\n\t  };\n\t  HowlerGlobal.prototype = {\n\t    /**\n\t     * Initialize the global Howler object.\n\t     * @return {Howler}\n\t     */\n\t    init: function() {\n\t      var self = this || Howler;\n\n\t      // Create a global ID counter.\n\t      self._counter = 1000;\n\n\t      // Pool of unlocked HTML5 Audio objects.\n\t      self._html5AudioPool = [];\n\t      self.html5PoolSize = 10;\n\n\t      // Internal properties.\n\t      self._codecs = {};\n\t      self._howls = [];\n\t      self._muted = false;\n\t      self._volume = 1;\n\t      self._canPlayEvent = 'canplaythrough';\n\t      self._navigator = (typeof window !== 'undefined' && window.navigator) ? window.navigator : null;\n\n\t      // Public properties.\n\t      self.masterGain = null;\n\t      self.noAudio = false;\n\t      self.usingWebAudio = true;\n\t      self.autoSuspend = true;\n\t      self.ctx = null;\n\n\t      // Set to false to disable the auto audio unlocker.\n\t      self.autoUnlock = true;\n\n\t      // Setup the various state values for global tracking.\n\t      self._setup();\n\n\t      return self;\n\t    },\n\n\t    /**\n\t     * Get/set the global volume for all sounds.\n\t     * @param  {Float} vol Volume from 0.0 to 1.0.\n\t     * @return {Howler/Float}     Returns self or current volume.\n\t     */\n\t    volume: function(vol) {\n\t      var self = this || Howler;\n\t      vol = parseFloat(vol);\n\n\t      // If we don't have an AudioContext created yet, run the setup.\n\t      if (!self.ctx) {\n\t        setupAudioContext();\n\t      }\n\n\t      if (typeof vol !== 'undefined' && vol >= 0 && vol <= 1) {\n\t        self._volume = vol;\n\n\t        // Don't update any of the nodes if we are muted.\n\t        if (self._muted) {\n\t          return self;\n\t        }\n\n\t        // When using Web Audio, we just need to adjust the master gain.\n\t        if (self.usingWebAudio) {\n\t          self.masterGain.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n\t        }\n\n\t        // Loop through and change volume for all HTML5 audio nodes.\n\t        for (var i=0; i<self._howls.length; i++) {\n\t          if (!self._howls[i]._webAudio) {\n\t            // Get all of the sounds in this Howl group.\n\t            var ids = self._howls[i]._getSoundIds();\n\n\t            // Loop through all sounds and change the volumes.\n\t            for (var j=0; j<ids.length; j++) {\n\t              var sound = self._howls[i]._soundById(ids[j]);\n\n\t              if (sound && sound._node) {\n\t                sound._node.volume = sound._volume * vol;\n\t              }\n\t            }\n\t          }\n\t        }\n\n\t        return self;\n\t      }\n\n\t      return self._volume;\n\t    },\n\n\t    /**\n\t     * Handle muting and unmuting globally.\n\t     * @param  {Boolean} muted Is muted or not.\n\t     */\n\t    mute: function(muted) {\n\t      var self = this || Howler;\n\n\t      // If we don't have an AudioContext created yet, run the setup.\n\t      if (!self.ctx) {\n\t        setupAudioContext();\n\t      }\n\n\t      self._muted = muted;\n\n\t      // With Web Audio, we just need to mute the master gain.\n\t      if (self.usingWebAudio) {\n\t        self.masterGain.gain.setValueAtTime(muted ? 0 : self._volume, Howler.ctx.currentTime);\n\t      }\n\n\t      // Loop through and mute all HTML5 Audio nodes.\n\t      for (var i=0; i<self._howls.length; i++) {\n\t        if (!self._howls[i]._webAudio) {\n\t          // Get all of the sounds in this Howl group.\n\t          var ids = self._howls[i]._getSoundIds();\n\n\t          // Loop through all sounds and mark the audio node as muted.\n\t          for (var j=0; j<ids.length; j++) {\n\t            var sound = self._howls[i]._soundById(ids[j]);\n\n\t            if (sound && sound._node) {\n\t              sound._node.muted = (muted) ? true : sound._muted;\n\t            }\n\t          }\n\t        }\n\t      }\n\n\t      return self;\n\t    },\n\n\t    /**\n\t     * Handle stopping all sounds globally.\n\t     */\n\t    stop: function() {\n\t      var self = this || Howler;\n\n\t      // Loop through all Howls and stop them.\n\t      for (var i=0; i<self._howls.length; i++) {\n\t        self._howls[i].stop();\n\t      }\n\n\t      return self;\n\t    },\n\n\t    /**\n\t     * Unload and destroy all currently loaded Howl objects.\n\t     * @return {Howler}\n\t     */\n\t    unload: function() {\n\t      var self = this || Howler;\n\n\t      for (var i=self._howls.length-1; i>=0; i--) {\n\t        self._howls[i].unload();\n\t      }\n\n\t      // Create a new AudioContext to make sure it is fully reset.\n\t      if (self.usingWebAudio && self.ctx && typeof self.ctx.close !== 'undefined') {\n\t        self.ctx.close();\n\t        self.ctx = null;\n\t        setupAudioContext();\n\t      }\n\n\t      return self;\n\t    },\n\n\t    /**\n\t     * Check for codec support of specific extension.\n\t     * @param  {String} ext Audio file extention.\n\t     * @return {Boolean}\n\t     */\n\t    codecs: function(ext) {\n\t      return (this || Howler)._codecs[ext.replace(/^x-/, '')];\n\t    },\n\n\t    /**\n\t     * Setup various state values for global tracking.\n\t     * @return {Howler}\n\t     */\n\t    _setup: function() {\n\t      var self = this || Howler;\n\n\t      // Keeps track of the suspend/resume state of the AudioContext.\n\t      self.state = self.ctx ? self.ctx.state || 'suspended' : 'suspended';\n\n\t      // Automatically begin the 30-second suspend process\n\t      self._autoSuspend();\n\n\t      // Check if audio is available.\n\t      if (!self.usingWebAudio) {\n\t        // No audio is available on this system if noAudio is set to true.\n\t        if (typeof Audio !== 'undefined') {\n\t          try {\n\t            var test = new Audio();\n\n\t            // Check if the canplaythrough event is available.\n\t            if (typeof test.oncanplaythrough === 'undefined') {\n\t              self._canPlayEvent = 'canplay';\n\t            }\n\t          } catch(e) {\n\t            self.noAudio = true;\n\t          }\n\t        } else {\n\t          self.noAudio = true;\n\t        }\n\t      }\n\n\t      // Test to make sure audio isn't disabled in Internet Explorer.\n\t      try {\n\t        var test = new Audio();\n\t        if (test.muted) {\n\t          self.noAudio = true;\n\t        }\n\t      } catch (e) {}\n\n\t      // Check for supported codecs.\n\t      if (!self.noAudio) {\n\t        self._setupCodecs();\n\t      }\n\n\t      return self;\n\t    },\n\n\t    /**\n\t     * Check for browser support for various codecs and cache the results.\n\t     * @return {Howler}\n\t     */\n\t    _setupCodecs: function() {\n\t      var self = this || Howler;\n\t      var audioTest = null;\n\n\t      // Must wrap in a try/catch because IE11 in server mode throws an error.\n\t      try {\n\t        audioTest = (typeof Audio !== 'undefined') ? new Audio() : null;\n\t      } catch (err) {\n\t        return self;\n\t      }\n\n\t      if (!audioTest || typeof audioTest.canPlayType !== 'function') {\n\t        return self;\n\t      }\n\n\t      var mpegTest = audioTest.canPlayType('audio/mpeg;').replace(/^no$/, '');\n\n\t      // Opera version <33 has mixed MP3 support, so we need to check for and block it.\n\t      var ua = self._navigator ? self._navigator.userAgent : '';\n\t      var checkOpera = ua.match(/OPR\\/(\\d+)/g);\n\t      var isOldOpera = (checkOpera && parseInt(checkOpera[0].split('/')[1], 10) < 33);\n\t      var checkSafari = ua.indexOf('Safari') !== -1 && ua.indexOf('Chrome') === -1;\n\t      var safariVersion = ua.match(/Version\\/(.*?) /);\n\t      var isOldSafari = (checkSafari && safariVersion && parseInt(safariVersion[1], 10) < 15);\n\n\t      self._codecs = {\n\t        mp3: !!(!isOldOpera && (mpegTest || audioTest.canPlayType('audio/mp3;').replace(/^no$/, ''))),\n\t        mpeg: !!mpegTest,\n\t        opus: !!audioTest.canPlayType('audio/ogg; codecs=\"opus\"').replace(/^no$/, ''),\n\t        ogg: !!audioTest.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, ''),\n\t        oga: !!audioTest.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, ''),\n\t        wav: !!(audioTest.canPlayType('audio/wav; codecs=\"1\"') || audioTest.canPlayType('audio/wav')).replace(/^no$/, ''),\n\t        aac: !!audioTest.canPlayType('audio/aac;').replace(/^no$/, ''),\n\t        caf: !!audioTest.canPlayType('audio/x-caf;').replace(/^no$/, ''),\n\t        m4a: !!(audioTest.canPlayType('audio/x-m4a;') || audioTest.canPlayType('audio/m4a;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n\t        m4b: !!(audioTest.canPlayType('audio/x-m4b;') || audioTest.canPlayType('audio/m4b;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n\t        mp4: !!(audioTest.canPlayType('audio/x-mp4;') || audioTest.canPlayType('audio/mp4;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n\t        weba: !!(!isOldSafari && audioTest.canPlayType('audio/webm; codecs=\"vorbis\"').replace(/^no$/, '')),\n\t        webm: !!(!isOldSafari && audioTest.canPlayType('audio/webm; codecs=\"vorbis\"').replace(/^no$/, '')),\n\t        dolby: !!audioTest.canPlayType('audio/mp4; codecs=\"ec-3\"').replace(/^no$/, ''),\n\t        flac: !!(audioTest.canPlayType('audio/x-flac;') || audioTest.canPlayType('audio/flac;')).replace(/^no$/, '')\n\t      };\n\n\t      return self;\n\t    },\n\n\t    /**\n\t     * Some browsers/devices will only allow audio to be played after a user interaction.\n\t     * Attempt to automatically unlock audio on the first user interaction.\n\t     * Concept from: http://paulbakaus.com/tutorials/html5/web-audio-on-ios/\n\t     * @return {Howler}\n\t     */\n\t    _unlockAudio: function() {\n\t      var self = this || Howler;\n\n\t      // Only run this if Web Audio is supported and it hasn't already been unlocked.\n\t      if (self._audioUnlocked || !self.ctx) {\n\t        return;\n\t      }\n\n\t      self._audioUnlocked = false;\n\t      self.autoUnlock = false;\n\n\t      // Some mobile devices/platforms have distortion issues when opening/closing tabs and/or web views.\n\t      // Bugs in the browser (especially Mobile Safari) can cause the sampleRate to change from 44100 to 48000.\n\t      // By calling Howler.unload(), we create a new AudioContext with the correct sampleRate.\n\t      if (!self._mobileUnloaded && self.ctx.sampleRate !== 44100) {\n\t        self._mobileUnloaded = true;\n\t        self.unload();\n\t      }\n\n\t      // Scratch buffer for enabling iOS to dispose of web audio buffers correctly, as per:\n\t      // http://stackoverflow.com/questions/24119684\n\t      self._scratchBuffer = self.ctx.createBuffer(1, 1, 22050);\n\n\t      // Call this method on touch start to create and play a buffer,\n\t      // then check if the audio actually played to determine if\n\t      // audio has now been unlocked on iOS, Android, etc.\n\t      var unlock = function(e) {\n\t        // Create a pool of unlocked HTML5 Audio objects that can\n\t        // be used for playing sounds without user interaction. HTML5\n\t        // Audio objects must be individually unlocked, as opposed\n\t        // to the WebAudio API which only needs a single activation.\n\t        // This must occur before WebAudio setup or the source.onended\n\t        // event will not fire.\n\t        while (self._html5AudioPool.length < self.html5PoolSize) {\n\t          try {\n\t            var audioNode = new Audio();\n\n\t            // Mark this Audio object as unlocked to ensure it can get returned\n\t            // to the unlocked pool when released.\n\t            audioNode._unlocked = true;\n\n\t            // Add the audio node to the pool.\n\t            self._releaseHtml5Audio(audioNode);\n\t          } catch (e) {\n\t            self.noAudio = true;\n\t            break;\n\t          }\n\t        }\n\n\t        // Loop through any assigned audio nodes and unlock them.\n\t        for (var i=0; i<self._howls.length; i++) {\n\t          if (!self._howls[i]._webAudio) {\n\t            // Get all of the sounds in this Howl group.\n\t            var ids = self._howls[i]._getSoundIds();\n\n\t            // Loop through all sounds and unlock the audio nodes.\n\t            for (var j=0; j<ids.length; j++) {\n\t              var sound = self._howls[i]._soundById(ids[j]);\n\n\t              if (sound && sound._node && !sound._node._unlocked) {\n\t                sound._node._unlocked = true;\n\t                sound._node.load();\n\t              }\n\t            }\n\t          }\n\t        }\n\n\t        // Fix Android can not play in suspend state.\n\t        self._autoResume();\n\n\t        // Create an empty buffer.\n\t        var source = self.ctx.createBufferSource();\n\t        source.buffer = self._scratchBuffer;\n\t        source.connect(self.ctx.destination);\n\n\t        // Play the empty buffer.\n\t        if (typeof source.start === 'undefined') {\n\t          source.noteOn(0);\n\t        } else {\n\t          source.start(0);\n\t        }\n\n\t        // Calling resume() on a stack initiated by user gesture is what actually unlocks the audio on Android Chrome >= 55.\n\t        if (typeof self.ctx.resume === 'function') {\n\t          self.ctx.resume();\n\t        }\n\n\t        // Setup a timeout to check that we are unlocked on the next event loop.\n\t        source.onended = function() {\n\t          source.disconnect(0);\n\n\t          // Update the unlocked state and prevent this check from happening again.\n\t          self._audioUnlocked = true;\n\n\t          // Remove the touch start listener.\n\t          document.removeEventListener('touchstart', unlock, true);\n\t          document.removeEventListener('touchend', unlock, true);\n\t          document.removeEventListener('click', unlock, true);\n\t          document.removeEventListener('keydown', unlock, true);\n\n\t          // Let all sounds know that audio has been unlocked.\n\t          for (var i=0; i<self._howls.length; i++) {\n\t            self._howls[i]._emit('unlock');\n\t          }\n\t        };\n\t      };\n\n\t      // Setup a touch start listener to attempt an unlock in.\n\t      document.addEventListener('touchstart', unlock, true);\n\t      document.addEventListener('touchend', unlock, true);\n\t      document.addEventListener('click', unlock, true);\n\t      document.addEventListener('keydown', unlock, true);\n\n\t      return self;\n\t    },\n\n\t    /**\n\t     * Get an unlocked HTML5 Audio object from the pool. If none are left,\n\t     * return a new Audio object and throw a warning.\n\t     * @return {Audio} HTML5 Audio object.\n\t     */\n\t    _obtainHtml5Audio: function() {\n\t      var self = this || Howler;\n\n\t      // Return the next object from the pool if one exists.\n\t      if (self._html5AudioPool.length) {\n\t        return self._html5AudioPool.pop();\n\t      }\n\n\t      //.Check if the audio is locked and throw a warning.\n\t      var testPlay = new Audio().play();\n\t      if (testPlay && typeof Promise !== 'undefined' && (testPlay instanceof Promise || typeof testPlay.then === 'function')) {\n\t        testPlay.catch(function() {\n\t          console.warn('HTML5 Audio pool exhausted, returning potentially locked audio object.');\n\t        });\n\t      }\n\n\t      return new Audio();\n\t    },\n\n\t    /**\n\t     * Return an activated HTML5 Audio object to the pool.\n\t     * @return {Howler}\n\t     */\n\t    _releaseHtml5Audio: function(audio) {\n\t      var self = this || Howler;\n\n\t      // Don't add audio to the pool if we don't know if it has been unlocked.\n\t      if (audio._unlocked) {\n\t        self._html5AudioPool.push(audio);\n\t      }\n\n\t      return self;\n\t    },\n\n\t    /**\n\t     * Automatically suspend the Web Audio AudioContext after no sound has played for 30 seconds.\n\t     * This saves processing/energy and fixes various browser-specific bugs with audio getting stuck.\n\t     * @return {Howler}\n\t     */\n\t    _autoSuspend: function() {\n\t      var self = this;\n\n\t      if (!self.autoSuspend || !self.ctx || typeof self.ctx.suspend === 'undefined' || !Howler.usingWebAudio) {\n\t        return;\n\t      }\n\n\t      // Check if any sounds are playing.\n\t      for (var i=0; i<self._howls.length; i++) {\n\t        if (self._howls[i]._webAudio) {\n\t          for (var j=0; j<self._howls[i]._sounds.length; j++) {\n\t            if (!self._howls[i]._sounds[j]._paused) {\n\t              return self;\n\t            }\n\t          }\n\t        }\n\t      }\n\n\t      if (self._suspendTimer) {\n\t        clearTimeout(self._suspendTimer);\n\t      }\n\n\t      // If no sound has played after 30 seconds, suspend the context.\n\t      self._suspendTimer = setTimeout(function() {\n\t        if (!self.autoSuspend) {\n\t          return;\n\t        }\n\n\t        self._suspendTimer = null;\n\t        self.state = 'suspending';\n\n\t        // Handle updating the state of the audio context after suspending.\n\t        var handleSuspension = function() {\n\t          self.state = 'suspended';\n\n\t          if (self._resumeAfterSuspend) {\n\t            delete self._resumeAfterSuspend;\n\t            self._autoResume();\n\t          }\n\t        };\n\n\t        // Either the state gets suspended or it is interrupted.\n\t        // Either way, we need to update the state to suspended.\n\t        self.ctx.suspend().then(handleSuspension, handleSuspension);\n\t      }, 30000);\n\n\t      return self;\n\t    },\n\n\t    /**\n\t     * Automatically resume the Web Audio AudioContext when a new sound is played.\n\t     * @return {Howler}\n\t     */\n\t    _autoResume: function() {\n\t      var self = this;\n\n\t      if (!self.ctx || typeof self.ctx.resume === 'undefined' || !Howler.usingWebAudio) {\n\t        return;\n\t      }\n\n\t      if (self.state === 'running' && self.ctx.state !== 'interrupted' && self._suspendTimer) {\n\t        clearTimeout(self._suspendTimer);\n\t        self._suspendTimer = null;\n\t      } else if (self.state === 'suspended' || self.state === 'running' && self.ctx.state === 'interrupted') {\n\t        self.ctx.resume().then(function() {\n\t          self.state = 'running';\n\n\t          // Emit to all Howls that the audio has resumed.\n\t          for (var i=0; i<self._howls.length; i++) {\n\t            self._howls[i]._emit('resume');\n\t          }\n\t        });\n\n\t        if (self._suspendTimer) {\n\t          clearTimeout(self._suspendTimer);\n\t          self._suspendTimer = null;\n\t        }\n\t      } else if (self.state === 'suspending') {\n\t        self._resumeAfterSuspend = true;\n\t      }\n\n\t      return self;\n\t    }\n\t  };\n\n\t  // Setup the global audio controller.\n\t  var Howler = new HowlerGlobal();\n\n\t  /** Group Methods **/\n\t  /***************************************************************************/\n\n\t  /**\n\t   * Create an audio group controller.\n\t   * @param {Object} o Passed in properties for this group.\n\t   */\n\t  var Howl = function(o) {\n\t    var self = this;\n\n\t    // Throw an error if no source is provided.\n\t    if (!o.src || o.src.length === 0) {\n\t      console.error('An array of source files must be passed with any new Howl.');\n\t      return;\n\t    }\n\n\t    self.init(o);\n\t  };\n\t  Howl.prototype = {\n\t    /**\n\t     * Initialize a new Howl group object.\n\t     * @param  {Object} o Passed in properties for this group.\n\t     * @return {Howl}\n\t     */\n\t    init: function(o) {\n\t      var self = this;\n\n\t      // If we don't have an AudioContext created yet, run the setup.\n\t      if (!Howler.ctx) {\n\t        setupAudioContext();\n\t      }\n\n\t      // Setup user-defined default properties.\n\t      self._autoplay = o.autoplay || false;\n\t      self._format = (typeof o.format !== 'string') ? o.format : [o.format];\n\t      self._html5 = o.html5 || false;\n\t      self._muted = o.mute || false;\n\t      self._loop = o.loop || false;\n\t      self._pool = o.pool || 5;\n\t      self._preload = (typeof o.preload === 'boolean' || o.preload === 'metadata') ? o.preload : true;\n\t      self._rate = o.rate || 1;\n\t      self._sprite = o.sprite || {};\n\t      self._src = (typeof o.src !== 'string') ? o.src : [o.src];\n\t      self._volume = o.volume !== undefined ? o.volume : 1;\n\t      self._xhr = {\n\t        method: o.xhr && o.xhr.method ? o.xhr.method : 'GET',\n\t        headers: o.xhr && o.xhr.headers ? o.xhr.headers : null,\n\t        withCredentials: o.xhr && o.xhr.withCredentials ? o.xhr.withCredentials : false,\n\t      };\n\n\t      // Setup all other default properties.\n\t      self._duration = 0;\n\t      self._state = 'unloaded';\n\t      self._sounds = [];\n\t      self._endTimers = {};\n\t      self._queue = [];\n\t      self._playLock = false;\n\n\t      // Setup event listeners.\n\t      self._onend = o.onend ? [{fn: o.onend}] : [];\n\t      self._onfade = o.onfade ? [{fn: o.onfade}] : [];\n\t      self._onload = o.onload ? [{fn: o.onload}] : [];\n\t      self._onloaderror = o.onloaderror ? [{fn: o.onloaderror}] : [];\n\t      self._onplayerror = o.onplayerror ? [{fn: o.onplayerror}] : [];\n\t      self._onpause = o.onpause ? [{fn: o.onpause}] : [];\n\t      self._onplay = o.onplay ? [{fn: o.onplay}] : [];\n\t      self._onstop = o.onstop ? [{fn: o.onstop}] : [];\n\t      self._onmute = o.onmute ? [{fn: o.onmute}] : [];\n\t      self._onvolume = o.onvolume ? [{fn: o.onvolume}] : [];\n\t      self._onrate = o.onrate ? [{fn: o.onrate}] : [];\n\t      self._onseek = o.onseek ? [{fn: o.onseek}] : [];\n\t      self._onunlock = o.onunlock ? [{fn: o.onunlock}] : [];\n\t      self._onresume = [];\n\n\t      // Web Audio or HTML5 Audio?\n\t      self._webAudio = Howler.usingWebAudio && !self._html5;\n\n\t      // Automatically try to enable audio.\n\t      if (typeof Howler.ctx !== 'undefined' && Howler.ctx && Howler.autoUnlock) {\n\t        Howler._unlockAudio();\n\t      }\n\n\t      // Keep track of this Howl group in the global controller.\n\t      Howler._howls.push(self);\n\n\t      // If they selected autoplay, add a play event to the load queue.\n\t      if (self._autoplay) {\n\t        self._queue.push({\n\t          event: 'play',\n\t          action: function() {\n\t            self.play();\n\t          }\n\t        });\n\t      }\n\n\t      // Load the source file unless otherwise specified.\n\t      if (self._preload && self._preload !== 'none') {\n\t        self.load();\n\t      }\n\n\t      return self;\n\t    },\n\n\t    /**\n\t     * Load the audio file.\n\t     * @return {Howler}\n\t     */\n\t    load: function() {\n\t      var self = this;\n\t      var url = null;\n\n\t      // If no audio is available, quit immediately.\n\t      if (Howler.noAudio) {\n\t        self._emit('loaderror', null, 'No audio support.');\n\t        return;\n\t      }\n\n\t      // Make sure our source is in an array.\n\t      if (typeof self._src === 'string') {\n\t        self._src = [self._src];\n\t      }\n\n\t      // Loop through the sources and pick the first one that is compatible.\n\t      for (var i=0; i<self._src.length; i++) {\n\t        var ext, str;\n\n\t        if (self._format && self._format[i]) {\n\t          // If an extension was specified, use that instead.\n\t          ext = self._format[i];\n\t        } else {\n\t          // Make sure the source is a string.\n\t          str = self._src[i];\n\t          if (typeof str !== 'string') {\n\t            self._emit('loaderror', null, 'Non-string found in selected audio sources - ignoring.');\n\t            continue;\n\t          }\n\n\t          // Extract the file extension from the URL or base64 data URI.\n\t          ext = /^data:audio\\/([^;,]+);/i.exec(str);\n\t          if (!ext) {\n\t            ext = /\\.([^.]+)$/.exec(str.split('?', 1)[0]);\n\t          }\n\n\t          if (ext) {\n\t            ext = ext[1].toLowerCase();\n\t          }\n\t        }\n\n\t        // Log a warning if no extension was found.\n\t        if (!ext) {\n\t          console.warn('No file extension was found. Consider using the \"format\" property or specify an extension.');\n\t        }\n\n\t        // Check if this extension is available.\n\t        if (ext && Howler.codecs(ext)) {\n\t          url = self._src[i];\n\t          break;\n\t        }\n\t      }\n\n\t      if (!url) {\n\t        self._emit('loaderror', null, 'No codec support for selected audio sources.');\n\t        return;\n\t      }\n\n\t      self._src = url;\n\t      self._state = 'loading';\n\n\t      // If the hosting page is HTTPS and the source isn't,\n\t      // drop down to HTML5 Audio to avoid Mixed Content errors.\n\t      if (window.location.protocol === 'https:' && url.slice(0, 5) === 'http:') {\n\t        self._html5 = true;\n\t        self._webAudio = false;\n\t      }\n\n\t      // Create a new sound object and add it to the pool.\n\t      new Sound(self);\n\n\t      // Load and decode the audio data for playback.\n\t      if (self._webAudio) {\n\t        loadBuffer(self);\n\t      }\n\n\t      return self;\n\t    },\n\n\t    /**\n\t     * Play a sound or resume previous playback.\n\t     * @param  {String/Number} sprite   Sprite name for sprite playback or sound id to continue previous.\n\t     * @param  {Boolean} internal Internal Use: true prevents event firing.\n\t     * @return {Number}          Sound ID.\n\t     */\n\t    play: function(sprite, internal) {\n\t      var self = this;\n\t      var id = null;\n\n\t      // Determine if a sprite, sound id or nothing was passed\n\t      if (typeof sprite === 'number') {\n\t        id = sprite;\n\t        sprite = null;\n\t      } else if (typeof sprite === 'string' && self._state === 'loaded' && !self._sprite[sprite]) {\n\t        // If the passed sprite doesn't exist, do nothing.\n\t        return null;\n\t      } else if (typeof sprite === 'undefined') {\n\t        // Use the default sound sprite (plays the full audio length).\n\t        sprite = '__default';\n\n\t        // Check if there is a single paused sound that isn't ended.\n\t        // If there is, play that sound. If not, continue as usual.\n\t        if (!self._playLock) {\n\t          var num = 0;\n\t          for (var i=0; i<self._sounds.length; i++) {\n\t            if (self._sounds[i]._paused && !self._sounds[i]._ended) {\n\t              num++;\n\t              id = self._sounds[i]._id;\n\t            }\n\t          }\n\n\t          if (num === 1) {\n\t            sprite = null;\n\t          } else {\n\t            id = null;\n\t          }\n\t        }\n\t      }\n\n\t      // Get the selected node, or get one from the pool.\n\t      var sound = id ? self._soundById(id) : self._inactiveSound();\n\n\t      // If the sound doesn't exist, do nothing.\n\t      if (!sound) {\n\t        return null;\n\t      }\n\n\t      // Select the sprite definition.\n\t      if (id && !sprite) {\n\t        sprite = sound._sprite || '__default';\n\t      }\n\n\t      // If the sound hasn't loaded, we must wait to get the audio's duration.\n\t      // We also need to wait to make sure we don't run into race conditions with\n\t      // the order of function calls.\n\t      if (self._state !== 'loaded') {\n\t        // Set the sprite value on this sound.\n\t        sound._sprite = sprite;\n\n\t        // Mark this sound as not ended in case another sound is played before this one loads.\n\t        sound._ended = false;\n\n\t        // Add the sound to the queue to be played on load.\n\t        var soundId = sound._id;\n\t        self._queue.push({\n\t          event: 'play',\n\t          action: function() {\n\t            self.play(soundId);\n\t          }\n\t        });\n\n\t        return soundId;\n\t      }\n\n\t      // Don't play the sound if an id was passed and it is already playing.\n\t      if (id && !sound._paused) {\n\t        // Trigger the play event, in order to keep iterating through queue.\n\t        if (!internal) {\n\t          self._loadQueue('play');\n\t        }\n\n\t        return sound._id;\n\t      }\n\n\t      // Make sure the AudioContext isn't suspended, and resume it if it is.\n\t      if (self._webAudio) {\n\t        Howler._autoResume();\n\t      }\n\n\t      // Determine how long to play for and where to start playing.\n\t      var seek = Math.max(0, sound._seek > 0 ? sound._seek : self._sprite[sprite][0] / 1000);\n\t      var duration = Math.max(0, ((self._sprite[sprite][0] + self._sprite[sprite][1]) / 1000) - seek);\n\t      var timeout = (duration * 1000) / Math.abs(sound._rate);\n\t      var start = self._sprite[sprite][0] / 1000;\n\t      var stop = (self._sprite[sprite][0] + self._sprite[sprite][1]) / 1000;\n\t      sound._sprite = sprite;\n\n\t      // Mark the sound as ended instantly so that this async playback\n\t      // doesn't get grabbed by another call to play while this one waits to start.\n\t      sound._ended = false;\n\n\t      // Update the parameters of the sound.\n\t      var setParams = function() {\n\t        sound._paused = false;\n\t        sound._seek = seek;\n\t        sound._start = start;\n\t        sound._stop = stop;\n\t        sound._loop = !!(sound._loop || self._sprite[sprite][2]);\n\t      };\n\n\t      // End the sound instantly if seek is at the end.\n\t      if (seek >= stop) {\n\t        self._ended(sound);\n\t        return;\n\t      }\n\n\t      // Begin the actual playback.\n\t      var node = sound._node;\n\t      if (self._webAudio) {\n\t        // Fire this when the sound is ready to play to begin Web Audio playback.\n\t        var playWebAudio = function() {\n\t          self._playLock = false;\n\t          setParams();\n\t          self._refreshBuffer(sound);\n\n\t          // Setup the playback params.\n\t          var vol = (sound._muted || self._muted) ? 0 : sound._volume;\n\t          node.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n\t          sound._playStart = Howler.ctx.currentTime;\n\n\t          // Play the sound using the supported method.\n\t          if (typeof node.bufferSource.start === 'undefined') {\n\t            sound._loop ? node.bufferSource.noteGrainOn(0, seek, 86400) : node.bufferSource.noteGrainOn(0, seek, duration);\n\t          } else {\n\t            sound._loop ? node.bufferSource.start(0, seek, 86400) : node.bufferSource.start(0, seek, duration);\n\t          }\n\n\t          // Start a new timer if none is present.\n\t          if (timeout !== Infinity) {\n\t            self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n\t          }\n\n\t          if (!internal) {\n\t            setTimeout(function() {\n\t              self._emit('play', sound._id);\n\t              self._loadQueue();\n\t            }, 0);\n\t          }\n\t        };\n\n\t        if (Howler.state === 'running' && Howler.ctx.state !== 'interrupted') {\n\t          playWebAudio();\n\t        } else {\n\t          self._playLock = true;\n\n\t          // Wait for the audio context to resume before playing.\n\t          self.once('resume', playWebAudio);\n\n\t          // Cancel the end timer.\n\t          self._clearTimer(sound._id);\n\t        }\n\t      } else {\n\t        // Fire this when the sound is ready to play to begin HTML5 Audio playback.\n\t        var playHtml5 = function() {\n\t          node.currentTime = seek;\n\t          node.muted = sound._muted || self._muted || Howler._muted || node.muted;\n\t          node.volume = sound._volume * Howler.volume();\n\t          node.playbackRate = sound._rate;\n\n\t          // Some browsers will throw an error if this is called without user interaction.\n\t          try {\n\t            var play = node.play();\n\n\t            // Support older browsers that don't support promises, and thus don't have this issue.\n\t            if (play && typeof Promise !== 'undefined' && (play instanceof Promise || typeof play.then === 'function')) {\n\t              // Implements a lock to prevent DOMException: The play() request was interrupted by a call to pause().\n\t              self._playLock = true;\n\n\t              // Set param values immediately.\n\t              setParams();\n\n\t              // Releases the lock and executes queued actions.\n\t              play\n\t                .then(function() {\n\t                  self._playLock = false;\n\t                  node._unlocked = true;\n\t                  if (!internal) {\n\t                    self._emit('play', sound._id);\n\t                  } else {\n\t                    self._loadQueue();\n\t                  }\n\t                })\n\t                .catch(function() {\n\t                  self._playLock = false;\n\t                  self._emit('playerror', sound._id, 'Playback was unable to start. This is most commonly an issue ' +\n\t                    'on mobile devices and Chrome where playback was not within a user interaction.');\n\n\t                  // Reset the ended and paused values.\n\t                  sound._ended = true;\n\t                  sound._paused = true;\n\t                });\n\t            } else if (!internal) {\n\t              self._playLock = false;\n\t              setParams();\n\t              self._emit('play', sound._id);\n\t            }\n\n\t            // Setting rate before playing won't work in IE, so we set it again here.\n\t            node.playbackRate = sound._rate;\n\n\t            // If the node is still paused, then we can assume there was a playback issue.\n\t            if (node.paused) {\n\t              self._emit('playerror', sound._id, 'Playback was unable to start. This is most commonly an issue ' +\n\t                'on mobile devices and Chrome where playback was not within a user interaction.');\n\t              return;\n\t            }\n\n\t            // Setup the end timer on sprites or listen for the ended event.\n\t            if (sprite !== '__default' || sound._loop) {\n\t              self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n\t            } else {\n\t              self._endTimers[sound._id] = function() {\n\t                // Fire ended on this audio node.\n\t                self._ended(sound);\n\n\t                // Clear this listener.\n\t                node.removeEventListener('ended', self._endTimers[sound._id], false);\n\t              };\n\t              node.addEventListener('ended', self._endTimers[sound._id], false);\n\t            }\n\t          } catch (err) {\n\t            self._emit('playerror', sound._id, err);\n\t          }\n\t        };\n\n\t        // If this is streaming audio, make sure the src is set and load again.\n\t        if (node.src === 'data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA') {\n\t          node.src = self._src;\n\t          node.load();\n\t        }\n\n\t        // Play immediately if ready, or wait for the 'canplaythrough'e vent.\n\t        var loadedNoReadyState = (window && window.ejecta) || (!node.readyState && Howler._navigator.isCocoonJS);\n\t        if (node.readyState >= 3 || loadedNoReadyState) {\n\t          playHtml5();\n\t        } else {\n\t          self._playLock = true;\n\t          self._state = 'loading';\n\n\t          var listener = function() {\n\t            self._state = 'loaded';\n\t            \n\t            // Begin playback.\n\t            playHtml5();\n\n\t            // Clear this listener.\n\t            node.removeEventListener(Howler._canPlayEvent, listener, false);\n\t          };\n\t          node.addEventListener(Howler._canPlayEvent, listener, false);\n\n\t          // Cancel the end timer.\n\t          self._clearTimer(sound._id);\n\t        }\n\t      }\n\n\t      return sound._id;\n\t    },\n\n\t    /**\n\t     * Pause playback and save current position.\n\t     * @param  {Number} id The sound ID (empty to pause all in group).\n\t     * @return {Howl}\n\t     */\n\t    pause: function(id) {\n\t      var self = this;\n\n\t      // If the sound hasn't loaded or a play() promise is pending, add it to the load queue to pause when capable.\n\t      if (self._state !== 'loaded' || self._playLock) {\n\t        self._queue.push({\n\t          event: 'pause',\n\t          action: function() {\n\t            self.pause(id);\n\t          }\n\t        });\n\n\t        return self;\n\t      }\n\n\t      // If no id is passed, get all ID's to be paused.\n\t      var ids = self._getSoundIds(id);\n\n\t      for (var i=0; i<ids.length; i++) {\n\t        // Clear the end timer.\n\t        self._clearTimer(ids[i]);\n\n\t        // Get the sound.\n\t        var sound = self._soundById(ids[i]);\n\n\t        if (sound && !sound._paused) {\n\t          // Reset the seek position.\n\t          sound._seek = self.seek(ids[i]);\n\t          sound._rateSeek = 0;\n\t          sound._paused = true;\n\n\t          // Stop currently running fades.\n\t          self._stopFade(ids[i]);\n\n\t          if (sound._node) {\n\t            if (self._webAudio) {\n\t              // Make sure the sound has been created.\n\t              if (!sound._node.bufferSource) {\n\t                continue;\n\t              }\n\n\t              if (typeof sound._node.bufferSource.stop === 'undefined') {\n\t                sound._node.bufferSource.noteOff(0);\n\t              } else {\n\t                sound._node.bufferSource.stop(0);\n\t              }\n\n\t              // Clean up the buffer source.\n\t              self._cleanBuffer(sound._node);\n\t            } else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {\n\t              sound._node.pause();\n\t            }\n\t          }\n\t        }\n\n\t        // Fire the pause event, unless `true` is passed as the 2nd argument.\n\t        if (!arguments[1]) {\n\t          self._emit('pause', sound ? sound._id : null);\n\t        }\n\t      }\n\n\t      return self;\n\t    },\n\n\t    /**\n\t     * Stop playback and reset to start.\n\t     * @param  {Number} id The sound ID (empty to stop all in group).\n\t     * @param  {Boolean} internal Internal Use: true prevents event firing.\n\t     * @return {Howl}\n\t     */\n\t    stop: function(id, internal) {\n\t      var self = this;\n\n\t      // If the sound hasn't loaded, add it to the load queue to stop when capable.\n\t      if (self._state !== 'loaded' || self._playLock) {\n\t        self._queue.push({\n\t          event: 'stop',\n\t          action: function() {\n\t            self.stop(id);\n\t          }\n\t        });\n\n\t        return self;\n\t      }\n\n\t      // If no id is passed, get all ID's to be stopped.\n\t      var ids = self._getSoundIds(id);\n\n\t      for (var i=0; i<ids.length; i++) {\n\t        // Clear the end timer.\n\t        self._clearTimer(ids[i]);\n\n\t        // Get the sound.\n\t        var sound = self._soundById(ids[i]);\n\n\t        if (sound) {\n\t          // Reset the seek position.\n\t          sound._seek = sound._start || 0;\n\t          sound._rateSeek = 0;\n\t          sound._paused = true;\n\t          sound._ended = true;\n\n\t          // Stop currently running fades.\n\t          self._stopFade(ids[i]);\n\n\t          if (sound._node) {\n\t            if (self._webAudio) {\n\t              // Make sure the sound's AudioBufferSourceNode has been created.\n\t              if (sound._node.bufferSource) {\n\t                if (typeof sound._node.bufferSource.stop === 'undefined') {\n\t                  sound._node.bufferSource.noteOff(0);\n\t                } else {\n\t                  sound._node.bufferSource.stop(0);\n\t                }\n\n\t                // Clean up the buffer source.\n\t                self._cleanBuffer(sound._node);\n\t              }\n\t            } else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {\n\t              sound._node.currentTime = sound._start || 0;\n\t              sound._node.pause();\n\n\t              // If this is a live stream, stop download once the audio is stopped.\n\t              if (sound._node.duration === Infinity) {\n\t                self._clearSound(sound._node);\n\t              }\n\t            }\n\t          }\n\n\t          if (!internal) {\n\t            self._emit('stop', sound._id);\n\t          }\n\t        }\n\t      }\n\n\t      return self;\n\t    },\n\n\t    /**\n\t     * Mute/unmute a single sound or all sounds in this Howl group.\n\t     * @param  {Boolean} muted Set to true to mute and false to unmute.\n\t     * @param  {Number} id    The sound ID to update (omit to mute/unmute all).\n\t     * @return {Howl}\n\t     */\n\t    mute: function(muted, id) {\n\t      var self = this;\n\n\t      // If the sound hasn't loaded, add it to the load queue to mute when capable.\n\t      if (self._state !== 'loaded'|| self._playLock) {\n\t        self._queue.push({\n\t          event: 'mute',\n\t          action: function() {\n\t            self.mute(muted, id);\n\t          }\n\t        });\n\n\t        return self;\n\t      }\n\n\t      // If applying mute/unmute to all sounds, update the group's value.\n\t      if (typeof id === 'undefined') {\n\t        if (typeof muted === 'boolean') {\n\t          self._muted = muted;\n\t        } else {\n\t          return self._muted;\n\t        }\n\t      }\n\n\t      // If no id is passed, get all ID's to be muted.\n\t      var ids = self._getSoundIds(id);\n\n\t      for (var i=0; i<ids.length; i++) {\n\t        // Get the sound.\n\t        var sound = self._soundById(ids[i]);\n\n\t        if (sound) {\n\t          sound._muted = muted;\n\n\t          // Cancel active fade and set the volume to the end value.\n\t          if (sound._interval) {\n\t            self._stopFade(sound._id);\n\t          }\n\n\t          if (self._webAudio && sound._node) {\n\t            sound._node.gain.setValueAtTime(muted ? 0 : sound._volume, Howler.ctx.currentTime);\n\t          } else if (sound._node) {\n\t            sound._node.muted = Howler._muted ? true : muted;\n\t          }\n\n\t          self._emit('mute', sound._id);\n\t        }\n\t      }\n\n\t      return self;\n\t    },\n\n\t    /**\n\t     * Get/set the volume of this sound or of the Howl group. This method can optionally take 0, 1 or 2 arguments.\n\t     *   volume() -> Returns the group's volume value.\n\t     *   volume(id) -> Returns the sound id's current volume.\n\t     *   volume(vol) -> Sets the volume of all sounds in this Howl group.\n\t     *   volume(vol, id) -> Sets the volume of passed sound id.\n\t     * @return {Howl/Number} Returns self or current volume.\n\t     */\n\t    volume: function() {\n\t      var self = this;\n\t      var args = arguments;\n\t      var vol, id;\n\n\t      // Determine the values based on arguments.\n\t      if (args.length === 0) {\n\t        // Return the value of the groups' volume.\n\t        return self._volume;\n\t      } else if (args.length === 1 || args.length === 2 && typeof args[1] === 'undefined') {\n\t        // First check if this is an ID, and if not, assume it is a new volume.\n\t        var ids = self._getSoundIds();\n\t        var index = ids.indexOf(args[0]);\n\t        if (index >= 0) {\n\t          id = parseInt(args[0], 10);\n\t        } else {\n\t          vol = parseFloat(args[0]);\n\t        }\n\t      } else if (args.length >= 2) {\n\t        vol = parseFloat(args[0]);\n\t        id = parseInt(args[1], 10);\n\t      }\n\n\t      // Update the volume or return the current volume.\n\t      var sound;\n\t      if (typeof vol !== 'undefined' && vol >= 0 && vol <= 1) {\n\t        // If the sound hasn't loaded, add it to the load queue to change volume when capable.\n\t        if (self._state !== 'loaded'|| self._playLock) {\n\t          self._queue.push({\n\t            event: 'volume',\n\t            action: function() {\n\t              self.volume.apply(self, args);\n\t            }\n\t          });\n\n\t          return self;\n\t        }\n\n\t        // Set the group volume.\n\t        if (typeof id === 'undefined') {\n\t          self._volume = vol;\n\t        }\n\n\t        // Update one or all volumes.\n\t        id = self._getSoundIds(id);\n\t        for (var i=0; i<id.length; i++) {\n\t          // Get the sound.\n\t          sound = self._soundById(id[i]);\n\n\t          if (sound) {\n\t            sound._volume = vol;\n\n\t            // Stop currently running fades.\n\t            if (!args[2]) {\n\t              self._stopFade(id[i]);\n\t            }\n\n\t            if (self._webAudio && sound._node && !sound._muted) {\n\t              sound._node.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n\t            } else if (sound._node && !sound._muted) {\n\t              sound._node.volume = vol * Howler.volume();\n\t            }\n\n\t            self._emit('volume', sound._id);\n\t          }\n\t        }\n\t      } else {\n\t        sound = id ? self._soundById(id) : self._sounds[0];\n\t        return sound ? sound._volume : 0;\n\t      }\n\n\t      return self;\n\t    },\n\n\t    /**\n\t     * Fade a currently playing sound between two volumes (if no id is passed, all sounds will fade).\n\t     * @param  {Number} from The value to fade from (0.0 to 1.0).\n\t     * @param  {Number} to   The volume to fade to (0.0 to 1.0).\n\t     * @param  {Number} len  Time in milliseconds to fade.\n\t     * @param  {Number} id   The sound id (omit to fade all sounds).\n\t     * @return {Howl}\n\t     */\n\t    fade: function(from, to, len, id) {\n\t      var self = this;\n\n\t      // If the sound hasn't loaded, add it to the load queue to fade when capable.\n\t      if (self._state !== 'loaded' || self._playLock) {\n\t        self._queue.push({\n\t          event: 'fade',\n\t          action: function() {\n\t            self.fade(from, to, len, id);\n\t          }\n\t        });\n\n\t        return self;\n\t      }\n\n\t      // Make sure the to/from/len values are numbers.\n\t      from = Math.min(Math.max(0, parseFloat(from)), 1);\n\t      to = Math.min(Math.max(0, parseFloat(to)), 1);\n\t      len = parseFloat(len);\n\n\t      // Set the volume to the start position.\n\t      self.volume(from, id);\n\n\t      // Fade the volume of one or all sounds.\n\t      var ids = self._getSoundIds(id);\n\t      for (var i=0; i<ids.length; i++) {\n\t        // Get the sound.\n\t        var sound = self._soundById(ids[i]);\n\n\t        // Create a linear fade or fall back to timeouts with HTML5 Audio.\n\t        if (sound) {\n\t          // Stop the previous fade if no sprite is being used (otherwise, volume handles this).\n\t          if (!id) {\n\t            self._stopFade(ids[i]);\n\t          }\n\n\t          // If we are using Web Audio, let the native methods do the actual fade.\n\t          if (self._webAudio && !sound._muted) {\n\t            var currentTime = Howler.ctx.currentTime;\n\t            var end = currentTime + (len / 1000);\n\t            sound._volume = from;\n\t            sound._node.gain.setValueAtTime(from, currentTime);\n\t            sound._node.gain.linearRampToValueAtTime(to, end);\n\t          }\n\n\t          self._startFadeInterval(sound, from, to, len, ids[i], typeof id === 'undefined');\n\t        }\n\t      }\n\n\t      return self;\n\t    },\n\n\t    /**\n\t     * Starts the internal interval to fade a sound.\n\t     * @param  {Object} sound Reference to sound to fade.\n\t     * @param  {Number} from The value to fade from (0.0 to 1.0).\n\t     * @param  {Number} to   The volume to fade to (0.0 to 1.0).\n\t     * @param  {Number} len  Time in milliseconds to fade.\n\t     * @param  {Number} id   The sound id to fade.\n\t     * @param  {Boolean} isGroup   If true, set the volume on the group.\n\t     */\n\t    _startFadeInterval: function(sound, from, to, len, id, isGroup) {\n\t      var self = this;\n\t      var vol = from;\n\t      var diff = to - from;\n\t      var steps = Math.abs(diff / 0.01);\n\t      var stepLen = Math.max(4, (steps > 0) ? len / steps : len);\n\t      var lastTick = Date.now();\n\n\t      // Store the value being faded to.\n\t      sound._fadeTo = to;\n\n\t      // Update the volume value on each interval tick.\n\t      sound._interval = setInterval(function() {\n\t        // Update the volume based on the time since the last tick.\n\t        var tick = (Date.now() - lastTick) / len;\n\t        lastTick = Date.now();\n\t        vol += diff * tick;\n\n\t        // Round to within 2 decimal points.\n\t        vol = Math.round(vol * 100) / 100;\n\n\t        // Make sure the volume is in the right bounds.\n\t        if (diff < 0) {\n\t          vol = Math.max(to, vol);\n\t        } else {\n\t          vol = Math.min(to, vol);\n\t        }\n\n\t        // Change the volume.\n\t        if (self._webAudio) {\n\t          sound._volume = vol;\n\t        } else {\n\t          self.volume(vol, sound._id, true);\n\t        }\n\n\t        // Set the group's volume.\n\t        if (isGroup) {\n\t          self._volume = vol;\n\t        }\n\n\t        // When the fade is complete, stop it and fire event.\n\t        if ((to < from && vol <= to) || (to > from && vol >= to)) {\n\t          clearInterval(sound._interval);\n\t          sound._interval = null;\n\t          sound._fadeTo = null;\n\t          self.volume(to, sound._id);\n\t          self._emit('fade', sound._id);\n\t        }\n\t      }, stepLen);\n\t    },\n\n\t    /**\n\t     * Internal method that stops the currently playing fade when\n\t     * a new fade starts, volume is changed or the sound is stopped.\n\t     * @param  {Number} id The sound id.\n\t     * @return {Howl}\n\t     */\n\t    _stopFade: function(id) {\n\t      var self = this;\n\t      var sound = self._soundById(id);\n\n\t      if (sound && sound._interval) {\n\t        if (self._webAudio) {\n\t          sound._node.gain.cancelScheduledValues(Howler.ctx.currentTime);\n\t        }\n\n\t        clearInterval(sound._interval);\n\t        sound._interval = null;\n\t        self.volume(sound._fadeTo, id);\n\t        sound._fadeTo = null;\n\t        self._emit('fade', id);\n\t      }\n\n\t      return self;\n\t    },\n\n\t    /**\n\t     * Get/set the loop parameter on a sound. This method can optionally take 0, 1 or 2 arguments.\n\t     *   loop() -> Returns the group's loop value.\n\t     *   loop(id) -> Returns the sound id's loop value.\n\t     *   loop(loop) -> Sets the loop value for all sounds in this Howl group.\n\t     *   loop(loop, id) -> Sets the loop value of passed sound id.\n\t     * @return {Howl/Boolean} Returns self or current loop value.\n\t     */\n\t    loop: function() {\n\t      var self = this;\n\t      var args = arguments;\n\t      var loop, id, sound;\n\n\t      // Determine the values for loop and id.\n\t      if (args.length === 0) {\n\t        // Return the grou's loop value.\n\t        return self._loop;\n\t      } else if (args.length === 1) {\n\t        if (typeof args[0] === 'boolean') {\n\t          loop = args[0];\n\t          self._loop = loop;\n\t        } else {\n\t          // Return this sound's loop value.\n\t          sound = self._soundById(parseInt(args[0], 10));\n\t          return sound ? sound._loop : false;\n\t        }\n\t      } else if (args.length === 2) {\n\t        loop = args[0];\n\t        id = parseInt(args[1], 10);\n\t      }\n\n\t      // If no id is passed, get all ID's to be looped.\n\t      var ids = self._getSoundIds(id);\n\t      for (var i=0; i<ids.length; i++) {\n\t        sound = self._soundById(ids[i]);\n\n\t        if (sound) {\n\t          sound._loop = loop;\n\t          if (self._webAudio && sound._node && sound._node.bufferSource) {\n\t            sound._node.bufferSource.loop = loop;\n\t            if (loop) {\n\t              sound._node.bufferSource.loopStart = sound._start || 0;\n\t              sound._node.bufferSource.loopEnd = sound._stop;\n\n\t              // If playing, restart playback to ensure looping updates.\n\t              if (self.playing(ids[i])) {\n\t                self.pause(ids[i], true);\n\t                self.play(ids[i], true);\n\t              }\n\t            }\n\t          }\n\t        }\n\t      }\n\n\t      return self;\n\t    },\n\n\t    /**\n\t     * Get/set the playback rate of a sound. This method can optionally take 0, 1 or 2 arguments.\n\t     *   rate() -> Returns the first sound node's current playback rate.\n\t     *   rate(id) -> Returns the sound id's current playback rate.\n\t     *   rate(rate) -> Sets the playback rate of all sounds in this Howl group.\n\t     *   rate(rate, id) -> Sets the playback rate of passed sound id.\n\t     * @return {Howl/Number} Returns self or the current playback rate.\n\t     */\n\t    rate: function() {\n\t      var self = this;\n\t      var args = arguments;\n\t      var rate, id;\n\n\t      // Determine the values based on arguments.\n\t      if (args.length === 0) {\n\t        // We will simply return the current rate of the first node.\n\t        id = self._sounds[0]._id;\n\t      } else if (args.length === 1) {\n\t        // First check if this is an ID, and if not, assume it is a new rate value.\n\t        var ids = self._getSoundIds();\n\t        var index = ids.indexOf(args[0]);\n\t        if (index >= 0) {\n\t          id = parseInt(args[0], 10);\n\t        } else {\n\t          rate = parseFloat(args[0]);\n\t        }\n\t      } else if (args.length === 2) {\n\t        rate = parseFloat(args[0]);\n\t        id = parseInt(args[1], 10);\n\t      }\n\n\t      // Update the playback rate or return the current value.\n\t      var sound;\n\t      if (typeof rate === 'number') {\n\t        // If the sound hasn't loaded, add it to the load queue to change playback rate when capable.\n\t        if (self._state !== 'loaded' || self._playLock) {\n\t          self._queue.push({\n\t            event: 'rate',\n\t            action: function() {\n\t              self.rate.apply(self, args);\n\t            }\n\t          });\n\n\t          return self;\n\t        }\n\n\t        // Set the group rate.\n\t        if (typeof id === 'undefined') {\n\t          self._rate = rate;\n\t        }\n\n\t        // Update one or all volumes.\n\t        id = self._getSoundIds(id);\n\t        for (var i=0; i<id.length; i++) {\n\t          // Get the sound.\n\t          sound = self._soundById(id[i]);\n\n\t          if (sound) {\n\t            // Keep track of our position when the rate changed and update the playback\n\t            // start position so we can properly adjust the seek position for time elapsed.\n\t            if (self.playing(id[i])) {\n\t              sound._rateSeek = self.seek(id[i]);\n\t              sound._playStart = self._webAudio ? Howler.ctx.currentTime : sound._playStart;\n\t            }\n\t            sound._rate = rate;\n\n\t            // Change the playback rate.\n\t            if (self._webAudio && sound._node && sound._node.bufferSource) {\n\t              sound._node.bufferSource.playbackRate.setValueAtTime(rate, Howler.ctx.currentTime);\n\t            } else if (sound._node) {\n\t              sound._node.playbackRate = rate;\n\t            }\n\n\t            // Reset the timers.\n\t            var seek = self.seek(id[i]);\n\t            var duration = ((self._sprite[sound._sprite][0] + self._sprite[sound._sprite][1]) / 1000) - seek;\n\t            var timeout = (duration * 1000) / Math.abs(sound._rate);\n\n\t            // Start a new end timer if sound is already playing.\n\t            if (self._endTimers[id[i]] || !sound._paused) {\n\t              self._clearTimer(id[i]);\n\t              self._endTimers[id[i]] = setTimeout(self._ended.bind(self, sound), timeout);\n\t            }\n\n\t            self._emit('rate', sound._id);\n\t          }\n\t        }\n\t      } else {\n\t        sound = self._soundById(id);\n\t        return sound ? sound._rate : self._rate;\n\t      }\n\n\t      return self;\n\t    },\n\n\t    /**\n\t     * Get/set the seek position of a sound. This method can optionally take 0, 1 or 2 arguments.\n\t     *   seek() -> Returns the first sound node's current seek position.\n\t     *   seek(id) -> Returns the sound id's current seek position.\n\t     *   seek(seek) -> Sets the seek position of the first sound node.\n\t     *   seek(seek, id) -> Sets the seek position of passed sound id.\n\t     * @return {Howl/Number} Returns self or the current seek position.\n\t     */\n\t    seek: function() {\n\t      var self = this;\n\t      var args = arguments;\n\t      var seek, id;\n\n\t      // Determine the values based on arguments.\n\t      if (args.length === 0) {\n\t        // We will simply return the current position of the first node.\n\t        if (self._sounds.length) {\n\t          id = self._sounds[0]._id;\n\t        }\n\t      } else if (args.length === 1) {\n\t        // First check if this is an ID, and if not, assume it is a new seek position.\n\t        var ids = self._getSoundIds();\n\t        var index = ids.indexOf(args[0]);\n\t        if (index >= 0) {\n\t          id = parseInt(args[0], 10);\n\t        } else if (self._sounds.length) {\n\t          id = self._sounds[0]._id;\n\t          seek = parseFloat(args[0]);\n\t        }\n\t      } else if (args.length === 2) {\n\t        seek = parseFloat(args[0]);\n\t        id = parseInt(args[1], 10);\n\t      }\n\n\t      // If there is no ID, bail out.\n\t      if (typeof id === 'undefined') {\n\t        return 0;\n\t      }\n\n\t      // If the sound hasn't loaded, add it to the load queue to seek when capable.\n\t      if (typeof seek === 'number' && (self._state !== 'loaded' || self._playLock)) {\n\t        self._queue.push({\n\t          event: 'seek',\n\t          action: function() {\n\t            self.seek.apply(self, args);\n\t          }\n\t        });\n\n\t        return self;\n\t      }\n\n\t      // Get the sound.\n\t      var sound = self._soundById(id);\n\n\t      if (sound) {\n\t        if (typeof seek === 'number' && seek >= 0) {\n\t          // Pause the sound and update position for restarting playback.\n\t          var playing = self.playing(id);\n\t          if (playing) {\n\t            self.pause(id, true);\n\t          }\n\n\t          // Move the position of the track and cancel timer.\n\t          sound._seek = seek;\n\t          sound._ended = false;\n\t          self._clearTimer(id);\n\n\t          // Update the seek position for HTML5 Audio.\n\t          if (!self._webAudio && sound._node && !isNaN(sound._node.duration)) {\n\t            sound._node.currentTime = seek;\n\t          }\n\n\t          // Seek and emit when ready.\n\t          var seekAndEmit = function() {\n\t            // Restart the playback if the sound was playing.\n\t            if (playing) {\n\t              self.play(id, true);\n\t            }\n\n\t            self._emit('seek', id);\n\t          };\n\n\t          // Wait for the play lock to be unset before emitting (HTML5 Audio).\n\t          if (playing && !self._webAudio) {\n\t            var emitSeek = function() {\n\t              if (!self._playLock) {\n\t                seekAndEmit();\n\t              } else {\n\t                setTimeout(emitSeek, 0);\n\t              }\n\t            };\n\t            setTimeout(emitSeek, 0);\n\t          } else {\n\t            seekAndEmit();\n\t          }\n\t        } else {\n\t          if (self._webAudio) {\n\t            var realTime = self.playing(id) ? Howler.ctx.currentTime - sound._playStart : 0;\n\t            var rateSeek = sound._rateSeek ? sound._rateSeek - sound._seek : 0;\n\t            return sound._seek + (rateSeek + realTime * Math.abs(sound._rate));\n\t          } else {\n\t            return sound._node.currentTime;\n\t          }\n\t        }\n\t      }\n\n\t      return self;\n\t    },\n\n\t    /**\n\t     * Check if a specific sound is currently playing or not (if id is provided), or check if at least one of the sounds in the group is playing or not.\n\t     * @param  {Number}  id The sound id to check. If none is passed, the whole sound group is checked.\n\t     * @return {Boolean} True if playing and false if not.\n\t     */\n\t    playing: function(id) {\n\t      var self = this;\n\n\t      // Check the passed sound ID (if any).\n\t      if (typeof id === 'number') {\n\t        var sound = self._soundById(id);\n\t        return sound ? !sound._paused : false;\n\t      }\n\n\t      // Otherwise, loop through all sounds and check if any are playing.\n\t      for (var i=0; i<self._sounds.length; i++) {\n\t        if (!self._sounds[i]._paused) {\n\t          return true;\n\t        }\n\t      }\n\n\t      return false;\n\t    },\n\n\t    /**\n\t     * Get the duration of this sound. Passing a sound id will return the sprite duration.\n\t     * @param  {Number} id The sound id to check. If none is passed, return full source duration.\n\t     * @return {Number} Audio duration in seconds.\n\t     */\n\t    duration: function(id) {\n\t      var self = this;\n\t      var duration = self._duration;\n\n\t      // If we pass an ID, get the sound and return the sprite length.\n\t      var sound = self._soundById(id);\n\t      if (sound) {\n\t        duration = self._sprite[sound._sprite][1] / 1000;\n\t      }\n\n\t      return duration;\n\t    },\n\n\t    /**\n\t     * Returns the current loaded state of this Howl.\n\t     * @return {String} 'unloaded', 'loading', 'loaded'\n\t     */\n\t    state: function() {\n\t      return this._state;\n\t    },\n\n\t    /**\n\t     * Unload and destroy the current Howl object.\n\t     * This will immediately stop all sound instances attached to this group.\n\t     */\n\t    unload: function() {\n\t      var self = this;\n\n\t      // Stop playing any active sounds.\n\t      var sounds = self._sounds;\n\t      for (var i=0; i<sounds.length; i++) {\n\t        // Stop the sound if it is currently playing.\n\t        if (!sounds[i]._paused) {\n\t          self.stop(sounds[i]._id);\n\t        }\n\n\t        // Remove the source or disconnect.\n\t        if (!self._webAudio) {\n\t          // Set the source to 0-second silence to stop any downloading (except in IE).\n\t          self._clearSound(sounds[i]._node);\n\n\t          // Remove any event listeners.\n\t          sounds[i]._node.removeEventListener('error', sounds[i]._errorFn, false);\n\t          sounds[i]._node.removeEventListener(Howler._canPlayEvent, sounds[i]._loadFn, false);\n\t          sounds[i]._node.removeEventListener('ended', sounds[i]._endFn, false);\n\n\t          // Release the Audio object back to the pool.\n\t          Howler._releaseHtml5Audio(sounds[i]._node);\n\t        }\n\n\t        // Empty out all of the nodes.\n\t        delete sounds[i]._node;\n\n\t        // Make sure all timers are cleared out.\n\t        self._clearTimer(sounds[i]._id);\n\t      }\n\n\t      // Remove the references in the global Howler object.\n\t      var index = Howler._howls.indexOf(self);\n\t      if (index >= 0) {\n\t        Howler._howls.splice(index, 1);\n\t      }\n\n\t      // Delete this sound from the cache (if no other Howl is using it).\n\t      var remCache = true;\n\t      for (i=0; i<Howler._howls.length; i++) {\n\t        if (Howler._howls[i]._src === self._src || self._src.indexOf(Howler._howls[i]._src) >= 0) {\n\t          remCache = false;\n\t          break;\n\t        }\n\t      }\n\n\t      if (cache && remCache) {\n\t        delete cache[self._src];\n\t      }\n\n\t      // Clear global errors.\n\t      Howler.noAudio = false;\n\n\t      // Clear out `self`.\n\t      self._state = 'unloaded';\n\t      self._sounds = [];\n\t      self = null;\n\n\t      return null;\n\t    },\n\n\t    /**\n\t     * Listen to a custom event.\n\t     * @param  {String}   event Event name.\n\t     * @param  {Function} fn    Listener to call.\n\t     * @param  {Number}   id    (optional) Only listen to events for this sound.\n\t     * @param  {Number}   once  (INTERNAL) Marks event to fire only once.\n\t     * @return {Howl}\n\t     */\n\t    on: function(event, fn, id, once) {\n\t      var self = this;\n\t      var events = self['_on' + event];\n\n\t      if (typeof fn === 'function') {\n\t        events.push(once ? {id: id, fn: fn, once: once} : {id: id, fn: fn});\n\t      }\n\n\t      return self;\n\t    },\n\n\t    /**\n\t     * Remove a custom event. Call without parameters to remove all events.\n\t     * @param  {String}   event Event name.\n\t     * @param  {Function} fn    Listener to remove. Leave empty to remove all.\n\t     * @param  {Number}   id    (optional) Only remove events for this sound.\n\t     * @return {Howl}\n\t     */\n\t    off: function(event, fn, id) {\n\t      var self = this;\n\t      var events = self['_on' + event];\n\t      var i = 0;\n\n\t      // Allow passing just an event and ID.\n\t      if (typeof fn === 'number') {\n\t        id = fn;\n\t        fn = null;\n\t      }\n\n\t      if (fn || id) {\n\t        // Loop through event store and remove the passed function.\n\t        for (i=0; i<events.length; i++) {\n\t          var isId = (id === events[i].id);\n\t          if (fn === events[i].fn && isId || !fn && isId) {\n\t            events.splice(i, 1);\n\t            break;\n\t          }\n\t        }\n\t      } else if (event) {\n\t        // Clear out all events of this type.\n\t        self['_on' + event] = [];\n\t      } else {\n\t        // Clear out all events of every type.\n\t        var keys = Object.keys(self);\n\t        for (i=0; i<keys.length; i++) {\n\t          if ((keys[i].indexOf('_on') === 0) && Array.isArray(self[keys[i]])) {\n\t            self[keys[i]] = [];\n\t          }\n\t        }\n\t      }\n\n\t      return self;\n\t    },\n\n\t    /**\n\t     * Listen to a custom event and remove it once fired.\n\t     * @param  {String}   event Event name.\n\t     * @param  {Function} fn    Listener to call.\n\t     * @param  {Number}   id    (optional) Only listen to events for this sound.\n\t     * @return {Howl}\n\t     */\n\t    once: function(event, fn, id) {\n\t      var self = this;\n\n\t      // Setup the event listener.\n\t      self.on(event, fn, id, 1);\n\n\t      return self;\n\t    },\n\n\t    /**\n\t     * Emit all events of a specific type and pass the sound id.\n\t     * @param  {String} event Event name.\n\t     * @param  {Number} id    Sound ID.\n\t     * @param  {Number} msg   Message to go with event.\n\t     * @return {Howl}\n\t     */\n\t    _emit: function(event, id, msg) {\n\t      var self = this;\n\t      var events = self['_on' + event];\n\n\t      // Loop through event store and fire all functions.\n\t      for (var i=events.length-1; i>=0; i--) {\n\t        // Only fire the listener if the correct ID is used.\n\t        if (!events[i].id || events[i].id === id || event === 'load') {\n\t          setTimeout(function(fn) {\n\t            fn.call(this, id, msg);\n\t          }.bind(self, events[i].fn), 0);\n\n\t          // If this event was setup with `once`, remove it.\n\t          if (events[i].once) {\n\t            self.off(event, events[i].fn, events[i].id);\n\t          }\n\t        }\n\t      }\n\n\t      // Pass the event type into load queue so that it can continue stepping.\n\t      self._loadQueue(event);\n\n\t      return self;\n\t    },\n\n\t    /**\n\t     * Queue of actions initiated before the sound has loaded.\n\t     * These will be called in sequence, with the next only firing\n\t     * after the previous has finished executing (even if async like play).\n\t     * @return {Howl}\n\t     */\n\t    _loadQueue: function(event) {\n\t      var self = this;\n\n\t      if (self._queue.length > 0) {\n\t        var task = self._queue[0];\n\n\t        // Remove this task if a matching event was passed.\n\t        if (task.event === event) {\n\t          self._queue.shift();\n\t          self._loadQueue();\n\t        }\n\n\t        // Run the task if no event type is passed.\n\t        if (!event) {\n\t          task.action();\n\t        }\n\t      }\n\n\t      return self;\n\t    },\n\n\t    /**\n\t     * Fired when playback ends at the end of the duration.\n\t     * @param  {Sound} sound The sound object to work with.\n\t     * @return {Howl}\n\t     */\n\t    _ended: function(sound) {\n\t      var self = this;\n\t      var sprite = sound._sprite;\n\n\t      // If we are using IE and there was network latency we may be clipping\n\t      // audio before it completes playing. Lets check the node to make sure it\n\t      // believes it has completed, before ending the playback.\n\t      if (!self._webAudio && sound._node && !sound._node.paused && !sound._node.ended && sound._node.currentTime < sound._stop) {\n\t        setTimeout(self._ended.bind(self, sound), 100);\n\t        return self;\n\t      }\n\n\t      // Should this sound loop?\n\t      var loop = !!(sound._loop || self._sprite[sprite][2]);\n\n\t      // Fire the ended event.\n\t      self._emit('end', sound._id);\n\n\t      // Restart the playback for HTML5 Audio loop.\n\t      if (!self._webAudio && loop) {\n\t        self.stop(sound._id, true).play(sound._id);\n\t      }\n\n\t      // Restart this timer if on a Web Audio loop.\n\t      if (self._webAudio && loop) {\n\t        self._emit('play', sound._id);\n\t        sound._seek = sound._start || 0;\n\t        sound._rateSeek = 0;\n\t        sound._playStart = Howler.ctx.currentTime;\n\n\t        var timeout = ((sound._stop - sound._start) * 1000) / Math.abs(sound._rate);\n\t        self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n\t      }\n\n\t      // Mark the node as paused.\n\t      if (self._webAudio && !loop) {\n\t        sound._paused = true;\n\t        sound._ended = true;\n\t        sound._seek = sound._start || 0;\n\t        sound._rateSeek = 0;\n\t        self._clearTimer(sound._id);\n\n\t        // Clean up the buffer source.\n\t        self._cleanBuffer(sound._node);\n\n\t        // Attempt to auto-suspend AudioContext if no sounds are still playing.\n\t        Howler._autoSuspend();\n\t      }\n\n\t      // When using a sprite, end the track.\n\t      if (!self._webAudio && !loop) {\n\t        self.stop(sound._id, true);\n\t      }\n\n\t      return self;\n\t    },\n\n\t    /**\n\t     * Clear the end timer for a sound playback.\n\t     * @param  {Number} id The sound ID.\n\t     * @return {Howl}\n\t     */\n\t    _clearTimer: function(id) {\n\t      var self = this;\n\n\t      if (self._endTimers[id]) {\n\t        // Clear the timeout or remove the ended listener.\n\t        if (typeof self._endTimers[id] !== 'function') {\n\t          clearTimeout(self._endTimers[id]);\n\t        } else {\n\t          var sound = self._soundById(id);\n\t          if (sound && sound._node) {\n\t            sound._node.removeEventListener('ended', self._endTimers[id], false);\n\t          }\n\t        }\n\n\t        delete self._endTimers[id];\n\t      }\n\n\t      return self;\n\t    },\n\n\t    /**\n\t     * Return the sound identified by this ID, or return null.\n\t     * @param  {Number} id Sound ID\n\t     * @return {Object}    Sound object or null.\n\t     */\n\t    _soundById: function(id) {\n\t      var self = this;\n\n\t      // Loop through all sounds and find the one with this ID.\n\t      for (var i=0; i<self._sounds.length; i++) {\n\t        if (id === self._sounds[i]._id) {\n\t          return self._sounds[i];\n\t        }\n\t      }\n\n\t      return null;\n\t    },\n\n\t    /**\n\t     * Return an inactive sound from the pool or create a new one.\n\t     * @return {Sound} Sound playback object.\n\t     */\n\t    _inactiveSound: function() {\n\t      var self = this;\n\n\t      self._drain();\n\n\t      // Find the first inactive node to recycle.\n\t      for (var i=0; i<self._sounds.length; i++) {\n\t        if (self._sounds[i]._ended) {\n\t          return self._sounds[i].reset();\n\t        }\n\t      }\n\n\t      // If no inactive node was found, create a new one.\n\t      return new Sound(self);\n\t    },\n\n\t    /**\n\t     * Drain excess inactive sounds from the pool.\n\t     */\n\t    _drain: function() {\n\t      var self = this;\n\t      var limit = self._pool;\n\t      var cnt = 0;\n\t      var i = 0;\n\n\t      // If there are less sounds than the max pool size, we are done.\n\t      if (self._sounds.length < limit) {\n\t        return;\n\t      }\n\n\t      // Count the number of inactive sounds.\n\t      for (i=0; i<self._sounds.length; i++) {\n\t        if (self._sounds[i]._ended) {\n\t          cnt++;\n\t        }\n\t      }\n\n\t      // Remove excess inactive sounds, going in reverse order.\n\t      for (i=self._sounds.length - 1; i>=0; i--) {\n\t        if (cnt <= limit) {\n\t          return;\n\t        }\n\n\t        if (self._sounds[i]._ended) {\n\t          // Disconnect the audio source when using Web Audio.\n\t          if (self._webAudio && self._sounds[i]._node) {\n\t            self._sounds[i]._node.disconnect(0);\n\t          }\n\n\t          // Remove sounds until we have the pool size.\n\t          self._sounds.splice(i, 1);\n\t          cnt--;\n\t        }\n\t      }\n\t    },\n\n\t    /**\n\t     * Get all ID's from the sounds pool.\n\t     * @param  {Number} id Only return one ID if one is passed.\n\t     * @return {Array}    Array of IDs.\n\t     */\n\t    _getSoundIds: function(id) {\n\t      var self = this;\n\n\t      if (typeof id === 'undefined') {\n\t        var ids = [];\n\t        for (var i=0; i<self._sounds.length; i++) {\n\t          ids.push(self._sounds[i]._id);\n\t        }\n\n\t        return ids;\n\t      } else {\n\t        return [id];\n\t      }\n\t    },\n\n\t    /**\n\t     * Load the sound back into the buffer source.\n\t     * @param  {Sound} sound The sound object to work with.\n\t     * @return {Howl}\n\t     */\n\t    _refreshBuffer: function(sound) {\n\t      var self = this;\n\n\t      // Setup the buffer source for playback.\n\t      sound._node.bufferSource = Howler.ctx.createBufferSource();\n\t      sound._node.bufferSource.buffer = cache[self._src];\n\n\t      // Connect to the correct node.\n\t      if (sound._panner) {\n\t        sound._node.bufferSource.connect(sound._panner);\n\t      } else {\n\t        sound._node.bufferSource.connect(sound._node);\n\t      }\n\n\t      // Setup looping and playback rate.\n\t      sound._node.bufferSource.loop = sound._loop;\n\t      if (sound._loop) {\n\t        sound._node.bufferSource.loopStart = sound._start || 0;\n\t        sound._node.bufferSource.loopEnd = sound._stop || 0;\n\t      }\n\t      sound._node.bufferSource.playbackRate.setValueAtTime(sound._rate, Howler.ctx.currentTime);\n\n\t      return self;\n\t    },\n\n\t    /**\n\t     * Prevent memory leaks by cleaning up the buffer source after playback.\n\t     * @param  {Object} node Sound's audio node containing the buffer source.\n\t     * @return {Howl}\n\t     */\n\t    _cleanBuffer: function(node) {\n\t      var self = this;\n\t      var isIOS = Howler._navigator && Howler._navigator.vendor.indexOf('Apple') >= 0;\n\n\t      if (!node.bufferSource) {\n\t        return self;\n\t      }\n\n\t      if (Howler._scratchBuffer && node.bufferSource) {\n\t        node.bufferSource.onended = null;\n\t        node.bufferSource.disconnect(0);\n\t        if (isIOS) {\n\t          try { node.bufferSource.buffer = Howler._scratchBuffer; } catch(e) {}\n\t        }\n\t      }\n\t      node.bufferSource = null;\n\n\t      return self;\n\t    },\n\n\t    /**\n\t     * Set the source to a 0-second silence to stop any downloading (except in IE).\n\t     * @param  {Object} node Audio node to clear.\n\t     */\n\t    _clearSound: function(node) {\n\t      var checkIE = /MSIE |Trident\\//.test(Howler._navigator && Howler._navigator.userAgent);\n\t      if (!checkIE) {\n\t        node.src = 'data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA';\n\t      }\n\t    }\n\t  };\n\n\t  /** Single Sound Methods **/\n\t  /***************************************************************************/\n\n\t  /**\n\t   * Setup the sound object, which each node attached to a Howl group is contained in.\n\t   * @param {Object} howl The Howl parent group.\n\t   */\n\t  var Sound = function(howl) {\n\t    this._parent = howl;\n\t    this.init();\n\t  };\n\t  Sound.prototype = {\n\t    /**\n\t     * Initialize a new Sound object.\n\t     * @return {Sound}\n\t     */\n\t    init: function() {\n\t      var self = this;\n\t      var parent = self._parent;\n\n\t      // Setup the default parameters.\n\t      self._muted = parent._muted;\n\t      self._loop = parent._loop;\n\t      self._volume = parent._volume;\n\t      self._rate = parent._rate;\n\t      self._seek = 0;\n\t      self._paused = true;\n\t      self._ended = true;\n\t      self._sprite = '__default';\n\n\t      // Generate a unique ID for this sound.\n\t      self._id = ++Howler._counter;\n\n\t      // Add itself to the parent's pool.\n\t      parent._sounds.push(self);\n\n\t      // Create the new node.\n\t      self.create();\n\n\t      return self;\n\t    },\n\n\t    /**\n\t     * Create and setup a new sound object, whether HTML5 Audio or Web Audio.\n\t     * @return {Sound}\n\t     */\n\t    create: function() {\n\t      var self = this;\n\t      var parent = self._parent;\n\t      var volume = (Howler._muted || self._muted || self._parent._muted) ? 0 : self._volume;\n\n\t      if (parent._webAudio) {\n\t        // Create the gain node for controlling volume (the source will connect to this).\n\t        self._node = (typeof Howler.ctx.createGain === 'undefined') ? Howler.ctx.createGainNode() : Howler.ctx.createGain();\n\t        self._node.gain.setValueAtTime(volume, Howler.ctx.currentTime);\n\t        self._node.paused = true;\n\t        self._node.connect(Howler.masterGain);\n\t      } else if (!Howler.noAudio) {\n\t        // Get an unlocked Audio object from the pool.\n\t        self._node = Howler._obtainHtml5Audio();\n\n\t        // Listen for errors (http://dev.w3.org/html5/spec-author-view/spec.html#mediaerror).\n\t        self._errorFn = self._errorListener.bind(self);\n\t        self._node.addEventListener('error', self._errorFn, false);\n\n\t        // Listen for 'canplaythrough' event to let us know the sound is ready.\n\t        self._loadFn = self._loadListener.bind(self);\n\t        self._node.addEventListener(Howler._canPlayEvent, self._loadFn, false);\n\n\t        // Listen for the 'ended' event on the sound to account for edge-case where\n\t        // a finite sound has a duration of Infinity.\n\t        self._endFn = self._endListener.bind(self);\n\t        self._node.addEventListener('ended', self._endFn, false);\n\n\t        // Setup the new audio node.\n\t        self._node.src = parent._src;\n\t        self._node.preload = parent._preload === true ? 'auto' : parent._preload;\n\t        self._node.volume = volume * Howler.volume();\n\n\t        // Begin loading the source.\n\t        self._node.load();\n\t      }\n\n\t      return self;\n\t    },\n\n\t    /**\n\t     * Reset the parameters of this sound to the original state (for recycle).\n\t     * @return {Sound}\n\t     */\n\t    reset: function() {\n\t      var self = this;\n\t      var parent = self._parent;\n\n\t      // Reset all of the parameters of this sound.\n\t      self._muted = parent._muted;\n\t      self._loop = parent._loop;\n\t      self._volume = parent._volume;\n\t      self._rate = parent._rate;\n\t      self._seek = 0;\n\t      self._rateSeek = 0;\n\t      self._paused = true;\n\t      self._ended = true;\n\t      self._sprite = '__default';\n\n\t      // Generate a new ID so that it isn't confused with the previous sound.\n\t      self._id = ++Howler._counter;\n\n\t      return self;\n\t    },\n\n\t    /**\n\t     * HTML5 Audio error listener callback.\n\t     */\n\t    _errorListener: function() {\n\t      var self = this;\n\n\t      // Fire an error event and pass back the code.\n\t      self._parent._emit('loaderror', self._id, self._node.error ? self._node.error.code : 0);\n\n\t      // Clear the event listener.\n\t      self._node.removeEventListener('error', self._errorFn, false);\n\t    },\n\n\t    /**\n\t     * HTML5 Audio canplaythrough listener callback.\n\t     */\n\t    _loadListener: function() {\n\t      var self = this;\n\t      var parent = self._parent;\n\n\t      // Round up the duration to account for the lower precision in HTML5 Audio.\n\t      parent._duration = Math.ceil(self._node.duration * 10) / 10;\n\n\t      // Setup a sprite if none is defined.\n\t      if (Object.keys(parent._sprite).length === 0) {\n\t        parent._sprite = {__default: [0, parent._duration * 1000]};\n\t      }\n\n\t      if (parent._state !== 'loaded') {\n\t        parent._state = 'loaded';\n\t        parent._emit('load');\n\t        parent._loadQueue();\n\t      }\n\n\t      // Clear the event listener.\n\t      self._node.removeEventListener(Howler._canPlayEvent, self._loadFn, false);\n\t    },\n\n\t    /**\n\t     * HTML5 Audio ended listener callback.\n\t     */\n\t    _endListener: function() {\n\t      var self = this;\n\t      var parent = self._parent;\n\n\t      // Only handle the `ended`` event if the duration is Infinity.\n\t      if (parent._duration === Infinity) {\n\t        // Update the parent duration to match the real audio duration.\n\t        // Round up the duration to account for the lower precision in HTML5 Audio.\n\t        parent._duration = Math.ceil(self._node.duration * 10) / 10;\n\n\t        // Update the sprite that corresponds to the real duration.\n\t        if (parent._sprite.__default[1] === Infinity) {\n\t          parent._sprite.__default[1] = parent._duration * 1000;\n\t        }\n\n\t        // Run the regular ended method.\n\t        parent._ended(self);\n\t      }\n\n\t      // Clear the event listener since the duration is now correct.\n\t      self._node.removeEventListener('ended', self._endFn, false);\n\t    }\n\t  };\n\n\t  /** Helper Methods **/\n\t  /***************************************************************************/\n\n\t  var cache = {};\n\n\t  /**\n\t   * Buffer a sound from URL, Data URI or cache and decode to audio source (Web Audio API).\n\t   * @param  {Howl} self\n\t   */\n\t  var loadBuffer = function(self) {\n\t    var url = self._src;\n\n\t    // Check if the buffer has already been cached and use it instead.\n\t    if (cache[url]) {\n\t      // Set the duration from the cache.\n\t      self._duration = cache[url].duration;\n\n\t      // Load the sound into this Howl.\n\t      loadSound(self);\n\n\t      return;\n\t    }\n\n\t    if (/^data:[^;]+;base64,/.test(url)) {\n\t      // Decode the base64 data URI without XHR, since some browsers don't support it.\n\t      var data = atob(url.split(',')[1]);\n\t      var dataView = new Uint8Array(data.length);\n\t      for (var i=0; i<data.length; ++i) {\n\t        dataView[i] = data.charCodeAt(i);\n\t      }\n\n\t      decodeAudioData(dataView.buffer, self);\n\t    } else {\n\t      // Load the buffer from the URL.\n\t      var xhr = new XMLHttpRequest();\n\t      xhr.open(self._xhr.method, url, true);\n\t      xhr.withCredentials = self._xhr.withCredentials;\n\t      xhr.responseType = 'arraybuffer';\n\n\t      // Apply any custom headers to the request.\n\t      if (self._xhr.headers) {\n\t        Object.keys(self._xhr.headers).forEach(function(key) {\n\t          xhr.setRequestHeader(key, self._xhr.headers[key]);\n\t        });\n\t      }\n\n\t      xhr.onload = function() {\n\t        // Make sure we get a successful response back.\n\t        var code = (xhr.status + '')[0];\n\t        if (code !== '0' && code !== '2' && code !== '3') {\n\t          self._emit('loaderror', null, 'Failed loading audio file with status: ' + xhr.status + '.');\n\t          return;\n\t        }\n\n\t        decodeAudioData(xhr.response, self);\n\t      };\n\t      xhr.onerror = function() {\n\t        // If there is an error, switch to HTML5 Audio.\n\t        if (self._webAudio) {\n\t          self._html5 = true;\n\t          self._webAudio = false;\n\t          self._sounds = [];\n\t          delete cache[url];\n\t          self.load();\n\t        }\n\t      };\n\t      safeXhrSend(xhr);\n\t    }\n\t  };\n\n\t  /**\n\t   * Send the XHR request wrapped in a try/catch.\n\t   * @param  {Object} xhr XHR to send.\n\t   */\n\t  var safeXhrSend = function(xhr) {\n\t    try {\n\t      xhr.send();\n\t    } catch (e) {\n\t      xhr.onerror();\n\t    }\n\t  };\n\n\t  /**\n\t   * Decode audio data from an array buffer.\n\t   * @param  {ArrayBuffer} arraybuffer The audio data.\n\t   * @param  {Howl}        self\n\t   */\n\t  var decodeAudioData = function(arraybuffer, self) {\n\t    // Fire a load error if something broke.\n\t    var error = function() {\n\t      self._emit('loaderror', null, 'Decoding audio data failed.');\n\t    };\n\n\t    // Load the sound on success.\n\t    var success = function(buffer) {\n\t      if (buffer && self._sounds.length > 0) {\n\t        cache[self._src] = buffer;\n\t        loadSound(self, buffer);\n\t      } else {\n\t        error();\n\t      }\n\t    };\n\n\t    // Decode the buffer into an audio source.\n\t    if (typeof Promise !== 'undefined' && Howler.ctx.decodeAudioData.length === 1) {\n\t      Howler.ctx.decodeAudioData(arraybuffer).then(success).catch(error);\n\t    } else {\n\t      Howler.ctx.decodeAudioData(arraybuffer, success, error);\n\t    }\n\t  };\n\n\t  /**\n\t   * Sound is now loaded, so finish setting everything up and fire the loaded event.\n\t   * @param  {Howl} self\n\t   * @param  {Object} buffer The decoded buffer sound source.\n\t   */\n\t  var loadSound = function(self, buffer) {\n\t    // Set the duration.\n\t    if (buffer && !self._duration) {\n\t      self._duration = buffer.duration;\n\t    }\n\n\t    // Setup a sprite if none is defined.\n\t    if (Object.keys(self._sprite).length === 0) {\n\t      self._sprite = {__default: [0, self._duration * 1000]};\n\t    }\n\n\t    // Fire the loaded event.\n\t    if (self._state !== 'loaded') {\n\t      self._state = 'loaded';\n\t      self._emit('load');\n\t      self._loadQueue();\n\t    }\n\t  };\n\n\t  /**\n\t   * Setup the audio context when available, or switch to HTML5 Audio mode.\n\t   */\n\t  var setupAudioContext = function() {\n\t    // If we have already detected that Web Audio isn't supported, don't run this step again.\n\t    if (!Howler.usingWebAudio) {\n\t      return;\n\t    }\n\n\t    // Check if we are using Web Audio and setup the AudioContext if we are.\n\t    try {\n\t      if (typeof AudioContext !== 'undefined') {\n\t        Howler.ctx = new AudioContext();\n\t      } else if (typeof webkitAudioContext !== 'undefined') {\n\t        Howler.ctx = new webkitAudioContext();\n\t      } else {\n\t        Howler.usingWebAudio = false;\n\t      }\n\t    } catch(e) {\n\t      Howler.usingWebAudio = false;\n\t    }\n\n\t    // If the audio context creation still failed, set using web audio to false.\n\t    if (!Howler.ctx) {\n\t      Howler.usingWebAudio = false;\n\t    }\n\n\t    // Check if a webview is being used on iOS8 or earlier (rather than the browser).\n\t    // If it is, disable Web Audio as it causes crashing.\n\t    var iOS = (/iP(hone|od|ad)/.test(Howler._navigator && Howler._navigator.platform));\n\t    var appVersion = Howler._navigator && Howler._navigator.appVersion.match(/OS (\\d+)_(\\d+)_?(\\d+)?/);\n\t    var version = appVersion ? parseInt(appVersion[1], 10) : null;\n\t    if (iOS && version && version < 9) {\n\t      var safari = /safari/.test(Howler._navigator && Howler._navigator.userAgent.toLowerCase());\n\t      if (Howler._navigator && !safari) {\n\t        Howler.usingWebAudio = false;\n\t      }\n\t    }\n\n\t    // Create and expose the master GainNode when using Web Audio (useful for plugins or advanced usage).\n\t    if (Howler.usingWebAudio) {\n\t      Howler.masterGain = (typeof Howler.ctx.createGain === 'undefined') ? Howler.ctx.createGainNode() : Howler.ctx.createGain();\n\t      Howler.masterGain.gain.setValueAtTime(Howler._muted ? 0 : Howler._volume, Howler.ctx.currentTime);\n\t      Howler.masterGain.connect(Howler.ctx.destination);\n\t    }\n\n\t    // Re-run the setup on Howler.\n\t    Howler._setup();\n\t  };\n\n\t  // Add support for AMD (Asynchronous Module Definition) libraries such as require.js.\n\t  if (typeof undefined === 'function' && undefined.amd) {\n\t    undefined([], function() {\n\t      return {\n\t        Howler: Howler,\n\t        Howl: Howl\n\t      };\n\t    });\n\t  }\n\n\t  // Add support for CommonJS libraries such as browserify.\n\t  if ('object' !== 'undefined') {\n\t    exports.Howler = Howler;\n\t    exports.Howl = Howl;\n\t  }\n\n\t  // Add to global in Node.js (for testing, etc).\n\t  if (typeof commonjsGlobal !== 'undefined') {\n\t    commonjsGlobal.HowlerGlobal = HowlerGlobal;\n\t    commonjsGlobal.Howler = Howler;\n\t    commonjsGlobal.Howl = Howl;\n\t    commonjsGlobal.Sound = Sound;\n\t  } else if (typeof window !== 'undefined') {  // Define globally in case AMD is not available or unused.\n\t    window.HowlerGlobal = HowlerGlobal;\n\t    window.Howler = Howler;\n\t    window.Howl = Howl;\n\t    window.Sound = Sound;\n\t  }\n\t})();\n\n\n\t/*!\n\t *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.\n\t *  \n\t *  howler.js v2.2.4\n\t *  howlerjs.com\n\t *\n\t *  (c) 2013-2020, James Simpson of GoldFire Studios\n\t *  goldfirestudios.com\n\t *\n\t *  MIT License\n\t */\n\n\t(function() {\n\n\t  'use strict';\n\n\t  // Setup default properties.\n\t  HowlerGlobal.prototype._pos = [0, 0, 0];\n\t  HowlerGlobal.prototype._orientation = [0, 0, -1, 0, 1, 0];\n\n\t  /** Global Methods **/\n\t  /***************************************************************************/\n\n\t  /**\n\t   * Helper method to update the stereo panning position of all current Howls.\n\t   * Future Howls will not use this value unless explicitly set.\n\t   * @param  {Number} pan A value of -1.0 is all the way left and 1.0 is all the way right.\n\t   * @return {Howler/Number}     Self or current stereo panning value.\n\t   */\n\t  HowlerGlobal.prototype.stereo = function(pan) {\n\t    var self = this;\n\n\t    // Stop right here if not using Web Audio.\n\t    if (!self.ctx || !self.ctx.listener) {\n\t      return self;\n\t    }\n\n\t    // Loop through all Howls and update their stereo panning.\n\t    for (var i=self._howls.length-1; i>=0; i--) {\n\t      self._howls[i].stereo(pan);\n\t    }\n\n\t    return self;\n\t  };\n\n\t  /**\n\t   * Get/set the position of the listener in 3D cartesian space. Sounds using\n\t   * 3D position will be relative to the listener's position.\n\t   * @param  {Number} x The x-position of the listener.\n\t   * @param  {Number} y The y-position of the listener.\n\t   * @param  {Number} z The z-position of the listener.\n\t   * @return {Howler/Array}   Self or current listener position.\n\t   */\n\t  HowlerGlobal.prototype.pos = function(x, y, z) {\n\t    var self = this;\n\n\t    // Stop right here if not using Web Audio.\n\t    if (!self.ctx || !self.ctx.listener) {\n\t      return self;\n\t    }\n\n\t    // Set the defaults for optional 'y' & 'z'.\n\t    y = (typeof y !== 'number') ? self._pos[1] : y;\n\t    z = (typeof z !== 'number') ? self._pos[2] : z;\n\n\t    if (typeof x === 'number') {\n\t      self._pos = [x, y, z];\n\n\t      if (typeof self.ctx.listener.positionX !== 'undefined') {\n\t        self.ctx.listener.positionX.setTargetAtTime(self._pos[0], Howler.ctx.currentTime, 0.1);\n\t        self.ctx.listener.positionY.setTargetAtTime(self._pos[1], Howler.ctx.currentTime, 0.1);\n\t        self.ctx.listener.positionZ.setTargetAtTime(self._pos[2], Howler.ctx.currentTime, 0.1);\n\t      } else {\n\t        self.ctx.listener.setPosition(self._pos[0], self._pos[1], self._pos[2]);\n\t      }\n\t    } else {\n\t      return self._pos;\n\t    }\n\n\t    return self;\n\t  };\n\n\t  /**\n\t   * Get/set the direction the listener is pointing in the 3D cartesian space.\n\t   * A front and up vector must be provided. The front is the direction the\n\t   * face of the listener is pointing, and up is the direction the top of the\n\t   * listener is pointing. Thus, these values are expected to be at right angles\n\t   * from each other.\n\t   * @param  {Number} x   The x-orientation of the listener.\n\t   * @param  {Number} y   The y-orientation of the listener.\n\t   * @param  {Number} z   The z-orientation of the listener.\n\t   * @param  {Number} xUp The x-orientation of the top of the listener.\n\t   * @param  {Number} yUp The y-orientation of the top of the listener.\n\t   * @param  {Number} zUp The z-orientation of the top of the listener.\n\t   * @return {Howler/Array}     Returns self or the current orientation vectors.\n\t   */\n\t  HowlerGlobal.prototype.orientation = function(x, y, z, xUp, yUp, zUp) {\n\t    var self = this;\n\n\t    // Stop right here if not using Web Audio.\n\t    if (!self.ctx || !self.ctx.listener) {\n\t      return self;\n\t    }\n\n\t    // Set the defaults for optional 'y' & 'z'.\n\t    var or = self._orientation;\n\t    y = (typeof y !== 'number') ? or[1] : y;\n\t    z = (typeof z !== 'number') ? or[2] : z;\n\t    xUp = (typeof xUp !== 'number') ? or[3] : xUp;\n\t    yUp = (typeof yUp !== 'number') ? or[4] : yUp;\n\t    zUp = (typeof zUp !== 'number') ? or[5] : zUp;\n\n\t    if (typeof x === 'number') {\n\t      self._orientation = [x, y, z, xUp, yUp, zUp];\n\n\t      if (typeof self.ctx.listener.forwardX !== 'undefined') {\n\t        self.ctx.listener.forwardX.setTargetAtTime(x, Howler.ctx.currentTime, 0.1);\n\t        self.ctx.listener.forwardY.setTargetAtTime(y, Howler.ctx.currentTime, 0.1);\n\t        self.ctx.listener.forwardZ.setTargetAtTime(z, Howler.ctx.currentTime, 0.1);\n\t        self.ctx.listener.upX.setTargetAtTime(xUp, Howler.ctx.currentTime, 0.1);\n\t        self.ctx.listener.upY.setTargetAtTime(yUp, Howler.ctx.currentTime, 0.1);\n\t        self.ctx.listener.upZ.setTargetAtTime(zUp, Howler.ctx.currentTime, 0.1);\n\t      } else {\n\t        self.ctx.listener.setOrientation(x, y, z, xUp, yUp, zUp);\n\t      }\n\t    } else {\n\t      return or;\n\t    }\n\n\t    return self;\n\t  };\n\n\t  /** Group Methods **/\n\t  /***************************************************************************/\n\n\t  /**\n\t   * Add new properties to the core init.\n\t   * @param  {Function} _super Core init method.\n\t   * @return {Howl}\n\t   */\n\t  Howl.prototype.init = (function(_super) {\n\t    return function(o) {\n\t      var self = this;\n\n\t      // Setup user-defined default properties.\n\t      self._orientation = o.orientation || [1, 0, 0];\n\t      self._stereo = o.stereo || null;\n\t      self._pos = o.pos || null;\n\t      self._pannerAttr = {\n\t        coneInnerAngle: typeof o.coneInnerAngle !== 'undefined' ? o.coneInnerAngle : 360,\n\t        coneOuterAngle: typeof o.coneOuterAngle !== 'undefined' ? o.coneOuterAngle : 360,\n\t        coneOuterGain: typeof o.coneOuterGain !== 'undefined' ? o.coneOuterGain : 0,\n\t        distanceModel: typeof o.distanceModel !== 'undefined' ? o.distanceModel : 'inverse',\n\t        maxDistance: typeof o.maxDistance !== 'undefined' ? o.maxDistance : 10000,\n\t        panningModel: typeof o.panningModel !== 'undefined' ? o.panningModel : 'HRTF',\n\t        refDistance: typeof o.refDistance !== 'undefined' ? o.refDistance : 1,\n\t        rolloffFactor: typeof o.rolloffFactor !== 'undefined' ? o.rolloffFactor : 1\n\t      };\n\n\t      // Setup event listeners.\n\t      self._onstereo = o.onstereo ? [{fn: o.onstereo}] : [];\n\t      self._onpos = o.onpos ? [{fn: o.onpos}] : [];\n\t      self._onorientation = o.onorientation ? [{fn: o.onorientation}] : [];\n\n\t      // Complete initilization with howler.js core's init function.\n\t      return _super.call(this, o);\n\t    };\n\t  })(Howl.prototype.init);\n\n\t  /**\n\t   * Get/set the stereo panning of the audio source for this sound or all in the group.\n\t   * @param  {Number} pan  A value of -1.0 is all the way left and 1.0 is all the way right.\n\t   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n\t   * @return {Howl/Number}    Returns self or the current stereo panning value.\n\t   */\n\t  Howl.prototype.stereo = function(pan, id) {\n\t    var self = this;\n\n\t    // Stop right here if not using Web Audio.\n\t    if (!self._webAudio) {\n\t      return self;\n\t    }\n\n\t    // If the sound hasn't loaded, add it to the load queue to change stereo pan when capable.\n\t    if (self._state !== 'loaded') {\n\t      self._queue.push({\n\t        event: 'stereo',\n\t        action: function() {\n\t          self.stereo(pan, id);\n\t        }\n\t      });\n\n\t      return self;\n\t    }\n\n\t    // Check for PannerStereoNode support and fallback to PannerNode if it doesn't exist.\n\t    var pannerType = (typeof Howler.ctx.createStereoPanner === 'undefined') ? 'spatial' : 'stereo';\n\n\t    // Setup the group's stereo panning if no ID is passed.\n\t    if (typeof id === 'undefined') {\n\t      // Return the group's stereo panning if no parameters are passed.\n\t      if (typeof pan === 'number') {\n\t        self._stereo = pan;\n\t        self._pos = [pan, 0, 0];\n\t      } else {\n\t        return self._stereo;\n\t      }\n\t    }\n\n\t    // Change the streo panning of one or all sounds in group.\n\t    var ids = self._getSoundIds(id);\n\t    for (var i=0; i<ids.length; i++) {\n\t      // Get the sound.\n\t      var sound = self._soundById(ids[i]);\n\n\t      if (sound) {\n\t        if (typeof pan === 'number') {\n\t          sound._stereo = pan;\n\t          sound._pos = [pan, 0, 0];\n\n\t          if (sound._node) {\n\t            // If we are falling back, make sure the panningModel is equalpower.\n\t            sound._pannerAttr.panningModel = 'equalpower';\n\n\t            // Check if there is a panner setup and create a new one if not.\n\t            if (!sound._panner || !sound._panner.pan) {\n\t              setupPanner(sound, pannerType);\n\t            }\n\n\t            if (pannerType === 'spatial') {\n\t              if (typeof sound._panner.positionX !== 'undefined') {\n\t                sound._panner.positionX.setValueAtTime(pan, Howler.ctx.currentTime);\n\t                sound._panner.positionY.setValueAtTime(0, Howler.ctx.currentTime);\n\t                sound._panner.positionZ.setValueAtTime(0, Howler.ctx.currentTime);\n\t              } else {\n\t                sound._panner.setPosition(pan, 0, 0);\n\t              }\n\t            } else {\n\t              sound._panner.pan.setValueAtTime(pan, Howler.ctx.currentTime);\n\t            }\n\t          }\n\n\t          self._emit('stereo', sound._id);\n\t        } else {\n\t          return sound._stereo;\n\t        }\n\t      }\n\t    }\n\n\t    return self;\n\t  };\n\n\t  /**\n\t   * Get/set the 3D spatial position of the audio source for this sound or group relative to the global listener.\n\t   * @param  {Number} x  The x-position of the audio source.\n\t   * @param  {Number} y  The y-position of the audio source.\n\t   * @param  {Number} z  The z-position of the audio source.\n\t   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n\t   * @return {Howl/Array}    Returns self or the current 3D spatial position: [x, y, z].\n\t   */\n\t  Howl.prototype.pos = function(x, y, z, id) {\n\t    var self = this;\n\n\t    // Stop right here if not using Web Audio.\n\t    if (!self._webAudio) {\n\t      return self;\n\t    }\n\n\t    // If the sound hasn't loaded, add it to the load queue to change position when capable.\n\t    if (self._state !== 'loaded') {\n\t      self._queue.push({\n\t        event: 'pos',\n\t        action: function() {\n\t          self.pos(x, y, z, id);\n\t        }\n\t      });\n\n\t      return self;\n\t    }\n\n\t    // Set the defaults for optional 'y' & 'z'.\n\t    y = (typeof y !== 'number') ? 0 : y;\n\t    z = (typeof z !== 'number') ? -0.5 : z;\n\n\t    // Setup the group's spatial position if no ID is passed.\n\t    if (typeof id === 'undefined') {\n\t      // Return the group's spatial position if no parameters are passed.\n\t      if (typeof x === 'number') {\n\t        self._pos = [x, y, z];\n\t      } else {\n\t        return self._pos;\n\t      }\n\t    }\n\n\t    // Change the spatial position of one or all sounds in group.\n\t    var ids = self._getSoundIds(id);\n\t    for (var i=0; i<ids.length; i++) {\n\t      // Get the sound.\n\t      var sound = self._soundById(ids[i]);\n\n\t      if (sound) {\n\t        if (typeof x === 'number') {\n\t          sound._pos = [x, y, z];\n\n\t          if (sound._node) {\n\t            // Check if there is a panner setup and create a new one if not.\n\t            if (!sound._panner || sound._panner.pan) {\n\t              setupPanner(sound, 'spatial');\n\t            }\n\n\t            if (typeof sound._panner.positionX !== 'undefined') {\n\t              sound._panner.positionX.setValueAtTime(x, Howler.ctx.currentTime);\n\t              sound._panner.positionY.setValueAtTime(y, Howler.ctx.currentTime);\n\t              sound._panner.positionZ.setValueAtTime(z, Howler.ctx.currentTime);\n\t            } else {\n\t              sound._panner.setPosition(x, y, z);\n\t            }\n\t          }\n\n\t          self._emit('pos', sound._id);\n\t        } else {\n\t          return sound._pos;\n\t        }\n\t      }\n\t    }\n\n\t    return self;\n\t  };\n\n\t  /**\n\t   * Get/set the direction the audio source is pointing in the 3D cartesian coordinate\n\t   * space. Depending on how direction the sound is, based on the `cone` attributes,\n\t   * a sound pointing away from the listener can be quiet or silent.\n\t   * @param  {Number} x  The x-orientation of the source.\n\t   * @param  {Number} y  The y-orientation of the source.\n\t   * @param  {Number} z  The z-orientation of the source.\n\t   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n\t   * @return {Howl/Array}    Returns self or the current 3D spatial orientation: [x, y, z].\n\t   */\n\t  Howl.prototype.orientation = function(x, y, z, id) {\n\t    var self = this;\n\n\t    // Stop right here if not using Web Audio.\n\t    if (!self._webAudio) {\n\t      return self;\n\t    }\n\n\t    // If the sound hasn't loaded, add it to the load queue to change orientation when capable.\n\t    if (self._state !== 'loaded') {\n\t      self._queue.push({\n\t        event: 'orientation',\n\t        action: function() {\n\t          self.orientation(x, y, z, id);\n\t        }\n\t      });\n\n\t      return self;\n\t    }\n\n\t    // Set the defaults for optional 'y' & 'z'.\n\t    y = (typeof y !== 'number') ? self._orientation[1] : y;\n\t    z = (typeof z !== 'number') ? self._orientation[2] : z;\n\n\t    // Setup the group's spatial orientation if no ID is passed.\n\t    if (typeof id === 'undefined') {\n\t      // Return the group's spatial orientation if no parameters are passed.\n\t      if (typeof x === 'number') {\n\t        self._orientation = [x, y, z];\n\t      } else {\n\t        return self._orientation;\n\t      }\n\t    }\n\n\t    // Change the spatial orientation of one or all sounds in group.\n\t    var ids = self._getSoundIds(id);\n\t    for (var i=0; i<ids.length; i++) {\n\t      // Get the sound.\n\t      var sound = self._soundById(ids[i]);\n\n\t      if (sound) {\n\t        if (typeof x === 'number') {\n\t          sound._orientation = [x, y, z];\n\n\t          if (sound._node) {\n\t            // Check if there is a panner setup and create a new one if not.\n\t            if (!sound._panner) {\n\t              // Make sure we have a position to setup the node with.\n\t              if (!sound._pos) {\n\t                sound._pos = self._pos || [0, 0, -0.5];\n\t              }\n\n\t              setupPanner(sound, 'spatial');\n\t            }\n\n\t            if (typeof sound._panner.orientationX !== 'undefined') {\n\t              sound._panner.orientationX.setValueAtTime(x, Howler.ctx.currentTime);\n\t              sound._panner.orientationY.setValueAtTime(y, Howler.ctx.currentTime);\n\t              sound._panner.orientationZ.setValueAtTime(z, Howler.ctx.currentTime);\n\t            } else {\n\t              sound._panner.setOrientation(x, y, z);\n\t            }\n\t          }\n\n\t          self._emit('orientation', sound._id);\n\t        } else {\n\t          return sound._orientation;\n\t        }\n\t      }\n\t    }\n\n\t    return self;\n\t  };\n\n\t  /**\n\t   * Get/set the panner node's attributes for a sound or group of sounds.\n\t   * This method can optionall take 0, 1 or 2 arguments.\n\t   *   pannerAttr() -> Returns the group's values.\n\t   *   pannerAttr(id) -> Returns the sound id's values.\n\t   *   pannerAttr(o) -> Set's the values of all sounds in this Howl group.\n\t   *   pannerAttr(o, id) -> Set's the values of passed sound id.\n\t   *\n\t   *   Attributes:\n\t   *     coneInnerAngle - (360 by default) A parameter for directional audio sources, this is an angle, in degrees,\n\t   *                      inside of which there will be no volume reduction.\n\t   *     coneOuterAngle - (360 by default) A parameter for directional audio sources, this is an angle, in degrees,\n\t   *                      outside of which the volume will be reduced to a constant value of `coneOuterGain`.\n\t   *     coneOuterGain - (0 by default) A parameter for directional audio sources, this is the gain outside of the\n\t   *                     `coneOuterAngle`. It is a linear value in the range `[0, 1]`.\n\t   *     distanceModel - ('inverse' by default) Determines algorithm used to reduce volume as audio moves away from\n\t   *                     listener. Can be `linear`, `inverse` or `exponential.\n\t   *     maxDistance - (10000 by default) The maximum distance between source and listener, after which the volume\n\t   *                   will not be reduced any further.\n\t   *     refDistance - (1 by default) A reference distance for reducing volume as source moves further from the listener.\n\t   *                   This is simply a variable of the distance model and has a different effect depending on which model\n\t   *                   is used and the scale of your coordinates. Generally, volume will be equal to 1 at this distance.\n\t   *     rolloffFactor - (1 by default) How quickly the volume reduces as source moves from listener. This is simply a\n\t   *                     variable of the distance model and can be in the range of `[0, 1]` with `linear` and `[0, â]`\n\t   *                     with `inverse` and `exponential`.\n\t   *     panningModel - ('HRTF' by default) Determines which spatialization algorithm is used to position audio.\n\t   *                     Can be `HRTF` or `equalpower`.\n\t   *\n\t   * @return {Howl/Object} Returns self or current panner attributes.\n\t   */\n\t  Howl.prototype.pannerAttr = function() {\n\t    var self = this;\n\t    var args = arguments;\n\t    var o, id, sound;\n\n\t    // Stop right here if not using Web Audio.\n\t    if (!self._webAudio) {\n\t      return self;\n\t    }\n\n\t    // Determine the values based on arguments.\n\t    if (args.length === 0) {\n\t      // Return the group's panner attribute values.\n\t      return self._pannerAttr;\n\t    } else if (args.length === 1) {\n\t      if (typeof args[0] === 'object') {\n\t        o = args[0];\n\n\t        // Set the grou's panner attribute values.\n\t        if (typeof id === 'undefined') {\n\t          if (!o.pannerAttr) {\n\t            o.pannerAttr = {\n\t              coneInnerAngle: o.coneInnerAngle,\n\t              coneOuterAngle: o.coneOuterAngle,\n\t              coneOuterGain: o.coneOuterGain,\n\t              distanceModel: o.distanceModel,\n\t              maxDistance: o.maxDistance,\n\t              refDistance: o.refDistance,\n\t              rolloffFactor: o.rolloffFactor,\n\t              panningModel: o.panningModel\n\t            };\n\t          }\n\n\t          self._pannerAttr = {\n\t            coneInnerAngle: typeof o.pannerAttr.coneInnerAngle !== 'undefined' ? o.pannerAttr.coneInnerAngle : self._coneInnerAngle,\n\t            coneOuterAngle: typeof o.pannerAttr.coneOuterAngle !== 'undefined' ? o.pannerAttr.coneOuterAngle : self._coneOuterAngle,\n\t            coneOuterGain: typeof o.pannerAttr.coneOuterGain !== 'undefined' ? o.pannerAttr.coneOuterGain : self._coneOuterGain,\n\t            distanceModel: typeof o.pannerAttr.distanceModel !== 'undefined' ? o.pannerAttr.distanceModel : self._distanceModel,\n\t            maxDistance: typeof o.pannerAttr.maxDistance !== 'undefined' ? o.pannerAttr.maxDistance : self._maxDistance,\n\t            refDistance: typeof o.pannerAttr.refDistance !== 'undefined' ? o.pannerAttr.refDistance : self._refDistance,\n\t            rolloffFactor: typeof o.pannerAttr.rolloffFactor !== 'undefined' ? o.pannerAttr.rolloffFactor : self._rolloffFactor,\n\t            panningModel: typeof o.pannerAttr.panningModel !== 'undefined' ? o.pannerAttr.panningModel : self._panningModel\n\t          };\n\t        }\n\t      } else {\n\t        // Return this sound's panner attribute values.\n\t        sound = self._soundById(parseInt(args[0], 10));\n\t        return sound ? sound._pannerAttr : self._pannerAttr;\n\t      }\n\t    } else if (args.length === 2) {\n\t      o = args[0];\n\t      id = parseInt(args[1], 10);\n\t    }\n\n\t    // Update the values of the specified sounds.\n\t    var ids = self._getSoundIds(id);\n\t    for (var i=0; i<ids.length; i++) {\n\t      sound = self._soundById(ids[i]);\n\n\t      if (sound) {\n\t        // Merge the new values into the sound.\n\t        var pa = sound._pannerAttr;\n\t        pa = {\n\t          coneInnerAngle: typeof o.coneInnerAngle !== 'undefined' ? o.coneInnerAngle : pa.coneInnerAngle,\n\t          coneOuterAngle: typeof o.coneOuterAngle !== 'undefined' ? o.coneOuterAngle : pa.coneOuterAngle,\n\t          coneOuterGain: typeof o.coneOuterGain !== 'undefined' ? o.coneOuterGain : pa.coneOuterGain,\n\t          distanceModel: typeof o.distanceModel !== 'undefined' ? o.distanceModel : pa.distanceModel,\n\t          maxDistance: typeof o.maxDistance !== 'undefined' ? o.maxDistance : pa.maxDistance,\n\t          refDistance: typeof o.refDistance !== 'undefined' ? o.refDistance : pa.refDistance,\n\t          rolloffFactor: typeof o.rolloffFactor !== 'undefined' ? o.rolloffFactor : pa.rolloffFactor,\n\t          panningModel: typeof o.panningModel !== 'undefined' ? o.panningModel : pa.panningModel\n\t        };\n\n\t        // Create a new panner node if one doesn't already exist.\n\t        var panner = sound._panner;\n\t        if (!panner) {\n\t          // Make sure we have a position to setup the node with.\n\t          if (!sound._pos) {\n\t            sound._pos = self._pos || [0, 0, -0.5];\n\t          }\n\n\t          // Create a new panner node.\n\t          setupPanner(sound, 'spatial');\n\t          panner = sound._panner;\n\t        }\n\n\t        // Update the panner values or create a new panner if none exists.\n\t        panner.coneInnerAngle = pa.coneInnerAngle;\n\t        panner.coneOuterAngle = pa.coneOuterAngle;\n\t        panner.coneOuterGain = pa.coneOuterGain;\n\t        panner.distanceModel = pa.distanceModel;\n\t        panner.maxDistance = pa.maxDistance;\n\t        panner.refDistance = pa.refDistance;\n\t        panner.rolloffFactor = pa.rolloffFactor;\n\t        panner.panningModel = pa.panningModel;\n\t      }\n\t    }\n\n\t    return self;\n\t  };\n\n\t  /** Single Sound Methods **/\n\t  /***************************************************************************/\n\n\t  /**\n\t   * Add new properties to the core Sound init.\n\t   * @param  {Function} _super Core Sound init method.\n\t   * @return {Sound}\n\t   */\n\t  Sound.prototype.init = (function(_super) {\n\t    return function() {\n\t      var self = this;\n\t      var parent = self._parent;\n\n\t      // Setup user-defined default properties.\n\t      self._orientation = parent._orientation;\n\t      self._stereo = parent._stereo;\n\t      self._pos = parent._pos;\n\t      self._pannerAttr = parent._pannerAttr;\n\n\t      // Complete initilization with howler.js core Sound's init function.\n\t      _super.call(this);\n\n\t      // If a stereo or position was specified, set it up.\n\t      if (self._stereo) {\n\t        parent.stereo(self._stereo);\n\t      } else if (self._pos) {\n\t        parent.pos(self._pos[0], self._pos[1], self._pos[2], self._id);\n\t      }\n\t    };\n\t  })(Sound.prototype.init);\n\n\t  /**\n\t   * Override the Sound.reset method to clean up properties from the spatial plugin.\n\t   * @param  {Function} _super Sound reset method.\n\t   * @return {Sound}\n\t   */\n\t  Sound.prototype.reset = (function(_super) {\n\t    return function() {\n\t      var self = this;\n\t      var parent = self._parent;\n\n\t      // Reset all spatial plugin properties on this sound.\n\t      self._orientation = parent._orientation;\n\t      self._stereo = parent._stereo;\n\t      self._pos = parent._pos;\n\t      self._pannerAttr = parent._pannerAttr;\n\n\t      // If a stereo or position was specified, set it up.\n\t      if (self._stereo) {\n\t        parent.stereo(self._stereo);\n\t      } else if (self._pos) {\n\t        parent.pos(self._pos[0], self._pos[1], self._pos[2], self._id);\n\t      } else if (self._panner) {\n\t        // Disconnect the panner.\n\t        self._panner.disconnect(0);\n\t        self._panner = undefined;\n\t        parent._refreshBuffer(self);\n\t      }\n\n\t      // Complete resetting of the sound.\n\t      return _super.call(this);\n\t    };\n\t  })(Sound.prototype.reset);\n\n\t  /** Helper Methods **/\n\t  /***************************************************************************/\n\n\t  /**\n\t   * Create a new panner node and save it on the sound.\n\t   * @param  {Sound} sound Specific sound to setup panning on.\n\t   * @param {String} type Type of panner to create: 'stereo' or 'spatial'.\n\t   */\n\t  var setupPanner = function(sound, type) {\n\t    type = type || 'spatial';\n\n\t    // Create the new panner node.\n\t    if (type === 'spatial') {\n\t      sound._panner = Howler.ctx.createPanner();\n\t      sound._panner.coneInnerAngle = sound._pannerAttr.coneInnerAngle;\n\t      sound._panner.coneOuterAngle = sound._pannerAttr.coneOuterAngle;\n\t      sound._panner.coneOuterGain = sound._pannerAttr.coneOuterGain;\n\t      sound._panner.distanceModel = sound._pannerAttr.distanceModel;\n\t      sound._panner.maxDistance = sound._pannerAttr.maxDistance;\n\t      sound._panner.refDistance = sound._pannerAttr.refDistance;\n\t      sound._panner.rolloffFactor = sound._pannerAttr.rolloffFactor;\n\t      sound._panner.panningModel = sound._pannerAttr.panningModel;\n\n\t      if (typeof sound._panner.positionX !== 'undefined') {\n\t        sound._panner.positionX.setValueAtTime(sound._pos[0], Howler.ctx.currentTime);\n\t        sound._panner.positionY.setValueAtTime(sound._pos[1], Howler.ctx.currentTime);\n\t        sound._panner.positionZ.setValueAtTime(sound._pos[2], Howler.ctx.currentTime);\n\t      } else {\n\t        sound._panner.setPosition(sound._pos[0], sound._pos[1], sound._pos[2]);\n\t      }\n\n\t      if (typeof sound._panner.orientationX !== 'undefined') {\n\t        sound._panner.orientationX.setValueAtTime(sound._orientation[0], Howler.ctx.currentTime);\n\t        sound._panner.orientationY.setValueAtTime(sound._orientation[1], Howler.ctx.currentTime);\n\t        sound._panner.orientationZ.setValueAtTime(sound._orientation[2], Howler.ctx.currentTime);\n\t      } else {\n\t        sound._panner.setOrientation(sound._orientation[0], sound._orientation[1], sound._orientation[2]);\n\t      }\n\t    } else {\n\t      sound._panner = Howler.ctx.createStereoPanner();\n\t      sound._panner.pan.setValueAtTime(sound._stereo, Howler.ctx.currentTime);\n\t    }\n\n\t    sound._panner.connect(sound._node);\n\n\t    // Update the connections.\n\t    if (!sound._paused) {\n\t      sound._parent.pause(sound._id, true).play(sound._id, true);\n\t    }\n\t  };\n\t})(); \n} (howler$1));\n\nvar howler = /*@__PURE__*/getDefaultExportFromCjs(howler$1);\n\n/**\n * a collection of string utility functions\n * @namespace utils.string\n */\n\n/**\n * converts the first character of the given string to uppercase\n * @public\n * @memberof utils.string\n * @name capitalize\n * @param {string} str - the string to be capitalized\n * @returns {string} the capitalized string\n */\nfunction capitalize(str) {\n    return str.charAt(0).toUpperCase() + str.slice(1);\n}\n\n/**\n * returns true if the given string contains a numeric integer or float value\n * @public\n * @memberof utils.string\n * @name isNumeric\n * @param {string} str - the string to be tested\n * @returns {boolean} true if string contains only digits\n */\nfunction isNumeric(str) {\n    if (typeof str === \"string\") {\n        str = str.trim();\n    }\n    return !isNaN(str) && /^[+-]?(\\d+(\\.\\d+)?|\\.\\d+)$/.test(str);\n}\n\n/**\n * returns true if the given string contains a true or false\n * @public\n * @memberof utils.string\n * @name isBoolean\n * @param {string} str - the string to be tested\n * @returns {boolean} true if the string is either true or false\n */\nfunction isBoolean(str) {\n    const trimmed = str.trim();\n    return (trimmed === \"true\") || (trimmed === \"false\");\n}\n\n/**\n * convert a string to the corresponding hexadecimal value\n * @public\n * @memberof utils.string\n * @name toHex\n * @param {string} str - the string to be converted\n * @returns {string} the converted hexadecimal value\n */\nfunction toHex(str) {\n    let res = \"\", c = 0;\n    while (c < str.length) {\n        res += str.charCodeAt(c++).toString(16);\n    }\n    return res;\n}\n\n/**\n * returns true if the given string is a data url in the `data:[<mediatype>][;base64],<data>` format.\n * (this will not test the validity of the Data or Base64 encoding)\n * @public\n * @memberof utils.string\n * @name isDataUrl\n * @param {string} str - the string (url) to be tested\n * @returns {boolean} true if the string is a data url\n */\nfunction isDataUrl(str) {\n    return /^data:(.+);base64,(.+)$/.test(str);\n}\n\nvar string$1 = {\n\t__proto__: null,\n\tcapitalize: capitalize,\n\tisBoolean: isBoolean,\n\tisDataUrl: isDataUrl,\n\tisNumeric: isNumeric,\n\ttoHex: toHex\n};\n\n// external import\n\n/**\n * additional import for TypeScript\n * @import { Asset } from \"./../loader/loader.js\";\n */\n\n/**\n * @namespace audio\n */\n\n/**\n * audio channel list\n * @ignore\n */\nlet audioTracks = {};\n\n/**\n * current active track\n * @ignore\n */\nlet current_track_id = null;\n\n/**\n * error retry counter\n * @ignore\n */\nlet retry_counter = 0;\n\n/**\n * list of active audio formats\n * @ignore\n */\nlet audioExts = [];\n\n/**\n * event listener callback on load error\n * @ignore\n */\nlet soundLoadError = function (sound_name, onerror_cb) {\n    // check the retry counter\n    if (retry_counter++ > 3) {\n        // something went wrong\n        let errmsg = \"melonJS: failed loading \" + sound_name;\n        if (stopOnAudioError === false) {\n            // disable audio\n            disable();\n            // call error callback if defined\n            if (onerror_cb) {\n                onerror_cb();\n            }\n            // warning\n            console.log(errmsg + \", disabling audio\");\n        }\n        else {\n            // throw an exception and stop everything !\n            throw new Error(errmsg);\n        }\n    // else try loading again !\n    }\n    else {\n        audioTracks[sound_name].load();\n    }\n};\n\n/**\n * Specify either to stop on audio loading error or not<br>\n * if true, melonJS will throw an exception and stop loading<br>\n * if false, melonJS will disable sounds and output a warning message\n * in the console<br>\n * @type {boolean}\n * @default true\n * @memberof audio\n */\nlet stopOnAudioError = true;\n\n/**\n * Initialize and configure the audio support.<br>\n * For a maximum browser coverage the recommendation is to use at least two of them,\n * typically default to webm and then fallback to mp3 for the best balance of small filesize and high quality,\n * webm has nearly full browser coverage with a great combination of compression and quality, and mp3 will fallback gracefully for other browsers.\n * It is important to remember that melonJS selects the first compatible sound based on the list of extensions and given order passed here.\n * So if you want webm to be used before mp3, you need to put the audio format in that order.\n * @memberof audio\n * @param {string} [format=\"mp3\"] - audio format to prioritize (\"mp3\"|\"mpeg\"|\"opus\"|\"ogg\"|\"oga\"|\"wav\"|\"aac\"|\"caf\"|\"m4a\"|\"m4b\"|\"mp4\"|\"weba\"|\"webm\"|\"dolby\"|\"flac\")\n * @returns {boolean} Indicates whether audio initialization was successful\n * @example\n * // initialize the \"sound engine\", giving \"webm\" as default desired audio format, and \"mp3\" as a fallback\n * if (!me.audio.init(\"webm,mp3\")) {\n *     alert(\"Sorry but your browser does not support html 5 audio !\");\n *     return;\n * }\n */\nfunction init$1(format = \"mp3\") {\n    // convert it into an array\n    audioExts = format.split(\",\");\n\n    return !howler$1.Howler.noAudio;\n}\n\n/**\n * check if the given audio format is supported\n * @memberof audio\n * @param {\"mp3\"|\"mpeg\"|\"opus\"|\"ogg\"|\"oga\"|\"wav\"|\"aac\"|\"caf\"|\"m4a\"|\"m4b\"|\"mp4\"|\"weba\"|\"webm\"|\"dolby\"|\"flac\"} codec - the audio format to check for support\n * @returns {boolean} return true if the given audio format is supported\n */\nfunction hasFormat(codec) {\n    return hasAudio() && howler$1.Howler.codecs(codec);\n}\n\n/**\n * check if audio (HTML5 or WebAudio) is supported\n * @memberof audio\n * @returns {boolean} return true if audio (HTML5 or WebAudio) is supported\n */\nfunction hasAudio() {\n    return !howler$1.Howler.noAudio;\n}\n\n/**\n * enable audio output <br>\n * only useful if audio supported and previously disabled through\n * @memberof audio\n * @see audio.disable\n */\nfunction enable() {\n    unmuteAll();\n}\n\n/**\n * disable audio output\n * @memberof audio\n */\nfunction disable() {\n    muteAll();\n}\n\n/**\n * Load an audio file\n * @memberof audio\n * @param {Asset} sound\n * @param {Function} [onloadcb] - function to be called when the resource is loaded\n * @param {Function} [onerrorcb] - function to be called in case of error\n * @param {Object} [settings] - custom settings to apply to the request (@link https://developer.mozilla.org/en-US/docs/Web/API/fetch#options)\n * @returns {number} the amount of asset loaded (always 1 if successfull)\n */\nfunction load$1(sound, onloadcb, onerrorcb, settings = {}) {\n    let urls = [];\n    if (audioExts.length === 0) {\n        throw new Error(\"target audio extension(s) should be set through me.audio.init() before calling the preloader.\");\n    }\n    if (isDataUrl(sound.src) === true) {\n        urls.push(sound.src);\n    } else {\n        for (let i = 0; i < audioExts.length; i++) {\n            urls.push(sound.src + sound.name + \".\" + audioExts[i] + settings.nocache);\n        }\n    }\n\n    audioTracks[sound.name] = new howler$1.Howl({\n        src : urls,\n        volume : howler$1.Howler.volume(),\n        autoplay : sound.autoplay === true,\n        loop : sound.loop = true,\n        html5 : sound.stream === true || sound.html5 === true,\n        xhrWithCredentials : settings.withCredentials,\n        onloaderror() {\n            soundLoadError.call(this, sound.name, onerrorcb);\n        },\n        onload() {\n            retry_counter = 0;\n            if (typeof onloadcb === \"function\") {\n                onloadcb();\n            }\n        }\n    });\n\n    return 1;\n}\n\n/**\n * play the specified sound\n * @memberof audio\n * @param {string} sound_name - audio clip name - case sensitive\n * @param {boolean} [loop=false] - loop audio\n * @param {Function} [onend] - Function to call when sound instance ends playing.\n * @param {number} [volume=default] - Float specifying volume (0.0 - 1.0 values accepted).\n * @returns {number} the sound instance ID.\n * @example\n * // play the \"cling\" audio clip\n * me.audio.play(\"cling\");\n * // play & repeat the \"engine\" audio clip\n * me.audio.play(\"engine\", true);\n * // play the \"gameover_sfx\" audio clip and call myFunc when finished\n * me.audio.play(\"gameover_sfx\", false, myFunc);\n * // play the \"gameover_sfx\" audio clip with a lower volume level\n * me.audio.play(\"gameover_sfx\", false, null, 0.5);\n */\nfunction play(sound_name, loop = false, onend, volume) {\n    let sound = audioTracks[sound_name];\n    if (sound && typeof sound !== \"undefined\") {\n        let id = sound.play();\n        if (typeof loop === \"boolean\") {\n            // arg[0] can take different types in howler 2.0\n            sound.loop(loop, id);\n        }\n        sound.volume(typeof(volume) === \"number\" ? clamp(volume, 0.0, 1.0) : howler$1.Howler.volume(), id);\n        if (typeof(onend) === \"function\") {\n            if (loop === true) {\n                sound.on(\"end\", onend, id);\n            }\n            else {\n                sound.once(\"end\", onend, id);\n            }\n        }\n        return id;\n    } else {\n        throw new Error(\"audio clip \" + sound_name + \" does not exist\");\n    }\n}\n\n/**\n * Fade a currently playing sound between two volumee.\n * @memberof audio\n * @param {string} sound_name - audio clip name - case sensitive\n * @param {number} from - Volume to fade from (0.0 to 1.0).\n * @param {number} to - Volume to fade to (0.0 to 1.0).\n * @param {number} duration - Time in milliseconds to fade.\n * @param {number} [id] - the sound instance ID. If none is passed, all sounds in group will fade.\n */\nfunction fade(sound_name, from, to, duration, id) {\n    let sound = audioTracks[sound_name];\n    if (sound && typeof sound !== \"undefined\") {\n        sound.fade(from, to, duration, id);\n    } else {\n        throw new Error(\"audio clip \" + sound_name + \" does not exist\");\n    }\n}\n\n/**\n * get/set the position of playback for a sound.\n * @memberof audio\n * @param {string} sound_name - audio clip name - case sensitive\n * @param {number} [seek] - the position to move current playback to (in seconds).\n * @param {number} [id] - the sound instance ID. If none is passed, all sounds in group will changed.\n * @returns {number} return the current seek position (if no extra parameters were given)\n * @example\n * // return the current position of the background music\n * let current_pos = me.audio.seek(\"dst-gameforest\");\n * // set back the position of the background music to the beginning\n * me.audio.seek(\"dst-gameforest\", 0);\n */\nfunction seek(sound_name, ...args) {\n    let sound = audioTracks[sound_name];\n    if (sound && typeof sound !== \"undefined\") {\n        return sound.seek(...args);\n    } else {\n        throw new Error(\"audio clip \" + sound_name + \" does not exist\");\n    }\n}\n\n/**\n * get or set the rate of playback for a sound.\n * @memberof audio\n * @param {string} sound_name - audio clip name - case sensitive\n * @param {number} [rate] - playback rate : 0.5 to 4.0, with 1.0 being normal speed.\n * @param {number} [id] - the sound instance ID. If none is passed, all sounds in group will be changed.\n * @returns {number} return the current playback rate (if no extra parameters were given)\n * @example\n * // get the playback rate of the background music\n * let rate = me.audio.rate(\"dst-gameforest\");\n * // speed up the playback of the background music\n * me.audio.rate(\"dst-gameforest\", 2.0);\n */\nfunction rate(sound_name, ...args) {\n    let sound = audioTracks[sound_name];\n    if (sound && typeof sound !== \"undefined\") {\n        return sound.rate(...args);\n    } else {\n        throw new Error(\"audio clip \" + sound_name + \" does not exist\");\n    }\n}\n\n/**\n * get or set the stereo panning for the specified sound.\n * @memberof audio\n * @param {string} sound_name - audio clip name - case sensitive\n * @param {number} [pan] - the panning value - A value of -1.0 is all the way left and 1.0 is all the way right.\n * @param {number} [id] - the sound instance ID. If none is passed, all sounds in group will be changed.\n * @return {number} the current panning value\n * @example\n * me.audio.stereo(\"cling\", -1);\n */\nfunction stereo(sound_name, pan, id) {\n    let sound = audioTracks[sound_name];\n    if (sound && typeof sound !== \"undefined\") {\n        return sound.stereo(pan, id);\n    } else {\n        throw new Error(\"audio clip \" + sound_name + \" does not exist\");\n    }\n}\n\n/**\n * get or set the 3D spatial position for the specified sound.\n * @memberof audio\n * @param {string} sound_name - audio clip name - case sensitive\n * @param  {Number} x - the x-position of the audio source.\n * @param  {Number} y - the y-position of the audio source.\n * @param  {Number} z - the z-position of the audio source.\n * @param {number} [id] - the sound instance ID. If none is passed, all sounds in group will be changed.\n * @return {Array} the current 3D spatial position: [x, y, z]\n */\nfunction position(sound_name, x, y, z, id) {\n    let sound = audioTracks[sound_name];\n    if (sound && typeof sound !== \"undefined\") {\n        return sound.pos(x, y, z, id);\n    } else {\n        throw new Error(\"audio clip \" + sound_name + \" does not exist\");\n    }\n}\n\n/**\n * Get/set the direction the audio source is pointing in the 3D cartesian coordinate space.\n * Depending on how direction the sound is, based on the `cone` attributes, a sound pointing away from the listener can be quiet or silent.\n * @memberof audio\n * @param {string} sound_name - audio clip name - case sensitive\n * @param  {Number} x - the x-orientation of the audio source.\n * @param  {Number} y - the y-orientation of the audio source.\n * @param  {Number} z - the z-orientation of the audio source.\n * @param {number} [id] - the sound instance ID. If none is passed, all sounds in group will be changed.\n * @return {Array} the current 3D spatial orientation: [x, y, z]\n */\nfunction orientation(sound_name, x, y, z, id) {\n    let sound = audioTracks[sound_name];\n    if (sound && typeof sound !== \"undefined\") {\n        return sound.orientation(x, y, z, id);\n    } else {\n        throw new Error(\"audio clip \" + sound_name + \" does not exist\");\n    }\n}\n\n/**\n * get or set the panner node's attributes for a sound or group of sounds.\n * See {@link https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API/Web_audio_spatialization_basics#creating_a_panner_node}\n * @memberof audio\n * @param {string} sound_name - audio clip name - case sensitive\n * @param {object} [attribute] - the panner attributes to set\n * @param {string} [settings.coneInnerAngle=360] - A parameter for directional audio sources, this is an angle, in degrees, inside of which there will be no volume reduction.\n * @param {string} [settings.coneOuterAngle=360] - A parameter for directional audio sources, this is an angle, in degrees, outside of which the volume will be reduced to a constant value of `coneOuterGain`.\n * @param {string} [settings.coneOuterGain=0] - A parameter for directional audio sources, this is the gain outside of the `coneOuterAngle`. It is a linear value in the range `[0, 1]`.\n * @param {string} [settings.distanceModel=\"inverse\"] - Determines algorithm used to reduce volume as audio moves away from listener. Can be `linear`, `inverse` or `exponential.\n * @param {string} [settings.maxDistance=10000] - The maximum distance between source and listener, after which the volume will not be reduced any further.\n * @param {string} [settings.refDistance=1] - A reference distance for reducing volume as source moves further from the listener. This is simply a variable of the distance model and has a different effect depending on which model is used and the scale of your coordinates. Generally, volume will be equal to 1 at this distance.\n * @param {string} [settings.rolloffFactor=1] - How quickly the volume reduces as source moves from listener. This is simply a variable of the distance model and can be in the range of `[0, 1]` with `linear` and `[0, â]` with `inverse` and `exponential`.\n * @param {string} [settings.panningModel=\"HRTF\"] - Determines which spatialization algorithm is used to position audio. Can be `HRTF` or `equalpower`.\n * @param {number} [id] - the sound instance ID. If none is passed, all sounds in group will be changed.\n * @return {Object} current panner attributes.\n * @example\n * me.audio.panner(\"cling\", {\n *    panningModel: 'HRTF',\n *    refDistance: 0.8,\n *    rolloffFactor: 2.5,\n *    distanceModel: 'exponential'\n * });\n */\nfunction panner(sound_name, attributes, id) {\n    let sound = audioTracks[sound_name];\n    if (sound && typeof sound !== \"undefined\") {\n        return sound.pannerAttr(attributes, id);\n    } else {\n        throw new Error(\"audio clip \" + sound_name + \" does not exist\");\n    }\n}\n\n/**\n * stop the specified sound on all channels\n * @memberof audio\n * @param {string} [sound_name] - audio clip name (case sensitive). If none is passed, all sounds are stopped.\n * @param {number} [id] - the sound instance ID. If none is passed, all sounds in group will stop.\n * @example\n * me.audio.stop(\"cling\");\n */\nfunction stop(sound_name, id) {\n    if (typeof sound_name !== \"undefined\") {\n        let sound = audioTracks[sound_name];\n        if (sound && typeof sound !== \"undefined\") {\n            sound.stop(id);\n            // remove the defined onend callback (if any defined)\n            sound.off(\"end\", undefined, id);\n        } else {\n            throw new Error(\"audio clip \" + sound_name + \" does not exist\");\n        }\n    } else {\n        howler$1.Howler.stop();\n    }\n}\n\n/**\n * pause the specified sound on all channels<br>\n * this function does not reset the currentTime property\n * @memberof audio\n * @param {string} sound_name - audio clip name - case sensitive\n * @param {number} [id] - the sound instance ID. If none is passed, all sounds in group will pause.\n * @example\n * me.audio.pause(\"cling\");\n */\nfunction pause(sound_name, id) {\n    let sound = audioTracks[sound_name];\n    if (sound && typeof sound !== \"undefined\") {\n        sound.pause(id);\n    } else {\n        throw new Error(\"audio clip \" + sound_name + \" does not exist\");\n    }\n}\n\n/**\n * resume the specified sound on all channels<br>\n * @memberof audio\n * @param {string} sound_name - audio clip name - case sensitive\n * @param {number} [id] - the sound instance ID. If none is passed, all sounds in group will resume.\n * @example\n * // play a audio clip\n * let id = me.audio.play(\"myClip\");\n * ...\n * // pause it\n * me.audio.pause(\"myClip\", id);\n * ...\n * // resume\n * me.audio.resume(\"myClip\", id);\n */\nfunction resume(sound_name, id) {\n    let sound = audioTracks[sound_name];\n    if (sound && typeof sound !== \"undefined\") {\n        sound.play(id);\n    } else {\n        throw new Error(\"audio clip \" + sound_name + \" does not exist\");\n    }\n}\n\n/**\n * play the specified audio track<br>\n * this function automatically set the loop property to true<br>\n * and keep track of the current sound being played.\n * @memberof audio\n * @param {string} sound_name - audio track name - case sensitive\n * @param {number} [volume=default] - Float specifying volume (0.0 - 1.0 values accepted).\n * @returns {number} the sound instance ID.\n * @example\n * me.audio.playTrack(\"awesome_music\");\n */\nfunction playTrack(sound_name, volume) {\n    current_track_id = sound_name;\n    return play(\n        current_track_id,\n        true,\n        null,\n        volume\n    );\n}\n\n/**\n * stop the current audio track\n * @memberof audio\n * @see audio.playTrack\n * @example\n * // play a awesome music\n * me.audio.playTrack(\"awesome_music\");\n * // stop the current music\n * me.audio.stopTrack();\n */\nfunction stopTrack() {\n    if (current_track_id !== null) {\n        audioTracks[current_track_id].stop();\n        current_track_id = null;\n    }\n}\n\n/**\n * pause the current audio track\n * @memberof audio\n * @example\n * me.audio.pauseTrack();\n */\nfunction pauseTrack() {\n    if (current_track_id !== null) {\n        audioTracks[current_track_id].pause();\n    }\n}\n\n/**\n * resume the previously paused audio track\n * @memberof audio\n * @example\n * // play an awesome music\n * me.audio.playTrack(\"awesome_music\");\n * // pause the audio track\n * me.audio.pauseTrack();\n * // resume the music\n * me.audio.resumeTrack();\n */\nfunction resumeTrack() {\n    if (current_track_id !== null) {\n        audioTracks[current_track_id].play();\n    }\n}\n\n/**\n * returns the current track Id\n * @memberof audio\n * @returns {string} audio track name\n */\nfunction getCurrentTrack() {\n    return current_track_id;\n}\n\n/**\n * set the default global volume\n * @memberof audio\n * @param {number} volume - Float specifying volume (0.0 - 1.0 values accepted).\n */\nfunction setVolume(volume) {\n    howler$1.Howler.volume(volume);\n}\n\n/**\n * get the default global volume\n * @memberof audio\n * @returns {number} current volume value in Float [0.0 - 1.0] .\n */\nfunction getVolume() {\n    return howler$1.Howler.volume();\n}\n\n/**\n * mute or unmute the specified sound, but does not pause the playback.\n * @memberof audio\n * @param {string} sound_name - audio clip name - case sensitive\n * @param {number} [id] - the sound instance ID. If none is passed, all sounds in group will mute.\n * @param {boolean} [mute=true] - True to mute and false to unmute\n * @example\n * // mute the background music\n * me.audio.mute(\"awesome_music\");\n */\nfunction mute(sound_name, id, mute = true) {\n    let sound = audioTracks[sound_name];\n    if (sound && typeof(sound) !== \"undefined\") {\n        sound.mute(mute, id);\n    } else {\n        throw new Error(\"audio clip \" + sound_name + \" does not exist\");\n    }\n}\n\n/**\n * unmute the specified sound\n * @memberof audio\n * @param {string} sound_name - audio clip name\n * @param {number} [id] - the sound instance ID. If none is passed, all sounds in group will unmute.\n */\nfunction unmute(sound_name, id) {\n    mute(sound_name, id, false);\n}\n\n/**\n * mute all audio\n * @memberof audio\n */\nfunction muteAll() {\n    howler$1.Howler.mute(true);\n}\n\n/**\n * unmute all audio\n * @memberof audio\n */\nfunction unmuteAll() {\n    howler$1.Howler.mute(false);\n}\n\n/**\n * Returns true if audio is muted globally.\n * @memberof audio\n * @returns {boolean} true if audio is muted globally\n */\nfunction muted() {\n    return howler$1.Howler._muted;\n}\n\n/**\n * unload specified audio track to free memory\n * @memberof audio\n * @param {string} sound_name - audio track name - case sensitive\n * @returns {boolean} true if unloaded\n * @example\n * me.audio.unload(\"awesome_music\");\n */\nfunction unload$1(sound_name) {\n    if (!(sound_name in audioTracks)) {\n        return false;\n    }\n\n    // destroy the Howl object\n    audioTracks[sound_name].unload();\n    delete audioTracks[sound_name];\n    return true;\n}\n\n/**\n * unload all audio to free memory\n * @memberof audio\n * @example\n * me.audio.unloadAll();\n */\nfunction unloadAll$1() {\n    for (let sound_name in audioTracks) {\n        if (audioTracks.hasOwnProperty(sound_name)) {\n            unload$1(sound_name);\n        }\n    }\n}\n\nvar audio = {\n\t__proto__: null,\n\tdisable: disable,\n\tenable: enable,\n\tfade: fade,\n\tgetCurrentTrack: getCurrentTrack,\n\tgetVolume: getVolume,\n\thasAudio: hasAudio,\n\thasFormat: hasFormat,\n\tinit: init$1,\n\tload: load$1,\n\tmute: mute,\n\tmuteAll: muteAll,\n\tmuted: muted,\n\torientation: orientation,\n\tpanner: panner,\n\tpause: pause,\n\tpauseTrack: pauseTrack,\n\tplay: play,\n\tplayTrack: playTrack,\n\tposition: position,\n\trate: rate,\n\tresume: resume,\n\tresumeTrack: resumeTrack,\n\tseek: seek,\n\tsetVolume: setVolume,\n\tstereo: stereo,\n\tstop: stop,\n\tstopOnAudioError: stopOnAudioError,\n\tstopTrack: stopTrack,\n\tunload: unload$1,\n\tunloadAll: unloadAll$1,\n\tunmute: unmute,\n\tunmuteAll: unmuteAll\n};\n\n/**\n * allow to access and manage the device localStorage\n * @example\n * // Initialize \"score\" and \"lives\" with default values\n * // This loads the properties from localStorage if they exist, else it sets the given defaults\n * me.save.add({ score : 0, lives : 3 });\n *\n * // Print all\n * // On first load, this prints { score : 0, lives : 3 }\n * // On further reloads, it prints { score : 31337, lives : 3, complexObject : ... }\n * // Because the following changes will be saved to localStorage\n * console.log(JSON.stringify(me.save));\n *\n * // Save score\n * me.save.score = 31337;\n *\n * // Also supports complex objects thanks to the JSON backend\n * me.save.add({ complexObject : {} })\n * me.save.complexObject = { a : \"b\", c : [ 1, 2, 3, \"d\" ], e : { f : [{}] } };\n *\n * // WARNING: Do not set any child properties of complex objects directly!\n * // Changes made that way will not save. Always set the entire object value at once.\n * // If you cannot live with this limitation, there's a workaround:\n * me.save.complexObject.c.push(\"foo\"); // Modify a child property\n * me.save.complexObject = me.save.complexObject; // Save the entire object!\n *\n * // Remove \"lives\" from localStorage\n * me.save.remove(\"lives\");\n * @namespace save\n */\n\n// Variable to hold the object data\nlet data = {};\n\nlet hasLocalStorage$1 = false;\n\ntry {\n    // true if localStorage is supported\n    hasLocalStorage$1 = typeof globalThis !== \"undefined\" && typeof globalThis.localStorage !== \"undefined\";\n} catch {\n    // the above generates an exception when cookies are blocked\n    hasLocalStorage$1 = false;\n}\n\n/**\n * a function to check if the given key is a reserved word\n * @ignore\n */\nfunction isReserved(key) {\n    return (key === \"add\" || key === \"remove\");\n}\n\n\n// Initialize me.save on Boot event\nonce(BOOT, () => {\n    // Load previous data if local Storage is supported\n    if (hasLocalStorage$1 === true) {\n        let me_save_content = globalThis.localStorage.getItem(\"me.save\");\n\n        if (typeof me_save_content === \"string\" && me_save_content.length > 0) {\n            let keys = JSON.parse(me_save_content) || [];\n            keys.forEach((key) => {\n                data[key] = JSON.parse(globalThis.localStorage.getItem(\"me.save.\" + key));\n            });\n        }\n    }\n});\n\nlet save = {\n\n    /**\n     * Add new keys to localStorage and set them to the given default values if they do not exist\n     * @name add\n     * @memberof save\n     * @param {object} props - key and corresponding values\n     * @example\n     * // Initialize \"score\" and \"lives\" with default values\n     * me.save.add({ score : 0, lives : 3 });\n     * // get or set the value through me.save\n     * me.save.score = 1000;\n     */\n    add(props) {\n        let obj = save;\n\n        Object.keys(props).forEach((key) => {\n            if (isReserved(key)) {\n                return;\n            }\n\n            (function (prop) {\n                Object.defineProperty(obj, prop, {\n                    configurable : true,\n                    enumerable : true,\n                    /**\n                     * @ignore\n                     */\n                    get () {\n                        return data[prop];\n                    },\n                    /**\n                     * @ignore\n                     */\n                    set (value) {\n                        data[prop] = value;\n                        if (hasLocalStorage$1 === true) {\n                            globalThis.localStorage.setItem(\"me.save.\" + prop, JSON.stringify(value));\n                        }\n                    }\n                });\n            })(key);\n\n            // Set default value for key\n            if (!(key in data)) {\n                obj[key] = props[key];\n            }\n        });\n\n        // Save keys\n        if (hasLocalStorage$1 === true) {\n            globalThis.localStorage.setItem(\"me.save\", JSON.stringify(Object.keys(data)));\n        }\n    },\n\n    /**\n     * Remove a key from localStorage\n     * @name remove\n     * @memberof save\n     * @param {string} key - key to be removed\n     * @example\n     * // Remove the \"score\" key from localStorage\n     * me.save.remove(\"score\");\n     */\n    remove (key) {\n        if (!isReserved(key)) {\n            if (typeof data[key] !== \"undefined\") {\n                delete data[key];\n                if (hasLocalStorage$1 === true) {\n                    globalThis.localStorage.removeItem(\"me.save.\" + key);\n                    globalThis.localStorage.setItem(\"me.save\", JSON.stringify(Object.keys(data)));\n                }\n            }\n        }\n    }\n};\n\n/**\n * a collection of utility functons to ease porting between different user agents.\n * @namespace utils.agent\n */\n\n/**\n * Known agent vendors\n * @ignore\n */\nconst vendors = [ \"ms\", \"MS\", \"moz\", \"webkit\", \"o\" ];\n\n/**\n * Get a vendor-prefixed property\n * @public\n * @name prefixed\n * @param {string} name - Property name\n * @param {object} [obj=globalThis] - Object or element reference to access\n * @returns {string} Value of property\n * @memberof utils.agent\n */\nfunction prefixed(name, obj) {\n    obj = obj || globalThis;\n    if (name in obj) {\n        return obj[name];\n    }\n\n    let uc_name = capitalize(name);\n\n    let result;\n    vendors.some((vendor) => {\n        let name = vendor + uc_name;\n        return (result = (name in obj) ? obj[name] : undefined);\n    });\n    return result;\n}\n\n/**\n * Set a vendor-prefixed property\n * @public\n * @name setPrefixed\n * @param {string} name - Property name\n * @param {string} value - Property value\n * @param {object} [obj=globalThis] - Object or element reference to access\n * @returns {boolean} true if one of the vendor-prefixed property was found\n * @memberof utils.agent\n */\nfunction setPrefixed(name, value, obj) {\n    obj = obj || globalThis;\n    if (name in obj) {\n        obj[name] = value;\n        return;\n    }\n\n    let uc_name = capitalize(name);\n\n    vendors.some((vendor) => {\n        let name = vendor + uc_name;\n        if (name in obj) {\n            obj[name] = value;\n            return true;\n        }\n        return false;\n    });\n\n    return false;\n}\n\nvar agent$1 = {\n\t__proto__: null,\n\tprefixed: prefixed,\n\tsetPrefixed: setPrefixed\n};\n\n/**\n* The device platform type\n* @namespace platform\n* @memberof device\n* @property {string} ua the user agent string for the current device\n* @property {boolean} iOS `true` if the device is an iOS platform\n* @property {boolean} android `true` if the device is an Android platform\n* @property {boolean} android2 `true` if the device is an Android 2.x platform\n* @property {boolean} linux `true` if the device is a Linux platform\n* @property {boolean} chromeOS `true` if the device is running on ChromeOS.\n* @property {boolean} wp `true` if the device is a Windows Phone platform\n* @property {boolean} BlackBerry`true` if the device is a BlackBerry platform\n* @property {boolean} Kindle`true` if the device is a Kindle platform\n* @property {boolean} ejecta `true` if running under Ejecta\n* @property {boolean} isWeixin `true` if running under Wechat\n* @property {boolean} nodeJS `true` if running under node.js\n* @property {boolean} isMobile `true` if a mobile device\n* @property {boolean} webApp `true` if running as a standalone web app\n*/\n\nconst ua = typeof globalThis.navigator !== \"undefined\" ? globalThis.navigator.userAgent : \"\";\nconst iOS = /iPhone|iPad|iPod/i.test(ua);\nconst android = /Android/i.test(ua);\nconst android2 = /Android 2/i.test(ua);\nconst linux = /Linux/i.test(ua);\nconst chromeOS = /CrOS/.test(ua);\nconst wp = /Windows Phone/i.test(ua);\nconst BlackBerry = /BlackBerry/i.test(ua);\nconst Kindle = /Kindle|Silk.*Mobile Safari/i.test(ua);\nconst ejecta = (typeof globalThis.ejecta !== \"undefined\");\nconst isWeixin = /MicroMessenger/i.test(ua);\nconst nodeJS = (typeof globalThis.process !== \"undefined\") && (typeof globalThis.process.release !== \"undefined\") && (globalThis.process.release.name === \"node\");\nconst isMobile$1 = /Mobi/i.test(ua) || iOS || android || wp || BlackBerry || Kindle || false;\nconst webApp = (typeof globalThis.navigator !== \"undefined\" && globalThis.navigator.standalone === true) || (typeof globalThis.matchMedia !== \"undefined\" && globalThis.matchMedia(\"(display-mode: standalone)\").matches);\n\nvar device_platform = {\n\t__proto__: null,\n\tBlackBerry: BlackBerry,\n\tKindle: Kindle,\n\tandroid: android,\n\tandroid2: android2,\n\tchromeOS: chromeOS,\n\tejecta: ejecta,\n\tiOS: iOS,\n\tisMobile: isMobile$1,\n\tisWeixin: isWeixin,\n\tlinux: linux,\n\tnodeJS: nodeJS,\n\tua: ua,\n\twebApp: webApp,\n\twp: wp\n};\n\n// track if DOMContentLoaded was called already\nlet readyBound = false;\n\n// is the DOM ready ?\nlet isDOMReady = false;\n\n// check if the dom is ready\nfunction _domReady() {\n\n    // Make sure that the DOM is not already loaded\n    if (!isDOMReady) {\n        // be sure document.body is there\n        if (typeof globalThis.document !== \"undefined\" && !globalThis.document.body) {\n            return setTimeout(_domReady, 13);\n        }\n\n        // clean up loading event\n        if (typeof globalThis.document !== \"undefined\" && typeof globalThis.document.removeEventListener === \"function\") {\n            globalThis.document.removeEventListener(\n                \"DOMContentLoaded\",\n                _domReady,\n                false\n            );\n        }\n\n        if (typeof globalThis.removeEventListener === \"function\") {\n            // remove the event on globalThis.onload (always added in `onReady`)\n            globalThis.removeEventListener(\"load\", _domReady, false);\n        }\n\n        // execute all callbacks\n        emit(DOM_READY);\n\n        // Remember that the DOM is ready\n        isDOMReady = true;\n    }\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/API/Window/DOMContentLoaded_event\nfunction DOMContentLoaded(fn) {\n    // If the DOM is already ready\n    if (isDOMReady) {\n        // Execute the function immediately\n        fn.call(globalThis, []);\n    }\n    else {\n        // else add the function to the DOM_READY event\n        once(DOM_READY, fn, globalThis);\n        // bind dom load event if not done yet\n        if (!readyBound) {\n            // directly call domReady if document is already \"ready\"\n            if (nodeJS === true || (typeof globalThis.document !== \"undefined\" && globalThis.document.readyState === \"complete\")) {\n                // defer the fn call to ensure our script is fully loaded\n                globalThis.setTimeout(_domReady, 0);\n            }\n            else {\n                if (typeof globalThis.document !== \"undefined\" && typeof globalThis.document.addEventListener === \"function\") {\n                    // Use the handy event callback\n                    globalThis.document.addEventListener(\"DOMContentLoaded\", _domReady, false);\n                }\n                // A fallback to globalThis.onload, that will always work\n                globalThis.addEventListener(\"load\", _domReady, false);\n            }\n            readyBound = true;\n        }\n    }\n}\n\n/**\n * device type and capabilities\n * @namespace device\n */\n\nlet accelInitialized = false;\nlet deviceOrientationInitialized = false;\n// swipe utility fn & flag\nlet swipeEnabled = true;\n// a cache DOMRect object\nlet domRect = {left: 0, top: 0, x: 0, y: 0, width: 0, height: 0, right: 0, bottom: 0};\n\n// a list of supported videoCodecs;\nlet videoCodecs;\n\n// internal flag to avoid rechecking for support\nlet WebGLSupport = -1;\n\nfunction disableSwipeFn(e) {\n    e.preventDefault();\n    if (typeof globalThis.scroll === \"function\") {\n        globalThis.scroll(0, 0);\n    }\n    return false;\n}\n\nfunction hasLocalStorage() {\n    try {\n        return !!globalThis.localStorage;\n    } catch {\n        // the above generates an exception when cookies are blocked\n        return false;\n    }\n}\n\nfunction hasOffscreenCanvas() {\n    try {\n        // some browser (e.g. Safari) implements WebGL1 and WebGL2 contexts only\n        // https://bugzilla.mozilla.org/show_bug.cgi?id=801176\n        return (typeof globalThis.OffscreenCanvas !== \"undefined\") && ((new globalThis.OffscreenCanvas(0, 0).getContext(\"2d\")) !== null);\n    } catch {\n        return false;\n    }\n}\n\n/**\n * used by [un]watchAccelerometer()\n * @ignore\n */\nfunction onDeviceMotion(e) {\n    // Accelerometer information\n    accelerationX = e.accelerationIncludingGravity.x;\n    accelerationY = e.accelerationIncludingGravity.y;\n    accelerationZ = e.accelerationIncludingGravity.z;\n}\n\n/**\n * used by [un]watchDeviceOrientation()\n * @ignore\n */\nfunction onDeviceRotate(e) {\n    gamma = e.gamma;\n    beta = e.beta;\n    alpha = e.alpha;\n}\n\n/**\n * the device platform type\n * @memberof device\n * @readonly\n * @type {device.platform}\n */\nlet platform = device_platform;\n\n/**\n * True if the browser supports Touch Events\n * @memberof device\n * @type {boolean}\n * @readonly\n */\nconst touchEvent = !!(\"ontouchstart\" in globalThis);\n\n/**\n * True if the browser supports Pointer Events\n * @memberof device\n * @type {boolean}\n * @readonly\n */\nconst pointerEvent = !!globalThis.PointerEvent;\n\n/**\n * Touch capabilities (support either Touch or Pointer events)\n * @memberof device\n * @type {boolean}\n * @readonly\n */\nconst touch = touchEvent || (pointerEvent && globalThis.navigator.maxTouchPoints > 0);\n\n/**\n * the maximum number of simultaneous touch contact points are supported by the current device.\n * @memberof device\n * @type {number}\n * @readonly\n * @example\n * if (me.device.maxTouchPoints > 1) {\n *     // device supports multi-touch\n * }\n */\nconst maxTouchPoints = touch ? (pointerEvent ? globalThis.navigator.maxTouchPoints || 1 : 10) : 1;\n\n/**\n * W3C standard wheel events\n * @memberof device\n * @type {boolean}\n * @readonly\n */\nconst wheel = typeof globalThis.document !== \"undefined\" && \"onwheel\" in globalThis.document.createElement(\"div\");\n\n\n/**\n * Browser pointerlock api support\n * @memberof device\n * @type {boolean}\n * @readonly\n */\nconst hasPointerLockSupport = typeof globalThis.document !== \"undefined\" && typeof globalThis.document.pointerLockElement !== \"undefined\";\n\n/**\n * Browser device orientation\n * @memberof device\n * @readonly\n * @type {boolean}\n */\nconst hasDeviceOrientation = !!globalThis.DeviceOrientationEvent;\n\n/**\n * Supports the ScreenOrientation API\n * @memberof device\n * @see https://developer.mozilla.org/en-US/docs/Web/API/ScreenOrientation/onchange\n * @type {boolean}\n * @readonly\n */\nconst screenOrientation = (typeof screen !== \"undefined\") && (typeof screen.orientation !== \"undefined\");\n\n/**\n * Browser accelerometer capabilities\n * @memberof device\n * @readonly\n * @type {boolean}\n */\nconst hasAccelerometer = !!globalThis.DeviceMotionEvent;\n\n/**\n * Browser full screen support\n * @memberof device\n * @type {boolean}\n * @readonly\n */\nconst hasFullscreenSupport = typeof globalThis.document !== \"undefined\" && (prefixed(\"fullscreenEnabled\", globalThis.document) || globalThis.document.mozFullScreenEnabled);\n\nif (hasFullscreenSupport === true) {\n    globalThis.document.exitFullscreen = prefixed(\"cancelFullScreen\", globalThis.document) || prefixed(\"exitFullscreen\", globalThis.document);\n}\n\n/**\n * Device WebAudio Support\n * @memberof device\n * @type {boolean}\n * @readonly\n */\nconst hasWebAudio = !!(globalThis.AudioContext || globalThis.webkitAudioContext);\n\n/**\n * Device HTML5Audio Support\n * @memberof device\n * @type {boolean}\n * @readonly\n */\nconst hasHTML5Audio = (typeof globalThis.Audio !== \"undefined\");\n\n/**\n * Returns true if the browser/device has audio capabilities.\n * @memberof device\n * @type {boolean}\n * @readonly\n */\nconst sound = hasWebAudio || hasHTML5Audio;\n\n\n/**\n * Device Video Support\n * @memberof device\n * @type {boolean}\n * @readonly\n */\nconst hasVideo = typeof globalThis.document !== \"undefined\" &&  !!globalThis.document.createElement(\"video\").canPlayType;\n\n\n/**\n * Browser Local Storage capabilities <br>\n * (this flag will be set to false if cookies are blocked)\n * @memberof device\n * @readonly\n * @type {boolean}\n */\nconst localStorage = hasLocalStorage();\n\n/**\n * equals to true if the device browser supports OffScreenCanvas.\n * @memberof device\n * @type {boolean}\n * @readonly\n */\nconst offscreenCanvas = hasOffscreenCanvas();\n\n/**\n * Browser Base64 decoding capability\n * @memberof device\n * @type {boolean}\n * @readonly\n */\nconst nativeBase64 = (typeof(globalThis.atob) === \"function\");\n\n/**\n * a string representing the preferred language of the user, usually the language of the browser UI.\n * (will default to \"en\" if the information is not available)\n * @memberof device\n * @type {string}\n * @readonly\n * @see http://www.w3schools.com/tags/ref_language_codes.asp\n */\nconst language = typeof globalThis.navigator !== \"undefined\" ? globalThis.navigator.language || globalThis.navigator.browserLanguage || globalThis.navigator.userLanguage || \"en\" : \"en\";\n\n/**\n * Ratio of the resolution in physical pixels to the resolution in CSS pixels for the current display device.\n * @memberof device\n * @type {number}\n * @readonly\n */\nconst devicePixelRatio = globalThis.devicePixelRatio || 1;\n\n/**\n * equals to true if a mobile device.\n * (Android | iPhone | iPad | iPod | BlackBerry | Windows Phone | Kindle)\n * @memberof device\n * @type {boolean}\n * @readonly\n */\nconst isMobile = platform.isMobile;\n\n/**\n * contains the g-force acceleration along the x-axis.\n * @memberof device\n * @type {number}\n * @readonly\n * @see device.watchAccelerometer\n */\nlet accelerationX = 0;\n\n/**\n * contains the g-force acceleration along the y-axis.\n * @memberof device\n * @type {number}\n * @readonly\n * @see device.watchAccelerometer\n */\nlet accelerationY = 0;\n\n/**\n * contains the g-force acceleration along the z-axis.\n * @memberof device\n * @type {number}\n * @readonly\n * @see device.watchAccelerometer\n */\nlet accelerationZ = 0;\n\n/**\n * Device orientation Gamma property. Gives angle on tilting a portrait held phone left or right\n * @memberof device\n * @type {number}\n * @readonly\n * @see device.watchDeviceOrientation\n */\nlet gamma = 0;\n\n/**\n * Device orientation Beta property. Gives angle on tilting a portrait held phone forward or backward\n * @memberof device\n * @type {number}\n * @readonly\n * @see device.watchDeviceOrientation\n */\nlet beta = 0;\n\n/**\n * Device orientation Alpha property. Gives angle based on the rotation of the phone around its z axis.\n * The z-axis is perpendicular to the phone, facing out from the center of the screen.\n * @memberof device\n * @type {number}\n * @readonly\n * @see device.watchDeviceOrientation\n */\nlet alpha = 0;\n\n/**\n * Specify whether to pause the game when losing focus\n * @memberof device\n * @deprecated since 15.4.0\n * @see Application.pauseOnBlur\n * @type {boolean}\n * @default true\n */\nlet pauseOnBlur = true;\n\n/**\n * Specify whether to unpause the game when gaining focus\n * @memberof device\n * @deprecated since 15.4.0\n * @see Application.resumeOnFocus\n * @type {boolean}\n * @default true\n */\nlet resumeOnFocus = true;\n\n/**\n * Specify whether to stop the game when losing focus or not.\n * The engine restarts on focus if this is enabled.\n * @memberof device\n * @deprecated since 15.4.0\n * @see Application.stopOnBlur\n * @type {boolean}\n * @default false\n */\nlet stopOnBlur = false;\n\n/**\n * Specify whether to automatically bring the window to the front\n * @memberof device\n * @type {boolean}\n * @default true\n */\nlet autoFocus = true;\n\n/**\n* specify a function to execute when the Device is fully loaded and ready\n* @memberof device\n* @param {Function} fn - the function to be executed\n* @example\n* // small game skeleton\n* let game = {\n*    // called by the me.device.onReady function\n*    onload = function () {\n*       // init video\n*       if (!me.video.init('screen', 640, 480, true)) {\n*          alert(\"Sorry but your browser does not support html 5 canvas.\");\n*          return;\n*       }\n*\n*       // initialize the \"audio\"\n*       me.audio.init(\"mp3,ogg\");\n*\n*       // set callback for ressources loaded event\n*       me.loader.onload = this.loaded.bind(this);\n*\n*       // set all ressources to be loaded\n*       me.loader.preload(game.assets);\n*\n*       // load everything & display a loading screen\n*       me.state.change(me.state.LOADING);\n*    };\n*\n*    // callback when everything is loaded\n*    loaded = function () {\n*       // define stuff\n*       // ....\n*\n*       // change to the menu screen\n*       me.state.change(me.state.PLAY);\n*    }\n* }; // game\n*\n* // \"bootstrap\"\n* me.device.onReady(function () {\n*    game.onload();\n* });\n*/\nfunction onReady(fn) {\n    // register on blur/focus and visibility event handlers\n    if (typeof globalThis.addEventListener === \"function\") {\n        // set pause/stop action on losing focus\n        globalThis.addEventListener(\"blur\", () => {\n            emit(BLUR);\n        }, false);\n        // set restart/resume action on gaining focus\n        globalThis.addEventListener(\"focus\", () => {\n            emit(FOCUS);\n            // force focus if autofocus is on\n            if (autoFocus === true) {\n                focus();\n            }\n        }, false);\n    }\n    if (typeof globalThis.document !== \"undefined\") {\n        if (typeof globalThis.document.addEventListener === \"function\") {\n            // register on the visibilitychange event if supported\n            globalThis.document.addEventListener(\"visibilitychange\", () => {\n                if (globalThis.document.visibilityState === \"visible\") {\n                    emit(FOCUS);\n                    // force focus if autofocus is on\n                    if (autoFocus === true) {\n                        focus();\n                    }\n                } else {\n                    emit(BLUR);\n                }\n            }, false);\n        }\n    }\n    // call the supplied function\n    DOMContentLoaded(fn);\n}\n\n/**\n * enable/disable swipe on WebView.\n * @memberof device\n * @param {boolean} [enable=true] - enable or disable swipe.\n */\nfunction enableSwipe(enable) {\n    let moveEvent = pointerEvent ? \"pointermove\" : (touchEvent ? \"touchmove\" : \"mousemove\");\n    if (enable !== false) {\n        if (swipeEnabled === false) {\n            globalThis.document.removeEventListener(moveEvent, disableSwipeFn);\n            swipeEnabled = true;\n        }\n    } else if (swipeEnabled === true) {\n        globalThis.document.addEventListener(moveEvent, disableSwipeFn, { passive: false });\n        swipeEnabled = false;\n    }\n}\n\n/**\n * Returns true if the browser/device is in full screen mode.\n * @memberof device\n * @returns {boolean}\n */\nfunction isFullscreen() {\n    if (hasFullscreenSupport) {\n        return !!(prefixed(\"fullscreenElement\", globalThis.document) || globalThis.document.mozFullScreenElement);\n    } else {\n        return false;\n    }\n}\n\n/**\n * Triggers a fullscreen request. Requires fullscreen support from the browser/device.\n * @memberof device\n * @param {Element} [element] - the element to be set in full-screen mode.\n * @example\n * // add a keyboard shortcut to toggle Fullscreen mode on/off\n * me.input.bindKey(me.input.KEY.F, \"toggleFullscreen\");\n * me.event.on(me.event.KEYDOWN, function (action, keyCode, edge) {\n *    // toggle fullscreen on/off\n *    if (action === \"toggleFullscreen\") {\n *       me.device.requestFullscreen();\n *    } else {\n *       me.device.exitFullscreen();\n *    }\n * });\n */\nfunction requestFullscreen(element) {\n    if (hasFullscreenSupport && !isFullscreen()) {\n        element = element || getParent();\n        element.requestFullscreen = prefixed(\"requestFullscreen\", element) || element.mozRequestFullScreen;\n        element.requestFullscreen();\n    }\n}\n\n/**\n * Exit fullscreen mode. Requires fullscreen support from the browser/device.\n * @memberof device\n */\nfunction exitFullscreen() {\n    if (hasFullscreenSupport && isFullscreen()) {\n        globalThis.document.exitFullscreen();\n    }\n}\n\n/**\n * Return a string representing the orientation of the device screen.\n * It can be \"any\", \"natural\", \"landscape\", \"portrait\", \"portrait-primary\", \"portrait-secondary\", \"landscape-primary\", \"landscape-secondary\"\n * @memberof device\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Screen/orientation\n * @returns {string} the screen orientation\n */\nfunction getScreenOrientation() {\n    const PORTRAIT = \"portrait\";\n    const LANDSCAPE = \"landscape\";\n\n    let screen = globalThis.screen;\n\n    // first try using \"standard\" values\n    if (screenOrientation === true) {\n        let orientation = prefixed(\"orientation\", screen);\n        if (typeof orientation !== \"undefined\" && typeof orientation.type === \"string\") {\n            // Screen Orientation API specification\n            return orientation.type;\n        } else if (typeof orientation === \"string\") {\n            // moz/ms-orientation are strings\n            return orientation;\n        }\n    }\n\n    // check using the deprecated API\n    if (typeof globalThis.orientation === \"number\") {\n        return (Math.abs(globalThis.orientation) === 90) ? LANDSCAPE : PORTRAIT;\n    }\n\n    // fallback to window size check\n    return (globalThis.outerWidth > globalThis.outerHeight) ? LANDSCAPE : PORTRAIT;\n}\n\n/**\n * locks the device screen into the specified orientation.<br>\n * This method only works for installed Web apps or for Web pages in full-screen mode.\n * @memberof device\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Screen/lockOrientation\n * @param {string|string[]} orientation - The orientation into which to lock the screen.\n * @returns {boolean} true if the orientation was unsuccessfully locked\n */\nfunction lockOrientation(orientation) {\n    let screen = globalThis.screen;\n    if (typeof screen !== \"undefined\") {\n        let _lockOrientation = prefixed(\"lockOrientation\", screen);\n        if (typeof _lockOrientation !== \"undefined\") {\n            return _lockOrientation(orientation);\n        }\n    }\n    return false;\n}\n\n/**\n * unlocks the device screen into the specified orientation.<br>\n * This method only works for installed Web apps or for Web pages in full-screen mode.\n * @memberof device\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Screen/lockOrientation\n * @returns {boolean} true if the orientation was unsuccessfully unlocked\n */\nfunction unlockOrientation() {\n    let screen = globalThis.screen;\n    if (typeof screen !== \"undefined\") {\n        let _unlockOrientation = prefixed(\"unlockOrientation\", screen);\n        if (typeof _unlockOrientation !== \"undefined\") {\n            return _unlockOrientation();\n        }\n    }\n    return false;\n}\n\n/**\n * return true if the device screen orientation is in Portrait mode\n * @memberof device\n * @returns {boolean}\n */\nfunction isPortrait() {\n    return getScreenOrientation().includes(\"portrait\");\n}\n\n/**\n * return true if the device screen orientation is in Portrait mode\n * @memberof device\n * @returns {boolean}\n */\nfunction isLandscape() {\n    return getScreenOrientation().includes(\"landscape\");\n}\n\n/**\n * return the device storage\n * @memberof device\n * @see save\n * @param {string} [type=\"local\"]\n * @returns {object} a reference to the device storage\n */\nfunction getStorage(type = \"local\") {\n    switch (type) {\n        case \"local\" :\n            return save;\n\n        default :\n            throw new Error(\"storage type \" + type + \" not supported\");\n    }\n}\n\n/**\n * return the parent DOM element for the given parent name or HTMLElement object\n * @memberof device\n * @param {string|HTMLElement} element - the parent element name or a HTMLElement object\n * @returns {HTMLElement} the parent Element\n */\nfunction getParentElement(element) {\n    let target = getElement(element);\n\n    if (target.parentNode !== null) {\n        target = target.parentNode;\n    }\n\n    return target;\n}\n\n/**\n * return the DOM element for the given element name or HTMLElement object\n * @memberof device\n * @param {string|HTMLElement} element - the parent element name or a HTMLElement object\n * @returns {HTMLElement} the corresponding DOM Element or null if not existing\n */\nfunction getElement(element) {\n    let target = null;\n\n    if (element !== \"undefined\") {\n        if (typeof element === \"string\") {\n            target = globalThis.document.getElementById(element);\n        } else if (typeof element === \"object\" && element.nodeType === Node.ELEMENT_NODE) {\n            target = element;\n        }\n    }\n\n    // fallback, if invalid target or non HTMLElement object\n    if (!target)  {\n        //default to document.body\n        target = globalThis.document.body;\n    }\n\n    return target;\n}\n\n/**\n * returns the size of the given HTMLElement and its position relative to the viewport\n * <br><img src=\"images/element-box-diagram.png\"/>\n * @memberof device\n * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMRect\n * @param {string|HTMLElement} element - an HTMLElement object\n * @returns {DOMRect} the size and position of the element relatively to the viewport\n */\nfunction getElementBounds(element) {\n    if (typeof element === \"object\" && element !== globalThis.document.body && typeof element.getBoundingClientRect !== \"undefined\") {\n        return element.getBoundingClientRect();\n    } else {\n        domRect.width = domRect.right = globalThis.innerWidth;\n        domRect.height = domRect.bottom = globalThis.innerHeight;\n        return domRect;\n    }\n}\n\n/**\n * returns the size of the given HTMLElement Parent and its position relative to the viewport\n * <br><img src=\"images/element-box-diagram.png\"/>\n * @memberof device\n * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMRect\n * @param {string|HTMLElement} element - an HTMLElement object\n * @returns {DOMRect} the size and position of the given element parent relative to the viewport\n */\nfunction getParentBounds(element) {\n    return getElementBounds(getParentElement(element));\n}\n\n/**\n * returns true if the device supports WebGL\n * @memberof device\n * @param {object} [options] - context creation options\n * @param {boolean} [options.failIfMajorPerformanceCaveat=true] - If true, the renderer will switch to CANVAS mode if the performances of a WebGL context would be dramatically lower than that of a native application making equivalent OpenGL calls.\n * @returns {boolean} true if WebGL is supported\n */\nfunction isWebGLSupported(options) {\n    if (WebGLSupport === -1) {\n        let _supported = false;\n        try {\n            let canvas = globalThis.document.createElement(\"canvas\");\n            let ctxOptions = {\n                stencil: true,\n                failIfMajorPerformanceCaveat: options.failIfMajorPerformanceCaveat\n            };\n            _supported = !! (globalThis.WebGLRenderingContext && (canvas.getContext(\"webgl\", ctxOptions) || canvas.getContext(\"experimental-webgl\", ctxOptions)));\n            WebGLSupport = _supported ? 1 : 0;\n        } catch {\n            WebGLSupport = 0;\n        }\n    }\n    return WebGLSupport === 1;\n}\n\n/**\n * Makes a request to bring this device window to the front.\n * @memberof device\n * @example\n *  if (clicked) {\n *    me.device.focus();\n *  }\n */\nfunction focus() {\n    if (typeof (globalThis.focus) === \"function\") {\n        globalThis.focus();\n    }\n}\n\n/**\n * Enable monitor of the device accelerator to detect the amount of physical force of acceleration the device is receiving.\n * (one some device a first user gesture will be required before calling this function)\n * @memberof device\n * @see device.accelerationX\n * @see device.accelerationY\n * @see device.accelerationZ\n * @link {http://www.mobilexweb.com/samples/ball.html}\n * @link {http://www.mobilexweb.com/blog/safari-ios-accelerometer-websockets-html5}\n * @returns {boolean} false if not supported or permission not granted by the user\n * @example\n * // try to enable device accelerometer event on user gesture\n * me.input.registerPointerEvent(\"pointerleave\", me.game.viewport, function() {\n *     if (me.device.watchAccelerometer() === true) {\n *         // Success\n *         me.input.releasePointerEvent(\"pointerleave\", me.game.viewport);\n *     } else {\n *         // ... fail at enabling the device accelerometer event\n *     }\n * });\n */\nfunction watchAccelerometer() {\n    if (hasAccelerometer && !accelInitialized) {\n        if (DeviceOrientationEvent && typeof DeviceOrientationEvent.requestPermission === \"function\") {\n            DeviceOrientationEvent.requestPermission()\n                .then(response => {\n                    if (response === \"granted\") {\n                        // add a listener for the devicemotion event\n                        globalThis.addEventListener(\"devicemotion\", onDeviceMotion, false);\n                        accelInitialized = true;\n                    }\n                }).catch(console.error);\n        } else {\n            // add a listener for the devicemotion event\n            globalThis.addEventListener(\"devicemotion\", onDeviceMotion, false);\n            accelInitialized = true;\n        }\n    }\n    return accelInitialized;\n}\n\n/**\n * unwatch Accelerometor event\n * @memberof device\n */\nfunction unwatchAccelerometer() {\n    if (accelInitialized) {\n        // remove the listener for the devicemotion event\n        globalThis.removeEventListener(\"devicemotion\", onDeviceMotion, false);\n        accelInitialized = false;\n    }\n}\n\n/**\n * Enable monitor of the device orientation to detect the current orientation of the device as compared to the Earth coordinate frame.\n * (one some device a first user gesture will be required before calling this function)\n * @memberof device\n * @see device.alpha\n * @see device.beta\n * @see device.gamma\n * @returns {boolean} false if not supported or permission not granted by the user\n * @example\n * // try to enable device orientation event on user gesture\n * me.input.registerPointerEvent(\"pointerleave\", me.game.viewport, function() {\n *     if (me.device.watchDeviceOrientation() === true) {\n *         // Success\n *         me.input.releasePointerEvent(\"pointerleave\", me.game.viewport);\n *     } else {\n *         // ... fail at enabling the device orientation event\n *     }\n * });\n */\nfunction watchDeviceOrientation() {\n    if (hasDeviceOrientation && !deviceOrientationInitialized) {\n        if (typeof DeviceOrientationEvent.requestPermission === \"function\") {\n            DeviceOrientationEvent.requestPermission()\n                .then(response => {\n                    if (response === \"granted\") {\n                        globalThis.addEventListener(\"deviceorientation\", onDeviceRotate, false);\n                        deviceOrientationInitialized = true;\n                    }\n                }).catch(console.error);\n        } else {\n            globalThis.addEventListener(\"deviceorientation\", onDeviceRotate, false);\n            deviceOrientationInitialized = true;\n        }\n    }\n    return deviceOrientationInitialized;\n}\n\n/**\n * unwatch Device orientation event\n * @memberof device\n */\nfunction unwatchDeviceOrientation() {\n    if (deviceOrientationInitialized) {\n        globalThis.removeEventListener(\"deviceorientation\", onDeviceRotate, false);\n        deviceOrientationInitialized = false;\n    }\n}\n\n/**\n * the vibrate method pulses the vibration hardware on the device, <br>\n * If the device doesn't support vibration, this method has no effect. <br>\n * If a vibration pattern is already in progress when this method is called,\n * the previous pattern is halted and the new one begins instead.\n * @memberof device\n * @param {number|number[]} pattern - pattern of vibration and pause intervals\n * @example\n * // vibrate for 1000 ms\n * me.device.vibrate(1000);\n * // or alternatively\n * me.device.vibrate([1000]);\n * // vibrate for 50 ms, be still for 100 ms, and then vibrate for 150 ms:\n * me.device.vibrate([50, 100, 150]);\n * // cancel any existing vibrations\n * me.device.vibrate(0);\n */\nfunction vibrate(pattern) {\n    if (typeof globalThis.navigator !== \"undefined\" && typeof globalThis.navigator.vibrate === \"function\") {\n        globalThis.navigator.vibrate(pattern);\n    }\n}\n\n/**\n * detect if the given video format is supported\n * @memberof device\n * @param {\"h264\"|\"h265\"|\"ogg\"|\"mp4\"|\"m4v\"|\"webm\"|\"vp9\"|\"hls\"} codec - the video format to check for support\n * @returns {boolean} return true if the given video format is supported\n */\nfunction hasVideoFormat(codec) {\n    let result = false;\n    if (hasVideo === true) {\n        if (typeof videoCodecs === \"undefined\") {\n            // check for support\n            const videoElement = globalThis.document.createElement(\"video\");\n            videoCodecs = {\n                h264:videoElement.canPlayType('video/mp4; codecs=\"avc1.42E01E\"').replace(/^no$/, \"\"),\n                h265:videoElement.canPlayType('video/mp4; codecs=\"hev1\"').replace(/^no$/, \"\"),\n                ogg:videoElement.canPlayType('video/ogg; codecs=\"theora\"').replace(/^no$/, \"\"),\n                mp4:videoElement.canPlayType('video/mp4; codecs=\"avc1.42E01E\"').replace(/^no$/, \"\"),\n                m4v:videoElement.canPlayType(\"video/x-m4v\").replace(/^no$/, \"\"),\n                webm:videoElement.canPlayType('video/webm; codecs=\"vp8, vorbis\"').replace(/^no$/, \"\"),\n                vp9:videoElement.canPlayType('video/webm; codecs=\"vp9\"').replace(/^no$/, \"\"),\n                hls:videoElement.canPlayType('application/x-mpegURL; codecs=\"avc1.42E01E\"').replace(/^no$/, \"\")\n            };\n        }\n        result = !!videoCodecs[codec];\n    }\n    return result;\n}\n\nvar device = {\n\t__proto__: null,\n\tget accelerationX () { return accelerationX; },\n\tget accelerationY () { return accelerationY; },\n\tget accelerationZ () { return accelerationZ; },\n\tget alpha () { return alpha; },\n\tautoFocus: autoFocus,\n\tget beta () { return beta; },\n\tdevicePixelRatio: devicePixelRatio,\n\tenableSwipe: enableSwipe,\n\texitFullscreen: exitFullscreen,\n\tfocus: focus,\n\tget gamma () { return gamma; },\n\tgetElement: getElement,\n\tgetElementBounds: getElementBounds,\n\tgetParentBounds: getParentBounds,\n\tgetParentElement: getParentElement,\n\tgetScreenOrientation: getScreenOrientation,\n\tgetStorage: getStorage,\n\thasAccelerometer: hasAccelerometer,\n\thasDeviceOrientation: hasDeviceOrientation,\n\thasFullscreenSupport: hasFullscreenSupport,\n\thasHTML5Audio: hasHTML5Audio,\n\thasPointerLockSupport: hasPointerLockSupport,\n\thasVideo: hasVideo,\n\thasVideoFormat: hasVideoFormat,\n\thasWebAudio: hasWebAudio,\n\tisFullscreen: isFullscreen,\n\tisLandscape: isLandscape,\n\tisMobile: isMobile,\n\tisPortrait: isPortrait,\n\tisWebGLSupported: isWebGLSupported,\n\tlanguage: language,\n\tlocalStorage: localStorage,\n\tlockOrientation: lockOrientation,\n\tmaxTouchPoints: maxTouchPoints,\n\tnativeBase64: nativeBase64,\n\toffscreenCanvas: offscreenCanvas,\n\tonDeviceRotate: onDeviceRotate,\n\tonReady: onReady,\n\tpauseOnBlur: pauseOnBlur,\n\tplatform: platform,\n\tpointerEvent: pointerEvent,\n\trequestFullscreen: requestFullscreen,\n\tresumeOnFocus: resumeOnFocus,\n\tscreenOrientation: screenOrientation,\n\tsound: sound,\n\tstopOnBlur: stopOnBlur,\n\ttouch: touch,\n\ttouchEvent: touchEvent,\n\tunlockOrientation: unlockOrientation,\n\tunwatchAccelerometer: unwatchAccelerometer,\n\tunwatchDeviceOrientation: unwatchDeviceOrientation,\n\tvibrate: vibrate,\n\twatchAccelerometer: watchAccelerometer,\n\twatchDeviceOrientation: watchDeviceOrientation,\n\twheel: wheel\n};\n\n/**\n * additional import for TypeScript\n * @import Renderer from \"./../video/renderer.js\";\n */\n\n/**\n * Application & Renderer Settings definition.\n * @typedef {Object} ApplicationSettings\n * @property {string|HTMLElement} [parent=document.body] - the DOM parent element to hold the canvas in the HTML file\n * @property {HTMLCanvasElement} [canvas] - an existing canvas element to use as the renderer target (by default melonJS will create its own canvas based on given parameters)\n * @property {number|Renderer} [renderer=AUTO] - renderer to use (CANVAS, WEBGL, AUTO), or a custom renderer class\n * @property {number|string} [scale=1.0] - enable scaling of the canvas ('auto' for automatic scaling)\n * @property {\"fit\"|\"fill-min\"|\"fill-max\"|\"flex\"|\"flex-width\"|\"flex-height\"|\"stretch\"} [scaleMethod=\"fit\"] - screen scaling modes : <br>\n *  - <i><b>`fit`</b></i> : Letterboxed; content is scaled to design aspect ratio <br>\n * <center><img src=\"images/scale-fit.png\"/></center><br>\n *  - <i><b>`fill-min`</b></i> : Canvas is resized to fit minimum design resolution; content is scaled to design aspect ratio <br>\n * <center><img src=\"images/scale-fill-min.png\"/></center><br>\n *  - <i><b>`fill-max`</b></i> : Canvas is resized to fit maximum design resolution; content is scaled to design aspect ratio <br>\n * <center><img src=\"images/scale-fill-max.png\"/></center><br>\n *  - <i><b>`flex`</b><</i> : Canvas width & height is resized to fit; content is scaled to design aspect ratio <br>\n * <center><img src=\"images/scale-flex.png\"/></center><br>\n *  - <i><b>`flex-width`</b></i> : Canvas width is resized to fit; content is scaled to design aspect ratio <br>\n * <center><img src=\"images/scale-flex-width.png\"/></center><br>\n *  - <i><b>`flex-height`</b></i> : Canvas height is resized to fit; content is scaled to design aspect ratio <br>\n * <center><img src=\"images/scale-flex-height.png\"/></center><br>\n *  - <i><b>`stretch`</b></i> : Canvas is resized to fit; content is scaled to screen aspect ratio <br>\n * <center><img src=\"images/scale-stretch.png\"/></center>\n * @property {string|HTMLElement} [scaleTarget] - the HTML Element to be used as the reference target when using automatic scaling (by default melonJS will use the parent container of the div element containing the canvas)\n * @property {boolean} [preferWebGL1=false] - if true the renderer will only use WebGL 1\n * @property {\"sorting\"|\"z-buffer\"} [depthTest=\"sorting\"] - ~Experimental~ the default method to sort object on the z axis in WebGL\n * @property {(\"default\"|\"high-performance\"|\"low-power\")} [powerPreference=\"default\"] - a hint to the user agent indicating what configuration of GPU is suitable for the WebGL context. To be noted that Safari and Chrome (since version 80) both default to \"low-power\" to save battery life and improve the user experience on these dual-GPU machines.\n * @property {boolean} [transparent=false] - whether to allow transparent pixels in the front buffer (screen).\n * @property {boolean} [antiAlias=false] - whether to enable or not video scaling interpolation\n * @property {boolean} [consoleHeader=true] - whether to display melonJS version and basic device information in the console\n * @property {number} [zoomX=width] - The actual width of the canvas with scaling applied\n * @property {number} [zoomY=height] - The actual height of the canvas with scaling applied\n * @property {Compositor} [compositor] - a custom compositor class (WebGL only)\n * @property {string} [physic=\"builtin\"] - the physic system to use (default: \"builtin\", or \"none\" to disable builtin physic)\n */\nconst ApplicationSettings = {\n    parent : undefined,\n    canvas : undefined,\n    renderer : 2, // AUTO\n    autoScale : false,\n    scale : 1.0,\n    scaleMethod : \"manual\",\n    scaleTarget : undefined,\n    preferWebGL1 : false,\n    depthTest: \"sorting\",\n    powerPreference : \"default\",\n    transparent : false,\n    antiAlias : false,\n    consoleHeader : true,\n    premultipliedAlpha: true,\n    blendMode : \"normal\",\n    physic : \"builtin\",\n    failIfMajorPerformanceCaveat : true,\n    subPixel : false,\n    verbose : false,\n    legacy : false\n};\n\n/**\n * constant to select the HTML5 Canvas renderer\n * @type {number}\n * @static\n * @see Application\n */\nconst CANVAS = 0;\n\n/**\n * constant to select select the WebGL renderer\n * @type {number}\n * @static\n * @see Application\n */\nconst WEBGL = 1;\n\n/**\n * constant to auto-select the renderer (Attempt WebGL first, with fallback to Canvas)\n * @static\n * @type {number}\n * @see Application\n */\nconst AUTO = 2;\n\n/**\n * A reference to the active Canvas or WebGL active renderer renderer\n * @memberof video\n * @type {CanvasRenderer|WebGLRenderer}\n */\nlet renderer = null;\n\n/**\n * Initialize the \"video\" system (create a canvas based on the given arguments, and the related renderer). <br>\n * @memberof video\n * @param {number} width - The width of the canvas viewport\n * @param {number} height - The height of the canvas viewport\n * @param {ApplicationSettings} [options] - optional parameters for the renderer\n * @returns {boolean} false if initialization failed (canvas not supported)\n * @example\n * // init the video with a 640x480 canvas\n * me.video.init(640, 480, {\n *     parent : \"screen\",\n *     renderer : me.video.AUTO,\n *     scale : \"auto\",\n *     scaleMethod : \"fit\"\n * });\n */\nfunction init(width, height, options) {\n    // ensure melonjs has been properly initialized\n    if (!initialized) {\n        throw new Error(\"me.video.init() called before engine initialization.\");\n    }\n\n    try {\n        // initialize the default game Application with the given options\n        game.init(width, height, Object.assign(ApplicationSettings, options || {}));\n    } catch (e) {\n        console.log(e.message);\n        // me.video.init() historically returns false if failing at creating/using a HTML5 canvas\n        return false;\n    }\n\n    // assign the default renderer\n    renderer = game.renderer;\n\n    //add a channel for the onresize/onorientationchange event\n    globalThis.addEventListener(\n        \"resize\",\n        throttle(\n            (e) => {\n                emit(WINDOW_ONRESIZE, e);\n            }, 100\n        ), false\n    );\n\n    // Screen Orientation API\n    globalThis.addEventListener(\n        \"orientationchange\",\n        (e) => {\n            emit(WINDOW_ONORIENTATION_CHANGE, e);\n        },\n        false\n    );\n\n    // pre-fixed implementation on mozzila\n    globalThis.addEventListener(\n        \"onmozorientationchange\",\n        (e) => {\n            emit(WINDOW_ONORIENTATION_CHANGE, e);\n        },\n        false\n    );\n\n    if (screenOrientation === true) {\n        globalThis.screen.orientation.onchange = function (e) {\n            emit(WINDOW_ONORIENTATION_CHANGE, e);\n        };\n    }\n\n    // Automatically update relative canvas position on scroll\n    globalThis.addEventListener(\"scroll\", throttle((e) => {\n        emit(WINDOW_ONSCROLL, e);\n    }, 100), false);\n\n    // notify the video has been initialized\n    emit(VIDEO_INIT, game.renderer);\n\n    return true;\n}\n\n/**\n * Create and return a new Canvas element\n * @memberof video\n * @param {number} width - width\n * @param {number} height - height\n * @param {boolean} [returnOffscreenCanvas=false] - will return an OffscreenCanvas if supported\n * @returns {HTMLCanvasElement|OffscreenCanvas} a new Canvas element of the given size\n */\nfunction createCanvas(width, height, returnOffscreenCanvas = false) {\n    let _canvas;\n\n    if (width === 0 || height === 0) {\n        throw new Error(\"width or height was zero, Canvas could not be initialized !\");\n    }\n\n    if (offscreenCanvas === true && returnOffscreenCanvas === true) {\n        _canvas = new globalThis.OffscreenCanvas(0, 0);\n        // stubbing style for compatibility,\n        // as OffscreenCanvas is detached from the DOM\n        if (typeof _canvas.style === \"undefined\") {\n            _canvas.style = {};\n        }\n    } else {\n        // \"else\" create a \"standard\" canvas\n        _canvas = globalThis.document.createElement(\"canvas\");\n    }\n    _canvas.width = width;\n    _canvas.height = height;\n\n    return _canvas;\n}\n\n/**\n * return a reference to the parent DOM element holding the main canvas\n * @memberof video\n * @returns {HTMLElement} the HTML parent element\n */\nfunction getParent() {\n    return game.getParentElement();\n}\n\nvar video = {\n\t__proto__: null,\n\tAUTO: AUTO,\n\tCANVAS: CANVAS,\n\tWEBGL: WEBGL,\n\tcreateCanvas: createCanvas,\n\tgetParent: getParent,\n\tinit: init,\n\tget renderer () { return renderer; }\n};\n\n// corresponding actions\nlet _keyStatus = {};\n\n// lock enable flag for keys\nlet _keyLock = {};\n// actual lock status of each key\nlet _keyLocked = {};\n\n// List of binded keys being held\nlet _keyRefs = {};\n\n// whether default event should be prevented for a given keypress\nlet _preventDefaultForKeys = {};\n\n// list of binded keys\nlet _keyBindings = {};\n\n/**\n * key down event\n * @ignore\n */\nlet keyDownEvent = function (e, keyCode, mouseButton) {\n\n    keyCode = keyCode || e.keyCode || e.button;\n    let action = _keyBindings[keyCode];\n\n    // publish a message for keydown event\n    emit(KEYDOWN,\n        action,\n        keyCode,\n        action ? !_keyLocked[action] : true\n    );\n\n    if (action) {\n        if (!_keyLocked[action]) {\n            let trigger = (typeof mouseButton !== \"undefined\") ? mouseButton : keyCode;\n            if (!_keyRefs[action][trigger]) {\n                _keyStatus[action]++;\n                _keyRefs[action][trigger] = true;\n            }\n        }\n        // prevent event propagation\n        if (_preventDefaultForKeys[keyCode] && (typeof e.preventDefault === \"function\")) {\n            // \"fake\" events generated through triggerKeyEvent do not have a preventDefault fn\n            return e.preventDefault();\n        }\n        else {\n            return true;\n        }\n    }\n\n    return true;\n};\n\n\n/**\n * key up event\n * @ignore\n */\nlet keyUpEvent = function (e, keyCode, mouseButton) {\n    keyCode = keyCode || e.keyCode || e.button;\n    let action = _keyBindings[keyCode];\n\n    // publish a message for keydown event\n    emit(KEYUP, action, keyCode);\n\n    if (action) {\n        let trigger = (typeof mouseButton !== \"undefined\") ? mouseButton : keyCode;\n        _keyRefs[action][trigger] = undefined;\n\n        if (_keyStatus[action] > 0) {\n            _keyStatus[action]--;\n        }\n\n        _keyLocked[action] = false;\n\n        // prevent event propagation\n        if (_preventDefaultForKeys[keyCode] && (typeof e.preventDefault === \"function\")) {\n            // \"fake\" events generated through triggerKeyEvent do not have a preventDefault fn\n            return e.preventDefault();\n        }\n        else {\n            return true;\n        }\n    }\n\n    return true;\n};\n\n/*\n * PUBLIC STUFF\n */\n\n/**\n  * the default target element for keyboard events (usually the window element in which the game is running)\n  * @public\n  * @type {EventTarget}\n  * @name keyBoardEventTarget\n  * @memberof input\n  */\nlet keyBoardEventTarget = null;\n\n/**\n * standard keyboard constants\n * @public\n * @enum {number}\n * @namespace KEY\n * @memberof input\n */\nconst KEY = {\n    \"BACKSPACE\" : 8,\n    /** @memberof input.KEY */\n    \"TAB\" : 9,\n    /** @memberof input.KEY */\n    \"ENTER\" : 13,\n    /** @memberof input.KEY */\n    \"SHIFT\" : 16,\n    /** @memberof input.KEY */\n    \"CTRL\" : 17,\n    /** @memberof input.KEY */\n    \"ALT\" : 18,\n    /** @memberof input.KEY */\n    \"PAUSE\" : 19,\n    /** @memberof input.KEY */\n    \"CAPS_LOCK\" : 20,\n    /** @memberof input.KEY */\n    \"ESC\" : 27,\n    /** @memberof input.KEY */\n    \"SPACE\" : 32,\n    /** @memberof input.KEY */\n    \"PAGE_UP\" : 33,\n    /** @memberof input.KEY */\n    \"PAGE_DOWN\" : 34,\n    /** @memberof input.KEY */\n    \"END\" : 35,\n    /** @memberof input.KEY */\n    \"HOME\" : 36,\n    /** @memberof input.KEY */\n    \"LEFT\" : 37,\n    /** @memberof input.KEY */\n    \"UP\" : 38,\n    /** @memberof input.KEY */\n    \"RIGHT\" : 39,\n    /** @memberof input.KEY */\n    \"DOWN\" : 40,\n    /** @memberof input.KEY */\n    \"PRINT_SCREEN\" : 42,\n    /** @memberof input.KEY */\n    \"INSERT\" : 45,\n    /** @memberof input.KEY */\n    \"DELETE\" : 46,\n    /** @memberof input.KEY */\n    \"NUM0\" : 48,\n    /** @memberof input.KEY */\n    \"NUM1\" : 49,\n    /** @memberof input.KEY */\n    \"NUM2\" : 50,\n    /** @memberof input.KEY */\n    \"NUM3\" : 51,\n    /** @memberof input.KEY */\n    \"NUM4\" : 52,\n    /** @memberof input.KEY */\n    \"NUM5\" : 53,\n    /** @memberof input.KEY */\n    \"NUM6\" : 54,\n    /** @memberof input.KEY */\n    \"NUM7\" : 55,\n    /** @memberof input.KEY */\n    \"NUM8\" : 56,\n    /** @memberof input.KEY */\n    \"NUM9\" : 57,\n    /** @memberof input.KEY */\n    \"A\" : 65,\n    /** @memberof input.KEY */\n    \"B\" : 66,\n    /** @memberof input.KEY */\n    \"C\" : 67,\n    /** @memberof input.KEY */\n    \"D\" : 68,\n    /** @memberof input.KEY */\n    \"E\" : 69,\n    /** @memberof input.KEY */\n    \"F\" : 70,\n    /** @memberof input.KEY */\n    \"G\" : 71,\n    /** @memberof input.KEY */\n    \"H\" : 72,\n    /** @memberof input.KEY */\n    \"I\" : 73,\n    /** @memberof input.KEY */\n    \"J\" : 74,\n    /** @memberof input.KEY */\n    \"K\" : 75,\n    /** @memberof input.KEY */\n    \"L\" : 76,\n    /** @memberof input.KEY */\n    \"M\" : 77,\n    /** @memberof input.KEY */\n    \"N\" : 78,\n    /** @memberof input.KEY */\n    \"O\" : 79,\n    /** @memberof input.KEY */\n    \"P\" : 80,\n    /** @memberof input.KEY */\n    \"Q\" : 81,\n    /** @memberof input.KEY */\n    \"R\" : 82,\n    /** @memberof input.KEY */\n    \"S\" : 83,\n    /** @memberof input.KEY */\n    \"T\" : 84,\n    /** @memberof input.KEY */\n    \"U\" : 85,\n    /** @memberof input.KEY */\n    \"V\" : 86,\n    /** @memberof input.KEY */\n    \"W\" : 87,\n    /** @memberof input.KEY */\n    \"X\" : 88,\n    /** @memberof input.KEY */\n    \"Y\" : 89,\n    /** @memberof input.KEY */\n    \"Z\" : 90,\n    /** @memberof input.KEY */\n    \"WINDOW_KEY\" : 91,\n    /** @memberof input.KEY */\n    \"NUMPAD0\" : 96,\n    /** @memberof input.KEY */\n    \"NUMPAD1\" : 97,\n    /** @memberof input.KEY */\n    \"NUMPAD2\" : 98,\n    /** @memberof input.KEY */\n    \"NUMPAD3\" : 99,\n    /** @memberof input.KEY */\n    \"NUMPAD4\" : 100,\n    /** @memberof input.KEY */\n    \"NUMPAD5\" : 101,\n    /** @memberof input.KEY */\n    \"NUMPAD6\" : 102,\n    /** @memberof input.KEY */\n    \"NUMPAD7\" : 103,\n    /** @memberof input.KEY */\n    \"NUMPAD8\" : 104,\n    /** @memberof input.KEY */\n    \"NUMPAD9\" : 105,\n    /** @memberof input.KEY */\n    \"MULTIPLY\" : 106,\n    /** @memberof input.KEY */\n    \"ADD\" : 107,\n    /** @memberof input.KEY */\n    \"SUBSTRACT\" : 109,\n    /** @memberof input.KEY */\n    \"DECIMAL\" : 110,\n    /** @memberof input.KEY */\n    \"DIVIDE\" : 111,\n    /** @memberof input.KEY */\n    \"F1\" : 112,\n    /** @memberof input.KEY */\n    \"F2\" : 113,\n    /** @memberof input.KEY */\n    \"F3\" : 114,\n    /** @memberof input.KEY */\n    \"F4\" : 115,\n    /** @memberof input.KEY */\n    \"F5\" : 116,\n    /** @memberof input.KEY */\n    \"F6\" : 117,\n    /** @memberof input.KEY */\n    \"F7\" : 118,\n    /** @memberof input.KEY */\n    \"F8\" : 119,\n    /** @memberof input.KEY */\n    \"F9\" : 120,\n    /** @memberof input.KEY */\n    \"F10\" : 121,\n    /** @memberof input.KEY */\n    \"F11\" : 122,\n    /** @memberof input.KEY */\n    \"F12\" : 123,\n    /** @memberof input.KEY */\n    \"TILDE\" : 126,\n    /** @memberof input.KEY */\n    \"NUM_LOCK\" : 144,\n    /** @memberof input.KEY */\n    \"SCROLL_LOCK\" : 145,\n    /** @memberof input.KEY */\n    \"SEMICOLON\" : 186,\n    /** @memberof input.KEY */\n    \"PLUS\" : 187,\n    /** @memberof input.KEY */\n    \"COMMA\" : 188,\n    /** @memberof input.KEY */\n    \"MINUS\" : 189,\n    /** @memberof input.KEY */\n    \"PERIOD\" : 190,\n    /** @memberof input.KEY */\n    \"FORWAND_SLASH\" : 191,\n    /** @memberof input.KEY */\n    \"GRAVE_ACCENT\" : 192,\n    /** @memberof input.KEY */\n    \"OPEN_BRACKET\" : 219,\n    /** @memberof input.KEY */\n    \"BACK_SLASH\" : 220,\n    /** @memberof input.KEY */\n    \"CLOSE_BRACKET\" : 221,\n    /** @memberof input.KEY */\n    \"SINGLE_QUOTE\" : 222\n};\n\n/**\n * enable keyboard event\n * @ignore\n */\nfunction initKeyboardEvent() {\n    // make sure the keyboard is enable\n    if (keyBoardEventTarget === null && isMobile$1 === false) {\n        keyBoardEventTarget = globalThis;\n        if (typeof keyBoardEventTarget.addEventListener === \"function\") {\n            keyBoardEventTarget.addEventListener(\"keydown\", keyDownEvent, false);\n            keyBoardEventTarget.addEventListener(\"keyup\", keyUpEvent, false);\n        }\n    }\n}\n\n/**\n * return the key press status of the specified action\n * @name isKeyPressed\n * @memberof input\n * @public\n * @param {string} action - user defined corresponding action\n * @returns {boolean} true if pressed\n * @example\n * if (me.input.isKeyPressed('left')) {\n *    //do something\n * }\n * else if (me.input.isKeyPressed('right')) {\n *    //do something else...\n * }\n */\nfunction isKeyPressed(action) {\n    if (_keyStatus[action] && !_keyLocked[action]) {\n        if (_keyLock[action]) {\n            _keyLocked[action] = true;\n        }\n        return true;\n    }\n    return false;\n}\n\n/**\n * return the key status of the specified action\n * @name keyStatus\n * @memberof input\n * @public\n * @param {string} action - user defined corresponding action\n * @returns {boolean} down (true) or up(false)\n */\nfunction keyStatus(action) {\n    return (_keyStatus[action] > 0);\n}\n\n\n/**\n * trigger the specified key (simulated) event <br>\n * @name triggerKeyEvent\n * @memberof input\n * @public\n * @param {number} keycode - (See {@link input.KEY})\n * @param {boolean} [status=false] - true to trigger a key down event, or false for key up event\n * @param {number} [mouseButton] - the mouse button to trigger\n * @example\n * // trigger a key press\n * me.input.triggerKeyEvent(me.input.KEY.LEFT, true);\n */\nfunction triggerKeyEvent(keycode, status, mouseButton) {\n    if (status === true) {\n        keyDownEvent({}, keycode, mouseButton);\n    }\n    else {\n        keyUpEvent({}, keycode, mouseButton);\n    }\n}\n\n\n/**\n * associate a user defined action to a keycode\n * @name bindKey\n * @memberof input\n * @public\n * @param {number} keycode - (See {@link input.KEY})\n * @param {string} action - user defined corresponding action\n * @param {boolean} [lock=false] - cancel the keypress event once read\n * @param {boolean} [preventDefault=input.preventDefault] - prevent default browser action\n * @example\n * // enable the keyboard\n * me.input.bindKey(me.input.KEY.LEFT,  \"left\");\n * me.input.bindKey(me.input.KEY.RIGHT, \"right\");\n * me.input.bindKey(me.input.KEY.X,     \"jump\", true);\n * me.input.bindKey(me.input.KEY.F1,    \"options\", true, true);\n */\nfunction bindKey(keycode, action, lock, preventDefault$1 = preventDefault) {\n    _keyBindings[keycode] = action;\n    _preventDefaultForKeys[keycode] = preventDefault$1;\n\n    _keyStatus[action] = 0;\n    _keyLock[action] = lock ? lock : false;\n    _keyLocked[action] = false;\n    _keyRefs[action] = {};\n}\n\n/**\n * return the action associated with the given keycode\n * @name getBindingKey\n * @memberof input\n * @public\n * @param {number} keycode - (See {@link input.KEY})\n * @returns {string} user defined associated action\n */\nfunction getBindingKey(keycode) {\n    return _keyBindings[keycode];\n}\n\n/**\n * unlock a key manually\n * @name unlockKey\n * @memberof input\n * @public\n * @param {string} action - user defined corresponding action\n * @example\n * // Unlock jump when touching the ground\n * if (!this.falling && !this.jumping) {\n *     me.input.unlockKey(\"jump\");\n * }\n */\nfunction unlockKey(action) {\n    _keyLocked[action] = false;\n}\n\n/**\n * unbind the defined keycode\n * @name unbindKey\n * @memberof input\n * @public\n * @param {number} keycode - (See {@link input.KEY})\n * @example\n * me.input.unbindKey(me.input.KEY.LEFT);\n */\nfunction unbindKey(keycode) {\n    // clear the event status\n    let keybinding = _keyBindings[keycode];\n    _keyStatus[keybinding] = 0;\n    _keyLock[keybinding] = false;\n    _keyRefs[keybinding] = {};\n    // remove the key binding\n    _keyBindings[keycode] = null;\n    _preventDefaultForKeys[keycode] = null;\n}\n\n/**\n * a temporary vector object\n * @ignore\n */\nlet tmpVec = new Vector2d();\n\n/**\n * @classdesc\n * a pointer object, representing a single finger on a touch enabled device.\n * @class Pointer\n * @augments Bounds\n */\nclass Pointer extends Bounds {\n\n    /**\n     * @ignore\n     */\n    constructor(x = 0, y = 0, w = 1, h = 1) {\n\n        // parent constructor\n        super();\n\n        // initial coordinates/size\n        this.setMinMax(x, y, x + w, y + h);\n\n        /**\n         * constant for left button\n         * @public\n         * @type {number}\n         * @name LEFT\n         * @memberof Pointer\n         */\n        this.LEFT = 0;\n\n        /**\n         * constant for middle button\n         * @public\n         * @type {number}\n         * @name MIDDLE\n         * @memberof Pointer\n         */\n        this.MIDDLE = 1;\n\n        /**\n         * constant for right button\n         * @public\n         * @type {number}\n         * @name RIGHT\n         * @memberof Pointer\n         */\n        this.RIGHT = 2;\n\n        /**\n         * the originating Event Object\n         * @public\n         * @type {PointerEvent|TouchEvent|MouseEvent}\n         * @name event\n         * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent\n         * @see https://developer.mozilla.org/en-US/docs/Web/API/TouchEvent\n         * @see https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent\n         * @memberof Pointer\n         */\n        this.event = undefined;\n\n        /**\n         * a string containing the event's type.\n         * @public\n         * @type {string}\n         * @name type\n         * @see https://developer.mozilla.org/en-US/docs/Web/API/Event/type\n         * @memberof Pointer\n         */\n        this.type = undefined;\n\n\n        /**\n         * the button property indicates which button was pressed on the mouse to trigger the event.\n         * @public\n         * @type {number}\n         * @name button\n         * @see https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/button\n         * @memberof Pointer\n         */\n        this.button = 0;\n\n        /**\n         * indicates whether or not the pointer device that created the event is the primary pointer.\n         * @public\n         * @type {boolean}\n         * @name isPrimary\n         * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/isPrimary\n         * @memberof Pointer\n         */\n        this.isPrimary = false;\n\n        /**\n         * the horizontal coordinate at which the event occurred, relative to the left edge of the entire document.\n         * @public\n         * @type {number}\n         * @name pageX\n         * @see https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/pageX\n         * @memberof Pointer\n         */\n        this.pageX = 0;\n\n        /**\n         * the vertical coordinate at which the event occurred, relative to the left edge of the entire document.\n         * @public\n         * @type {number}\n         * @name pageY\n         * @see https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/pageY\n         * @memberof Pointer\n         */\n        this.pageY = 0;\n\n        /**\n         * the horizontal coordinate within the application's client area at which the event occurred\n         * @public\n         * @type {number}\n         * @name clientX\n         * @see https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/clientX\n         * @memberof Pointer\n         */\n        this.clientX = 0;\n\n        /**\n        * the vertical coordinate within the application's client area at which the event occurred\n        * @public\n        * @type {number}\n        * @name clientY\n        * @see https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/clientY\n        * @memberof Pointer\n        */\n        this.clientY = 0;\n\n        /**\n         * the difference in the X coordinate of the pointer since the previous move event\n         * @public\n         * @type {number}\n         * @name movementX\n         * @see https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/movementX\n         * @memberof Pointer\n         */\n        this.movementX = 0;\n\n        /**\n        * the difference in the Y coordinate of the pointer since the previous move event\n        * @public\n        * @type {number}\n        * @name movementY\n        * @see https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/movementY\n        * @memberof Pointer\n        */\n        this.movementY = 0;\n\n        /**\n         * an unsigned long representing the unit of the delta values scroll amount\n         * @public\n         * @type {number}\n         * @name deltaMode\n         * @see https://developer.mozilla.org/en-US/docs/Web/API/WheelEvent/deltaMode\n         * @memberof Pointer\n         */\n        this.deltaMode = 0;\n\n        /**\n         * a double representing the horizontal scroll amount in the Wheel Event deltaMode unit.\n         * @public\n         * @type {number}\n         * @name deltaX\n         * @see https://developer.mozilla.org/en-US/docs/Web/API/WheelEvent/deltaX\n         * @memberof Pointer\n         */\n        this.deltaX = 0;\n\n        /**\n         * a double representing the vertical scroll amount in the Wheel Event deltaMode unit.\n         * @public\n         * @type {number}\n         * @name deltaY\n         * @see https://developer.mozilla.org/en-US/docs/Web/API/WheelEvent/deltaY\n         * @memberof Pointer\n         */\n        this.deltaY = 0;\n\n        /**\n         * a double representing the scroll amount in the z-axis, in the Wheel Event deltaMode unit.\n         * @public\n         * @type {number}\n         * @name deltaZ\n         * @see https://developer.mozilla.org/en-US/docs/Web/API/WheelEvent/deltaZ\n         * @memberof Pointer\n         */\n        this.deltaZ = 0;\n\n        /**\n         * Event normalized X coordinate within the game canvas itself<br>\n         * <img src=\"images/event_coord.png\"/>\n         * @public\n         * @type {number}\n         * @name gameX\n         * @memberof Pointer\n         */\n        this.gameX = 0;\n\n        /**\n         * Event normalized Y coordinate within the game canvas itself<br>\n         * <img src=\"images/event_coord.png\"/>\n         * @public\n         * @type {number}\n         * @name gameY\n         * @memberof Pointer\n         */\n        this.gameY = 0;\n\n        /**\n         * Event X coordinate relative to the viewport\n         * @public\n         * @type {number}\n         * @name gameScreenX\n         * @memberof Pointer\n         */\n        this.gameScreenX = 0;\n\n        /**\n         * Event Y coordinate relative to the viewport\n         * @public\n         * @type {number}\n         * @name gameScreenY\n         * @memberof Pointer\n         */\n        this.gameScreenY = 0;\n\n        /**\n         * Event X coordinate relative to the map\n         * @public\n         * @type {number}\n         * @name gameWorldX\n         * @memberof Pointer\n         */\n        this.gameWorldX = 0;\n\n        /**\n         * Event Y coordinate relative to the map\n         * @public\n         * @type {number}\n         * @name gameWorldY\n         * @memberof Pointer\n         */\n        this.gameWorldY = 0;\n\n        /**\n         * Event X coordinate relative to the holding container\n         * @public\n         * @type {number}\n         * @name gameLocalX\n         * @memberof Pointer\n         */\n        this.gameLocalX = 0;\n\n        /**\n         * Event Y coordinate relative to the holding container\n         * @public\n         * @type {number}\n         * @name gameLocalY\n         * @memberof Pointer\n         */\n        this.gameLocalY = 0;\n\n        /**\n        * The unique identifier of the contact for a touch, mouse or pen\n        * @public\n        * @type {number}\n        * @name pointerId\n        * @memberof Pointer\n        * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/pointerId\n        */\n        this.pointerId = undefined;\n\n        /**\n         * true if not originally a pointer event\n         * @public\n         * @type {boolean}\n         * @name isNormalized\n         * @memberof Pointer\n         */\n        this.isNormalized = false;\n\n        /**\n         * true if the pointer is currently locked\n         * @public\n         * @type {boolean}\n         * @name locked\n         * @memberof Pointer\n         */\n        this.locked = false;\n\n        // bind list for mouse buttons\n        this.bind = [ 0, 0, 0 ];\n    }\n\n    /**\n     * initialize the Pointer object using the given Event Object\n     * @name Pointer#set\n     * @private\n     * @param {Event} event - the original Event object\n     * @param {number} [pageX=0] - the horizontal coordinate at which the event occurred, relative to the left edge of the entire document\n     * @param {number} [pageY=0] - the vertical coordinate at which the event occurred, relative to the left edge of the entire document\n     * @param {number} [clientX=0] - the horizontal coordinate within the application's client area at which the event occurred\n     * @param {number} [clientY=0] - the vertical coordinate within the application's client area at which the event occurred\n     * @param {number} [pointerId=1] - the Pointer, Touch or Mouse event Id (1)\n     */\n    setEvent(event, pageX = 0, pageY = 0, clientX = 0, clientY = 0, pointerId = 1) {\n        // the original event object\n        this.event = event;\n\n        this.pageX = pageX;\n        this.pageY = pageY;\n        this.clientX = clientX;\n        this.clientY = clientY;\n\n        // translate to local coordinates\n        globalToLocal(this.pageX, this.pageY, tmpVec);\n        this.gameScreenX = this.x = tmpVec.x;\n        this.gameScreenY = this.y = tmpVec.y;\n\n        // true if not originally a pointer event\n        this.isNormalized = (typeof globalThis.PointerEvent !== \"undefined\" && !(event instanceof globalThis.PointerEvent));\n\n        this.locked = locked;\n        this.movementX = event.movementX || 0;\n        this.movementY = event.movementY || 0;\n\n        if (event.type === \"wheel\") {\n            this.deltaMode = event.deltaMode || 0;\n            this.deltaX = event.deltaX || 0;\n            this.deltaY = event.deltaY || 0;\n            this.deltaZ = event.deltaZ || 0;\n        } else {\n            this.deltaMode = 0;\n            this.deltaX = 0;\n            this.deltaY = 0;\n            this.deltaZ = 0;\n        }\n\n        this.pointerId = pointerId;\n\n        this.isPrimary = (typeof event.isPrimary !== \"undefined\") ? event.isPrimary : true;\n\n        // in case of touch events, button is not defined\n        this.button = event.button || 0;\n\n        this.type = event.type;\n\n        // get the current screen to game world offset\n        if (typeof game.viewport !== \"undefined\") {\n            game.viewport.localToWorld(this.gameScreenX, this.gameScreenY, tmpVec);\n        }\n\n        /* Initialize the two coordinate space properties. */\n        this.gameWorldX = tmpVec.x;\n        this.gameWorldY = tmpVec.y;\n\n        // get the pointer size\n        if (this.isNormalized === false) {\n            // native PointerEvent\n            this.width = event.width || 1;\n            this.height = event.height || 1;\n        } else if (typeof(event.radiusX) === \"number\") {\n            // TouchEvent\n            this.width = (event.radiusX * 2) || 1;\n            this.height = (event.radiusY * 2) || 1;\n        } else {\n            this.width = this.height = 1;\n        }\n    }\n}\n\n/**\n * @import Vector2d from \"./../math/vector2.js\";\n */\n\n/**\n * A pool of `Pointer` objects to cache pointer/touch event coordinates.\n * @type {Array.<Vector2d>}\n * @ignore\n */\nlet T_POINTERS = [];\n\n// list of registered Event handlers\nlet eventHandlers = new Map();\n\n// a cache rect represeting the current pointer area\nlet currentPointer;\n\n// some useful flags\nlet pointerInitialized = false;\n\n// Track last event timestamp to prevent firing events out of order\nlet lastTimeStamp = 0;\n\n// \"active\" list of supported events\nlet activeEventList = [];\n\n// internal constants\nconst WHEEL           = [\"wheel\"];\nconst POINTER_MOVE    = [\"pointermove\",   \"mousemove\",    \"touchmove\"];\nconst POINTER_DOWN    = [\"pointerdown\",   \"mousedown\",    \"touchstart\"];\nconst POINTER_UP      = [\"pointerup\",     \"mouseup\",      \"touchend\"];\nconst POINTER_CANCEL  = [\"pointercancel\", \"mousecancel\",  \"touchcancel\"];\nconst POINTER_ENTER   = [\"pointerenter\",  \"mouseenter\",   \"touchenter\"];\nconst POINTER_OVER    = [\"pointerover\",   \"mouseover\",    \"touchover\"];\nconst POINTER_LEAVE   = [\"pointerleave\",  \"mouseleave\",   \"touchleave\"];\n\n// list of standard pointer event type\nconst pointerEventList = [\n    WHEEL[0],\n    POINTER_MOVE[0],\n    POINTER_DOWN[0],\n    POINTER_UP[0],\n    POINTER_CANCEL[0],\n    POINTER_ENTER[0],\n    POINTER_OVER[0],\n    POINTER_LEAVE[0]\n];\n\n// legacy mouse event type\nconst mouseEventList = [\n    WHEEL[0],\n    POINTER_MOVE[1],\n    POINTER_DOWN[1],\n    POINTER_UP[1],\n    POINTER_CANCEL[1],\n    POINTER_ENTER[1],\n    POINTER_OVER[1],\n    POINTER_LEAVE[1]\n];\n\n// iOS style touch event type\nconst touchEventList = [\n    POINTER_MOVE[2],\n    POINTER_DOWN[2],\n    POINTER_UP[2],\n    POINTER_CANCEL[2],\n    POINTER_ENTER[2],\n    POINTER_OVER[2],\n    POINTER_LEAVE[2]\n];\n\nconst pointerEventMap = {\n    wheel : WHEEL,\n    pointermove: POINTER_MOVE,\n    pointerdown: POINTER_DOWN,\n    pointerup: POINTER_UP,\n    pointercancel: POINTER_CANCEL,\n    pointerenter: POINTER_ENTER,\n    pointerover: POINTER_OVER,\n    pointerleave: POINTER_LEAVE\n};\n\n/**\n * Array of normalized events (mouse, touch, pointer)\n * @ignore\n */\nlet normalizedEvents = [];\n\n/**\n * addEventListerner for the specified event list and callback\n * @ignore\n */\nfunction registerEventListener(eventList, callback) {\n    for (let x = 0; x < eventList.length; x++) {\n        if (POINTER_MOVE.indexOf(eventList[x]) === -1) {\n            pointerEventTarget.addEventListener(eventList[x], callback, { passive: (preventDefault === false) });\n        }\n    }\n}\n\n/**\n * enable pointer event (Pointer/Mouse/Touch)\n * @ignore\n */\nfunction enablePointerEvent() {\n    if (!pointerInitialized) {\n\n        // the current pointer area\n        currentPointer = new Rect(0, 0, 1, 1);\n\n        // instantiate a pool of pointer catched\n        for (let v = 0; v < maxTouchPoints; v++) {\n            T_POINTERS.push(new Pointer());\n        }\n\n        if (pointerEventTarget === null) {\n            // default pointer event target\n            pointerEventTarget = renderer.getCanvas();\n        }\n\n        if (pointerEvent) {\n            // standard Pointer Events\n            activeEventList = pointerEventList;\n        } else {\n            // Regular Mouse events\n            activeEventList = mouseEventList;\n        }\n        if (touch && !pointerEvent) {\n            // touch event on mobile devices\n            activeEventList = activeEventList.concat(touchEventList);\n        }\n        registerEventListener(activeEventList, onPointerEvent);\n\n        // set the PointerMove/touchMove/MouseMove event\n        if (typeof(throttlingInterval) === \"undefined\") {\n            // set the default value\n            throttlingInterval = ~~(1000 / timer.maxfps);\n        }\n\n        if (autoFocus === true) {\n            focus();\n            pointerEventTarget.addEventListener(\n                activeEventList[2], // MOUSE/POINTER DOWN\n                () => {\n                    focus();\n                },\n                { passive: (preventDefault === false) }\n            );\n        }\n\n        // if time interval <= 16, disable the feature\n        let events = findAllActiveEvents(activeEventList, POINTER_MOVE);\n        if (throttlingInterval < 17) {\n            for (let i = 0; i < events.length; i++) {\n                if (activeEventList.indexOf(events[i]) !== -1) {\n                    pointerEventTarget.addEventListener(\n                        events[i],\n                        onMoveEvent,\n                        { passive: true } // do not preventDefault on Move events\n                    );\n                }\n\n            }\n        }\n        else {\n            for (let i = 0; i < events.length; i++) {\n                if (activeEventList.indexOf(events[i]) !== -1) {\n                    pointerEventTarget.addEventListener(\n                        events[i],\n                        throttle(\n                            onMoveEvent,\n                            throttlingInterval,\n                            false\n                        ),\n                        { passive: true } // do not preventDefault on Move events\n                    );\n                }\n            }\n        }\n        // disable all gesture by default\n        setTouchAction(pointerEventTarget);\n\n        // set a on change listener on pointerlock if supported\n        if (hasPointerLockSupport) {\n            globalThis.document.addEventListener(\"pointerlockchange\", () => {\n                // change the locked status accordingly\n                locked = globalThis.document.pointerLockElement === game.getParentElement();\n                // emit the corresponding internal event\n                emit(POINTERLOCKCHANGE, locked);\n            }, true);\n        }\n\n        // all done !\n        pointerInitialized = true;\n    }\n}\n\n/**\n * @ignore\n */\nfunction findActiveEvent(activeEventList, eventTypes) {\n    for (let i = 0; i < eventTypes.length; i++) {\n        const event = activeEventList.indexOf(eventTypes[i]);\n        if (event !== -1) {\n            return eventTypes[i];\n        }\n    }\n}\n\n/**\n * @ignore\n */\nfunction findAllActiveEvents(activeEventList, eventTypes) {\n    let events = [];\n    for (let i = 0; i < eventTypes.length; i++) {\n        const event = activeEventList.indexOf(eventTypes[i]);\n        if (event !== -1) {\n            events.push(eventTypes[i]);\n        }\n    }\n\n    return events;\n}\n\n/**\n * @ignore\n */\nfunction triggerEvent(handlers, type, pointer, pointerId) {\n    let callback;\n    if (handlers.callbacks[type]) {\n        handlers.pointerId = pointerId;\n        for (let i = handlers.callbacks[type].length - 1; (i >= 0) && (callback = handlers.callbacks[type][i]); i--) {\n            if (callback(pointer) === false) {\n                // stop propagating the event if return false\n                return true;\n            }\n        }\n    }\n    return false;\n}\n\n/**\n * propagate events to registered objects\n * @ignore\n */\nfunction dispatchEvent(normalizedEvents) {\n    let handled = false;\n\n    while (normalizedEvents.length > 0) {\n\n        // keep a reference to the last item\n        let pointer = normalizedEvents.pop();\n        // and put it back into our cache\n        T_POINTERS.push(pointer);\n\n        // Do not fire older touch events (not required for PointerEvent type)\n        if (pointer.isNormalized === true && typeof(pointer.event.timeStamp) !== \"undefined\") {\n            if (pointer.event.timeStamp < lastTimeStamp) {\n                continue;\n            }\n            lastTimeStamp = pointer.event.timeStamp;\n        }\n\n        currentPointer.setShape(\n            pointer.gameWorldX,\n            pointer.gameWorldY,\n            pointer.width,\n            pointer.height\n        );\n\n        // trigger a global event for pointer move\n        if (POINTER_MOVE.includes(pointer.type)) {\n            pointer.gameX = pointer.gameLocalX = pointer.gameScreenX;\n            pointer.gameY = pointer.gameLocalY = pointer.gameScreenY;\n            emit(POINTERMOVE, pointer);\n        }\n\n        // fetch valid candiates from the game world container\n        let candidates = game.world.broadphase.retrieve(currentPointer, game.world._sortReverseZ);\n\n        // add the main game viewport to the list of candidates\n        candidates = candidates.concat([ game.viewport ]);\n\n        for (let c = candidates.length, candidate; c--, (candidate = candidates[c]);) {\n            if (eventHandlers.has(candidate) && (candidate.isKinematic !== true)) {\n                const handlers = eventHandlers.get(candidate);\n                const region = handlers.region;\n                const ancestor = region.ancestor;\n                const bounds = region.getBounds();\n                let eventInBounds = false;\n\n                if (region.isFloating === true) {\n                    pointer.gameX = pointer.gameLocalX = pointer.gameScreenX;\n                    pointer.gameY = pointer.gameLocalY = pointer.gameScreenY;\n                } else {\n                    pointer.gameX = pointer.gameLocalX = pointer.gameWorldX;\n                    pointer.gameY = pointer.gameLocalY = pointer.gameWorldY;\n                }\n\n                // adjust gameLocalX to specify coordinates\n                // within the region ancestor container\n                if (typeof ancestor !== \"undefined\") {\n                    let parentBounds = ancestor.getBounds();\n                    pointer.gameLocalX = pointer.gameX - parentBounds.x;\n                    pointer.gameLocalY = pointer.gameY - parentBounds.y;\n                }\n\n                eventInBounds = bounds.contains(pointer.gameX, pointer.gameY);\n\n                switch (pointer.type) {\n                    case POINTER_MOVE[0]:\n                    case POINTER_MOVE[1]:\n                    case POINTER_MOVE[2]:\n                    case POINTER_MOVE[3]:\n                        // moved out of bounds: trigger the POINTER_LEAVE callbacks\n                        if (handlers.pointerId === pointer.pointerId && !eventInBounds) {\n                            if (triggerEvent(handlers, findActiveEvent(activeEventList, POINTER_LEAVE), pointer, null)) {\n                                handled = true;\n                                break;\n                            }\n                        }\n                        // no pointer & moved inside of bounds: trigger the POINTER_ENTER callbacks\n                        else if (handlers.pointerId === null && eventInBounds) {\n                            if (triggerEvent(handlers, findActiveEvent(activeEventList, POINTER_ENTER), pointer, pointer.pointerId)) {\n                                handled = true;\n                                break;\n                            }\n                        }\n\n                        // trigger the POINTER_MOVE callbacks\n                        if (eventInBounds && triggerEvent(handlers, pointer.type, pointer, pointer.pointerId)) {\n                            handled = true;\n                            break;\n                        }\n                        break;\n\n                    case POINTER_UP[0]:\n                    case POINTER_UP[1]:\n                    case POINTER_UP[2]:\n                    case POINTER_UP[3]:\n                        // pointer defined & inside of bounds: trigger the POINTER_UP callback\n                        if (handlers.pointerId === pointer.pointerId && eventInBounds) {\n                            // trigger the corresponding callback\n                            if (triggerEvent(handlers, pointer.type, pointer, null)) {\n                                handled = true;\n                                break;\n                            }\n                        }\n                        break;\n\n                    case POINTER_CANCEL[0]:\n                    case POINTER_CANCEL[1]:\n                    case POINTER_CANCEL[2]:\n                    case POINTER_CANCEL[3]:\n                        // pointer defined: trigger the POINTER_CANCEL callback\n                        if (handlers.pointerId === pointer.pointerId) {\n                            // trigger the corresponding callback\n                            if (triggerEvent(handlers, pointer.type, pointer, null)) {\n                                handled = true;\n                                break;\n                            }\n                        }\n                        break;\n\n                    default:\n                        // event inside of bounds: trigger the POINTER_DOWN or WHEEL callback\n                        if (eventInBounds) {\n                            // trigger the corresponding callback\n                            if (triggerEvent(handlers, pointer.type, pointer, pointer.pointerId)) {\n                                handled = true;\n                                break;\n                            }\n                        }\n                        break;\n                }\n            }\n            if (handled === true) {\n                // stop iterating through this list of candidates\n                break;\n            }\n        }\n    }\n    return handled;\n}\n\n/**\n * translate event coordinates\n * @ignore\n */\nfunction normalizeEvent(originalEvent) {\n    let _pointer;\n\n    // PointerEvent or standard Mouse event\n    if (touchEvent && originalEvent.changedTouches) {\n        // iOS/Android Touch event\n        for (let i = 0, l = originalEvent.changedTouches.length; i < l; i++) {\n            const touchEvent = originalEvent.changedTouches[i];\n            _pointer = T_POINTERS.pop();\n            _pointer.setEvent(\n                originalEvent,\n                touchEvent.pageX,\n                touchEvent.pageY,\n                touchEvent.clientX,\n                touchEvent.clientY,\n                touchEvent.identifier\n            );\n            normalizedEvents.push(_pointer);\n        }\n    } else {\n        // Mouse or PointerEvent\n        _pointer = T_POINTERS.pop();\n        _pointer.setEvent(\n            originalEvent,\n            originalEvent.pageX,\n            originalEvent.pageY,\n            originalEvent.clientX,\n            originalEvent.clientY,\n            originalEvent.pointerId\n        );\n        normalizedEvents.push(_pointer);\n    }\n\n    // if event.isPrimary is defined and false, return\n    if (originalEvent.isPrimary === false) {\n        return normalizedEvents;\n    }\n\n    // else use the first entry to simulate mouse event\n    normalizedEvents[0].isPrimary = true;\n    Object.assign(pointer, normalizedEvents[0]);\n\n    return normalizedEvents;\n}\n\n/**\n * mouse/touch/pointer event management (move)\n * @ignore\n */\nfunction onMoveEvent(e) {\n    // dispatch mouse event to registered object\n    dispatchEvent(normalizeEvent(e));\n    // do not prevent default on moveEvent :\n}\n\n/**\n * mouse/touch/pointer event management (start/down, end/up)\n * @ignore\n */\nfunction onPointerEvent(e) {\n    // normalize eventTypes\n    normalizeEvent(e);\n\n    // remember/use the first \"primary\" normalized event for pointer.bind\n    let button = normalizedEvents[0].button;\n\n    // dispatch event to registered objects\n    if (dispatchEvent(normalizedEvents) || e.type === \"wheel\") {\n        // always preventDefault for wheel event (?legacy code/behavior?)\n        if (preventDefault === true) {\n            e.preventDefault();\n        }\n    }\n\n    let keycode = pointer.bind[button];\n\n    // check if mapped to a key\n    if (keycode) {\n        triggerKeyEvent(keycode, POINTER_DOWN.includes(e.type), button + 1);\n    }\n}\n\n/*\n * PUBLIC STUFF\n */\n\n/**\n  * the default target element for pointer events (usually the canvas element in which the game is rendered)\n  * @public\n  * @type {EventTarget}\n  * @name pointerEventTarget\n  * @memberof input\n  */\nlet pointerEventTarget = null;\n\n/**\n * Pointer information (current position and size)\n * @public\n * @type {Rect}\n * @name pointer\n * @memberof input\n */\nlet pointer = new Pointer(0, 0, 1, 1);\n\n\n/**\n * indicates if the pointer is currently locked\n * @public\n * @type {boolean}\n * @name locked\n * @memberof input\n */\nlet locked = false;\n\n/**\n * time interval for event throttling in milliseconds<br>\n * default value : \"1000/me.timer.maxfps\" ms<br>\n * set to 0 ms to disable the feature\n * @public\n * @type {number}\n * @name throttlingInterval\n * @memberof input\n */\nlet throttlingInterval;\n\n/**\n * return true if there are pending pointer events in the queue\n * @memberof input\n * @returns true if there are pending events\n */\nfunction hasActiveEvents() {\n    return normalizedEvents.length > 0;\n}\n\n/**\n * return true if there are register pointer events\n * @memberof input\n * @see registerPointerEvent\n * @returns true if there are pending events\n */\nfunction hasRegisteredEvents() {\n    return eventHandlers.size > 0;\n}\n\n/**\n * Translate the specified x and y values from the global (absolute)\n * coordinate to local (viewport) relative coordinate.\n * @memberof input\n * @param {number} x - the global x coordinate to be translated.\n * @param {number} y - the global y coordinate to be translated.\n * @param {Vector2d} [v] - an optional vector object where to set the translated coordinates\n * @returns {Vector2d} A vector object with the corresponding translated coordinates\n * @example\n * onMouseEvent : function (pointer) {\n *    // convert the given into local (viewport) relative coordinates\n *    let pos = me.input.globalToLocal(pointer.clientX, pointer.clientY);\n *    // do something with pos !\n * };\n */\nfunction globalToLocal(x, y, v) {\n    v = v || pool.pull(\"Vector2d\");\n    let rect = getElementBounds(renderer.getCanvas());\n    let pixelRatio = globalThis.devicePixelRatio || 1;\n    x -= rect.left + (globalThis.pageXOffset || 0);\n    y -= rect.top + (globalThis.pageYOffset || 0);\n    let scale = renderer.scaleRatio;\n    if (scale.x !== 1.0 || scale.y !== 1.0) {\n        x /= scale.x;\n        y /= scale.y;\n    }\n    return v.set(x * pixelRatio, y * pixelRatio);\n}\n\n/**\n * enable/disable all gestures on the given element.<br>\n * by default melonJS will disable browser handling of all panning and zooming gestures.\n * @memberof input\n * @see https://developer.mozilla.org/en-US/docs/Web/CSS/touch-action\n * @param {HTMLCanvasElement} element\n * @param {string} [value=\"none\"]\n */\nfunction setTouchAction(element, value) {\n    element.style[\"touch-action\"] = value || \"none\";\n}\n\n/**\n * Associate a pointer event to a keycode<br>\n * Left button â 0\n * Middle button â 1\n * Right button â 2\n * @memberof input\n * @param {number} [button=input.pointer.LEFT] - (accordingly to W3C values : 0,1,2 for left, middle and right buttons)\n * @param {input.KEY} keyCode\n * @example\n * // enable the keyboard\n * me.input.bindKey(me.input.KEY.X, \"shoot\");\n * // map the left button click on the X key (default if the button is not specified)\n * me.input.bindPointer(me.input.KEY.X);\n * // map the right button click on the X key\n * me.input.bindPointer(me.input.pointer.RIGHT, me.input.KEY.X);\n */\nfunction bindPointer() {\n    let button = (arguments.length < 2) ? pointer.LEFT : arguments[0];\n    let keyCode = (arguments.length < 2) ? arguments[0] : arguments[1];\n\n    // make sure the mouse is initialized\n    enablePointerEvent();\n\n    // throw an exception if no action is defined for the specified keycode\n    if (!getBindingKey(keyCode)) {\n        throw new Error(\"no action defined for keycode \" + keyCode);\n    }\n    // map the mouse button to the keycode\n    pointer.bind[button] = keyCode;\n}\n\n/**\n * unbind the defined keycode\n * @memberof input\n * @param {number} [button=input.pointer.LEFT] - (accordingly to W3C values : 0,1,2 for left, middle and right buttons)\n * @example\n * me.input.unbindPointer(me.input.pointer.LEFT);\n */\nfunction unbindPointer(button) {\n    // clear the event status\n    pointer.bind[\n        typeof(button) === \"undefined\" ?\n            pointer.LEFT : button\n    ] = null;\n}\n\n\n/**\n * allows registration of event listeners on the object target. <br>\n * melonJS will pass a me.Pointer object to the defined callback.\n * @see Pointer\n * @see {@link http://www.w3.org/TR/pointerevents/#list-of-pointer-events|W3C Pointer Event list}\n * @memberof input\n * @param {string} eventType - The event type for which the object is registering <br>\n * melonJS currently supports: <br>\n * <ul>\n *   <li><code>\"pointermove\"</code></li>\n *   <li><code>\"pointerdown\"</code></li>\n *   <li><code>\"pointerup\"</code></li>\n *   <li><code>\"pointerenter\"</code></li>\n *   <li><code>\"pointerover\"</code></li>\n *   <li><code>\"pointerleave\"</code></li>\n *   <li><code>\"pointercancel\"</code></li>\n *   <li><code>\"wheel\"</code></li>\n * </ul>\n * @param {Rect|Polygon|Line|Ellipse} region - a shape representing the region to register on\n * @param {Function} callback - methods to be called when the event occurs.\n * Returning `false` from the defined callback will prevent the event to be propagated to other objects\n * @example\n *  // onActivate function\n *  onActivateEvent: function () {\n *     // register on the 'pointerdown' event\n *     me.input.registerPointerEvent('pointerdown', this, (e) => this.pointerDown(e));\n *  },\n *\n *  // pointerDown event callback\n *  pointerDown: function (pointer) {\n *    // do something\n *    ....\n *    // don\"t propagate the event to other objects\n *    return false;\n *  },\n */\nfunction registerPointerEvent(eventType, region, callback) {\n    // make sure the mouse/touch events are initialized\n    enablePointerEvent();\n\n    if (pointerEventList.indexOf(eventType) === -1) {\n        throw new Error(\"invalid event type : \" + eventType);\n    }\n\n    if (typeof region === \"undefined\") {\n        throw new Error(\"registerPointerEvent: region for \" + toString(region) + \" event is undefined \");\n    }\n\n    let eventTypes = findAllActiveEvents(activeEventList, pointerEventMap[eventType]);\n\n    // register the event\n    if (!eventHandlers.has(region)) {\n        eventHandlers.set(region, {\n            region : region,\n            callbacks : {},\n            pointerId : null\n        });\n    }\n\n    // allocate array if not defined\n    let handlers = eventHandlers.get(region);\n    for (let i = 0; i < eventTypes.length; i++) {\n        const eventType = eventTypes[i];\n        if (handlers.callbacks[eventType]) {\n            handlers.callbacks[eventType].push(callback);\n        } else {\n            handlers.callbacks[eventType] = [callback];\n        }\n    }\n}\n\n/**\n * allows the removal of event listeners from the object target.\n * @see {@link http://www.w3.org/TR/pointerevents/#list-of-pointer-events|W3C Pointer Event list}\n * @memberof input\n * @param {string} eventType - The event type for which the object was registered. See {@link input.registerPointerEvent}\n * @param {Rect|Polygon|Line|Ellipse} region - the registered region to release for this event\n * @param {Function} [callback=\"all\"] - if specified unregister the event only for the specific callback\n * @example\n * // release the registered region on the 'pointerdown' event\n * me.input.releasePointerEvent('pointerdown', this);\n */\nfunction releasePointerEvent(eventType, region, callback) {\n    if (pointerEventList.indexOf(eventType) === -1) {\n        throw new Error(\"invalid event type : \" + eventType);\n    }\n\n    // convert to supported event type if pointerEvent not natively supported\n    let eventTypes = findAllActiveEvents(activeEventList, pointerEventMap[eventType]);\n\n    let handlers = eventHandlers.get(region);\n    if (typeof (handlers) !== \"undefined\") {\n        for (let i = 0; i < eventTypes.length; i++) {\n            const eventType = eventTypes[i];\n            if (handlers.callbacks[eventType]) {\n                if (typeof (callback) !== \"undefined\") {\n                    remove(handlers.callbacks[eventType], callback);\n                } else {\n                    while (handlers.callbacks[eventType].length > 0) {\n                        handlers.callbacks[eventType].pop();\n                    }\n                }\n                // free the array if empty\n                if (handlers.callbacks[eventType].length === 0) {\n                    delete handlers.callbacks[eventType];\n                }\n            }\n        }\n        if (Object.keys(handlers.callbacks).length === 0) {\n            eventHandlers.delete(region);\n        }\n    }\n}\n\n/**\n * allows the removal of all registered event listeners from the object target.\n * @memberof input\n * @param {Rect|Polygon|Line|Ellipse} region - the registered region to release event from\n * @example\n * // release all registered event on the\n * me.input.releaseAllPointerEvents(this);\n */\nfunction releaseAllPointerEvents(region) {\n    if (eventHandlers.has(region)) {\n        for (let i = 0; i < pointerEventList.length; i++) {\n            releasePointerEvent(pointerEventList[i], region);\n        }\n    }\n}\n\n/**\n * request for the pointer to be locked on the parent DOM element.\n * (Must be called in a click event or an event that requires user interaction)\n * @memberof input\n * @returns {boolean} return true if the request was successfully submitted\n * @example\n * // register on the pointer lock change event\n * event.on(event.POINTERLOCKCHANGE, (locked)=> {\n *     console.log(\"pointer lock: \" + locked);\n * });\n * // request for pointer lock\n * me.input.requestPointerLock();\n */\nfunction requestPointerLock() {\n    if (hasPointerLockSupport) {\n        let element = game.getParentElement();\n        element.requestPointerLock();\n        return true;\n    }\n    return false;\n}\n\n/**\n * Initiates an exit from pointer lock state\n * @memberof input\n * @returns {boolean} return true if the request was successfully submitted\n */\nfunction exitPointerLock() {\n    if (hasPointerLockSupport) {\n        globalThis.document.exitPointerLock();\n        return true;\n    }\n    return false;\n}\n\n// Analog deadzone\nlet deadzone = 0.1;\n\n/**\n * Normalize axis values for wired Xbox 360\n * @ignore\n */\nfunction wiredXbox360NormalizeFn(value, axis, button) {\n    if (button === this.GAMEPAD.BUTTONS.L2 || button === this.GAMEPAD.BUTTONS.R2) {\n        return (value + 1) / 2;\n    }\n    return value;\n}\n\n/**\n * Normalize axis values for OUYA\n * @ignore\n */\nfunction ouyaNormalizeFn(value, axis, button) {\n    if (value > 0) {\n        if (button === this.GAMEPAD.BUTTONS.L2) {\n            // L2 is wonky; seems like the deadzone is around 20000\n            // (That's over 15% of the total range!)\n            value = Math.max(0, value - 20000) / 111070;\n        }\n        else {\n            // Normalize [1..65536] => [0.0..0.5]\n            value = (value - 1) / 131070;\n        }\n    }\n    else {\n        // Normalize [-65536..-1] => [0.5..1.0]\n        value = (65536 + value) / 131070 + 0.5;\n    }\n\n    return value;\n}\n\n// Match vendor and product codes for Firefox\nconst vendorProductRE = /^([0-9a-f]{1,4})-([0-9a-f]{1,4})-/i;\n\n// Match leading zeros\nconst leadingZeroRE = /^0+/;\n\n/**\n * Firefox reports different ids for gamepads depending on the platform:\n * - Windows: vendor and product codes contain leading zeroes\n * - Mac: vendor and product codes are sparse (no leading zeroes)\n *\n * This function normalizes the id to support both formats\n * @ignore\n */\nfunction addMapping(id, mapping) {\n    const expanded_id = id.replace(vendorProductRE, (_, a, b) =>\n        \"000\".slice(a.length - 1) + a + \"-\" +\n        \"000\".slice(b.length - 1) + b + \"-\"\n    );\n    const sparse_id = id.replace(vendorProductRE, (_, a, b) =>\n        a.replace(leadingZeroRE, \"\") + \"-\" +\n        b.replace(leadingZeroRE, \"\") + \"-\"\n    );\n\n    // Normalize optional parameters\n    mapping.analog = mapping.analog || mapping.buttons.map(() => -1);\n    mapping.normalize_fn = mapping.normalize_fn || function (value) { return value; };\n\n    remap.set(expanded_id, mapping);\n    remap.set(sparse_id, mapping);\n}\n\n// binding list\nlet bindings = {};\n\n// mapping list\nlet remap = new Map();\n\nlet updateEventHandler;\n\n// Default gamepad mappings\n[\n    // Firefox mappings\n    [\n        \"45e-28e-Xbox 360 Wired Controller\",\n        {\n            \"axes\" : [ 0, 1, 3, 4 ],\n            \"buttons\" : [ 11, 12, 13, 14, 8, 9, -1, -1, 5, 4, 6, 7, 0, 1, 2, 3, 10 ],\n            \"analog\" : [ -1, -1, -1, -1, -1, -1, 2, 5, -1, -1, -1, -1, -1, -1, -1, -1, -1 ],\n            \"normalize_fn\" : wiredXbox360NormalizeFn\n        }\n    ],\n    [\n        \"54c-268-PLAYSTATION(R)3 Controller\",\n        {\n            \"axes\" : [ 0, 1, 2, 3 ],\n            \"buttons\" : [ 14, 13, 15, 12, 10, 11, 8, 9, 0, 3, 1, 2, 4, 6, 7, 5, 16 ]\n        }\n    ],\n    [\n        \"54c-5c4-Wireless Controller\", // PS4 Controller\n        {\n            \"axes\" : [ 0, 1, 2, 3 ],\n            \"buttons\" : [ 1, 0, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 14, 15, 16, 17, 12, 13 ]\n        }\n    ],\n    [\n        \"2836-1-OUYA Game Controller\",\n        {\n            \"axes\" : [ 0, 3, 7, 9 ],\n            \"buttons\" : [ 3, 6, 4, 5, 7, 8, 15, 16, -1, -1, 9, 10, 11, 12, 13, 14, -1 ],\n            \"analog\" : [ -1, -1, -1, -1, -1, -1, 5, 11, -1, -1, -1, -1, -1, -1, -1, -1, -1 ],\n            \"normalize_fn\" : ouyaNormalizeFn\n        }\n    ],\n\n    // Chrome mappings\n    [\n        \"OUYA Game Controller (Vendor: 2836 Product: 0001)\",\n        {\n            \"axes\" : [ 0, 1, 3, 4 ],\n            \"buttons\" : [ 0, 3, 1, 2, 4, 5, 12, 13, -1, -1, 6, 7, 8, 9, 10, 11, -1 ],\n            \"analog\" : [ -1, -1, -1, -1, -1, -1, 2, 5, -1, -1, -1, -1, -1, -1, -1, -1, -1 ],\n            \"normalize_fn\" : ouyaNormalizeFn\n        }\n    ]\n].forEach((value) => {\n    addMapping(value[0], value[1]);\n});\n\n/**\n * Update gamepad status\n * @ignore\n */\nlet updateGamepads = function () {\n    let gamepads = navigator.getGamepads();\n\n    // Trigger button bindings\n    Object.keys(bindings).forEach((index) => {\n        let gamepad = gamepads[index];\n        if (!gamepad) {\n            return;\n        }\n\n        let mapping = null;\n        if (gamepad.mapping !== \"standard\") {\n            mapping = remap.get(gamepad.id);\n        }\n\n        let binding = bindings[index];\n\n        // Iterate all buttons that have active bindings\n        Object.keys(binding.buttons).forEach((button) => {\n            let last = binding.buttons[button];\n            let mapped_button = button;\n            let mapped_axis = -1;\n\n            // Remap buttons if necessary\n            if (mapping) {\n                mapped_button = mapping.buttons[button];\n                mapped_axis = mapping.analog[button];\n                if (mapped_button < 0 && mapped_axis < 0) {\n                    // Button is not mapped\n                    return;\n                }\n            }\n\n            // Get mapped button\n            let current = gamepad.buttons[mapped_button] || {};\n\n            // Remap an axis to an analog button\n            if (mapping) {\n                if (mapped_axis >= 0) {\n                    let value = mapping.normalize_fn(gamepad.axes[mapped_axis], -1, +button);\n\n                    // Create a new object, because GamepadButton is read-only\n                    current = {\n                        \"value\" : value,\n                        \"pressed\" : current.pressed || (Math.abs(value) >= deadzone)\n                    };\n                }\n            }\n\n            emit(GAMEPAD_UPDATE, index, \"buttons\", +button, current);\n\n            // Edge detection\n            if (!last.pressed && current.pressed) {\n                triggerKeyEvent(last.keyCode, true, mapped_button + 256);\n            }\n            else if (last.pressed && !current.pressed) {\n                triggerKeyEvent(last.keyCode, false, mapped_button + 256);\n            }\n\n            // Update last button state\n            last.value = current.value;\n            last.pressed = current.pressed;\n        });\n\n        // Iterate all axes that have active bindings\n        Object.keys(binding.axes).forEach((axis) => {\n            let last = binding.axes[axis];\n            let mapped_axis = axis;\n\n            // Remap buttons if necessary\n            if (mapping) {\n                mapped_axis = mapping.axes[axis];\n                if (mapped_axis < 0) {\n                    // axe is not mapped\n                    return;\n                }\n            }\n\n            // retrieve the current value and normalize if necessary\n            let value = gamepad.axes[mapped_axis];\n            if (typeof(value) === \"undefined\") {\n                return;\n            }\n            if (mapping) {\n                value = mapping.normalize_fn(value, +axis, -1);\n            }\n            // normalize value into a [-1, 1] range value (treat 0 as positive)\n            let range = Math.sign(value) || 1;\n            if (last[range].keyCode === 0) {\n                return;\n            }\n            let pressed = (Math.abs(value) >= (deadzone + Math.abs(last[range].threshold)));\n\n            emit(GAMEPAD_UPDATE, index, \"axes\", +axis, value);\n\n            // Edge detection\n            if (!last[range].pressed && pressed) {\n                // Release the opposite direction, if necessary\n                if (last[-range].pressed) {\n                    triggerKeyEvent(last[-range].keyCode, false, mapped_axis + 256);\n                    last[-range].value = 0;\n                    last[-range].pressed = false;\n                }\n\n                triggerKeyEvent(last[range].keyCode, true, mapped_axis + 256);\n            }\n            else if ((last[range].pressed || last[-range].pressed) && !pressed) {\n                range = last[range].pressed ? range : -range;\n                triggerKeyEvent(last[range].keyCode, false, mapped_axis + 256);\n            }\n\n            // Update last axis state\n            last[range].value = value;\n            last[range].pressed = pressed;\n        });\n    });\n};\n\n// gamepad connected callback\nif (globalThis.navigator && typeof globalThis.navigator.getGamepads === \"function\") {\n    globalThis.addEventListener(\"gamepadconnected\", (e) => {\n        emit(GAMEPAD_CONNECTED, e.gamepad);\n    }, false);\n\n    /*\n     * gamepad disconnected callback\n     */\n    globalThis.addEventListener(\"gamepaddisconnected\", (e) => {\n        emit(GAMEPAD_DISCONNECTED, e.gamepad);\n    }, false);\n}\n\n/*\n * PUBLIC STUFF\n */\n\n/**\n * Namespace for standard gamepad mapping constants\n * @public\n * @namespace GAMEPAD\n * @memberof input\n */\nlet GAMEPAD = {\n    /**\n     * Standard gamepad mapping information for axes<br>\n     * <ul>\n     *   <li>Left control stick: <code>LX</code> (horizontal), <code>LY</code> (vertical)</li>\n     *   <li>Right control stick: <code>RX</code> (horizontal), <code>RY</code> (vertical)</li>\n     *   <li>Extras: <code>EXTRA_1</code>, <code>EXTRA_2</code>, <code>EXTRA_3</code>, <code>EXTRA_4</code></li>\n     * </ul>\n     * @public\n     * @name AXES\n     * @enum {number}\n     * @memberof input.GAMEPAD\n     * @see https://w3c.github.io/gamepad/#remapping\n     */\n    \"AXES\" : {\n        \"LX\"        : 0,\n        \"LY\"        : 1,\n        \"RX\"        : 2,\n        \"RY\"        : 3,\n        \"EXTRA_1\"   : 4,\n        \"EXTRA_2\"   : 5,\n        \"EXTRA_3\"   : 6,\n        \"EXTRA_4\"   : 7\n    },\n\n    /**\n     * Standard gamepad mapping information for buttons<br>\n     * <ul>\n     *   <li>Face buttons: <code>FACE_1</code>, <code>FACE_2</code>, <code>FACE_3</code>, <code>FACE_4</code></li>\n     *   <li>D-Pad: <code>UP</code>, <code>DOWN</code>, <code>LEFT</code>, <code>RIGHT</code></li>\n     *   <li>Shoulder buttons: <code>L1</code>, <code>L2</code>, <code>R1</code>, <code>R2</code></li>\n     *   <li>Analog stick (clicks): <code>L3</code>, <code>R3</code></li>\n     *   <li>Navigation: <code>SELECT</code> (<code>BACK</code>), <code>START</code> (<code>FORWARD</code>), <code>HOME</code></li>\n     *   <li>Extras: <code>EXTRA_1</code>, <code>EXTRA_2</code>, <code>EXTRA_3</code>, <code>EXTRA_4</code></li>\n     * </ul>\n     * @public\n     * @name BUTTONS\n     * @enum {number}\n     * @memberof input.GAMEPAD\n     * @see https://w3c.github.io/gamepad/#remapping\n     */\n    \"BUTTONS\" : {\n        \"FACE_1\"    : 0,\n        \"FACE_2\"    : 1,\n        \"FACE_3\"    : 2,\n        \"FACE_4\"    : 3,\n        \"L1\"        : 4,\n        \"R1\"        : 5,\n        \"L2\"        : 6,\n        \"R2\"        : 7,\n        \"SELECT\"    : 8,\n        \"BACK\"      : 8,\n        \"START\"     : 9,\n        \"FORWARD\"   : 9,\n        \"L3\"        : 10,\n        \"R3\"        : 11,\n        \"UP\"        : 12,\n        \"DOWN\"      : 13,\n        \"LEFT\"      : 14,\n        \"RIGHT\"     : 15,\n        \"HOME\"      : 16,\n        \"EXTRA_1\"   : 17,\n        \"EXTRA_2\"   : 18,\n        \"EXTRA_3\"   : 19,\n        \"EXTRA_4\"   : 20\n    }\n};\n\n/**\n * Associate a gamepad event to a keycode\n * @name bindGamepad\n * @memberof input\n * @public\n * @param {number} index - Gamepad index\n * @param {object} button - Button/Axis definition\n * @param {string} button.type - \"buttons\" or \"axes\"\n * @param {number} button.code - button or axis code id (See {@link input.GAMEPAD.BUTTONS}, {@link input.GAMEPAD.AXES})\n * @param {number} [button.threshold=1] - value indicating when the axis should trigger the keycode (e.g. -0.5 or 0.5)\n * @param {number} keyCode - (See {@link input.KEY})\n * @example\n * // enable the keyboard\n * me.input.bindKey(me.input.KEY.X, \"shoot\");\n * ...\n * // map the lower face button on the first gamepad to the X key\n * me.input.bindGamepad(0, {type:\"buttons\", code: me.input.GAMEPAD.BUTTONS.FACE_1}, me.input.KEY.X);\n * // map the left axis value on the first gamepad to the LEFT key\n * me.input.bindGamepad(0, {type:\"axes\", code: me.input.GAMEPAD.AXES.LX, threshold: -0.5}, me.input.KEY.LEFT);\n */\nfunction bindGamepad(index, button, keyCode) {\n    // Throw an exception if no action is defined for the specified keycode\n    if (!getBindingKey(keyCode)) {\n        throw new Error(\"no action defined for keycode \" + keyCode);\n    }\n\n    // register to the the update event if not yet done and supported by the browser\n    // if not supported, the function will fail silently (-> update loop won't be called)\n    if (typeof updateEventHandler === \"undefined\" && typeof navigator.getGamepads === \"function\") {\n        updateEventHandler = on(GAME_BEFORE_UPDATE, updateGamepads);\n    }\n\n    // Allocate bindings if not defined\n    if (!bindings[index]) {\n        bindings[index] = {\n            \"axes\" : {},\n            \"buttons\" : {}\n        };\n    }\n\n    let mapping = {\n        \"keyCode\" : keyCode,\n        \"value\" : 0,\n        \"pressed\" : false,\n        \"threshold\" : button.threshold // can be undefined\n    };\n    let binding = bindings[index][button.type];\n\n    // Map the gamepad button or axis to the keycode\n    if (button.type === \"buttons\") {\n        // buttons are defined by a `gamePadButton` object\n        binding[button.code] = mapping;\n    } else if (button.type === \"axes\") {\n        // normalize threshold into a value that can represent both side of the axis\n        let range = (Math.sign(button.threshold) || 1);\n        // axes are defined using two objects; one for negative and one for positive\n        if (!binding[button.code]) {\n            binding[button.code] = {};\n        }\n        let axes = binding[button.code];\n        axes[range] = mapping;\n\n        // Ensure the opposite axis exists\n        if (!axes[-range]) {\n            axes[-range] = {\n                \"keyCode\" : 0,\n                \"value\" : 0,\n                \"pressed\" : false,\n                \"threshold\" : -range\n            };\n        }\n    }\n}\n\n/**\n * unbind the defined keycode\n * @name unbindGamepad\n * @memberof input\n * @public\n * @param {number} index - Gamepad index\n * @param {number} button - (See {@link input.GAMEPAD.BUTTONS})\n * @example\n * me.input.unbindGamepad(0, me.input.GAMEPAD.BUTTONS.FACE_1);\n */\nfunction unbindGamepad(index, button) {\n    if (!bindings[index]) {\n        throw new Error(\"no bindings for gamepad \" + index);\n    }\n    bindings[index].buttons[button] = {};\n}\n\n/**\n * Set deadzone for analog gamepad inputs<br>\n * The default deadzone is 0.1 (10%) Analog values less than this will be ignored\n * @name setGamepadDeadzone\n * @memberof input\n * @public\n * @param {number} value - Deadzone value\n */\nfunction setGamepadDeadzone(value) {\n    deadzone = value;\n}\n\n/**\n * specify a custom mapping for a specific gamepad id<br>\n * see below for the default mapping : <br>\n * <center><img src=\"images/gamepad_diagram.png\"/></center><br>\n * @name setGamepadMapping\n * @memberof input\n * @public\n * @param {string} id - Gamepad id string\n * @param {object} mapping - A hash table\n * @param {number[]} mapping.axes - Standard analog control stick axis locations\n * @param {number[]} mapping.buttons - Standard digital button locations\n * @param {number[]} [mapping.analog] - Analog axis locations for buttons\n * @param {Function} [mapping.normalize_fn] - a function that returns a normalized value in range [-1.0..1.0] for the given value, axis and button\n * @example\n * // A weird controller that has its axis mappings reversed\n * me.input.setGamepadMapping(\"Generic USB Controller\", {\n *   \"axes\" : [ 3, 2, 1, 0 ],\n *   \"buttons\" : [ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16 ]\n * });\n *\n * // Mapping extra axes to analog buttons\n * me.input.setGamepadMapping(\"Generic Analog Controller\", {\n *   \"axes\" : [ 0, 1, 2, 3 ],\n *   \"buttons\" : [ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16 ],\n *\n *   // Raw axis 4 is mapped to GAMEPAD.BUTTONS.FACE_1\n *   // Raw axis 5 is mapped to GAMEPAD.BUTTONS.FACE_2\n *   // etc...\n *   // Also maps left and right triggers\n *   \"analog\" : [ 4, 5, 6, 7, -1, -1, 8, 9, -1, -1, -1, -1, -1, -1, -1, -1, -1 ],\n *\n *   // Normalize the value of button L2: [-1.0..1.0] => [0.0..1.0]\n *   \"normalize_fn\" : function (value, axis, button) {\n *     return ((button === me.input.GAMEPAD.BUTTONS.L2) ? ((value + 1) / 2) : value) || 0;\n *   }\n * });\n */\nlet setGamepadMapping = addMapping;\n\n/**\n * @namespace input\n */\n\n/**\n * specify if melonJS should prevent all default browser action on registered events.\n * @public\n * @type {boolean}\n * @default true\n * @name preventDefault\n * @memberof input\n */\nlet preventDefault = true;\n\nvar input = {\n\t__proto__: null,\n\tGAMEPAD: GAMEPAD,\n\tKEY: KEY,\n\tbindGamepad: bindGamepad,\n\tbindKey: bindKey,\n\tbindPointer: bindPointer,\n\texitPointerLock: exitPointerLock,\n\tgetBindingKey: getBindingKey,\n\tglobalToLocal: globalToLocal,\n\thasActiveEvents: hasActiveEvents,\n\thasRegisteredEvents: hasRegisteredEvents,\n\tinitKeyboardEvent: initKeyboardEvent,\n\tisKeyPressed: isKeyPressed,\n\tget keyBoardEventTarget () { return keyBoardEventTarget; },\n\tkeyStatus: keyStatus,\n\tget locked () { return locked; },\n\tpointer: pointer,\n\tget pointerEventTarget () { return pointerEventTarget; },\n\tpreventDefault: preventDefault,\n\tregisterPointerEvent: registerPointerEvent,\n\treleaseAllPointerEvents: releaseAllPointerEvents,\n\treleasePointerEvent: releasePointerEvent,\n\trequestPointerLock: requestPointerLock,\n\tsetGamepadDeadzone: setGamepadDeadzone,\n\tsetGamepadMapping: setGamepadMapping,\n\tsetTouchAction: setTouchAction,\n\tget throttlingInterval () { return throttlingInterval; },\n\ttriggerKeyEvent: triggerKeyEvent,\n\tunbindGamepad: unbindGamepad,\n\tunbindKey: unbindKey,\n\tunbindPointer: unbindPointer,\n\tunlockKey: unlockKey\n};\n\n/**\n * Hash map of GLSL data types to WebGL Uniform methods\n * @ignore\n */\nconst fnHash = {\n    \"bool\"      : \"1i\",\n    \"int\"       : \"1i\",\n    \"float\"     : \"1f\",\n    \"vec2\"      : \"2fv\",\n    \"vec3\"      : \"3fv\",\n    \"vec4\"      : \"4fv\",\n    \"bvec2\"     : \"2iv\",\n    \"bvec3\"     : \"3iv\",\n    \"bvec4\"     : \"4iv\",\n    \"ivec2\"     : \"2iv\",\n    \"ivec3\"     : \"3iv\",\n    \"ivec4\"     : \"4iv\",\n    \"mat2\"      : \"Matrix2fv\",\n    \"mat3\"      : \"Matrix3fv\",\n    \"mat4\"      : \"Matrix4fv\",\n    \"sampler2D\" : \"1i\"\n};\n\n/**\n * @ignore\n */\nfunction extractUniforms(gl, shader) {\n    let uniforms = {},\n        uniRx = /uniform\\s+(\\w+)\\s+(\\w+)/g,\n        uniformsData = {},\n        descriptor = {},\n        locations = {},\n        match;\n\n    // Detect all uniform names and types\n    [ shader.vertex, shader.fragment ].forEach((shader) => {\n        while ((match = uniRx.exec(shader))) {\n            uniformsData[match[2]] = match[1];\n        }\n    });\n\n    // Get uniform references\n    Object.keys(uniformsData).forEach((name) => {\n        let type = uniformsData[name];\n        locations[name] = gl.getUniformLocation(shader.program, name);\n\n        descriptor[name] = {\n            \"get\" : (function (name) {\n                /*\n                 * A getter for the uniform location\n                 */\n                return function () {\n                    return locations[name];\n                };\n            })(name),\n            \"set\" : (function (name, type, fn) {\n                if (type.indexOf(\"mat\") === 0) {\n                    /*\n                     * A generic setter for uniform matrices\n                     */\n                    return function (val) {\n                        gl[fn](locations[name], false, val);\n                    };\n                }\n                else {\n                    /*\n                     * A generic setter for uniform vectors\n                     */\n                    return function (val) {\n                        let fnv = fn;\n                        if (val.length && fn.slice(-1) !== \"v\") {\n                            fnv += \"v\";\n                        }\n                        gl[fnv](locations[name], val);\n                    };\n                }\n            })(name, type, \"uniform\" + fnHash[type])\n        };\n    });\n    Object.defineProperties(uniforms, descriptor);\n\n    return uniforms;\n}\n\n/**\n * @ignore\n */\nfunction extractAttributes(gl, shader) {\n    let attributes = {},\n        attrRx = /attribute\\s+\\w+\\s+(\\w+)/g,\n        match,\n        i = 0;\n\n    // Detect all attribute names\n    while ((match = attrRx.exec(shader.vertex))) {\n        attributes[match[1]] = i++;\n    }\n\n    return attributes;\n}\n\n/**\n * @ignore\n */\nfunction compileShader(gl, type, source) {\n    let shader = gl.createShader(type);\n    gl.shaderSource(shader, source);\n    gl.compileShader(shader);\n\n    if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n        throw new Error(gl.getShaderInfoLog(shader));\n    }\n\n    return shader;\n}\n\n/**\n * Compile GLSL into a shader object\n * @ignore\n */\nfunction compileProgram(gl, vertex, fragment, attributes) {\n    let vertShader = compileShader(gl, gl.VERTEX_SHADER, vertex);\n    let fragShader = compileShader(gl, gl.FRAGMENT_SHADER, fragment);\n\n    let program = gl.createProgram();\n\n    gl.attachShader(program, vertShader);\n    gl.attachShader(program, fragShader);\n\n\n    // force vertex attributes to use location 0 as starting location to prevent\n    // browser to do complicated emulation when running on desktop OpenGL (e.g. on macOS)\n    for (let location in attributes) {\n        gl.bindAttribLocation(program, attributes[location], location);\n    }\n\n    gl.linkProgram(program);\n\n    if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n        let error_msg =\n            \"Error initializing Shader \" + this + \"\\n\" +\n            \"gl.VALIDATE_STATUS: \" + gl.getProgramParameter(program, gl.VALIDATE_STATUS) + \"\\n\" +\n            \"gl.getError()\" + gl.getError() + \"\\n\" +\n            \"gl.getProgramInfoLog()\" + gl.getProgramInfoLog(program);\n        // house cleaning\n        gl.deleteProgram(program);\n        program = null;\n        // throw the exception\n        throw new Error(error_msg);\n    }\n\n    gl.useProgram(program);\n\n    // clean-up\n    gl.deleteShader(vertShader);\n    gl.deleteShader(fragShader);\n\n    return program;\n}\n\n/**\n * set precision for the fiven shader source\n * won't do anything if the precision is already specified\n * @ignore\n */\nfunction setPrecision(src, precision) {\n    if (src.substring(0, 9) !== \"precision\") {\n        return \"precision \" + precision + \" float;\" + src;\n    }\n    return src;\n}\n\n/**\n * return the highest precision format supported by this device for GL Shaders\n * @ignore\n * @param {WebGLRenderingContext} gl - the current WebGL context\n * @returns {boolean} \"lowp\", \"mediump\", or \"highp\"\n */\nfunction getMaxShaderPrecision(gl) {\n    if (gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.HIGH_FLOAT).precision > 0 &&\n        gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.HIGH_FLOAT).precision > 0) {\n        return \"highp\";\n    }\n    if (gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.MEDIUM_FLOAT).precision > 0 &&\n        gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.MEDIUM_FLOAT).precision > 0) {\n        return \"mediump\";\n    }\n    return \"lowp\";\n}\n\n/**\n * clean the given source from space, comments, etc...\n * @ignore\n */\nfunction minify(src) {\n    // remove comments\n    src = src.replace(/\\/\\*[\\s\\S]*?\\*\\/|([^\\\\:]|^)\\/\\/.*$/gm, \"$1\");\n    // Remove leading and trailing whitespace from lines\n    src = src.replace(/(\\\\n\\s+)|(\\s+\\\\n)/g, \"\");\n    // Remove line breaks\n    src = src.replace(/(\\\\r|\\\\n)+/g, \"\");\n    // Remove unnecessary whitespace\n    src = src.replace(/\\s*([;,[\\](){}\\\\\\/\\-+*|^&!=<>?~%])\\s*/g, \"$1\");\n\n    return src;\n}\n\n/**\n * @classdesc\n * a base GL Shader object\n */\nclass GLShader {\n    /**\n     * @param {WebGLRenderingContext} gl - the current WebGL rendering context\n     * @param {string} vertex - a string containing the GLSL source code to set\n     * @param {string} fragment - a string containing the GLSL source code to set\n     * @param {string} [precision=auto detected] - float precision ('lowp', 'mediump' or 'highp').\n     * @see https://developer.mozilla.org/en-US/docs/Games/Techniques/3D_on_the_web/GLSL_Shaders\n     * @example\n     * // create a basic shader\n     * let myShader = new me.GLShader(\n     *    // WebGL rendering context\n     *    gl,\n     *    // vertex shader\n     *    [\n     *        \"void main() {\",\n     *        \"    gl_Position = doMathToMakeClipspaceCoordinates;\",\n     *        \"}\"\n     *    ].join(\"\\n\"),\n     *    // fragment shader\n     *    [\n     *        \"void main() {\",\n     *        \"    gl_FragColor = doMathToMakeAColor;\",\n     *        \"}\"\n     *    ].join(\"\\n\")\n     *  )\n     * // use the shader\n     * myShader.bind();\n     */\n    constructor(gl, vertex, fragment, precision) {\n\n        /**\n         * the active gl rendering context\n         * @type {WebGLRenderingContext}\n         */\n        this.gl = gl;\n\n        /**\n         * the vertex shader source code\n         * @type {string}\n         */\n        this.vertex = setPrecision(minify(vertex), precision || getMaxShaderPrecision(this.gl));\n\n        /**\n         * the fragment shader source code\n         * @type {string}\n         */\n        this.fragment = setPrecision(minify(fragment), precision || getMaxShaderPrecision(this.gl));\n\n        /**\n         * the location attributes of the shader\n         * @type {GLint[]}\n         */\n        this.attributes = extractAttributes(this.gl, this);\n\n\n        /**\n         * a reference to the shader program (once compiled)\n         * @type {WebGLProgram}\n         */\n        this.program = compileProgram(this.gl, this.vertex, this.fragment, this.attributes);\n\n        /**\n         * the uniforms of the shader\n         * @type {object}\n         */\n        this.uniforms = extractUniforms(this.gl, this);\n\n        // destroy the shader on context lost (will be recreated on context restore)\n        on(ONCONTEXT_LOST, this.destroy, this);\n    }\n\n    /**\n     * Installs this shader program as part of current rendering state\n     */\n    bind() {\n        this.gl.useProgram(this.program);\n    }\n\n    /**\n     * returns the location of an attribute variable in this shader program\n     * @param {string} name - the name of the attribute variable whose location to get.\n     * @returns {GLint} number indicating the location of the variable name if found. Returns -1 otherwise\n     */\n    getAttribLocation(name) {\n        let attr = this.attributes[name];\n        if (typeof attr !== \"undefined\") {\n            return attr;\n        } else {\n            return -1;\n        }\n    }\n\n    /**\n     * Set the uniform to the given value\n     * @param {string} name - the uniform name\n     * @param {object|Float32Array} value - the value to assign to that uniform\n     * @example\n     * myShader.setUniform(\"uProjectionMatrix\", this.projectionMatrix);\n     */\n    setUniform(name, value) {\n        let uniforms = this.uniforms;\n        if (typeof uniforms[name] !== \"undefined\") {\n            if (typeof value === \"object\" && typeof value.toArray === \"function\") {\n                uniforms[name] = value.toArray();\n            } else {\n                uniforms[name] = value;\n            }\n        } else {\n            throw new Error(\"undefined (\" + name + \") uniform for shader \" + this);\n        }\n    }\n\n    /**\n     * activate the given vertex attribute for this shader\n     * @param {WebGLRenderingContext} gl - the current WebGL rendering context\n     * @param {object[]} attributes - an array of vertex attributes\n     * @param {number} vertexByteSize - the size of a single vertex in bytes\n     */\n    setVertexAttributes(gl, attributes, vertexByteSize) {\n        // set the vertex attributes\n        for (let index = 0; index < attributes.length; ++index) {\n            let element = attributes[index];\n            let location = this.getAttribLocation(element.name);\n\n            if (location !== -1) {\n                gl.enableVertexAttribArray(location);\n                gl.vertexAttribPointer(location, element.size, element.type, element.normalized, vertexByteSize, element.offset);\n            } else {\n                gl.disableVertexAttribArray(index);\n            }\n        }\n    }\n\n    /**\n     * destroy this shader objects resources (program, attributes, uniforms)\n     */\n    destroy() {\n        this.uniforms = null;\n        this.attributes = null;\n\n        this.gl.deleteProgram(this.program);\n\n        this.vertex = null;\n        this.fragment = null;\n    }\n}\n\n/**\n * additional import for TypeScript\n * @import Vector2d from \"./../math/vector2.js\";\n * @import Vector3d from \"./../math/vector3.js\";\n * @import Matrix2d from \"./../math/matrix2.js\";\n * @import Entity from \"./entity/entity.js\";\n * @import Container from \"./container.js\";\n * @import Line from \"./../geometries/line.js\";\n * @import Ellipse from \"./../geometries/ellipse.js\";\n * @import Polygon from \"./../geometries/poly.js\";\n * @import RoundRect from \"./../geometries/roundrect.js\";\n * @import Application from \"./../application/application.js\";\n * @import CanvasRenderer from \"./../video/canvas/canvas_renderer.js\";\n * @import WebGLRenderer from \"./../video/webgl/webgl_renderer.js\";\n * @import ResponseObject from \"./../physics/response.js\";\n **/\n\n\n/**\n * @classdesc\n * A base class for renderable objects.\n * @augments Rect\n */\nclass Renderable extends Rect {\n    /**\n     * @param {number} x - position of the renderable object (accessible through inherited pos.x property)\n     * @param {number} y - position of the renderable object (accessible through inherited pos.y property)\n     * @param {number} width - object width\n     * @param {number} height - object height\n     */\n    constructor(x, y, width, height) {\n\n        // parent constructor\n        super(x, y, width, height);\n\n        if (this.pos instanceof ObservableVector3d) {\n            this.pos.setMuted(x, y, 0).setCallback(this.updateBoundsPos, this);\n        } else {\n            /**\n             * Position of the Renderable relative to its parent container\n             * @public\n             * @type {ObservableVector3d}\n             */\n            this.pos = pool.pull(\"ObservableVector3d\", x, y, 0, { onUpdate: this.updateBoundsPos, scope: this});\n        }\n\n        if (this.anchorPoint instanceof ObservableVector2d) {\n            this.anchorPoint.setMuted(0.5, 0.5).setCallback(this.onAnchorUpdate, this);\n        } else {\n            /**\n             * The anchor point is used for attachment behavior, and/or when applying transformations.<br>\n             * The coordinate system places the origin at the top left corner of the frame (0, 0) and (1, 1) means the bottom-right corner<br>\n             * <img src=\"images/anchor_point.png\"/><br>\n             * a Renderable's anchor point defaults to (0.5,0.5), which corresponds to the center position.<br>\n             * <br>\n             * <i><b>Note:</b> Object created through Tiled will have their anchorPoint set to (0, 0) to match Tiled Level editor implementation.\n             * To specify a value through Tiled, use a json expression like `json:{\"x\":0.5,\"y\":0.5}`. </i>\n             * @type {ObservableVector2d}\n             * @default <0.5,0.5>\n             */\n            this.anchorPoint = pool.pull(\"ObservableVector2d\", 0.5, 0.5, { onUpdate: this.onAnchorUpdate, scope: this });\n        }\n\n        if (typeof this.currentTransform === \"undefined\") {\n            /**\n             * the renderable default transformation matrix\n             * @type {Matrix2d}\n             */\n            this.currentTransform = pool.pull(\"Matrix2d\");\n        }\n        this.currentTransform.identity();\n\n        /**\n         * the renderable physic body\n         * @type {Body}\n         * @example\n         *  // define a new Player Class\n         *  class PlayerEntity extends me.Sprite {\n         *      // constructor\n         *      constructor(x, y, settings) {\n         *          // call the parent constructor\n         *          super(x, y , settings);\n         *\n         *          // define a basic walking animation\n         *          this.addAnimation(\"walk\",  [...]);\n         *          // define a standing animation (using the first frame)\n         *          this.addAnimation(\"stand\",  [...]);\n         *          // set the standing animation as default\n         *          this.setCurrentAnimation(\"stand\");\n         *\n         *          // add a physic body\n         *          this.body = new me.Body(this);\n         *          // add a default collision shape\n         *          this.body.addShape(new me.Rect(0, 0, this.width, this.height));\n         *          // configure max speed, friction, and initial force to be applied\n         *          this.body.setMaxVelocity(3, 15);\n         *          this.body.setFriction(0.4, 0);\n         *          this.body.force.set(3, 0);\n         *          this.isKinematic = false;\n         *\n         *          // set the display to follow our position on both axis\n         *          me.game.viewport.follow(this.pos, me.game.viewport.AXIS.BOTH);\n         *      }\n         *\n         *      ...\n         *\n         * }\n         */\n        this.body = undefined;\n\n        /**\n        * (G)ame (U)nique (Id)entifier\" <br>\n        * a GUID will be allocated for any renderable object added <br>\n        * to an object container (including the `me.game.world` container)\n        * @type {string}\n        */\n        this.GUID = undefined;\n\n        /**\n         * an event handler that is called when the renderable leave or enter a camera viewport\n         * @type {Function}\n         * @default undefined\n         * @example\n         * this.onVisibilityChange = function(inViewport) {\n         *     if (inViewport === true) {\n         *         console.log(\"object has entered the in a camera viewport!\");\n         *     }\n         * };\n         */\n        this.onVisibilityChange = undefined;\n\n        /**\n         * Whether the renderable object will always update, even when outside of the viewport<br>\n         * @type {boolean}\n         * @default false\n         */\n        this.alwaysUpdate = false;\n\n        /**\n         * Whether to update this object when the game is paused.\n         * @type {boolean}\n         * @default false\n         */\n        this.updateWhenPaused = false;\n\n        /**\n         * make the renderable object persistent over level changes<br>\n         * @type {boolean}\n         * @default false\n         */\n        this.isPersistent = false;\n\n        /**\n         * If true, this renderable will be rendered using screen coordinates,\n         * as opposed to world coordinates. Use this, for example, to define UI elements.\n         * @type {boolean}\n         * @default false\n         */\n        this.floating = false;\n\n        /**\n         * When enabled, an object container will automatically apply\n         * any defined transformation before calling the child draw method.\n         * @type {boolean}\n         * @default true\n         * @example\n         * // enable \"automatic\" transformation when the object is activated\n         * onActivateEvent: function () {\n         *     // reset the transformation matrix\n         *     this.currentTransform.identity();\n         *     // ensure the anchor point is the renderable center\n         *     this.anchorPoint.set(0.5, 0.5);\n         *     // enable auto transform\n         *     this.autoTransform = true;\n         *     ....\n         * }\n         */\n        this.autoTransform = true;\n\n        /**\n         * Define the renderable opacity<br>\n         * Set to zero if you do not wish an object to be drawn\n         * @see Renderable#setOpacity\n         * @see Renderable#getOpacity\n         * @type {number}\n         * @default 1.0\n         */\n        this.alpha = 1.0;\n\n        /**\n         * a reference to the parent object that contains this renderable\n         * @type {Container|Entity}\n         * @default undefined\n         */\n        this.ancestor = undefined;\n\n        /**\n         * A mask limits rendering elements to the shape and position of the given mask object.\n         * So, if the renderable is larger than the mask, only the intersecting part of the renderable will be visible.\n         * @type {Rect|RoundRect|Polygon|Line|Ellipse}\n         * @default undefined\n         * @example\n         * // apply a mask in the shape of a Star\n         * myNPCSprite.mask = new me.Polygon(myNPCSprite.width / 2, 0, [\n         *    // draw a star\n         *    {x: 0, y: 0},\n         *    {x: 14, y: 30},\n         *    {x: 47, y: 35},\n         *    {x: 23, y: 57},\n         *    {x: 44, y: 90},\n         *    {x: 0, y: 62},\n         *    {x: -44, y: 90},\n         *    {x: -23, y: 57},\n         *    {x: -47, y: 35},\n         *    {x: -14, y: 30}\n         * ]);\n         */\n        this.mask = undefined;\n\n        /**\n          * (Experimental) an optional shader, to be used instead of the default built-in one, when drawing this renderable (WebGL only)\n          * @type {GLShader}\n          * @default undefined\n        */\n        this.shader = undefined;\n\n        /**\n         * the blend mode to be applied to this renderable (see renderer setBlendMode for available blend mode)\n         * @type {string}\n         * @default \"normal\"\n         * @see CanvasRenderer#setBlendMode\n         * @see WebGLRenderer#setBlendMode\n         */\n        this.blendMode = \"normal\";\n\n        /**\n         * The name of the renderable\n         * @type {string}\n         * @default \"\"\n         */\n        this.name = \"\";\n\n        /**\n         * to identify the object as a renderable object\n         * @ignore\n         */\n        this.isRenderable = true;\n\n        /**\n         * If true then physic collision and input events will not impact this renderable\n         * @type {boolean}\n         * @default true\n         */\n        this.isKinematic = true;\n\n        /**\n         * when true the renderable will be redrawn during the next update cycle\n         * @type {boolean}\n         * @default true\n         */\n        this.isDirty = true;\n\n        // keep track of when we flip\n        this._flip = {\n            x : false,\n            y : false\n        };\n\n        // viewport flag\n        this._inViewport = false;\n\n        // cache value for the parentApp\n        this._parentApp = undefined;\n\n        // renderable cache tint value used by the getter/setter\n        this._tint = pool.pull(\"Color\", 255, 255, 255, 1.0);\n\n        // ensure it's fully opaque by default\n        this.setOpacity(1.0);\n    }\n\n    /**\n     * returns the parent application (or game) to which this renderable is attached to\n     * @return {Application} the parent application or undefined if not attached to any container/app\n     */\n    get parentApp() {\n        if (typeof this._parentApp === \"undefined\") {\n            if (typeof this.ancestor !== \"undefined\" && typeof this.ancestor.getRootAncestor === \"function\") {\n                // the `app` property is only defined in the world \"root\" container\n                this._parentApp = this.ancestor.getRootAncestor().app;\n            }\n        }\n        return this._parentApp;\n    }\n\n    /**\n     * Whether the renderable object is floating (i.e. used screen coordinates), or contained in a floating parent container\n     * @see Renderable#floating\n     * @type {boolean}\n     */\n    get isFloating() {\n        return this.floating === true || (typeof this.ancestor !== \"undefined\" && this.ancestor.isFloating === true);\n    }\n\n    /**\n     * define a tint for this renderable. a (255, 255, 255) r, g, b value will remove the tint effect.\n     * @type {Color}\n     * @default (255, 255, 255)\n     * @example\n     * // add a red tint to this renderable\n     * this.tint.setColor(255, 128, 128);\n     * // remove the tint\n     * this.tint.setColor(255, 255, 255);\n     */\n    get tint() {\n        return this._tint;\n    }\n    set tint(value) {\n        this._tint.copy(value);\n        this.isDirty = true;\n    }\n\n    /**\n     * the depth of this renderable on the z axis\n     * @type {number}\n     */\n    get depth() {\n        return this.pos.z;\n    }\n    set depth(value) {\n        this.pos.z = value;\n        this.isDirty = true;\n    }\n\n    /**\n     * Whether the renderable object is visible and within the viewport\n     * @type {boolean}\n     * @default false\n     */\n    get inViewport() {\n        return this._inViewport;\n    }\n    set inViewport(value) {\n        if (this._inViewport !== value) {\n            this._inViewport = value;\n            if (typeof this.onVisibilityChange === \"function\") {\n                this.onVisibilityChange.call(this, value);\n            }\n        }\n    }\n\n    /**\n     * returns true if this renderable is flipped on the horizontal axis\n     * @public\n     * @see Renderable#flipX\n     * @type {boolean}\n     */\n    get isFlippedX() {\n        return this._flip.x === true;\n    }\n\n    /**\n     * returns true if this renderable is flipped on the vertical axis\n     * @public\n     * @see Renderable#flipY\n     * @type {boolean}\n     */\n    get isFlippedY() {\n        return this._flip.y === true;\n    }\n\n    /**\n     * returns the bounding box for this renderable\n     * @returns {Bounds} bounding box Rectangle object\n     */\n    getBounds() {\n        if (typeof this._bounds === \"undefined\") {\n            super.getBounds();\n            if (this.isFinite()) {\n                this.updateBounds();\n            } else {\n                // e.g. containers or game world can have infinite size\n                this._bounds.setMinMax(this.pos.x, this.pos.y, this.width, this.height);\n            }\n\n        }\n        return this._bounds;\n    }\n\n    /**\n     * get the renderable alpha channel value<br>\n     * @returns {number} current opacity value between 0 and 1\n     */\n    getOpacity() {\n        return this.alpha;\n    }\n\n    /**\n     * set the renderable alpha channel value<br>\n     * @param {number} alpha - opacity value between 0.0 and 1.0\n     */\n    setOpacity(alpha) {\n        if (typeof (alpha) === \"number\") {\n            this.alpha = clamp(alpha, 0.0, 1.0);\n            // Set to 1 if alpha is NaN\n            if (isNaN(this.alpha)) {\n                this.alpha = 1.0;\n            }\n            this.isDirty = true;\n        }\n    }\n\n    /**\n     * flip the renderable on the horizontal axis (around the center of the renderable)\n     * @see Matrix2d#scaleX\n     * @param {boolean} [flip=true] - `true` to flip this renderable.\n     * @returns {Renderable} Reference to this object for method chaining\n     */\n    flipX(flip = true) {\n        this._flip.x = !!flip;\n        this.isDirty = true;\n        return this;\n    }\n\n    /**\n     * flip the renderable on the vertical axis (around the center of the renderable)\n     * @see Matrix2d#scaleY\n     * @param {boolean} [flip=true] - `true` to flip this renderable.\n     * @returns {Renderable} Reference to this object for method chaining\n     */\n    flipY(flip = true) {\n        this._flip.y = !!flip;\n        this.isDirty = true;\n        return this;\n    }\n\n    /**\n     * multiply the renderable currentTransform with the given matrix\n     * @see Renderable#currentTransform\n     * @param {Matrix2d} m - the transformation matrix\n     * @returns {Renderable} Reference to this object for method chaining\n     */\n    transform(m) {\n        this.currentTransform.multiply(m);\n        this.updateBounds();\n        this.isDirty = true;\n        return this;\n    }\n\n    /**\n     * return the angle to the specified target\n     * @param {Renderable|Vector2d|Vector3d} target\n     * @returns {number} angle in radians\n     */\n    angleTo(target) {\n        let a = this.getBounds();\n        let ax, ay;\n\n        if (target instanceof Renderable) {\n            let b = target.getBounds();\n            ax = b.centerX - a.centerX;\n            ay = b.centerY - a.centerY;\n        } else { // vector object\n            ax = target.x - a.centerX;\n            ay = target.y - a.centerY;\n        }\n\n        return Math.atan2(ay, ax);\n    }\n\n    /**\n     * return the distance to the specified target\n     * @param {Renderable|Vector2d|Vector3d} target\n     * @returns {number} distance\n     */\n    distanceTo(target) {\n        let a = this.getBounds();\n        let dx, dy;\n\n        if (target instanceof Renderable) {\n            let b = target.getBounds();\n            dx = a.centerX - b.centerX;\n            dy = a.centerY - b.centerY;\n        } else { // vector object\n            dx = a.centerX - target.x;\n            dy = a.centerY - target.y;\n        }\n\n        return Math.sqrt(dx * dx + dy * dy);\n    }\n\n    /**\n     * Rotate this renderable towards the given target.\n     * @param {Renderable|Vector2d|Vector3d} target - the renderable or position to look at\n     * @returns {Renderable} Reference to this object for method chaining\n     */\n    lookAt(target) {\n        let position;\n\n        if (target instanceof Renderable) {\n            position = target.pos;\n        } else {\n            position = target;\n        }\n\n        let angle = this.angleTo(position);\n\n        this.rotate(angle);\n\n        return this;\n    }\n\n    /**\n     * Rotate this renderable by the specified angle (in radians).\n     * @param {number} angle - The angle to rotate (in radians)\n     * @param {Vector2d|ObservableVector2d} [v] - an optional point to rotate around\n     * @returns {Renderable} Reference to this object for method chaining\n     */\n    rotate(angle, v) {\n        if (angle !== 0) {\n            this.currentTransform.rotate(angle, v);\n            this.updateBounds();\n            this.isDirty = true;\n        }\n        return this;\n    }\n\n    /**\n     * scale the renderable around his anchor point.  Scaling actually applies changes\n     * to the currentTransform member wich is used by the renderer to scale the object\n     * when rendering.  It does not scale the object itself.  For example if the renderable\n     * is an image, the image.width and image.height properties are unaltered but the currentTransform\n     * member will be changed.\n     * @param {number} x - a number representing the abscissa of the scaling vector.\n     * @param {number} [y=x] - a number representing the ordinate of the scaling vector.\n     * @returns {Renderable} Reference to this object for method chaining\n     */\n    scale(x, y = x) {\n        this.currentTransform.scale(x, y);\n        this.updateBounds();\n        this.isDirty = true;\n        return this;\n    }\n\n    /**\n     * scale the renderable around his anchor point\n     * @param {Vector2d} v - scaling vector\n     * @returns {Renderable} Reference to this object for method chaining\n     */\n    scaleV(v) {\n        this.scale(v.x, v.y);\n        return this;\n    }\n\n    /**\n     * update function (automatically called by melonJS).\n     * @param {number} dt - time since the last update in milliseconds.\n     * @returns {boolean} true if the renderable is dirty\n     */\n    update(dt) { // eslint-disable-line no-unused-vars\n        return this.isDirty;\n    }\n\n    /**\n     * update the bounding box for this shape.\n     * @param {boolean} [absolute=true] - update the bounds size and position in (world) absolute coordinates\n     * @returns {Bounds} this shape bounding box Rectangle object\n     */\n    updateBounds(absolute = true) {\n        if (this.isRenderable) {\n            let bounds = this.getBounds();\n\n            bounds.clear();\n\n            if ((this.autoTransform === true) && (!this.currentTransform.isIdentity())) {\n                // temporarly translate the matrix based on the anchor point\n                this.currentTransform.translate(\n                    -this.width * this.anchorPoint.x,\n                    -this.height * this.anchorPoint.y\n                );\n                bounds.addFrame(\n                    0,\n                    0,\n                    this.width,\n                    this.height,\n                    this.currentTransform\n                );\n                this.currentTransform.translate(\n                    this.width * this.anchorPoint.x,\n                    this.height * this.anchorPoint.y\n                );\n            } else {\n                bounds.addFrame(\n                    0,\n                    0,\n                    this.width,\n                    this.height\n                );\n                // translate the bounds based on the anchor point\n                bounds.translate(\n                    -this.width * this.anchorPoint.x,\n                    -this.height * this.anchorPoint.y\n                );\n            }\n\n            if (absolute === true) {\n                let absPos = this.getAbsolutePosition();\n                bounds.centerOn(absPos.x + bounds.x + bounds.width / 2,  absPos.y + bounds.y + bounds.height / 2);\n            }\n            return bounds;\n\n        } else {\n            // manage the case where updateBounds is called\n            // before the object being yet properly initialized\n            return super.updateBounds(absolute);\n        }\n    }\n\n    /**\n     * update the renderable's bounding rect (private)\n     * @ignore\n     */\n    updateBoundsPos(newX = this.pos.x, newY = this.pos.y) {\n        this.getBounds().translate(newX - this.pos.x, newY - this.pos.y);\n    }\n\n    /**\n      * return the renderable absolute position in the game world\n      * @returns {Vector2d}\n      */\n    getAbsolutePosition() {\n        if (typeof this._absPos === \"undefined\") {\n            this._absPos = pool.pull(\"Vector2d\");\n        }\n        // XXX Cache me or something\n        this._absPos.set(this.pos.x, this.pos.y);\n        if (typeof this.ancestor !== \"undefined\" && typeof this.ancestor.getAbsolutePosition === \"function\" && this.floating !== true) {\n            this._absPos.add(this.ancestor.getAbsolutePosition());\n        }\n        return this._absPos;\n    }\n\n    /**\n     * called when the anchor point value is changed\n     * @private\n     * @param {number} x - the new X value to be set for the anchor\n     * @param {number} y - the new Y value to be set for the anchor\n     */\n    onAnchorUpdate(x, y) {\n        // since the callback is called before setting the new value\n        // manually update the anchor point (required for updateBoundsPos)\n        this.anchorPoint.setMuted(x, y);\n        // then call updateBounds\n        this.updateBounds();\n        this.isDirty = true;\n    }\n\n    /**\n     * Prepare the rendering context before drawing (automatically called by melonJS).\n     * This will apply any defined transforms, anchor point, tint or blend mode and translate the context accordingly to this renderable position.\n     * @see Renderable#draw\n     * @see Renderable#postDraw\n     * @param {CanvasRenderer|WebGLRenderer} renderer - a renderer object\n     */\n    preDraw(renderer) {\n        let ax = this.width * this.anchorPoint.x,\n            ay = this.height * this.anchorPoint.y;\n\n        // save renderer context\n        renderer.save();\n\n        // apply the defined alpha value\n        renderer.setGlobalAlpha(renderer.globalAlpha() * this.getOpacity());\n\n        // apply flip\n        if (this._flip.x || this._flip.y) {\n            var dx = this._flip.x ? this.centerX - ax : 0,\n                dy = this._flip.y ? this.centerY - ay : 0;\n\n            renderer.translate(dx, dy);\n            renderer.scale(this._flip.x  ? -1 : 1, this._flip.y  ? -1 : 1);\n            renderer.translate(-dx, -dy);\n        }\n\n        // apply stencil mask if defined\n        if (typeof this.mask !== \"undefined\") {\n            renderer.translate(this.pos.x, this.pos.y);\n            renderer.setMask(this.mask);\n            renderer.translate(-this.pos.x, -this.pos.y);\n        }\n\n        // use this renderable shader if defined\n        if (typeof this.shader === \"object\" && typeof renderer.gl !== \"undefined\") {\n            renderer.customShader = this.shader;\n        }\n\n        if ((this.autoTransform === true) && (!this.currentTransform.isIdentity())) {\n            // apply the renderable transformation matrix\n            renderer.translate(this.pos.x, this.pos.y);\n            renderer.transform(this.currentTransform);\n            renderer.translate(-this.pos.x, -this.pos.y);\n        }\n\n        // offset by the anchor point\n        renderer.translate(-ax, -ay);\n\n        // apply the current tint and opacity\n        renderer.setTint(this.tint, this.getOpacity());\n\n        // apply blending if different from \"normal\"\n        if (this.blendMode !== renderer.getBlendMode()) {\n            renderer.setBlendMode(this.blendMode);\n        }\n    }\n\n    /**\n     * Draw this renderable (automatically called by melonJS).\n     * All draw operations for renderable are made respectively\n     * to the position or transforms set or applied by the preDraw method.\n     * The main draw loop will first call preDraw() to prepare the context for drawing the renderable,\n     * then draw() to draw the renderable, and finally postDraw() to clear the context.\n     * If you override this method, be mindful about the drawing logic; for example if you draw a shape\n     * from the draw method, you should make sure that your draw it at the 0, 0 coordinates.\n     * @see Renderable#preDraw\n     * @see Renderable#postDraw\n     * @param {CanvasRenderer|WebGLRenderer} renderer - a renderer instance\n     * @param {Camera2d} [viewport] - the viewport to (re)draw\n     */\n    draw(renderer, viewport) {  // eslint-disable-line no-unused-vars\n        // empty one !\n    }\n\n    /**\n     * restore the rendering context after drawing (automatically called by melonJS).\n     * @see Renderable#preDraw\n     * @see Renderable#draw\n     * @param {CanvasRenderer|WebGLRenderer} renderer - a renderer object\n     */\n    postDraw(renderer) {\n        // remove the previously applied tint\n        renderer.clearTint();\n\n        // clear the mask if set\n        if (typeof this.mask !== \"undefined\") {\n            renderer.clearMask();\n        }\n\n        // revert to the default shader if defined\n        if (typeof this.shader === \"object\" && typeof renderer.gl !== \"undefined\") {\n            renderer.customShader = undefined;\n            //renderer.setCompositor(\"quad\");\n        }\n\n        // restore the context\n        renderer.restore();\n\n        // reset the dirty flag\n        this.isDirty = false;\n    }\n\n    /**\n     * onCollision callback, triggered in case of collision,\n     * when this renderable body is colliding with another one\n     * @param {ResponseObject} response - the collision response object\n     * @param {Renderable} other - the other renderable touching this one (a reference to response.a or response.b)\n     * @returns {boolean} true if the object should respond to the collision (its position and velocity will be corrected)\n     * @example\n     * // colision handler\n     * onCollision(response) {\n     *     if (response.b.body.collisionType === me.collision.types.ENEMY_OBJECT) {\n     *         // makes the other object solid, by substracting the overlap vector to the current position\n     *         this.pos.sub(response.overlapV);\n     *         this.hurt();\n     *         // not solid\n     *         return false;\n     *     }\n     *     // Make the object solid\n     *     return true;\n     * },\n     */\n    onCollision(response, other) { // eslint-disable-line no-unused-vars\n        return false;\n    }\n\n    /**\n     * Destroy function<br>\n     * @ignore\n     */\n    destroy() {\n        // allow recycling object properties\n        pool.push(this.currentTransform);\n        this.currentTransform = undefined;\n\n        pool.push(this.anchorPoint);\n        this.anchorPoint = undefined;\n\n        pool.push(this.pos);\n        this.pos = undefined;\n\n        if (typeof this._absPos !== \"undefined\") {\n            pool.push(this._absPos);\n            this._absPos = undefined;\n        }\n\n        if (this._bounds instanceof Bounds) {\n            pool.push(this._bounds);\n            this._bounds = undefined;\n        }\n\n        this.onVisibilityChange = undefined;\n\n        if (typeof this.mask !== \"undefined\") {\n            pool.push(this.mask);\n            this.mask = undefined;\n        }\n\n        if (this._tint instanceof Color) {\n            pool.push(this._tint);\n            this._tint = undefined;\n        }\n\n        // cannot import and reference a Container from a Renderable, since Container extends Renderable, creating a circular dependency\n        //if (this.ancestor instanceof Container || this.ancestor instanceof Entity) {\n        this.ancestor = undefined;\n\n        // cannot import and reference a Application from a Renderable, messsing up class order in the bundle\n        //if (this._parentApp instanceof Application) {\n        this._parentApp = undefined;\n        //}\n\n        // destroy the physic body if a builtin body object\n        if (this.body instanceof Body) {\n            this.body.destroy.apply(this.body, arguments);\n            this.body = undefined;\n        }\n\n        // release all registered events\n        releaseAllPointerEvents(this);\n\n        // call the user defined destroy method\n        this.onDestroyEvent.apply(this, arguments);\n\n        // destroy any shader object if not done by the user through onDestroyEvent()\n        if (this.shader instanceof GLShader) {\n            this.shader.destroy();\n            this.shader = undefined;\n        }\n    }\n\n    /**\n     * OnDestroy Notification function<br>\n     * Called by engine before deleting the object\n     */\n    onDestroyEvent() {\n        // to be extended !\n    }\n\n}\n\n/**\n * @import Bounds from \"./../physics/bounds.js\";\n * @import Color from \"./../math/color.js\";\n * @import Entity from \"./../renderable/entity/entity.js\";\n * @import Sprite from \"./../renderable/sprite.js\";\n * @import NineSliceSprite from \"./../renderable/nineslicesprite.js\";\n */\n\n// some ref shortcut\nconst MIN = Math.min, MAX = Math.max;\n\nlet targetV = new Vector2d();\n\n/**\n * @classdesc\n * a 2D orthographic camera\n * @augments Renderable\n */\nclass Camera2d extends Renderable {\n    /**\n     * @param {number} minX - start x offset\n     * @param {number} minY - start y offset\n     * @param {number} maxX - end x offset\n     * @param {number} maxY - end y offset\n     */\n    constructor(minX, minY, maxX, maxY) {\n        super(minX, minY, maxX - minX, maxY - minY);\n\n        /**\n         * Axis definition\n         * @enum {number}\n         * @property {number} NONE no axis\n         * @property {number} HORIZONTAL horizontal axis only\n         * @property {number} VERTICAL vertical axis only\n         * @property {number} BOTH both axis\n         * @readonly\n         * @name AXIS\n         * @memberof Camera2d\n         */\n        this.AXIS = {\n            NONE : 0,\n            HORIZONTAL : 1,\n            VERTICAL : 2,\n            BOTH : 3\n        };\n\n        /**\n         * Camera bounds\n         * @public\n         * @type {Bounds}\n         * @name bounds\n         * @memberof Camera2d\n         */\n        this.bounds = pool.pull(\"Bounds\");\n\n        /**\n         * enable or disable damping\n         * @private\n         * @default true\n         */\n        this.smoothFollow = true;\n\n        /**\n         * Camera damping for smooth transition [0 .. 1].\n         * 1 being the maximum value and will snap the camera to the target position\n         * @public\n         * @type {number}\n         * @name damping\n         * @default 1.0\n         * @memberof Camera2d\n         */\n        this.damping = 1.0;\n\n        /**\n         * the closest point relative to the camera\n         * @public\n         * @type {number}\n         * @name near\n         * @default -1000\n         * @memberof Camera2d\n         */\n        this.near = -1000;\n\n        /**\n         * the furthest point relative to the camera.\n         * @public\n         * @type {number}\n         * @name far\n         * @default 1000\n         * @memberof Camera2d\n         */\n        this.far = 1000;\n\n        /**\n         * the default camera projection matrix\n         * (2d cameras use an orthographic projection by default).\n         * @public\n         * @type {Matrix3d}\n         * @name projectionMatrix\n         * @memberof Camera2d\n         */\n        this.projectionMatrix = new Matrix3d();\n\n        /**\n         * the invert camera transform used to unproject points\n         * @ignore\n         * @type {Matrix2d}\n         * @name invCurrentTransform\n         * @memberof Camera2d\n         */\n        this.invCurrentTransform = new Matrix2d();\n\n        // offset for shake effect\n        this.offset = new Vector2d();\n\n        // target to follow\n        this.target = null;\n\n        // default value follow\n        this.follow_axis = this.AXIS.NONE;\n\n        // shake variables\n        this._shake = {\n            intensity : 0,\n            duration : 0,\n            axis : this.AXIS.BOTH,\n            onComplete : null\n        };\n\n        // flash variables\n        this._fadeOut = {\n            color : null,\n            tween : null\n        };\n        // fade variables\n        this._fadeIn = {\n            color : null,\n            tween : null\n        };\n\n        // default camera name\n        this.name = \"default\";\n\n        // set a default deadzone\n        this.setDeadzone(this.width / 6, this.height / 6);\n\n        // for backward \"compatiblity\" (in terms of behavior)\n        this.anchorPoint.set(0, 0);\n\n        // enable event detection on the camera\n        this.isKinematic = false;\n\n        this.bounds.setMinMax(minX, minY, maxX, maxY);\n\n        // update the projection matrix\n        this._updateProjectionMatrix();\n\n        // subscribe to the game reset event\n        on(GAME_RESET, this.reset, this);\n        // subscribe to the canvas resize event\n        on(CANVAS_ONRESIZE, this.resize, this);\n    }\n\n    // -- some private function ---\n\n    /** @ignore */\n    // update the projection matrix based on the projection frame (a rectangle)\n    _updateProjectionMatrix() {\n        this.projectionMatrix.ortho(0, this.width, this.height, 0, this.near, this.far);\n    }\n\n    /** @ignore */\n    _followH(target) {\n        let targetX = this.pos.x;\n        if ((target.x - this.pos.x) > (this.deadzone.right)) {\n            targetX = MIN((target.x) - (this.deadzone.right), this.bounds.width - this.width);\n        }\n        else if ((target.x - this.pos.x) < (this.deadzone.pos.x)) {\n            targetX = MAX((target.x) - this.deadzone.pos.x, this.bounds.left);\n        }\n        return targetX;\n\n    }\n\n    /** @ignore */\n    _followV(target) {\n        let targetY = this.pos.y;\n        if ((target.y - this.pos.y) > (this.deadzone.bottom)) {\n            targetY = MIN((target.y) - (this.deadzone.bottom), this.bounds.height - this.height);\n        }\n        else if ((target.y - this.pos.y) < (this.deadzone.pos.y)) {\n            targetY = MAX((target.y) - this.deadzone.pos.y, this.bounds.top);\n        }\n        return targetY;\n    }\n\n    // -- public function ---\n\n    /**\n     * reset the camera position to specified coordinates\n     * @name reset\n     * @memberof Camera2d\n     * @param {number} [x=0] - initial position of the camera on the x axis\n     * @param {number} [y=0] - initial position of the camera on the y axis\n     */\n    reset(x = 0, y = 0) {\n        // reset the initial camera position to 0,0\n        this.pos.x = x;\n        this.pos.y = y;\n\n        // reset the target\n        this.unfollow();\n\n        // damping default value\n        this.smoothFollow = true;\n        this.damping = 1.0;\n\n        // reset the transformation matrix\n        this.currentTransform.identity();\n        this.invCurrentTransform.identity().invert();\n\n        // update the projection matrix\n        this._updateProjectionMatrix();\n    }\n\n    /**\n     * change the deadzone settings.\n     * the \"deadzone\" defines an area within the current camera in which\n     * the followed renderable can move without scrolling the camera.\n     * @name setDeadzone\n     * @see Camera2d.follow\n     * @memberof Camera2d\n     * @param {number} w - deadzone width\n     * @param {number} h - deadzone height\n     */\n    setDeadzone(w, h) {\n        if (typeof(this.deadzone) === \"undefined\") {\n            this.deadzone = new Rect(0, 0, 0, 0);\n        }\n\n        // reusing the old code for now...\n        this.deadzone.pos.set(\n            ~~((this.width - w) / 2),\n            ~~((this.height - h) / 2 - h * 0.25)\n        );\n        this.deadzone.resize(w, h);\n\n        this.smoothFollow = false;\n\n        // force a camera update\n        this.updateTarget();\n\n        this.smoothFollow = true;\n    }\n\n    /**\n     * resize the camera\n     * @name resize\n     * @memberof Camera2d\n     * @param {number} w - new width of the camera\n     * @param {number} h - new height of the camera\n     * @returns {Camera2d} this camera\n     */\n    resize(w, h) {\n        // parent consctructor, resize camera rect\n        super.resize(w, h);\n\n        // disable damping while resizing\n        this.smoothFollow = false;\n\n        // reset everything\n        this.setBounds(0, 0, w, h);\n        this.setDeadzone(w / 6, h / 6);\n        this.update();\n        this.smoothFollow = true;\n\n        // update the projection matrix\n        this._updateProjectionMatrix();\n\n        // publish the viewport resize event\n        emit(VIEWPORT_ONRESIZE, this.width, this.height, this);\n\n        return this;\n    }\n\n    /**\n     * set the camera boundaries (set to the world limit by default).\n     * the camera is bound to the given coordinates and cannot move/be scrolled outside of it.\n     * @name setBounds\n     * @memberof Camera2d\n     * @param {number} x - world left limit\n     * @param {number} y - world top limit\n     * @param {number} w - world width limit\n     * @param {number} h - world height limit\n     */\n    setBounds(x, y, w, h) {\n        this.smoothFollow = false;\n        this.bounds.setMinMax(x, y, w + x, h + y);\n        this.moveTo(this.pos.x, this.pos.y);\n        this.update();\n        this.smoothFollow = true;\n    }\n\n    /**\n     * set the camera to follow the specified renderable. <br>\n     * (this will put the camera center around the given target)\n     * @name follow\n     * @memberof Camera2d\n     * @param {Renderable|Vector2d} target - renderable or position vector to follow\n     * @param {number} [axis=me.game.viewport.AXIS.BOTH] - Which axis to follow (see {@link Camera2d.AXIS})\n     * @param {number} [damping=1] - default damping value\n     * @example\n     * // set the camera to follow this renderable on both axis, and enable damping\n     * me.game.viewport.follow(this, me.game.viewport.AXIS.BOTH, 0.1);\n     */\n    follow(target, axis, damping) {\n        if (target instanceof Renderable) {\n            this.target = target.pos;\n        }\n        else if ((target instanceof Vector2d) || (target instanceof Vector3d) ||\n                 (target instanceof ObservableVector2d) || (target instanceof ObservableVector3d)) {\n            this.target = target;\n        }\n        else {\n            throw new Error(\"invalid target for me.Camera2d.follow\");\n        }\n        // if axis is null, camera is moved on target center\n        this.follow_axis = (\n            typeof(axis) === \"undefined\" ? this.AXIS.BOTH : axis\n        );\n\n        this.smoothFollow = false;\n\n        if (typeof damping !== \"number\") {\n            this.damping = 1;\n        } else {\n            this.damping = clamp(damping, 0.0, 1.0);\n        }\n\n        // force a camera update\n        this.updateTarget();\n\n        this.smoothFollow = true;\n    }\n\n    /**\n     * unfollow the current target\n     * @name unfollow\n     * @memberof Camera2d\n     */\n    unfollow() {\n        this.target = null;\n        this.follow_axis = this.AXIS.NONE;\n    }\n\n    /**\n     * move the camera upper-left position by the specified offset.\n     * @name move\n     * @memberof Camera2d\n     * @see Camera2d.focusOn\n     * @param {number} x - horizontal offset\n     * @param {number} y - vertical offset\n     * @example\n     * // Move the camera up by four pixels\n     * me.game.viewport.move(0, -4);\n     */\n    move(x, y) {\n        this.moveTo(this.pos.x + x, this.pos.y + y);\n    }\n\n    /**\n     * move the camera upper-left position to the specified coordinates\n     * @name moveTo\n     * @memberof Camera2d\n     * @see Camera2d.focusOn\n     * @param {number} x\n     * @param {number} y\n     */\n    moveTo(x, y) {\n        let _x = this.pos.x;\n        let _y = this.pos.y;\n\n        this.pos.x = clamp(\n            x,\n            this.bounds.left,\n            this.bounds.width\n        );\n        this.pos.y = clamp(\n            y,\n            this.bounds.top,\n            this.bounds.height\n        );\n\n        //publish the VIEWPORT_ONCHANGE event if necessary\n        if (_x !== this.pos.x || _y !== this.pos.y) {\n            this.isDirty = true;\n        }\n    }\n\n    /** @ignore */\n    updateTarget() {\n        if (this.target) {\n\n            targetV.setV(this.pos);\n\n            switch (this.follow_axis) {\n                case this.AXIS.NONE:\n                    //this.focusOn(this.target);\n                    break;\n\n                case this.AXIS.HORIZONTAL:\n                    targetV.x = this._followH(this.target);\n                    break;\n\n                case this.AXIS.VERTICAL:\n                    targetV.y = this._followV(this.target);\n                    break;\n\n                case this.AXIS.BOTH:\n                    targetV.x = this._followH(this.target);\n                    targetV.y = this._followV(this.target);\n                    break;\n\n                default:\n                    break;\n            }\n\n            if (!this.pos.equals(targetV)) {\n                // update the camera position\n                if (this.smoothFollow === true && this.damping < 1.0) {\n                    // account for floating precision and check if we are close \"enough\"\n                    if (toBeCloseTo(targetV.x, this.pos.x, 2) &&\n                        toBeCloseTo(targetV.y, this.pos.y, 2)) {\n                        this.pos.setV(targetV);\n                        return;\n                    } else {\n                        this.pos.lerp(targetV, this.damping);\n                    }\n                } else {\n                    this.pos.setV(targetV);\n                }\n                this.isDirty = true;\n            }\n        }\n    }\n\n    /** @ignore */\n    update(dt) {\n        // update the camera position\n        this.updateTarget(dt);\n\n        if (this._shake.duration > 0) {\n            this._shake.duration -= dt;\n            if (this._shake.duration <= 0) {\n                this._shake.duration = 0;\n                this.offset.setZero();\n                if (typeof(this._shake.onComplete) === \"function\") {\n                    this._shake.onComplete();\n                }\n            }\n            else {\n                if (this._shake.axis === this.AXIS.BOTH ||\n                    this._shake.axis === this.AXIS.HORIZONTAL) {\n                    this.offset.x = (Math.random() - 0.5) * this._shake.intensity;\n                }\n                if (this._shake.axis === this.AXIS.BOTH ||\n                    this._shake.axis === this.AXIS.VERTICAL) {\n                    this.offset.y = (Math.random() - 0.5) * this._shake.intensity;\n                }\n            }\n            // updated!\n            this.isDirty = true;\n        }\n\n        if (this.isDirty === true) {\n            //publish the corresponding message\n            emit(VIEWPORT_ONCHANGE, this.pos);\n        }\n\n        // check for fade/flash effect\n        if ((this._fadeIn.tween != null) || (this._fadeOut.tween != null)) {\n            this.isDirty = true;\n        }\n\n        if (!this.currentTransform.isIdentity()) {\n            this.invCurrentTransform.copy(this.currentTransform).invert();\n        } else {\n            // reset to default\n            this.invCurrentTransform.identity();\n        }\n\n        return super.update(dt);\n    }\n\n    /**\n     * shake the camera\n     * @name shake\n     * @memberof Camera2d\n     * @param {number} intensity - maximum offset that the screen can be moved\n     * while shaking\n     * @param {number} duration - expressed in milliseconds\n     * @param {number} [axis=me.game.viewport.AXIS.BOTH] - specify on which axis to apply the shake effect (see {@link Camera2d.AXIS})\n     * @param {Function} [onComplete] - callback once shaking effect is over\n     * @param {boolean} [force] - if true this will override the current effect\n     * @example\n     * // shake it baby !\n     * me.game.viewport.shake(10, 500, me.game.viewport.AXIS.BOTH);\n     */\n    shake(intensity, duration, axis, onComplete, force) {\n        if (this._shake.duration === 0 || force === true) {\n            this._shake.intensity = intensity;\n            this._shake.duration = duration;\n            this._shake.axis = axis || this.AXIS.BOTH;\n            this._shake.onComplete = typeof (onComplete) === \"function\" ? onComplete : undefined;\n        }\n    }\n\n    /**\n     * fadeOut(flash) effect<p>\n     * screen is filled with the specified color and slowly goes back to normal\n     * @name fadeOut\n     * @memberof Camera2d\n     * @param {Color|string} color - a CSS color value\n     * @param {number} [duration=1000] - expressed in milliseconds\n     * @param {Function} [onComplete] - callback once effect is over\n     * @example\n     * // fade the camera to white upon dying, reload the level, and then fade out back\n     * me.game.viewport.fadeIn(\"#fff\", 150, function() {\n     *     me.audio.play(\"die\", false);\n     *     me.level.reload();\n     *     me.game.viewport.fadeOut(\"#fff\", 150);\n     * });\n     */\n    fadeOut(color, duration = 1000, onComplete) {\n        this._fadeOut.color = pool.pull(\"Color\").copy(color);\n        this._fadeOut.tween = pool.pull(\"Tween\", this._fadeOut.color)\n            .to({ alpha: 0.0 }, duration)\n            .onComplete(onComplete || null);\n        this._fadeOut.tween.isPersistent = true;\n        this._fadeOut.tween.start();\n    }\n\n    /**\n     * fadeIn effect <p>\n     * fade to the specified color\n     * @name fadeIn\n     * @memberof Camera2d\n     * @param {Color|string} color - a CSS color value\n     * @param {number} [duration=1000] - expressed in milliseconds\n     * @param {Function} [onComplete] - callback once effect is over\n     * @example\n     * // flash the camera to white for 75ms\n     * me.game.viewport.fadeIn(\"#FFFFFF\", 75);\n     */\n    fadeIn(color, duration = 1000, onComplete) {\n        this._fadeIn.color = pool.pull(\"Color\").copy(color);\n        let _alpha = this._fadeIn.color.alpha;\n        this._fadeIn.color.alpha = 0.0;\n        this._fadeIn.tween = pool.pull(\"Tween\", this._fadeIn.color)\n            .to({ alpha: _alpha }, duration)\n            .onComplete(onComplete || null);\n        this._fadeIn.tween.isPersistent = true;\n        this._fadeIn.tween.start();\n    }\n\n    /**\n     * set the camera position around the specified object\n     * @name focusOn\n     * @memberof Camera2d\n     * @param {Renderable|Entity|Sprite|NineSliceSprite} target - the renderable to focus the camera on\n     */\n    focusOn(target) {\n        let bounds = target.getBounds();\n        this.moveTo(\n            target.pos.x + bounds.left + (bounds.width / 2),\n            target.pos.y + bounds.top + (bounds.height / 2)\n        );\n    }\n\n    /**\n     * check if the specified renderable is in the camera\n     * @name isVisible\n     * @memberof Camera2d\n     * @param {Renderable|Entity|Sprite|NineSliceSprite} obj - to be checked against\n     * @param {boolean} [floating = obj.floating] - if visibility check should be done against screen coordinates\n     * @returns {boolean} true if within the viewport\n     */\n    isVisible(obj, floating = obj.floating) {\n        if (floating === true || obj.floating === true) {\n            // check against screen coordinates\n            return renderer.overlaps(obj.getBounds());\n        } else {\n            // check if within the current camera\n            return obj.getBounds().overlaps(this);\n        }\n    }\n\n    /**\n     * convert the given \"local\" (screen) coordinates into world coordinates\n     * @name localToWorld\n     * @memberof Camera2d\n     * @param {number} x - the x coordinate of the local point to be converted\n     * @param {number} y - the y coordinate of the local point to be converted\n     * @param {number} [v] - an optional vector object where to set the converted value\n     * @returns {Vector2d}\n     */\n    localToWorld(x, y, v) {\n        // TODO memoization for one set of coords (multitouch)\n        v = v || pool.pull(\"Vector2d\");\n        v.set(x, y).add(this.pos).sub(game.world.pos);\n        if (!this.currentTransform.isIdentity()) {\n            this.invCurrentTransform.apply(v);\n        }\n        return v;\n    }\n\n    /**\n     * convert the given world coordinates into \"local\" (screen) coordinates\n     * @name worldToLocal\n     * @memberof Camera2d\n     * @param {number} x\n     * @param {number} y\n     * @param {number} [v] - an optional vector object where to set the converted value\n     * @returns {Vector2d} a vector with the converted local coordinates\n     */\n    worldToLocal(x, y, v) {\n        // TODO memoization for one set of coords (multitouch)\n        v = v || pool.pull(\"Vector2d\");\n        v.set(x, y);\n        if (!this.currentTransform.isIdentity()) {\n            this.currentTransform.apply(v);\n        }\n        return v.sub(this.pos).add(game.world.pos);\n    }\n\n    /**\n     * render the camera effects\n     * @ignore\n     */\n    drawFX(renderer) {\n        // fading effect\n        if (this._fadeIn.tween) {\n            // add an overlay\n            renderer.save();\n            // reset all transform so that the overaly cover the whole camera area\n            renderer.resetTransform();\n            renderer.setColor(this._fadeIn.color);\n            renderer.fillRect(0, 0, this.width, this.height);\n            renderer.restore();\n            // remove the tween if over\n            if (this._fadeIn.color.alpha === 1.0) {\n                this._fadeIn.tween = null;\n                pool.push(this._fadeIn.color);\n                this._fadeIn.color = null;\n            }\n        }\n\n        // flashing effect\n        if (this._fadeOut.tween) {\n            // add an overlay\n            renderer.save();\n            // reset all transform so that the overaly cover the whole camera area\n            renderer.resetTransform();\n            renderer.setColor(this._fadeOut.color);\n            renderer.fillRect(0, 0, this.width, this.height);\n            renderer.restore();\n            // remove the tween if over\n            if (this._fadeOut.color.alpha === 0.0) {\n                this._fadeOut.tween = null;\n                pool.push(this._fadeOut.color);\n                this._fadeOut.color = null;\n            }\n        }\n    }\n\n    /**\n     * draw all object visibile in this viewport\n     * @ignore\n     */\n    draw(renderer, container) {\n        let translateX = this.pos.x + this.offset.x;\n        let translateY = this.pos.y + this.offset.y;\n\n        // translate the world coordinates by default to screen coordinates\n        container.currentTransform.translate(-translateX, -translateY);\n\n        // set the camera projection\n        renderer.setProjection(this.projectionMatrix);\n\n        // clip to camera bounds\n        renderer.clipRect(\n            0,\n            0,\n            this.width,\n            this.height\n        );\n\n        this.preDraw(renderer);\n\n        container.preDraw(renderer, this);\n\n        // draw all objects,\n        // specifying the viewport as the rectangle area to redraw\n        container.draw(renderer, this);\n\n        // draw the viewport/camera effects\n        this.drawFX(renderer);\n\n        container.postDraw(renderer, this);\n\n        this.postDraw(renderer);\n\n        // translate the world coordinates by default to screen coordinates\n        container.currentTransform.translate(translateX, translateY);\n    }\n\n}\n\n// a default camera instance to use across all stages\nlet default_camera;\n\n// default stage settings\nlet default_settings = {\n    cameras : []\n};\n\n/**\n * @classdesc\n * a default \"Stage\" object.\n * every \"stage\" object (title screen, credits, ingame, etc...) to be managed\n * through the state manager must inherit from this base class.\n * @see state\n */\nclass Stage {\n\n    /**\n     * @param {object} [settings] - The stage` parameters\n     * @param {Camera2d[]} [settings.cameras=[new me.Camera2d()]] - a list of cameras (experimental)\n     * @param {Function} [settings.onResetEvent] - called by the state manager when reseting the object\n     * @param {Function} [settings.onDestroyEvent] - called by the state manager before switching to another state\n     */\n    constructor(settings) {\n        /**\n         * The list of active cameras in this stage.\n         * Cameras will be renderered based on this order defined in this list.\n         * Only the \"default\" camera will be resized when the window or canvas is resized.\n         * @public\n         * @type {Map<Camera2d>}\n         * @name cameras\n         * @memberof Stage\n         */\n        this.cameras = new Map();\n\n        /**\n         * The list of active lights in this stage.\n         * (Note: Canvas Renderering mode will only properly support one light per stage)\n         * @public\n         * @type {Map<Light2d>}\n         * @name lights\n         * @memberof Stage\n         * @see Light2d\n         * @see Stage.ambientLight\n         * @example\n         * // create a white spot light\n         * let whiteLight = new me.Light2d(0, 0, 140, \"#fff\", 0.7);\n         * // and add the light to this current stage\n         * this.lights.set(\"whiteLight\", whiteLight);\n         * // set a dark ambient light\n         * this.ambientLight.parseCSS(\"#1117\");\n         * // make the light follow the mouse\n         * me.input.registerPointerEvent(\"pointermove\", me.game.viewport, (event) => {\n         *    whiteLight.centerOn(event.gameX, event.gameY);\n         * });\n         */\n        this.lights = new Map();\n\n        /**\n         * an ambient light that will be added to the stage rendering\n         * @public\n         * @type {Color}\n         * @name ambientLight\n         * @memberof Stage\n         * @default \"#000000\"\n         * @see Light2d\n         */\n        this.ambientLight = new Color(0, 0, 0, 0);\n\n        /**\n         * The given constructor options\n         * @public\n         * @name settings\n         * @memberof Stage\n         * @type {object}\n         */\n        this.settings = Object.assign(default_settings, settings || {});\n    }\n\n    /**\n     * Object reset function\n     * @ignore\n     */\n    reset() {\n        // add all defined cameras\n        this.settings.cameras.forEach((camera) => {\n            this.cameras.set(camera.name, camera);\n        });\n\n        // empty or no default camera\n        if (this.cameras.has(\"default\") === false) {\n            if (typeof default_camera === \"undefined\") {\n                let width = renderer.width;\n                let height = renderer.height;\n                // new default camera instance\n                default_camera = new Camera2d(0, 0, width, height);\n            }\n            this.cameras.set(\"default\", default_camera);\n        }\n\n        // reset the game\n        emit(STAGE_RESET, this);\n\n        // call the onReset Function\n        this.onResetEvent.apply(this, arguments);\n    }\n\n    /**\n     * update function\n     * @name update\n     * @memberof Stage\n     * @ignore\n     * @param {number} dt - time since the last update in milliseconds.\n     * @returns {boolean}\n     */\n    update(dt) {\n        let isDirty = false;\n\n        // update the camera/viewport\n        // iterate through all cameras\n        this.cameras.forEach((camera) => {\n            if (camera.update(dt) === true) {\n                isDirty = true;\n            }\n        });\n\n        // update all lights\n        this.lights.forEach((light) => {\n            if (light.update(dt) === true) {\n                isDirty = true;\n            }\n        });\n\n        return isDirty;\n    }\n\n    /**\n     * draw the current stage\n     * @name draw\n     * @memberof Stage\n     * @ignore\n     * @param {Renderer} renderer - the renderer object to draw with\n     * @param {World} world - the world object to draw\n     */\n    draw(renderer, world) {\n\n        // iterate through all cameras\n        this.cameras.forEach((camera) => {\n            // render the root container\n            camera.draw(renderer, world);\n\n            // render the ambient light\n            if (this.ambientLight.alpha !== 0) {\n                renderer.save();\n                // iterate through all lights\n                this.lights.forEach((light) => {\n                    // cut out all lights visible areas\n                    renderer.setMask(light.getVisibleArea(), true);\n                });\n                // fill the screen with the ambient color\n                renderer.setColor(this.ambientLight);\n                renderer.fillRect(0, 0, camera.width, camera.height);\n                // clear all masks\n                renderer.clearMask();\n                renderer.restore();\n            }\n\n            // render all lights\n            this.lights.forEach((light) => {\n                light.preDraw(renderer, world);\n                light.draw(renderer, world);\n                light.postDraw(renderer, world);\n            });\n        });\n    }\n\n    /**\n     * destroy function\n     * @ignore\n     */\n    destroy() {\n        // clear all cameras\n        this.cameras.clear();\n        // clear all lights\n        this.lights.forEach((light) => {\n            light.destroy();\n        });\n        this.lights.clear();\n        // notify the object\n        this.onDestroyEvent.apply(this, arguments);\n    }\n\n    /**\n     * onResetEvent function<br>\n     * called by the state manager when reseting the object\n     * this is typically where you will load a level, add renderables, etc...\n     * @name onResetEvent\n     * @memberof Stage\n     * @param {...*} [args] - optional arguments passed when switching state\n     * @see state#change\n     */\n    onResetEvent() {\n        // execute onResetEvent function if given through the constructor\n        if (typeof this.settings.onResetEvent === \"function\") {\n            this.settings.onResetEvent.apply(this, arguments);\n        }\n    }\n\n    /**\n     * onDestroyEvent function<br>\n     * called by the state manager before switching to another state\n     * @name onDestroyEvent\n     * @memberof Stage\n     */\n    onDestroyEvent() {\n        // execute onDestroyEvent function if given through the constructor\n        if (typeof this.settings.onDestroyEvent === \"function\") {\n            this.settings.onDestroyEvent.apply(this, arguments);\n        }\n    }\n}\n\n/**\n * a collection of file utility functions\n * @namespace utils.file\n */\n\n// regexp to deal with file name & path\nconst PATH = /^.*(\\\\|\\/|\\:)/;\nconst EXT = /\\.[^\\.]*$/;\n\n\n/**\n * return the base name of the file without path info\n * @public\n * @memberof utils.file\n * @name getBasename\n * @param  {string} path -  path containing the basename to extract\n * @returns {string} the base name without path information.\n */\nfunction getBasename(path) {\n    return path.replace(PATH, \"\").replace(EXT, \"\");\n}\n\n/**\n * return the path of the file\n * @public\n * @memberof utils.file\n * @name getPath\n * @param  {string} path - the copmplete file path to extract the path from\n * @returns {string} the extracted path\n */\nfunction getPath(path) {\n    return path.match(PATH)[0];\n}\n\n/**\n * return the extension of the file in the given path\n * @public\n * @memberof utils.file\n * @name getExtension\n * @param  {string} path - path containing the filename and extension to extract\n * @returns {string} filename extension.\n */\nfunction getExtension(path) {\n    return path.substring(path.lastIndexOf(\".\") + 1, path.length);\n}\n\nvar file$1 = {\n\t__proto__: null,\n\tgetBasename: getBasename,\n\tgetExtension: getExtension,\n\tgetPath: getPath\n};\n\n/**\n * where all preloaded content is cached\n */\n\n// contains all the images loaded\nlet imgList = {};\n\n// contains all the TMX loaded\nlet tmxList = {};\n\n// contains all the binary files loaded\nlet binList = {};\n\n// contains all the JSON files\nlet jsonList = {};\n\n// contains all the video files\nlet videoList = {};\n\n// contains all the font files\nlet fontList = {};\n\n/**\n * Fetches data from the specified URL.\n * @param {string} url - The URL to fetch the data from.\n * @param {string} responseType - The type of response expected ('json', 'text', 'blob', 'arrayBuffer').\n * @param {Object} [settings] - custom settings to apply to the request (@link https://developer.mozilla.org/en-US/docs/Web/API/fetch#options)\n * @returns {Promise} A promise that resolves with the fetched data or rejects with an error.\n * @ignore\n * @example\n * fetchData('https://api.example.com/data', 'json')\n *     .then(data => {\n *         // Handle the fetched JSON data\n *     })\n *     .catch(error => {\n *         // Handle the error\n *     });\n */\nfunction fetchData(url, responseType, settings = {}) {\n    return new Promise((resolve, reject) => {\n        fetch(url, {\n            method: \"GET\",\n            // internally nocache is a string with a generated random number\n            cache: settings.nocache === \"\" ? \"no-cache\" : \"reload\",\n            credentials: settings.withCredentials === true ? \"include\" : \"omit\",\n            // see setting.crossorigin, \"anonymous\" is used for cross-origin requests\n            mode: settings.crossOrigin === \"anonymous\" ? \"cors\" : \"no-cors\"\n        })\n            .then(response => {\n                if (!response.ok) {\n                    // status = 0 when file protocol is used, or cross-domain origin\n                    if (response.status !== 0) {\n                        if (typeof onerror === \"function\") {\n                            reject(new Error(\"`Network response was not ok ${response.statusText}`\"));\n                        }\n                    }\n                }\n\n                switch (responseType) {\n                    case \"json\":\n                        return response.json();\n                    case \"text\":\n                        return response.text();\n                    case \"blob\":\n                        return response.blob();\n                    case \"arrayBuffer\":\n                        return response.arrayBuffer();\n                    default:\n                        reject(new Error(\"Invalid response type\"));\n                }\n            })\n            .then(data => resolve(data))\n            .catch(error => reject(error));\n    });\n}\n\n// parse and return the compressed texture\nfunction parseDDS(/*data, formats*/) {\n    throw new Error(\"unsupported format\");\n}\n\n// parse and return the compressed texture\nfunction parseKTX(/*data, formats*/) {\n    throw new Error(\"unsupported format\");\n}\n\n// parse and return the compressed texture\nfunction parseKTX2(/*data, formats*/) {\n    throw new Error(\"unsupported format\");\n}\n\n/*\nconst COMPRESSED_RGB_PVRTC_4BPPV1_IMG = 0x8C00;\nconst COMPRESSED_RGB_PVRTC_2BPPV1_IMG = 0x8C01;\nconst COMPRESSED_RGBA_PVRTC_4BPPV1_IMG = 0x8C02;\nconst COMPRESSED_RGBA_PVRTC_2BPPV1_IMG = 0x8C03;\n\nconst COMPRESSED_RGB_ETC1_WEBGL = 0x8D64;\n\nconst PVR_HEADER_LENGTH = 13; // The header length in 32 bit ints.\n//const PVR_MAGIC = 0x03525650; //0x50565203;\n\n// Offsets into the header array.\n//const PVR_HEADER_MAGIC = 0;\nconst PVR_HEADER_FORMAT = 2;\nconst PVR_HEADER_HEIGHT = 6;\nconst PVR_HEADER_WIDTH = 7;\nconst PVR_HEADER_MIPMAPCOUNT = 11;\nconst PVR_HEADER_METADATA = 12;\n\nconst PVR_FORMAT_2BPP_RGB = 0;\nconst PVR_FORMAT_2BPP_RGBA = 1;\nconst PVR_FORMAT_4BPP_RGB = 2;\nconst PVR_FORMAT_4BPP_RGBA = 3;\n//const PVR_COLOR_SPACE = 4;\nconst PVR_FORMAT_ETC1 = 6;\nconst PVR_FORMAT_DXT1 = 7;\nconst PVR_FORMAT_DXT3 = 9;\nconst PVR_FORMAT_DXT5 = 5;\n\nconst COMPRESSED_RGB_S3TC_DXT1_EXT = 0x83F0;\n//const COMPRESSED_RGBA_S3TC_DXT1_EXT = 0x83F1;\nconst COMPRESSED_RGBA_S3TC_DXT3_EXT = 0x83F2;\nconst COMPRESSED_RGBA_S3TC_DXT5_EXT = 0x83F3;\n\nconst PVR_TO_WEBGL_FORMAT = {\n    [PVR_FORMAT_2BPP_RGB] : COMPRESSED_RGB_PVRTC_2BPPV1_IMG,\n    [PVR_FORMAT_2BPP_RGBA] : COMPRESSED_RGBA_PVRTC_2BPPV1_IMG,\n    [PVR_FORMAT_4BPP_RGB] : COMPRESSED_RGB_PVRTC_4BPPV1_IMG,\n    [PVR_FORMAT_4BPP_RGBA] : COMPRESSED_RGBA_PVRTC_4BPPV1_IMG,\n    [PVR_FORMAT_ETC1] : COMPRESSED_RGB_ETC1_WEBGL,\n    [PVR_FORMAT_DXT1] : COMPRESSED_RGB_S3TC_DXT1_EXT,\n    [PVR_FORMAT_DXT3] : COMPRESSED_RGBA_S3TC_DXT3_EXT,\n    [PVR_FORMAT_DXT5] : COMPRESSED_RGBA_S3TC_DXT5_EXT\n};\n\nfunction levelBufferSize(format, width, height) {\n    switch (format) {\n        case COMPRESSED_RGB_S3TC_DXT1_EXT:\n        case COMPRESSED_RGB_ETC1_WEBGL:\n            return ((width + 3) >> 2) * ((height + 3) >> 2) * 8;\n\n        case COMPRESSED_RGBA_S3TC_DXT3_EXT:\n        case COMPRESSED_RGBA_S3TC_DXT5_EXT:\n            return ((width + 3) >> 2) * ((height + 3) >> 2) * 16;\n\n        case COMPRESSED_RGB_PVRTC_4BPPV1_IMG:\n        case COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:\n            return Math.floor((Math.max(width, 8) * Math.max(height, 8) * 4 + 7) / 8);\n\n        case COMPRESSED_RGB_PVRTC_2BPPV1_IMG:\n        case COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:\n            return Math.floor((Math.max(width, 16) * Math.max(height, 8) * 2 + 7) / 8);\n\n        default:\n            return 0;\n    }\n}\n*/\n\n// parse and return the compressed texture\nfunction parsePVR() {\n\n    throw new Error(\"unsupported format\");\n\n    /*\n\n    // Create a new DataView from the data\n    let header = new Uint32Array(data, 0, PVR_HEADER_LENGTH);\n\n    //console.log(header);\n\n    // VERSION\n    //const version = header[PVR_HEADER_FORMAT];\n    //const versionMatch = version === PVR_MAGIC;\n\n    //  PIXEL_FORMAT_INDEX\n    const pvrFormat = PVR_TO_WEBGL_FORMAT[header[PVR_HEADER_FORMAT]] || -1;\n    const width = header[PVR_HEADER_WIDTH];\n    const height = header[PVR_HEADER_HEIGHT];\n    const dataOffset = header[PVR_HEADER_METADATA] + 52;\n    //const colorSpace = header[PVR_COLOR_SPACE];\n    const mipmapCount = header[PVR_HEADER_MIPMAPCOUNT];\n\n    var image = new Uint8Array(data, dataOffset);\n    var mipmaps = new Array(mipmapCount);\n\n    var offset = 0;\n    var levelWidth = width;\n    var levelHeight = height;\n\n    for (var i = 0; i < mipmapCount; i++)\n    {\n        var levelSize = levelBufferSize(pvrFormat, levelWidth, levelHeight);\n\n        mipmaps[i] = {\n            data: new Uint8Array(image.buffer, image.byteOffset + offset, levelSize),\n            width: levelWidth,\n            height: levelHeight\n        };\n\n        levelWidth = Math.max(1, levelWidth >> 1);\n        levelHeight = Math.max(1, levelHeight >> 1);\n\n        offset += levelSize;\n    }\n\n    return {\n        mipmaps: mipmaps,\n        width: width,\n        height: height,\n        format: pvrFormat,\n        compressed: true,\n        generateMipmap: false\n    };\n\n    */\n}\n\n// parse and return the compressed texture\nfunction parsePKM(/*data, formats*/) {\n    throw new Error(\"unsupported format\");\n}\n\nlet _renderer;\n\n// gracefully capture a reference to the active renderer without adding more cyclic redundancy\nonce(VIDEO_INIT, (renderer) => {\n    _renderer = renderer;\n});\n\n\nfunction parseCompressedImage(arrayBuffer, imgExt) {\n    let texture;\n\n    // check if the current renderer is WebGL\n    if (_renderer.type.includes(\"WebGL\")) {\n        switch (imgExt) {\n            // Compressed texture\n            case \"dds\":\n                texture = parseDDS(arrayBuffer);\n                break;\n            case \"pvr\":\n                texture = parsePVR(arrayBuffer);\n                break;\n            case \"pkm\":\n                texture = parsePKM(arrayBuffer);\n                break;\n            case \"ktx\":\n                texture = parseKTX(arrayBuffer);\n                break;\n            case \"ktx2\":\n                texture = parseKTX2(arrayBuffer);\n                break;\n        }\n    }\n\n    if (typeof texture !== \"undefined\") {\n        if (_renderer.hasSupportedCompressedFormats(texture.format)) {\n            console.log(\"Compressed texture format supported: \" + texture.format);\n            return texture;\n        }\n    }\n\n    throw (\"unsupported texture format:\" + imgExt + texture ? \" (\" + texture.format + \")\" : \"\");\n}\n\n/**\n * parse/preload an image\n * @param {loader.Asset} img\n * @param {Function} [onload] - function to be called when the resource is loaded\n * @param {Function} [onerror] - function to be called in case of error\n * @param {Object} [settings] - Additional settings to be passed when loading the asset\n * @returns {number} the amount of corresponding resource parsed/preloaded\n * @ignore\n * @example\n * preloadImages([\n *     { name : 'image1', src : 'images/image1.png'},\n *     { name : 'image2', src : 'images/image2.png'},\n *     { name : 'image3', src : 'images/image3.png'},\n *     { name : 'image4', src : 'images/image4.png'}\n * ]);\n */\nfunction preloadImage(img, onload, onerror, settings) {\n    if (typeof imgList[img.name] !== \"undefined\") {\n        // already loaded\n        return 0;\n    }\n\n    let sources = Array.isArray(img.src) ? img.src : [img.src];\n    let isFormatSupported = false;\n\n    for (const imgPath of sources) {\n        const imgExt = getExtension(imgPath);\n        // loop will stop as soon as a first supported format is detected\n        switch (imgExt) {\n            // Compressed texture\n            case \"dds\":\n            case \"pvr\":\n            case \"pkm\":\n            case \"ktx\":\n            case \"ktx2\":\n                fetchData(imgPath, \"arrayBuffer\", settings)\n                    .then(arrayBuffer => {\n                        try {\n                            imgList[img.name] = parseCompressedImage(arrayBuffer, imgExt);\n                            isFormatSupported = true;\n                            if (typeof onload === \"function\") {\n                                // callback\n                                onload();\n                            }\n                        } catch {\n                            // parseCompressedImage will throw an error if a format is not supported or badly formatted\n                        }\n                    }).catch(error => {\n                        if (typeof onerror === \"function\") {\n                            // file cannot be loaded\n                            onerror(error);\n                        }\n                    });\n                break;\n\n            // SVG file\n            case \"svg\":\n                fetchData(imgPath, \"text\", settings)\n                    .then(svgText => {\n                        const svgImage = new Image();\n                        svgImage.onload = function() {\n                            imgList[img.name] = svgImage;\n                            if (typeof onload === \"function\") {\n                                // callback\n                                onload();\n                            }\n                        };\n                        svgImage.onerror = function(error) {\n                            if (typeof onerror === \"function\") {\n                                onerror(error);\n                            }\n                        };\n                        svgImage.src = \"data:image/svg+xml;charset=utf8,\" + encodeURIComponent(svgText);\n                    })\n                    .catch(error => {\n                        if (typeof onerror === \"function\") {\n                            onerror(error);\n                        }\n                    });\n                isFormatSupported = true;\n                break;\n\n            // default is regular images (jpg, png and friends)\n            default:\n                fetchData(imgPath, \"blob\", settings)\n                    .then(blob => {\n                        globalThis.createImageBitmap(blob)\n                            .then((bitmap) => {\n                                imgList[img.name] = bitmap;\n                                if (typeof onload === \"function\") {\n                                    // callback\n                                    onload();\n                                }\n                            });\n                    })\n                    .catch(error => {\n                        if (typeof onerror === \"function\") {\n                            onerror(error);\n                        }\n                    });\n                isFormatSupported = true;\n                break;\n        }\n\n        // exit the loop as soon as the first supported format is detected\n        if (isFormatSupported === true) {\n            return 1;\n        }\n    }\n\n    // no compatible format was found\n    throw new Error(\n        \"No supported Image file format found for \" + img.name\n    );\n}\n\n/**\n * parse/preload a font face\n * @param {loader.Asset} data - asset data\n * @param {Function} [onload] - function to be called when the asset is loaded\n * @param {Function} [onerror] - function to be called in case of error\n * @returns {number} the amount of corresponding resource parsed/preloaded\n * @ignore\n * @example\n * preloadFontFace(\n *     name: \"'kenpixel'\", type: \"fontface\",  src: \"url('data/font/kenvector_future.woff2')\"\n * ]);\n */\nfunction preloadFontFace(data, onload, onerror) {\n    const fontFaceSet = typeof globalThis.document !== \"undefined\" ? globalThis.document.fonts : undefined;\n\n    if (isDataUrl(data.src) === true) {\n        // make sure it in the `url(data:[<mediatype>][;base64],<data>)` format as expected by FontFace\n        if (!data.src.startsWith(\"url(\")) {\n            data.src = \"url(\" + data.src + \")\";\n        }\n    }\n\n    if (typeof fontFaceSet !== \"undefined\") {\n        // create a new font face\n        let font = new FontFace(data.name, data.src);\n        // loading promise\n        font.load().then(() => {\n            // add the font to the cache\n            fontList[data.name] = font;\n            // add the font to the document\n            fontFaceSet.add(font);\n            // onloaded callback\n            if (typeof onload === \"function\") {\n                onload();\n            }\n        }, () => {\n            // rejected\n            if (typeof onerror === \"function\") {\n                onerror(data.name);\n            }\n        });\n\n    } else {\n        if (typeof onerror === \"function\") {\n            onerror(error);\n        }\n    }\n\n    return 1;\n}\n\nvar re$3 = {exports: {}};\n\n// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nconst SEMVER_SPEC_VERSION = '2.0.0';\n\nconst MAX_LENGTH$1 = 256;\nconst MAX_SAFE_INTEGER$1 = Number.MAX_SAFE_INTEGER ||\n/* istanbul ignore next */ 9007199254740991;\n\n// Max safe segment length for coercion.\nconst MAX_SAFE_COMPONENT_LENGTH = 16;\n\n// Max safe length for a build identifier. The max length minus 6 characters for\n// the shortest version with a build 0.0.0+BUILD.\nconst MAX_SAFE_BUILD_LENGTH = MAX_LENGTH$1 - 6;\n\nconst RELEASE_TYPES = [\n  'major',\n  'premajor',\n  'minor',\n  'preminor',\n  'patch',\n  'prepatch',\n  'prerelease',\n];\n\nvar constants$1 = {\n  MAX_LENGTH: MAX_LENGTH$1,\n  MAX_SAFE_COMPONENT_LENGTH,\n  MAX_SAFE_BUILD_LENGTH,\n  MAX_SAFE_INTEGER: MAX_SAFE_INTEGER$1,\n  RELEASE_TYPES,\n  SEMVER_SPEC_VERSION,\n  FLAG_INCLUDE_PRERELEASE: 0b001,\n  FLAG_LOOSE: 0b010,\n};\n\nvar constants$2 = /*@__PURE__*/getDefaultExportFromCjs(constants$1);\n\nconst debug$1 = (\n  typeof process === 'object' &&\n  process.env &&\n  process.env.NODE_DEBUG &&\n  /\\bsemver\\b/i.test(process.env.NODE_DEBUG)\n) ? (...args) => console.error('SEMVER', ...args)\n  : () => {};\n\nvar debug_1 = debug$1;\n\nvar debug$2 = /*@__PURE__*/getDefaultExportFromCjs(debug_1);\n\nvar re_1 = re$3.exports;\n\n(function (module, exports) {\n\tconst {\n\t  MAX_SAFE_COMPONENT_LENGTH,\n\t  MAX_SAFE_BUILD_LENGTH,\n\t  MAX_LENGTH,\n\t} = constants$1;\n\tconst debug = debug_1;\n\texports = module.exports = {};\n\n\t// The actual regexps go on exports.re\n\tconst re = exports.re = [];\n\tconst safeRe = exports.safeRe = [];\n\tconst src = exports.src = [];\n\tconst t = exports.t = {};\n\tlet R = 0;\n\n\tconst LETTERDASHNUMBER = '[a-zA-Z0-9-]';\n\n\t// Replace some greedy regex tokens to prevent regex dos issues. These regex are\n\t// used internally via the safeRe object since all inputs in this library get\n\t// normalized first to trim and collapse all extra whitespace. The original\n\t// regexes are exported for userland consumption and lower level usage. A\n\t// future breaking change could export the safer regex only with a note that\n\t// all input should have extra whitespace removed.\n\tconst safeRegexReplacements = [\n\t  ['\\\\s', 1],\n\t  ['\\\\d', MAX_LENGTH],\n\t  [LETTERDASHNUMBER, MAX_SAFE_BUILD_LENGTH],\n\t];\n\n\tconst makeSafeRegex = (value) => {\n\t  for (const [token, max] of safeRegexReplacements) {\n\t    value = value\n\t      .split(`${token}*`).join(`${token}{0,${max}}`)\n\t      .split(`${token}+`).join(`${token}{1,${max}}`);\n\t  }\n\t  return value\n\t};\n\n\tconst createToken = (name, value, isGlobal) => {\n\t  const safe = makeSafeRegex(value);\n\t  const index = R++;\n\t  debug(name, index, value);\n\t  t[name] = index;\n\t  src[index] = value;\n\t  re[index] = new RegExp(value, isGlobal ? 'g' : undefined);\n\t  safeRe[index] = new RegExp(safe, isGlobal ? 'g' : undefined);\n\t};\n\n\t// The following Regular Expressions can be used for tokenizing,\n\t// validating, and parsing SemVer version strings.\n\n\t// ## Numeric Identifier\n\t// A single `0`, or a non-zero digit followed by zero or more digits.\n\n\tcreateToken('NUMERICIDENTIFIER', '0|[1-9]\\\\d*');\n\tcreateToken('NUMERICIDENTIFIERLOOSE', '\\\\d+');\n\n\t// ## Non-numeric Identifier\n\t// Zero or more digits, followed by a letter or hyphen, and then zero or\n\t// more letters, digits, or hyphens.\n\n\tcreateToken('NONNUMERICIDENTIFIER', `\\\\d*[a-zA-Z-]${LETTERDASHNUMBER}*`);\n\n\t// ## Main Version\n\t// Three dot-separated numeric identifiers.\n\n\tcreateToken('MAINVERSION', `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n\t                   `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n\t                   `(${src[t.NUMERICIDENTIFIER]})`);\n\n\tcreateToken('MAINVERSIONLOOSE', `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n\t                        `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n\t                        `(${src[t.NUMERICIDENTIFIERLOOSE]})`);\n\n\t// ## Pre-release Version Identifier\n\t// A numeric identifier, or a non-numeric identifier.\n\n\tcreateToken('PRERELEASEIDENTIFIER', `(?:${src[t.NUMERICIDENTIFIER]\n\t}|${src[t.NONNUMERICIDENTIFIER]})`);\n\n\tcreateToken('PRERELEASEIDENTIFIERLOOSE', `(?:${src[t.NUMERICIDENTIFIERLOOSE]\n\t}|${src[t.NONNUMERICIDENTIFIER]})`);\n\n\t// ## Pre-release Version\n\t// Hyphen, followed by one or more dot-separated pre-release version\n\t// identifiers.\n\n\tcreateToken('PRERELEASE', `(?:-(${src[t.PRERELEASEIDENTIFIER]\n\t}(?:\\\\.${src[t.PRERELEASEIDENTIFIER]})*))`);\n\n\tcreateToken('PRERELEASELOOSE', `(?:-?(${src[t.PRERELEASEIDENTIFIERLOOSE]\n\t}(?:\\\\.${src[t.PRERELEASEIDENTIFIERLOOSE]})*))`);\n\n\t// ## Build Metadata Identifier\n\t// Any combination of digits, letters, or hyphens.\n\n\tcreateToken('BUILDIDENTIFIER', `${LETTERDASHNUMBER}+`);\n\n\t// ## Build Metadata\n\t// Plus sign, followed by one or more period-separated build metadata\n\t// identifiers.\n\n\tcreateToken('BUILD', `(?:\\\\+(${src[t.BUILDIDENTIFIER]\n\t}(?:\\\\.${src[t.BUILDIDENTIFIER]})*))`);\n\n\t// ## Full Version String\n\t// A main version, followed optionally by a pre-release version and\n\t// build metadata.\n\n\t// Note that the only major, minor, patch, and pre-release sections of\n\t// the version string are capturing groups.  The build metadata is not a\n\t// capturing group, because it should not ever be used in version\n\t// comparison.\n\n\tcreateToken('FULLPLAIN', `v?${src[t.MAINVERSION]\n\t}${src[t.PRERELEASE]}?${\n\t  src[t.BUILD]}?`);\n\n\tcreateToken('FULL', `^${src[t.FULLPLAIN]}$`);\n\n\t// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n\t// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n\t// common in the npm registry.\n\tcreateToken('LOOSEPLAIN', `[v=\\\\s]*${src[t.MAINVERSIONLOOSE]\n\t}${src[t.PRERELEASELOOSE]}?${\n\t  src[t.BUILD]}?`);\n\n\tcreateToken('LOOSE', `^${src[t.LOOSEPLAIN]}$`);\n\n\tcreateToken('GTLT', '((?:<|>)?=?)');\n\n\t// Something like \"2.*\" or \"1.2.x\".\n\t// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n\t// Only the first item is strictly required.\n\tcreateToken('XRANGEIDENTIFIERLOOSE', `${src[t.NUMERICIDENTIFIERLOOSE]}|x|X|\\\\*`);\n\tcreateToken('XRANGEIDENTIFIER', `${src[t.NUMERICIDENTIFIER]}|x|X|\\\\*`);\n\n\tcreateToken('XRANGEPLAIN', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIER]})` +\n\t                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n\t                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n\t                   `(?:${src[t.PRERELEASE]})?${\n\t                     src[t.BUILD]}?` +\n\t                   `)?)?`);\n\n\tcreateToken('XRANGEPLAINLOOSE', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n\t                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n\t                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n\t                        `(?:${src[t.PRERELEASELOOSE]})?${\n\t                          src[t.BUILD]}?` +\n\t                        `)?)?`);\n\n\tcreateToken('XRANGE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAIN]}$`);\n\tcreateToken('XRANGELOOSE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAINLOOSE]}$`);\n\n\t// Coercion.\n\t// Extract anything that could conceivably be a part of a valid semver\n\tcreateToken('COERCEPLAIN', `${'(^|[^\\\\d])' +\n\t              '(\\\\d{1,'}${MAX_SAFE_COMPONENT_LENGTH}})` +\n\t              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?` +\n\t              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?`);\n\tcreateToken('COERCE', `${src[t.COERCEPLAIN]}(?:$|[^\\\\d])`);\n\tcreateToken('COERCEFULL', src[t.COERCEPLAIN] +\n\t              `(?:${src[t.PRERELEASE]})?` +\n\t              `(?:${src[t.BUILD]})?` +\n\t              `(?:$|[^\\\\d])`);\n\tcreateToken('COERCERTL', src[t.COERCE], true);\n\tcreateToken('COERCERTLFULL', src[t.COERCEFULL], true);\n\n\t// Tilde ranges.\n\t// Meaning is \"reasonably at or greater than\"\n\tcreateToken('LONETILDE', '(?:~>?)');\n\n\tcreateToken('TILDETRIM', `(\\\\s*)${src[t.LONETILDE]}\\\\s+`, true);\n\texports.tildeTrimReplace = '$1~';\n\n\tcreateToken('TILDE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAIN]}$`);\n\tcreateToken('TILDELOOSE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAINLOOSE]}$`);\n\n\t// Caret ranges.\n\t// Meaning is \"at least and backwards compatible with\"\n\tcreateToken('LONECARET', '(?:\\\\^)');\n\n\tcreateToken('CARETTRIM', `(\\\\s*)${src[t.LONECARET]}\\\\s+`, true);\n\texports.caretTrimReplace = '$1^';\n\n\tcreateToken('CARET', `^${src[t.LONECARET]}${src[t.XRANGEPLAIN]}$`);\n\tcreateToken('CARETLOOSE', `^${src[t.LONECARET]}${src[t.XRANGEPLAINLOOSE]}$`);\n\n\t// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\n\tcreateToken('COMPARATORLOOSE', `^${src[t.GTLT]}\\\\s*(${src[t.LOOSEPLAIN]})$|^$`);\n\tcreateToken('COMPARATOR', `^${src[t.GTLT]}\\\\s*(${src[t.FULLPLAIN]})$|^$`);\n\n\t// An expression to strip any whitespace between the gtlt and the thing\n\t// it modifies, so that `> 1.2.3` ==> `>1.2.3`\n\tcreateToken('COMPARATORTRIM', `(\\\\s*)${src[t.GTLT]\n\t}\\\\s*(${src[t.LOOSEPLAIN]}|${src[t.XRANGEPLAIN]})`, true);\n\texports.comparatorTrimReplace = '$1$2$3';\n\n\t// Something like `1.2.3 - 1.2.4`\n\t// Note that these all use the loose form, because they'll be\n\t// checked against either the strict or loose comparator form\n\t// later.\n\tcreateToken('HYPHENRANGE', `^\\\\s*(${src[t.XRANGEPLAIN]})` +\n\t                   `\\\\s+-\\\\s+` +\n\t                   `(${src[t.XRANGEPLAIN]})` +\n\t                   `\\\\s*$`);\n\n\tcreateToken('HYPHENRANGELOOSE', `^\\\\s*(${src[t.XRANGEPLAINLOOSE]})` +\n\t                        `\\\\s+-\\\\s+` +\n\t                        `(${src[t.XRANGEPLAINLOOSE]})` +\n\t                        `\\\\s*$`);\n\n\t// Star ranges basically just allow anything at all.\n\tcreateToken('STAR', '(<|>)?=?\\\\s*\\\\*');\n\t// >=0.0.0 is like a star\n\tcreateToken('GTE0', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0\\\\s*$');\n\tcreateToken('GTE0PRE', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0-0\\\\s*$'); \n} (re$3, re$3.exports));\n\nvar reExports = re$3.exports;\nvar re$2 = /*@__PURE__*/getDefaultExportFromCjs(reExports);\n\n// parse out just the options we care about\nconst looseOption = Object.freeze({ loose: true });\nconst emptyOpts = Object.freeze({ });\nconst parseOptions$1 = options => {\n  if (!options) {\n    return emptyOpts\n  }\n\n  if (typeof options !== 'object') {\n    return looseOption\n  }\n\n  return options\n};\nvar parseOptions_1 = parseOptions$1;\n\nvar parseOptions$2 = /*@__PURE__*/getDefaultExportFromCjs(parseOptions_1);\n\nconst numeric = /^[0-9]+$/;\nconst compareIdentifiers$1 = (a, b) => {\n  const anum = numeric.test(a);\n  const bnum = numeric.test(b);\n\n  if (anum && bnum) {\n    a = +a;\n    b = +b;\n  }\n\n  return a === b ? 0\n    : (anum && !bnum) ? -1\n    : (bnum && !anum) ? 1\n    : a < b ? -1\n    : 1\n};\n\nconst rcompareIdentifiers = (a, b) => compareIdentifiers$1(b, a);\n\nvar identifiers$1 = {\n  compareIdentifiers: compareIdentifiers$1,\n  rcompareIdentifiers,\n};\n\nvar identifiers$2 = /*@__PURE__*/getDefaultExportFromCjs(identifiers$1);\n\nconst debug = debug_1;\nconst { MAX_LENGTH, MAX_SAFE_INTEGER } = constants$1;\nconst { safeRe: re$1, t: t$1 } = reExports;\n\nconst parseOptions = parseOptions_1;\nconst { compareIdentifiers } = identifiers$1;\nlet SemVer$d = class SemVer {\n  constructor (version, options) {\n    options = parseOptions(options);\n\n    if (version instanceof SemVer) {\n      if (version.loose === !!options.loose &&\n          version.includePrerelease === !!options.includePrerelease) {\n        return version\n      } else {\n        version = version.version;\n      }\n    } else if (typeof version !== 'string') {\n      throw new TypeError(`Invalid version. Must be a string. Got type \"${typeof version}\".`)\n    }\n\n    if (version.length > MAX_LENGTH) {\n      throw new TypeError(\n        `version is longer than ${MAX_LENGTH} characters`\n      )\n    }\n\n    debug('SemVer', version, options);\n    this.options = options;\n    this.loose = !!options.loose;\n    // this isn't actually relevant for versions, but keep it so that we\n    // don't run into trouble passing this.options around.\n    this.includePrerelease = !!options.includePrerelease;\n\n    const m = version.trim().match(options.loose ? re$1[t$1.LOOSE] : re$1[t$1.FULL]);\n\n    if (!m) {\n      throw new TypeError(`Invalid Version: ${version}`)\n    }\n\n    this.raw = version;\n\n    // these are actually numbers\n    this.major = +m[1];\n    this.minor = +m[2];\n    this.patch = +m[3];\n\n    if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n      throw new TypeError('Invalid major version')\n    }\n\n    if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n      throw new TypeError('Invalid minor version')\n    }\n\n    if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n      throw new TypeError('Invalid patch version')\n    }\n\n    // numberify any prerelease numeric ids\n    if (!m[4]) {\n      this.prerelease = [];\n    } else {\n      this.prerelease = m[4].split('.').map((id) => {\n        if (/^[0-9]+$/.test(id)) {\n          const num = +id;\n          if (num >= 0 && num < MAX_SAFE_INTEGER) {\n            return num\n          }\n        }\n        return id\n      });\n    }\n\n    this.build = m[5] ? m[5].split('.') : [];\n    this.format();\n  }\n\n  format () {\n    this.version = `${this.major}.${this.minor}.${this.patch}`;\n    if (this.prerelease.length) {\n      this.version += `-${this.prerelease.join('.')}`;\n    }\n    return this.version\n  }\n\n  toString () {\n    return this.version\n  }\n\n  compare (other) {\n    debug('SemVer.compare', this.version, this.options, other);\n    if (!(other instanceof SemVer)) {\n      if (typeof other === 'string' && other === this.version) {\n        return 0\n      }\n      other = new SemVer(other, this.options);\n    }\n\n    if (other.version === this.version) {\n      return 0\n    }\n\n    return this.compareMain(other) || this.comparePre(other)\n  }\n\n  compareMain (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options);\n    }\n\n    return (\n      compareIdentifiers(this.major, other.major) ||\n      compareIdentifiers(this.minor, other.minor) ||\n      compareIdentifiers(this.patch, other.patch)\n    )\n  }\n\n  comparePre (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options);\n    }\n\n    // NOT having a prerelease is > having one\n    if (this.prerelease.length && !other.prerelease.length) {\n      return -1\n    } else if (!this.prerelease.length && other.prerelease.length) {\n      return 1\n    } else if (!this.prerelease.length && !other.prerelease.length) {\n      return 0\n    }\n\n    let i = 0;\n    do {\n      const a = this.prerelease[i];\n      const b = other.prerelease[i];\n      debug('prerelease compare', i, a, b);\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  compareBuild (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options);\n    }\n\n    let i = 0;\n    do {\n      const a = this.build[i];\n      const b = other.build[i];\n      debug('build compare', i, a, b);\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  // preminor will bump the version up to the next minor release, and immediately\n  // down to pre-release. premajor and prepatch work the same way.\n  inc (release, identifier, identifierBase) {\n    switch (release) {\n      case 'premajor':\n        this.prerelease.length = 0;\n        this.patch = 0;\n        this.minor = 0;\n        this.major++;\n        this.inc('pre', identifier, identifierBase);\n        break\n      case 'preminor':\n        this.prerelease.length = 0;\n        this.patch = 0;\n        this.minor++;\n        this.inc('pre', identifier, identifierBase);\n        break\n      case 'prepatch':\n        // If this is already a prerelease, it will bump to the next version\n        // drop any prereleases that might already exist, since they are not\n        // relevant at this point.\n        this.prerelease.length = 0;\n        this.inc('patch', identifier, identifierBase);\n        this.inc('pre', identifier, identifierBase);\n        break\n      // If the input is a non-prerelease version, this acts the same as\n      // prepatch.\n      case 'prerelease':\n        if (this.prerelease.length === 0) {\n          this.inc('patch', identifier, identifierBase);\n        }\n        this.inc('pre', identifier, identifierBase);\n        break\n\n      case 'major':\n        // If this is a pre-major version, bump up to the same major version.\n        // Otherwise increment major.\n        // 1.0.0-5 bumps to 1.0.0\n        // 1.1.0 bumps to 2.0.0\n        if (\n          this.minor !== 0 ||\n          this.patch !== 0 ||\n          this.prerelease.length === 0\n        ) {\n          this.major++;\n        }\n        this.minor = 0;\n        this.patch = 0;\n        this.prerelease = [];\n        break\n      case 'minor':\n        // If this is a pre-minor version, bump up to the same minor version.\n        // Otherwise increment minor.\n        // 1.2.0-5 bumps to 1.2.0\n        // 1.2.1 bumps to 1.3.0\n        if (this.patch !== 0 || this.prerelease.length === 0) {\n          this.minor++;\n        }\n        this.patch = 0;\n        this.prerelease = [];\n        break\n      case 'patch':\n        // If this is not a pre-release version, it will increment the patch.\n        // If it is a pre-release it will bump up to the same patch version.\n        // 1.2.0-5 patches to 1.2.0\n        // 1.2.0 patches to 1.2.1\n        if (this.prerelease.length === 0) {\n          this.patch++;\n        }\n        this.prerelease = [];\n        break\n      // This probably shouldn't be used publicly.\n      // 1.0.0 'pre' would become 1.0.0-0 which is the wrong direction.\n      case 'pre': {\n        const base = Number(identifierBase) ? 1 : 0;\n\n        if (!identifier && identifierBase === false) {\n          throw new Error('invalid increment argument: identifier is empty')\n        }\n\n        if (this.prerelease.length === 0) {\n          this.prerelease = [base];\n        } else {\n          let i = this.prerelease.length;\n          while (--i >= 0) {\n            if (typeof this.prerelease[i] === 'number') {\n              this.prerelease[i]++;\n              i = -2;\n            }\n          }\n          if (i === -1) {\n            // didn't increment anything\n            if (identifier === this.prerelease.join('.') && identifierBase === false) {\n              throw new Error('invalid increment argument: identifier already exists')\n            }\n            this.prerelease.push(base);\n          }\n        }\n        if (identifier) {\n          // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n          // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n          let prerelease = [identifier, base];\n          if (identifierBase === false) {\n            prerelease = [identifier];\n          }\n          if (compareIdentifiers(this.prerelease[0], identifier) === 0) {\n            if (isNaN(this.prerelease[1])) {\n              this.prerelease = prerelease;\n            }\n          } else {\n            this.prerelease = prerelease;\n          }\n        }\n        break\n      }\n      default:\n        throw new Error(`invalid increment argument: ${release}`)\n    }\n    this.raw = this.format();\n    if (this.build.length) {\n      this.raw += `+${this.build.join('.')}`;\n    }\n    return this\n  }\n};\n\nvar semver$1 = SemVer$d;\n\nvar semver$2 = /*@__PURE__*/getDefaultExportFromCjs(semver$1);\n\nconst SemVer$c = semver$1;\nconst parse$7 = (version, options, throwErrors = false) => {\n  if (version instanceof SemVer$c) {\n    return version\n  }\n  try {\n    return new SemVer$c(version, options)\n  } catch (er) {\n    if (!throwErrors) {\n      return null\n    }\n    throw er\n  }\n};\n\nvar parse_1 = parse$7;\n\nvar parse$8 = /*@__PURE__*/getDefaultExportFromCjs(parse_1);\n\nconst parse$6 = parse_1;\nconst valid$3 = (version, options) => {\n  const v = parse$6(version, options);\n  return v ? v.version : null\n};\nvar valid_1 = valid$3;\n\nvar valid$4 = /*@__PURE__*/getDefaultExportFromCjs(valid_1);\n\nconst parse$5 = parse_1;\nconst clean$1 = (version, options) => {\n  const s = parse$5(version.trim().replace(/^[=v]+/, ''), options);\n  return s ? s.version : null\n};\nvar clean_1 = clean$1;\n\nvar clean$2 = /*@__PURE__*/getDefaultExportFromCjs(clean_1);\n\nconst SemVer$b = semver$1;\n\nconst inc$1 = (version, release, options, identifier, identifierBase) => {\n  if (typeof (options) === 'string') {\n    identifierBase = identifier;\n    identifier = options;\n    options = undefined;\n  }\n\n  try {\n    return new SemVer$b(\n      version instanceof SemVer$b ? version.version : version,\n      options\n    ).inc(release, identifier, identifierBase).version\n  } catch (er) {\n    return null\n  }\n};\nvar inc_1 = inc$1;\n\nvar inc$2 = /*@__PURE__*/getDefaultExportFromCjs(inc_1);\n\nconst parse$4 = parse_1;\n\nconst diff$1 = (version1, version2) => {\n  const v1 = parse$4(version1, null, true);\n  const v2 = parse$4(version2, null, true);\n  const comparison = v1.compare(v2);\n\n  if (comparison === 0) {\n    return null\n  }\n\n  const v1Higher = comparison > 0;\n  const highVersion = v1Higher ? v1 : v2;\n  const lowVersion = v1Higher ? v2 : v1;\n  const highHasPre = !!highVersion.prerelease.length;\n  const lowHasPre = !!lowVersion.prerelease.length;\n\n  if (lowHasPre && !highHasPre) {\n    // Going from prerelease -> no prerelease requires some special casing\n\n    // If the low version has only a major, then it will always be a major\n    // Some examples:\n    // 1.0.0-1 -> 1.0.0\n    // 1.0.0-1 -> 1.1.1\n    // 1.0.0-1 -> 2.0.0\n    if (!lowVersion.patch && !lowVersion.minor) {\n      return 'major'\n    }\n\n    // Otherwise it can be determined by checking the high version\n\n    if (highVersion.patch) {\n      // anything higher than a patch bump would result in the wrong version\n      return 'patch'\n    }\n\n    if (highVersion.minor) {\n      // anything higher than a minor bump would result in the wrong version\n      return 'minor'\n    }\n\n    // bumping major/minor/patch all have same result\n    return 'major'\n  }\n\n  // add the `pre` prefix if we are going to a prerelease version\n  const prefix = highHasPre ? 'pre' : '';\n\n  if (v1.major !== v2.major) {\n    return prefix + 'major'\n  }\n\n  if (v1.minor !== v2.minor) {\n    return prefix + 'minor'\n  }\n\n  if (v1.patch !== v2.patch) {\n    return prefix + 'patch'\n  }\n\n  // high and low are preleases\n  return 'prerelease'\n};\n\nvar diff_1 = diff$1;\n\nvar diff$2 = /*@__PURE__*/getDefaultExportFromCjs(diff_1);\n\nconst SemVer$a = semver$1;\nconst major$1 = (a, loose) => new SemVer$a(a, loose).major;\nvar major_1 = major$1;\n\nvar major$2 = /*@__PURE__*/getDefaultExportFromCjs(major_1);\n\nconst SemVer$9 = semver$1;\nconst minor$1 = (a, loose) => new SemVer$9(a, loose).minor;\nvar minor_1 = minor$1;\n\nvar minor$2 = /*@__PURE__*/getDefaultExportFromCjs(minor_1);\n\nconst SemVer$8 = semver$1;\nconst patch$2 = (a, loose) => new SemVer$8(a, loose).patch;\nvar patch_1 = patch$2;\n\nvar patch$3 = /*@__PURE__*/getDefaultExportFromCjs(patch_1);\n\nconst parse$3 = parse_1;\nconst prerelease$1 = (version, options) => {\n  const parsed = parse$3(version, options);\n  return (parsed && parsed.prerelease.length) ? parsed.prerelease : null\n};\nvar prerelease_1 = prerelease$1;\n\nvar prerelease$2 = /*@__PURE__*/getDefaultExportFromCjs(prerelease_1);\n\nconst SemVer$7 = semver$1;\nconst compare$b = (a, b, loose) =>\n  new SemVer$7(a, loose).compare(new SemVer$7(b, loose));\n\nvar compare_1 = compare$b;\n\nvar compare$c = /*@__PURE__*/getDefaultExportFromCjs(compare_1);\n\nconst compare$a = compare_1;\nconst rcompare$1 = (a, b, loose) => compare$a(b, a, loose);\nvar rcompare_1 = rcompare$1;\n\nvar rcompare$2 = /*@__PURE__*/getDefaultExportFromCjs(rcompare_1);\n\nconst compare$9 = compare_1;\nconst compareLoose$1 = (a, b) => compare$9(a, b, true);\nvar compareLoose_1 = compareLoose$1;\n\nvar compareLoose$2 = /*@__PURE__*/getDefaultExportFromCjs(compareLoose_1);\n\nconst SemVer$6 = semver$1;\nconst compareBuild$3 = (a, b, loose) => {\n  const versionA = new SemVer$6(a, loose);\n  const versionB = new SemVer$6(b, loose);\n  return versionA.compare(versionB) || versionA.compareBuild(versionB)\n};\nvar compareBuild_1 = compareBuild$3;\n\nvar compareBuild$4 = /*@__PURE__*/getDefaultExportFromCjs(compareBuild_1);\n\nconst compareBuild$2 = compareBuild_1;\nconst sort$1 = (list, loose) => list.sort((a, b) => compareBuild$2(a, b, loose));\nvar sort_1 = sort$1;\n\nvar sort$2 = /*@__PURE__*/getDefaultExportFromCjs(sort_1);\n\nconst compareBuild$1 = compareBuild_1;\nconst rsort$1 = (list, loose) => list.sort((a, b) => compareBuild$1(b, a, loose));\nvar rsort_1 = rsort$1;\n\nvar rsort$2 = /*@__PURE__*/getDefaultExportFromCjs(rsort_1);\n\nconst compare$8 = compare_1;\nconst gt$4 = (a, b, loose) => compare$8(a, b, loose) > 0;\nvar gt_1 = gt$4;\n\nvar gt$5 = /*@__PURE__*/getDefaultExportFromCjs(gt_1);\n\nconst compare$7 = compare_1;\nconst lt$3 = (a, b, loose) => compare$7(a, b, loose) < 0;\nvar lt_1 = lt$3;\n\nvar lt$4 = /*@__PURE__*/getDefaultExportFromCjs(lt_1);\n\nconst compare$6 = compare_1;\nconst eq$2 = (a, b, loose) => compare$6(a, b, loose) === 0;\nvar eq_1 = eq$2;\n\nvar eq$3 = /*@__PURE__*/getDefaultExportFromCjs(eq_1);\n\nconst compare$5 = compare_1;\nconst neq$2 = (a, b, loose) => compare$5(a, b, loose) !== 0;\nvar neq_1 = neq$2;\n\nvar neq$3 = /*@__PURE__*/getDefaultExportFromCjs(neq_1);\n\nconst compare$4 = compare_1;\nconst gte$3 = (a, b, loose) => compare$4(a, b, loose) >= 0;\nvar gte_1 = gte$3;\n\nvar gte$4 = /*@__PURE__*/getDefaultExportFromCjs(gte_1);\n\nconst compare$3 = compare_1;\nconst lte$3 = (a, b, loose) => compare$3(a, b, loose) <= 0;\nvar lte_1 = lte$3;\n\nvar lte$4 = /*@__PURE__*/getDefaultExportFromCjs(lte_1);\n\nconst eq$1 = eq_1;\nconst neq$1 = neq_1;\nconst gt$3 = gt_1;\nconst gte$2 = gte_1;\nconst lt$2 = lt_1;\nconst lte$2 = lte_1;\n\nconst cmp$1 = (a, op, b, loose) => {\n  switch (op) {\n    case '===':\n      if (typeof a === 'object') {\n        a = a.version;\n      }\n      if (typeof b === 'object') {\n        b = b.version;\n      }\n      return a === b\n\n    case '!==':\n      if (typeof a === 'object') {\n        a = a.version;\n      }\n      if (typeof b === 'object') {\n        b = b.version;\n      }\n      return a !== b\n\n    case '':\n    case '=':\n    case '==':\n      return eq$1(a, b, loose)\n\n    case '!=':\n      return neq$1(a, b, loose)\n\n    case '>':\n      return gt$3(a, b, loose)\n\n    case '>=':\n      return gte$2(a, b, loose)\n\n    case '<':\n      return lt$2(a, b, loose)\n\n    case '<=':\n      return lte$2(a, b, loose)\n\n    default:\n      throw new TypeError(`Invalid operator: ${op}`)\n  }\n};\nvar cmp_1 = cmp$1;\n\nvar cmp$2 = /*@__PURE__*/getDefaultExportFromCjs(cmp_1);\n\nconst SemVer$5 = semver$1;\nconst parse$2 = parse_1;\nconst { safeRe: re, t } = reExports;\n\nconst coerce$1 = (version, options) => {\n  if (version instanceof SemVer$5) {\n    return version\n  }\n\n  if (typeof version === 'number') {\n    version = String(version);\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  options = options || {};\n\n  let match = null;\n  if (!options.rtl) {\n    match = version.match(options.includePrerelease ? re[t.COERCEFULL] : re[t.COERCE]);\n  } else {\n    // Find the right-most coercible string that does not share\n    // a terminus with a more left-ward coercible string.\n    // Eg, '1.2.3.4' wants to coerce '2.3.4', not '3.4' or '4'\n    // With includePrerelease option set, '1.2.3.4-rc' wants to coerce '2.3.4-rc', not '2.3.4'\n    //\n    // Walk through the string checking with a /g regexp\n    // Manually set the index so as to pick up overlapping matches.\n    // Stop when we get a match that ends at the string end, since no\n    // coercible string can be more right-ward without the same terminus.\n    const coerceRtlRegex = options.includePrerelease ? re[t.COERCERTLFULL] : re[t.COERCERTL];\n    let next;\n    while ((next = coerceRtlRegex.exec(version)) &&\n        (!match || match.index + match[0].length !== version.length)\n    ) {\n      if (!match ||\n            next.index + next[0].length !== match.index + match[0].length) {\n        match = next;\n      }\n      coerceRtlRegex.lastIndex = next.index + next[1].length + next[2].length;\n    }\n    // leave it in a clean state\n    coerceRtlRegex.lastIndex = -1;\n  }\n\n  if (match === null) {\n    return null\n  }\n\n  const major = match[2];\n  const minor = match[3] || '0';\n  const patch = match[4] || '0';\n  const prerelease = options.includePrerelease && match[5] ? `-${match[5]}` : '';\n  const build = options.includePrerelease && match[6] ? `+${match[6]}` : '';\n\n  return parse$2(`${major}.${minor}.${patch}${prerelease}${build}`, options)\n};\nvar coerce_1 = coerce$1;\n\nvar coerce$2 = /*@__PURE__*/getDefaultExportFromCjs(coerce_1);\n\nclass LRUCache {\n  constructor () {\n    this.max = 1000;\n    this.map = new Map();\n  }\n\n  get (key) {\n    const value = this.map.get(key);\n    if (value === undefined) {\n      return undefined\n    } else {\n      // Remove the key from the map and add it to the end\n      this.map.delete(key);\n      this.map.set(key, value);\n      return value\n    }\n  }\n\n  delete (key) {\n    return this.map.delete(key)\n  }\n\n  set (key, value) {\n    const deleted = this.delete(key);\n\n    if (!deleted && value !== undefined) {\n      // If cache is full, delete the least recently used item\n      if (this.map.size >= this.max) {\n        const firstKey = this.map.keys().next().value;\n        this.delete(firstKey);\n      }\n\n      this.map.set(key, value);\n    }\n\n    return this\n  }\n}\n\nvar lrucache = LRUCache;\n\nvar lrucache$1 = /*@__PURE__*/getDefaultExportFromCjs(lrucache);\n\nvar range;\nvar hasRequiredRange;\n\nfunction requireRange () {\n\tif (hasRequiredRange) return range;\n\thasRequiredRange = 1;\n\t// hoisted class for cyclic dependency\n\tclass Range {\n\t  constructor (range, options) {\n\t    options = parseOptions(options);\n\n\t    if (range instanceof Range) {\n\t      if (\n\t        range.loose === !!options.loose &&\n\t        range.includePrerelease === !!options.includePrerelease\n\t      ) {\n\t        return range\n\t      } else {\n\t        return new Range(range.raw, options)\n\t      }\n\t    }\n\n\t    if (range instanceof Comparator) {\n\t      // just put it in the set and return\n\t      this.raw = range.value;\n\t      this.set = [[range]];\n\t      this.format();\n\t      return this\n\t    }\n\n\t    this.options = options;\n\t    this.loose = !!options.loose;\n\t    this.includePrerelease = !!options.includePrerelease;\n\n\t    // First reduce all whitespace as much as possible so we do not have to rely\n\t    // on potentially slow regexes like \\s*. This is then stored and used for\n\t    // future error messages as well.\n\t    this.raw = range\n\t      .trim()\n\t      .split(/\\s+/)\n\t      .join(' ');\n\n\t    // First, split on ||\n\t    this.set = this.raw\n\t      .split('||')\n\t      // map the range to a 2d array of comparators\n\t      .map(r => this.parseRange(r.trim()))\n\t      // throw out any comparator lists that are empty\n\t      // this generally means that it was not a valid range, which is allowed\n\t      // in loose mode, but will still throw if the WHOLE range is invalid.\n\t      .filter(c => c.length);\n\n\t    if (!this.set.length) {\n\t      throw new TypeError(`Invalid SemVer Range: ${this.raw}`)\n\t    }\n\n\t    // if we have any that are not the null set, throw out null sets.\n\t    if (this.set.length > 1) {\n\t      // keep the first one, in case they're all null sets\n\t      const first = this.set[0];\n\t      this.set = this.set.filter(c => !isNullSet(c[0]));\n\t      if (this.set.length === 0) {\n\t        this.set = [first];\n\t      } else if (this.set.length > 1) {\n\t        // if we have any that are *, then the range is just *\n\t        for (const c of this.set) {\n\t          if (c.length === 1 && isAny(c[0])) {\n\t            this.set = [c];\n\t            break\n\t          }\n\t        }\n\t      }\n\t    }\n\n\t    this.format();\n\t  }\n\n\t  format () {\n\t    this.range = this.set\n\t      .map((comps) => comps.join(' ').trim())\n\t      .join('||')\n\t      .trim();\n\t    return this.range\n\t  }\n\n\t  toString () {\n\t    return this.range\n\t  }\n\n\t  parseRange (range) {\n\t    // memoize range parsing for performance.\n\t    // this is a very hot path, and fully deterministic.\n\t    const memoOpts =\n\t      (this.options.includePrerelease && FLAG_INCLUDE_PRERELEASE) |\n\t      (this.options.loose && FLAG_LOOSE);\n\t    const memoKey = memoOpts + ':' + range;\n\t    const cached = cache.get(memoKey);\n\t    if (cached) {\n\t      return cached\n\t    }\n\n\t    const loose = this.options.loose;\n\t    // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n\t    const hr = loose ? re[t.HYPHENRANGELOOSE] : re[t.HYPHENRANGE];\n\t    range = range.replace(hr, hyphenReplace(this.options.includePrerelease));\n\t    debug('hyphen replace', range);\n\n\t    // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n\t    range = range.replace(re[t.COMPARATORTRIM], comparatorTrimReplace);\n\t    debug('comparator trim', range);\n\n\t    // `~ 1.2.3` => `~1.2.3`\n\t    range = range.replace(re[t.TILDETRIM], tildeTrimReplace);\n\t    debug('tilde trim', range);\n\n\t    // `^ 1.2.3` => `^1.2.3`\n\t    range = range.replace(re[t.CARETTRIM], caretTrimReplace);\n\t    debug('caret trim', range);\n\n\t    // At this point, the range is completely trimmed and\n\t    // ready to be split into comparators.\n\n\t    let rangeList = range\n\t      .split(' ')\n\t      .map(comp => parseComparator(comp, this.options))\n\t      .join(' ')\n\t      .split(/\\s+/)\n\t      // >=0.0.0 is equivalent to *\n\t      .map(comp => replaceGTE0(comp, this.options));\n\n\t    if (loose) {\n\t      // in loose mode, throw out any that are not valid comparators\n\t      rangeList = rangeList.filter(comp => {\n\t        debug('loose invalid filter', comp, this.options);\n\t        return !!comp.match(re[t.COMPARATORLOOSE])\n\t      });\n\t    }\n\t    debug('range list', rangeList);\n\n\t    // if any comparators are the null set, then replace with JUST null set\n\t    // if more than one comparator, remove any * comparators\n\t    // also, don't include the same comparator more than once\n\t    const rangeMap = new Map();\n\t    const comparators = rangeList.map(comp => new Comparator(comp, this.options));\n\t    for (const comp of comparators) {\n\t      if (isNullSet(comp)) {\n\t        return [comp]\n\t      }\n\t      rangeMap.set(comp.value, comp);\n\t    }\n\t    if (rangeMap.size > 1 && rangeMap.has('')) {\n\t      rangeMap.delete('');\n\t    }\n\n\t    const result = [...rangeMap.values()];\n\t    cache.set(memoKey, result);\n\t    return result\n\t  }\n\n\t  intersects (range, options) {\n\t    if (!(range instanceof Range)) {\n\t      throw new TypeError('a Range is required')\n\t    }\n\n\t    return this.set.some((thisComparators) => {\n\t      return (\n\t        isSatisfiable(thisComparators, options) &&\n\t        range.set.some((rangeComparators) => {\n\t          return (\n\t            isSatisfiable(rangeComparators, options) &&\n\t            thisComparators.every((thisComparator) => {\n\t              return rangeComparators.every((rangeComparator) => {\n\t                return thisComparator.intersects(rangeComparator, options)\n\t              })\n\t            })\n\t          )\n\t        })\n\t      )\n\t    })\n\t  }\n\n\t  // if ANY of the sets match ALL of its comparators, then pass\n\t  test (version) {\n\t    if (!version) {\n\t      return false\n\t    }\n\n\t    if (typeof version === 'string') {\n\t      try {\n\t        version = new SemVer(version, this.options);\n\t      } catch (er) {\n\t        return false\n\t      }\n\t    }\n\n\t    for (let i = 0; i < this.set.length; i++) {\n\t      if (testSet(this.set[i], version, this.options)) {\n\t        return true\n\t      }\n\t    }\n\t    return false\n\t  }\n\t}\n\n\trange = Range;\n\n\tconst LRU = lrucache;\n\tconst cache = new LRU();\n\n\tconst parseOptions = parseOptions_1;\n\tconst Comparator = requireComparator();\n\tconst debug = debug_1;\n\tconst SemVer = semver$1;\n\tconst {\n\t  safeRe: re,\n\t  t,\n\t  comparatorTrimReplace,\n\t  tildeTrimReplace,\n\t  caretTrimReplace,\n\t} = reExports;\n\tconst { FLAG_INCLUDE_PRERELEASE, FLAG_LOOSE } = constants$1;\n\n\tconst isNullSet = c => c.value === '<0.0.0-0';\n\tconst isAny = c => c.value === '';\n\n\t// take a set of comparators and determine whether there\n\t// exists a version which can satisfy it\n\tconst isSatisfiable = (comparators, options) => {\n\t  let result = true;\n\t  const remainingComparators = comparators.slice();\n\t  let testComparator = remainingComparators.pop();\n\n\t  while (result && remainingComparators.length) {\n\t    result = remainingComparators.every((otherComparator) => {\n\t      return testComparator.intersects(otherComparator, options)\n\t    });\n\n\t    testComparator = remainingComparators.pop();\n\t  }\n\n\t  return result\n\t};\n\n\t// comprised of xranges, tildes, stars, and gtlt's at this point.\n\t// already replaced the hyphen ranges\n\t// turn into a set of JUST comparators.\n\tconst parseComparator = (comp, options) => {\n\t  debug('comp', comp, options);\n\t  comp = replaceCarets(comp, options);\n\t  debug('caret', comp);\n\t  comp = replaceTildes(comp, options);\n\t  debug('tildes', comp);\n\t  comp = replaceXRanges(comp, options);\n\t  debug('xrange', comp);\n\t  comp = replaceStars(comp, options);\n\t  debug('stars', comp);\n\t  return comp\n\t};\n\n\tconst isX = id => !id || id.toLowerCase() === 'x' || id === '*';\n\n\t// ~, ~> --> * (any, kinda silly)\n\t// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0-0\n\t// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0-0\n\t// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0-0\n\t// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0-0\n\t// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0-0\n\t// ~0.0.1 --> >=0.0.1 <0.1.0-0\n\tconst replaceTildes = (comp, options) => {\n\t  return comp\n\t    .trim()\n\t    .split(/\\s+/)\n\t    .map((c) => replaceTilde(c, options))\n\t    .join(' ')\n\t};\n\n\tconst replaceTilde = (comp, options) => {\n\t  const r = options.loose ? re[t.TILDELOOSE] : re[t.TILDE];\n\t  return comp.replace(r, (_, M, m, p, pr) => {\n\t    debug('tilde', comp, _, M, m, p, pr);\n\t    let ret;\n\n\t    if (isX(M)) {\n\t      ret = '';\n\t    } else if (isX(m)) {\n\t      ret = `>=${M}.0.0 <${+M + 1}.0.0-0`;\n\t    } else if (isX(p)) {\n\t      // ~1.2 == >=1.2.0 <1.3.0-0\n\t      ret = `>=${M}.${m}.0 <${M}.${+m + 1}.0-0`;\n\t    } else if (pr) {\n\t      debug('replaceTilde pr', pr);\n\t      ret = `>=${M}.${m}.${p}-${pr\n\t      } <${M}.${+m + 1}.0-0`;\n\t    } else {\n\t      // ~1.2.3 == >=1.2.3 <1.3.0-0\n\t      ret = `>=${M}.${m}.${p\n\t      } <${M}.${+m + 1}.0-0`;\n\t    }\n\n\t    debug('tilde return', ret);\n\t    return ret\n\t  })\n\t};\n\n\t// ^ --> * (any, kinda silly)\n\t// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0-0\n\t// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0-0\n\t// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0-0\n\t// ^1.2.3 --> >=1.2.3 <2.0.0-0\n\t// ^1.2.0 --> >=1.2.0 <2.0.0-0\n\t// ^0.0.1 --> >=0.0.1 <0.0.2-0\n\t// ^0.1.0 --> >=0.1.0 <0.2.0-0\n\tconst replaceCarets = (comp, options) => {\n\t  return comp\n\t    .trim()\n\t    .split(/\\s+/)\n\t    .map((c) => replaceCaret(c, options))\n\t    .join(' ')\n\t};\n\n\tconst replaceCaret = (comp, options) => {\n\t  debug('caret', comp, options);\n\t  const r = options.loose ? re[t.CARETLOOSE] : re[t.CARET];\n\t  const z = options.includePrerelease ? '-0' : '';\n\t  return comp.replace(r, (_, M, m, p, pr) => {\n\t    debug('caret', comp, _, M, m, p, pr);\n\t    let ret;\n\n\t    if (isX(M)) {\n\t      ret = '';\n\t    } else if (isX(m)) {\n\t      ret = `>=${M}.0.0${z} <${+M + 1}.0.0-0`;\n\t    } else if (isX(p)) {\n\t      if (M === '0') {\n\t        ret = `>=${M}.${m}.0${z} <${M}.${+m + 1}.0-0`;\n\t      } else {\n\t        ret = `>=${M}.${m}.0${z} <${+M + 1}.0.0-0`;\n\t      }\n\t    } else if (pr) {\n\t      debug('replaceCaret pr', pr);\n\t      if (M === '0') {\n\t        if (m === '0') {\n\t          ret = `>=${M}.${m}.${p}-${pr\n\t          } <${M}.${m}.${+p + 1}-0`;\n\t        } else {\n\t          ret = `>=${M}.${m}.${p}-${pr\n\t          } <${M}.${+m + 1}.0-0`;\n\t        }\n\t      } else {\n\t        ret = `>=${M}.${m}.${p}-${pr\n\t        } <${+M + 1}.0.0-0`;\n\t      }\n\t    } else {\n\t      debug('no pr');\n\t      if (M === '0') {\n\t        if (m === '0') {\n\t          ret = `>=${M}.${m}.${p\n\t          }${z} <${M}.${m}.${+p + 1}-0`;\n\t        } else {\n\t          ret = `>=${M}.${m}.${p\n\t          }${z} <${M}.${+m + 1}.0-0`;\n\t        }\n\t      } else {\n\t        ret = `>=${M}.${m}.${p\n\t        } <${+M + 1}.0.0-0`;\n\t      }\n\t    }\n\n\t    debug('caret return', ret);\n\t    return ret\n\t  })\n\t};\n\n\tconst replaceXRanges = (comp, options) => {\n\t  debug('replaceXRanges', comp, options);\n\t  return comp\n\t    .split(/\\s+/)\n\t    .map((c) => replaceXRange(c, options))\n\t    .join(' ')\n\t};\n\n\tconst replaceXRange = (comp, options) => {\n\t  comp = comp.trim();\n\t  const r = options.loose ? re[t.XRANGELOOSE] : re[t.XRANGE];\n\t  return comp.replace(r, (ret, gtlt, M, m, p, pr) => {\n\t    debug('xRange', comp, ret, gtlt, M, m, p, pr);\n\t    const xM = isX(M);\n\t    const xm = xM || isX(m);\n\t    const xp = xm || isX(p);\n\t    const anyX = xp;\n\n\t    if (gtlt === '=' && anyX) {\n\t      gtlt = '';\n\t    }\n\n\t    // if we're including prereleases in the match, then we need\n\t    // to fix this to -0, the lowest possible prerelease value\n\t    pr = options.includePrerelease ? '-0' : '';\n\n\t    if (xM) {\n\t      if (gtlt === '>' || gtlt === '<') {\n\t        // nothing is allowed\n\t        ret = '<0.0.0-0';\n\t      } else {\n\t        // nothing is forbidden\n\t        ret = '*';\n\t      }\n\t    } else if (gtlt && anyX) {\n\t      // we know patch is an x, because we have any x at all.\n\t      // replace X with 0\n\t      if (xm) {\n\t        m = 0;\n\t      }\n\t      p = 0;\n\n\t      if (gtlt === '>') {\n\t        // >1 => >=2.0.0\n\t        // >1.2 => >=1.3.0\n\t        gtlt = '>=';\n\t        if (xm) {\n\t          M = +M + 1;\n\t          m = 0;\n\t          p = 0;\n\t        } else {\n\t          m = +m + 1;\n\t          p = 0;\n\t        }\n\t      } else if (gtlt === '<=') {\n\t        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n\t        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n\t        gtlt = '<';\n\t        if (xm) {\n\t          M = +M + 1;\n\t        } else {\n\t          m = +m + 1;\n\t        }\n\t      }\n\n\t      if (gtlt === '<') {\n\t        pr = '-0';\n\t      }\n\n\t      ret = `${gtlt + M}.${m}.${p}${pr}`;\n\t    } else if (xm) {\n\t      ret = `>=${M}.0.0${pr} <${+M + 1}.0.0-0`;\n\t    } else if (xp) {\n\t      ret = `>=${M}.${m}.0${pr\n\t      } <${M}.${+m + 1}.0-0`;\n\t    }\n\n\t    debug('xRange return', ret);\n\n\t    return ret\n\t  })\n\t};\n\n\t// Because * is AND-ed with everything else in the comparator,\n\t// and '' means \"any version\", just remove the *s entirely.\n\tconst replaceStars = (comp, options) => {\n\t  debug('replaceStars', comp, options);\n\t  // Looseness is ignored here.  star is always as loose as it gets!\n\t  return comp\n\t    .trim()\n\t    .replace(re[t.STAR], '')\n\t};\n\n\tconst replaceGTE0 = (comp, options) => {\n\t  debug('replaceGTE0', comp, options);\n\t  return comp\n\t    .trim()\n\t    .replace(re[options.includePrerelease ? t.GTE0PRE : t.GTE0], '')\n\t};\n\n\t// This function is passed to string.replace(re[t.HYPHENRANGE])\n\t// M, m, patch, prerelease, build\n\t// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n\t// 1.2.3 - 3.4 => >=1.2.0 <3.5.0-0 Any 3.4.x will do\n\t// 1.2 - 3.4 => >=1.2.0 <3.5.0-0\n\t// TODO build?\n\tconst hyphenReplace = incPr => ($0,\n\t  from, fM, fm, fp, fpr, fb,\n\t  to, tM, tm, tp, tpr) => {\n\t  if (isX(fM)) {\n\t    from = '';\n\t  } else if (isX(fm)) {\n\t    from = `>=${fM}.0.0${incPr ? '-0' : ''}`;\n\t  } else if (isX(fp)) {\n\t    from = `>=${fM}.${fm}.0${incPr ? '-0' : ''}`;\n\t  } else if (fpr) {\n\t    from = `>=${from}`;\n\t  } else {\n\t    from = `>=${from}${incPr ? '-0' : ''}`;\n\t  }\n\n\t  if (isX(tM)) {\n\t    to = '';\n\t  } else if (isX(tm)) {\n\t    to = `<${+tM + 1}.0.0-0`;\n\t  } else if (isX(tp)) {\n\t    to = `<${tM}.${+tm + 1}.0-0`;\n\t  } else if (tpr) {\n\t    to = `<=${tM}.${tm}.${tp}-${tpr}`;\n\t  } else if (incPr) {\n\t    to = `<${tM}.${tm}.${+tp + 1}-0`;\n\t  } else {\n\t    to = `<=${to}`;\n\t  }\n\n\t  return `${from} ${to}`.trim()\n\t};\n\n\tconst testSet = (set, version, options) => {\n\t  for (let i = 0; i < set.length; i++) {\n\t    if (!set[i].test(version)) {\n\t      return false\n\t    }\n\t  }\n\n\t  if (version.prerelease.length && !options.includePrerelease) {\n\t    // Find the set of versions that are allowed to have prereleases\n\t    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n\t    // That should allow `1.2.3-pr.2` to pass.\n\t    // However, `1.2.4-alpha.notready` should NOT be allowed,\n\t    // even though it's within the range set by the comparators.\n\t    for (let i = 0; i < set.length; i++) {\n\t      debug(set[i].semver);\n\t      if (set[i].semver === Comparator.ANY) {\n\t        continue\n\t      }\n\n\t      if (set[i].semver.prerelease.length > 0) {\n\t        const allowed = set[i].semver;\n\t        if (allowed.major === version.major &&\n\t            allowed.minor === version.minor &&\n\t            allowed.patch === version.patch) {\n\t          return true\n\t        }\n\t      }\n\t    }\n\n\t    // Version has a -pre, but it's not one of the ones we like.\n\t    return false\n\t  }\n\n\t  return true\n\t};\n\treturn range;\n}\n\nvar comparator;\nvar hasRequiredComparator;\n\nfunction requireComparator () {\n\tif (hasRequiredComparator) return comparator;\n\thasRequiredComparator = 1;\n\tconst ANY = Symbol('SemVer ANY');\n\t// hoisted class for cyclic dependency\n\tclass Comparator {\n\t  static get ANY () {\n\t    return ANY\n\t  }\n\n\t  constructor (comp, options) {\n\t    options = parseOptions(options);\n\n\t    if (comp instanceof Comparator) {\n\t      if (comp.loose === !!options.loose) {\n\t        return comp\n\t      } else {\n\t        comp = comp.value;\n\t      }\n\t    }\n\n\t    comp = comp.trim().split(/\\s+/).join(' ');\n\t    debug('comparator', comp, options);\n\t    this.options = options;\n\t    this.loose = !!options.loose;\n\t    this.parse(comp);\n\n\t    if (this.semver === ANY) {\n\t      this.value = '';\n\t    } else {\n\t      this.value = this.operator + this.semver.version;\n\t    }\n\n\t    debug('comp', this);\n\t  }\n\n\t  parse (comp) {\n\t    const r = this.options.loose ? re[t.COMPARATORLOOSE] : re[t.COMPARATOR];\n\t    const m = comp.match(r);\n\n\t    if (!m) {\n\t      throw new TypeError(`Invalid comparator: ${comp}`)\n\t    }\n\n\t    this.operator = m[1] !== undefined ? m[1] : '';\n\t    if (this.operator === '=') {\n\t      this.operator = '';\n\t    }\n\n\t    // if it literally is just '>' or '' then allow anything.\n\t    if (!m[2]) {\n\t      this.semver = ANY;\n\t    } else {\n\t      this.semver = new SemVer(m[2], this.options.loose);\n\t    }\n\t  }\n\n\t  toString () {\n\t    return this.value\n\t  }\n\n\t  test (version) {\n\t    debug('Comparator.test', version, this.options.loose);\n\n\t    if (this.semver === ANY || version === ANY) {\n\t      return true\n\t    }\n\n\t    if (typeof version === 'string') {\n\t      try {\n\t        version = new SemVer(version, this.options);\n\t      } catch (er) {\n\t        return false\n\t      }\n\t    }\n\n\t    return cmp(version, this.operator, this.semver, this.options)\n\t  }\n\n\t  intersects (comp, options) {\n\t    if (!(comp instanceof Comparator)) {\n\t      throw new TypeError('a Comparator is required')\n\t    }\n\n\t    if (this.operator === '') {\n\t      if (this.value === '') {\n\t        return true\n\t      }\n\t      return new Range(comp.value, options).test(this.value)\n\t    } else if (comp.operator === '') {\n\t      if (comp.value === '') {\n\t        return true\n\t      }\n\t      return new Range(this.value, options).test(comp.semver)\n\t    }\n\n\t    options = parseOptions(options);\n\n\t    // Special cases where nothing can possibly be lower\n\t    if (options.includePrerelease &&\n\t      (this.value === '<0.0.0-0' || comp.value === '<0.0.0-0')) {\n\t      return false\n\t    }\n\t    if (!options.includePrerelease &&\n\t      (this.value.startsWith('<0.0.0') || comp.value.startsWith('<0.0.0'))) {\n\t      return false\n\t    }\n\n\t    // Same direction increasing (> or >=)\n\t    if (this.operator.startsWith('>') && comp.operator.startsWith('>')) {\n\t      return true\n\t    }\n\t    // Same direction decreasing (< or <=)\n\t    if (this.operator.startsWith('<') && comp.operator.startsWith('<')) {\n\t      return true\n\t    }\n\t    // same SemVer and both sides are inclusive (<= or >=)\n\t    if (\n\t      (this.semver.version === comp.semver.version) &&\n\t      this.operator.includes('=') && comp.operator.includes('=')) {\n\t      return true\n\t    }\n\t    // opposite directions less than\n\t    if (cmp(this.semver, '<', comp.semver, options) &&\n\t      this.operator.startsWith('>') && comp.operator.startsWith('<')) {\n\t      return true\n\t    }\n\t    // opposite directions greater than\n\t    if (cmp(this.semver, '>', comp.semver, options) &&\n\t      this.operator.startsWith('<') && comp.operator.startsWith('>')) {\n\t      return true\n\t    }\n\t    return false\n\t  }\n\t}\n\n\tcomparator = Comparator;\n\n\tconst parseOptions = parseOptions_1;\n\tconst { safeRe: re, t } = reExports;\n\tconst cmp = cmp_1;\n\tconst debug = debug_1;\n\tconst SemVer = semver$1;\n\tconst Range = requireRange();\n\treturn comparator;\n}\n\nconst Range$9 = requireRange();\nconst satisfies$4 = (version, range, options) => {\n  try {\n    range = new Range$9(range, options);\n  } catch (er) {\n    return false\n  }\n  return range.test(version)\n};\nvar satisfies_1 = satisfies$4;\n\nvar satisfies$5 = /*@__PURE__*/getDefaultExportFromCjs(satisfies_1);\n\nconst Range$8 = requireRange();\n\n// Mostly just for testing and legacy API reasons\nconst toComparators$1 = (range, options) =>\n  new Range$8(range, options).set\n    .map(comp => comp.map(c => c.value).join(' ').trim().split(' '));\n\nvar toComparators_1 = toComparators$1;\n\nvar toComparators$2 = /*@__PURE__*/getDefaultExportFromCjs(toComparators_1);\n\nconst SemVer$4 = semver$1;\nconst Range$7 = requireRange();\n\nconst maxSatisfying$1 = (versions, range, options) => {\n  let max = null;\n  let maxSV = null;\n  let rangeObj = null;\n  try {\n    rangeObj = new Range$7(range, options);\n  } catch (er) {\n    return null\n  }\n  versions.forEach((v) => {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!max || maxSV.compare(v) === -1) {\n        // compare(max, v, true)\n        max = v;\n        maxSV = new SemVer$4(max, options);\n      }\n    }\n  });\n  return max\n};\nvar maxSatisfying_1 = maxSatisfying$1;\n\nvar maxSatisfying$2 = /*@__PURE__*/getDefaultExportFromCjs(maxSatisfying_1);\n\nconst SemVer$3 = semver$1;\nconst Range$6 = requireRange();\nconst minSatisfying$1 = (versions, range, options) => {\n  let min = null;\n  let minSV = null;\n  let rangeObj = null;\n  try {\n    rangeObj = new Range$6(range, options);\n  } catch (er) {\n    return null\n  }\n  versions.forEach((v) => {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!min || minSV.compare(v) === 1) {\n        // compare(min, v, true)\n        min = v;\n        minSV = new SemVer$3(min, options);\n      }\n    }\n  });\n  return min\n};\nvar minSatisfying_1 = minSatisfying$1;\n\nvar minSatisfying$2 = /*@__PURE__*/getDefaultExportFromCjs(minSatisfying_1);\n\nconst SemVer$2 = semver$1;\nconst Range$5 = requireRange();\nconst gt$2 = gt_1;\n\nconst minVersion$1 = (range, loose) => {\n  range = new Range$5(range, loose);\n\n  let minver = new SemVer$2('0.0.0');\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = new SemVer$2('0.0.0-0');\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = null;\n  for (let i = 0; i < range.set.length; ++i) {\n    const comparators = range.set[i];\n\n    let setMin = null;\n    comparators.forEach((comparator) => {\n      // Clone to avoid manipulating the comparator's semver object.\n      const compver = new SemVer$2(comparator.semver.version);\n      switch (comparator.operator) {\n        case '>':\n          if (compver.prerelease.length === 0) {\n            compver.patch++;\n          } else {\n            compver.prerelease.push(0);\n          }\n          compver.raw = compver.format();\n          /* fallthrough */\n        case '':\n        case '>=':\n          if (!setMin || gt$2(compver, setMin)) {\n            setMin = compver;\n          }\n          break\n        case '<':\n        case '<=':\n          /* Ignore maximum versions */\n          break\n        /* istanbul ignore next */\n        default:\n          throw new Error(`Unexpected operation: ${comparator.operator}`)\n      }\n    });\n    if (setMin && (!minver || gt$2(minver, setMin))) {\n      minver = setMin;\n    }\n  }\n\n  if (minver && range.test(minver)) {\n    return minver\n  }\n\n  return null\n};\nvar minVersion_1 = minVersion$1;\n\nvar minVersion$2 = /*@__PURE__*/getDefaultExportFromCjs(minVersion_1);\n\nconst Range$4 = requireRange();\nconst validRange$1 = (range, options) => {\n  try {\n    // Return '*' instead of '' so that truthiness works.\n    // This will throw if it's invalid anyway\n    return new Range$4(range, options).range || '*'\n  } catch (er) {\n    return null\n  }\n};\nvar valid$1 = validRange$1;\n\nvar valid$2 = /*@__PURE__*/getDefaultExportFromCjs(valid$1);\n\nconst SemVer$1 = semver$1;\nconst Comparator$2 = requireComparator();\nconst { ANY: ANY$1 } = Comparator$2;\nconst Range$3 = requireRange();\nconst satisfies$3 = satisfies_1;\nconst gt$1 = gt_1;\nconst lt$1 = lt_1;\nconst lte$1 = lte_1;\nconst gte$1 = gte_1;\n\nconst outside$3 = (version, range, hilo, options) => {\n  version = new SemVer$1(version, options);\n  range = new Range$3(range, options);\n\n  let gtfn, ltefn, ltfn, comp, ecomp;\n  switch (hilo) {\n    case '>':\n      gtfn = gt$1;\n      ltefn = lte$1;\n      ltfn = lt$1;\n      comp = '>';\n      ecomp = '>=';\n      break\n    case '<':\n      gtfn = lt$1;\n      ltefn = gte$1;\n      ltfn = gt$1;\n      comp = '<';\n      ecomp = '<=';\n      break\n    default:\n      throw new TypeError('Must provide a hilo val of \"<\" or \">\"')\n  }\n\n  // If it satisfies the range it is not outside\n  if (satisfies$3(version, range, options)) {\n    return false\n  }\n\n  // From now on, variable terms are as if we're in \"gtr\" mode.\n  // but note that everything is flipped for the \"ltr\" function.\n\n  for (let i = 0; i < range.set.length; ++i) {\n    const comparators = range.set[i];\n\n    let high = null;\n    let low = null;\n\n    comparators.forEach((comparator) => {\n      if (comparator.semver === ANY$1) {\n        comparator = new Comparator$2('>=0.0.0');\n      }\n      high = high || comparator;\n      low = low || comparator;\n      if (gtfn(comparator.semver, high.semver, options)) {\n        high = comparator;\n      } else if (ltfn(comparator.semver, low.semver, options)) {\n        low = comparator;\n      }\n    });\n\n    // If the edge version comparator has a operator then our version\n    // isn't outside it\n    if (high.operator === comp || high.operator === ecomp) {\n      return false\n    }\n\n    // If the lowest version comparator has an operator and our version\n    // is less than it then it isn't higher than the range\n    if ((!low.operator || low.operator === comp) &&\n        ltefn(version, low.semver)) {\n      return false\n    } else if (low.operator === ecomp && ltfn(version, low.semver)) {\n      return false\n    }\n  }\n  return true\n};\n\nvar outside_1 = outside$3;\n\nvar outside$4 = /*@__PURE__*/getDefaultExportFromCjs(outside_1);\n\n// Determine if version is greater than all the versions possible in the range.\nconst outside$2 = outside_1;\nconst gtr$1 = (version, range, options) => outside$2(version, range, '>', options);\nvar gtr_1 = gtr$1;\n\nvar gtr$2 = /*@__PURE__*/getDefaultExportFromCjs(gtr_1);\n\nconst outside$1 = outside_1;\n// Determine if version is less than all the versions possible in the range\nconst ltr$1 = (version, range, options) => outside$1(version, range, '<', options);\nvar ltr_1 = ltr$1;\n\nvar ltr$2 = /*@__PURE__*/getDefaultExportFromCjs(ltr_1);\n\nconst Range$2 = requireRange();\nconst intersects$1 = (r1, r2, options) => {\n  r1 = new Range$2(r1, options);\n  r2 = new Range$2(r2, options);\n  return r1.intersects(r2, options)\n};\nvar intersects_1 = intersects$1;\n\nvar intersects$2 = /*@__PURE__*/getDefaultExportFromCjs(intersects_1);\n\n// given a set of versions and a range, create a \"simplified\" range\n// that includes the same versions that the original range does\n// If the original range is shorter than the simplified one, return that.\nconst satisfies$2 = satisfies_1;\nconst compare$2 = compare_1;\nvar simplify = (versions, range, options) => {\n  const set = [];\n  let first = null;\n  let prev = null;\n  const v = versions.sort((a, b) => compare$2(a, b, options));\n  for (const version of v) {\n    const included = satisfies$2(version, range, options);\n    if (included) {\n      prev = version;\n      if (!first) {\n        first = version;\n      }\n    } else {\n      if (prev) {\n        set.push([first, prev]);\n      }\n      prev = null;\n      first = null;\n    }\n  }\n  if (first) {\n    set.push([first, null]);\n  }\n\n  const ranges = [];\n  for (const [min, max] of set) {\n    if (min === max) {\n      ranges.push(min);\n    } else if (!max && min === v[0]) {\n      ranges.push('*');\n    } else if (!max) {\n      ranges.push(`>=${min}`);\n    } else if (min === v[0]) {\n      ranges.push(`<=${max}`);\n    } else {\n      ranges.push(`${min} - ${max}`);\n    }\n  }\n  const simplified = ranges.join(' || ');\n  const original = typeof range.raw === 'string' ? range.raw : String(range);\n  return simplified.length < original.length ? simplified : range\n};\n\nvar simplify$1 = /*@__PURE__*/getDefaultExportFromCjs(simplify);\n\nconst Range$1 = requireRange();\nconst Comparator$1 = requireComparator();\nconst { ANY } = Comparator$1;\nconst satisfies$1 = satisfies_1;\nconst compare$1 = compare_1;\n\n// Complex range `r1 || r2 || ...` is a subset of `R1 || R2 || ...` iff:\n// - Every simple range `r1, r2, ...` is a null set, OR\n// - Every simple range `r1, r2, ...` which is not a null set is a subset of\n//   some `R1, R2, ...`\n//\n// Simple range `c1 c2 ...` is a subset of simple range `C1 C2 ...` iff:\n// - If c is only the ANY comparator\n//   - If C is only the ANY comparator, return true\n//   - Else if in prerelease mode, return false\n//   - else replace c with `[>=0.0.0]`\n// - If C is only the ANY comparator\n//   - if in prerelease mode, return true\n//   - else replace C with `[>=0.0.0]`\n// - Let EQ be the set of = comparators in c\n// - If EQ is more than one, return true (null set)\n// - Let GT be the highest > or >= comparator in c\n// - Let LT be the lowest < or <= comparator in c\n// - If GT and LT, and GT.semver > LT.semver, return true (null set)\n// - If any C is a = range, and GT or LT are set, return false\n// - If EQ\n//   - If GT, and EQ does not satisfy GT, return true (null set)\n//   - If LT, and EQ does not satisfy LT, return true (null set)\n//   - If EQ satisfies every C, return true\n//   - Else return false\n// - If GT\n//   - If GT.semver is lower than any > or >= comp in C, return false\n//   - If GT is >=, and GT.semver does not satisfy every C, return false\n//   - If GT.semver has a prerelease, and not in prerelease mode\n//     - If no C has a prerelease and the GT.semver tuple, return false\n// - If LT\n//   - If LT.semver is greater than any < or <= comp in C, return false\n//   - If LT is <=, and LT.semver does not satisfy every C, return false\n//   - If GT.semver has a prerelease, and not in prerelease mode\n//     - If no C has a prerelease and the LT.semver tuple, return false\n// - Else return true\n\nconst subset$1 = (sub, dom, options = {}) => {\n  if (sub === dom) {\n    return true\n  }\n\n  sub = new Range$1(sub, options);\n  dom = new Range$1(dom, options);\n  let sawNonNull = false;\n\n  OUTER: for (const simpleSub of sub.set) {\n    for (const simpleDom of dom.set) {\n      const isSub = simpleSubset(simpleSub, simpleDom, options);\n      sawNonNull = sawNonNull || isSub !== null;\n      if (isSub) {\n        continue OUTER\n      }\n    }\n    // the null set is a subset of everything, but null simple ranges in\n    // a complex range should be ignored.  so if we saw a non-null range,\n    // then we know this isn't a subset, but if EVERY simple range was null,\n    // then it is a subset.\n    if (sawNonNull) {\n      return false\n    }\n  }\n  return true\n};\n\nconst minimumVersionWithPreRelease = [new Comparator$1('>=0.0.0-0')];\nconst minimumVersion = [new Comparator$1('>=0.0.0')];\n\nconst simpleSubset = (sub, dom, options) => {\n  if (sub === dom) {\n    return true\n  }\n\n  if (sub.length === 1 && sub[0].semver === ANY) {\n    if (dom.length === 1 && dom[0].semver === ANY) {\n      return true\n    } else if (options.includePrerelease) {\n      sub = minimumVersionWithPreRelease;\n    } else {\n      sub = minimumVersion;\n    }\n  }\n\n  if (dom.length === 1 && dom[0].semver === ANY) {\n    if (options.includePrerelease) {\n      return true\n    } else {\n      dom = minimumVersion;\n    }\n  }\n\n  const eqSet = new Set();\n  let gt, lt;\n  for (const c of sub) {\n    if (c.operator === '>' || c.operator === '>=') {\n      gt = higherGT(gt, c, options);\n    } else if (c.operator === '<' || c.operator === '<=') {\n      lt = lowerLT(lt, c, options);\n    } else {\n      eqSet.add(c.semver);\n    }\n  }\n\n  if (eqSet.size > 1) {\n    return null\n  }\n\n  let gtltComp;\n  if (gt && lt) {\n    gtltComp = compare$1(gt.semver, lt.semver, options);\n    if (gtltComp > 0) {\n      return null\n    } else if (gtltComp === 0 && (gt.operator !== '>=' || lt.operator !== '<=')) {\n      return null\n    }\n  }\n\n  // will iterate one or zero times\n  for (const eq of eqSet) {\n    if (gt && !satisfies$1(eq, String(gt), options)) {\n      return null\n    }\n\n    if (lt && !satisfies$1(eq, String(lt), options)) {\n      return null\n    }\n\n    for (const c of dom) {\n      if (!satisfies$1(eq, String(c), options)) {\n        return false\n      }\n    }\n\n    return true\n  }\n\n  let higher, lower;\n  let hasDomLT, hasDomGT;\n  // if the subset has a prerelease, we need a comparator in the superset\n  // with the same tuple and a prerelease, or it's not a subset\n  let needDomLTPre = lt &&\n    !options.includePrerelease &&\n    lt.semver.prerelease.length ? lt.semver : false;\n  let needDomGTPre = gt &&\n    !options.includePrerelease &&\n    gt.semver.prerelease.length ? gt.semver : false;\n  // exception: <1.2.3-0 is the same as <1.2.3\n  if (needDomLTPre && needDomLTPre.prerelease.length === 1 &&\n      lt.operator === '<' && needDomLTPre.prerelease[0] === 0) {\n    needDomLTPre = false;\n  }\n\n  for (const c of dom) {\n    hasDomGT = hasDomGT || c.operator === '>' || c.operator === '>=';\n    hasDomLT = hasDomLT || c.operator === '<' || c.operator === '<=';\n    if (gt) {\n      if (needDomGTPre) {\n        if (c.semver.prerelease && c.semver.prerelease.length &&\n            c.semver.major === needDomGTPre.major &&\n            c.semver.minor === needDomGTPre.minor &&\n            c.semver.patch === needDomGTPre.patch) {\n          needDomGTPre = false;\n        }\n      }\n      if (c.operator === '>' || c.operator === '>=') {\n        higher = higherGT(gt, c, options);\n        if (higher === c && higher !== gt) {\n          return false\n        }\n      } else if (gt.operator === '>=' && !satisfies$1(gt.semver, String(c), options)) {\n        return false\n      }\n    }\n    if (lt) {\n      if (needDomLTPre) {\n        if (c.semver.prerelease && c.semver.prerelease.length &&\n            c.semver.major === needDomLTPre.major &&\n            c.semver.minor === needDomLTPre.minor &&\n            c.semver.patch === needDomLTPre.patch) {\n          needDomLTPre = false;\n        }\n      }\n      if (c.operator === '<' || c.operator === '<=') {\n        lower = lowerLT(lt, c, options);\n        if (lower === c && lower !== lt) {\n          return false\n        }\n      } else if (lt.operator === '<=' && !satisfies$1(lt.semver, String(c), options)) {\n        return false\n      }\n    }\n    if (!c.operator && (lt || gt) && gtltComp !== 0) {\n      return false\n    }\n  }\n\n  // if there was a < or >, and nothing in the dom, then must be false\n  // UNLESS it was limited by another range in the other direction.\n  // Eg, >1.0.0 <1.0.1 is still a subset of <2.0.0\n  if (gt && hasDomLT && !lt && gtltComp !== 0) {\n    return false\n  }\n\n  if (lt && hasDomGT && !gt && gtltComp !== 0) {\n    return false\n  }\n\n  // we needed a prerelease range in a specific tuple, but didn't get one\n  // then this isn't a subset.  eg >=1.2.3-pre is not a subset of >=1.0.0,\n  // because it includes prereleases in the 1.2.3 tuple\n  if (needDomGTPre || needDomLTPre) {\n    return false\n  }\n\n  return true\n};\n\n// >=1.2.3 is lower than >1.2.3\nconst higherGT = (a, b, options) => {\n  if (!a) {\n    return b\n  }\n  const comp = compare$1(a.semver, b.semver, options);\n  return comp > 0 ? a\n    : comp < 0 ? b\n    : b.operator === '>' && a.operator === '>=' ? b\n    : a\n};\n\n// <=1.2.3 is higher than <1.2.3\nconst lowerLT = (a, b, options) => {\n  if (!a) {\n    return b\n  }\n  const comp = compare$1(a.semver, b.semver, options);\n  return comp < 0 ? a\n    : comp > 0 ? b\n    : b.operator === '<' && a.operator === '<=' ? b\n    : a\n};\n\nvar subset_1 = subset$1;\n\nvar subset$2 = /*@__PURE__*/getDefaultExportFromCjs(subset_1);\n\n// just pre-load all the stuff that index.js lazily exports\nconst internalRe = reExports;\nconst constants = constants$1;\nconst SemVer = semver$1;\nconst identifiers = identifiers$1;\nconst parse$1 = parse_1;\nconst valid = valid_1;\nconst clean = clean_1;\nconst inc = inc_1;\nconst diff = diff_1;\nconst major = major_1;\nconst minor = minor_1;\nconst patch$1 = patch_1;\nconst prerelease = prerelease_1;\nconst compare = compare_1;\nconst rcompare = rcompare_1;\nconst compareLoose = compareLoose_1;\nconst compareBuild = compareBuild_1;\nconst sort = sort_1;\nconst rsort = rsort_1;\nconst gt = gt_1;\nconst lt = lt_1;\nconst eq = eq_1;\nconst neq = neq_1;\nconst gte = gte_1;\nconst lte = lte_1;\nconst cmp = cmp_1;\nconst coerce = coerce_1;\nconst Comparator = requireComparator();\nconst Range = requireRange();\nconst satisfies = satisfies_1;\nconst toComparators = toComparators_1;\nconst maxSatisfying = maxSatisfying_1;\nconst minSatisfying = minSatisfying_1;\nconst minVersion = minVersion_1;\nconst validRange = valid$1;\nconst outside = outside_1;\nconst gtr = gtr_1;\nconst ltr = ltr_1;\nconst intersects = intersects_1;\nconst simplifyRange = simplify;\nconst subset = subset_1;\nvar semver = {\n  parse: parse$1,\n  valid,\n  clean,\n  inc,\n  diff,\n  major,\n  minor,\n  patch: patch$1,\n  prerelease,\n  compare,\n  rcompare,\n  compareLoose,\n  compareBuild,\n  sort,\n  rsort,\n  gt,\n  lt,\n  eq,\n  neq,\n  gte,\n  lte,\n  cmp,\n  coerce,\n  Comparator,\n  Range,\n  satisfies,\n  toComparators,\n  maxSatisfying,\n  minSatisfying,\n  minVersion,\n  validRange,\n  outside,\n  gtr,\n  ltr,\n  intersects,\n  simplifyRange,\n  subset,\n  SemVer,\n  re: internalRe.re,\n  src: internalRe.src,\n  tokens: internalRe.t,\n  SEMVER_SPEC_VERSION: constants.SEMVER_SPEC_VERSION,\n  RELEASE_TYPES: constants.RELEASE_TYPES,\n  compareIdentifiers: identifiers.compareIdentifiers,\n  rcompareIdentifiers: identifiers.rcompareIdentifiers,\n};\n\nvar index = /*@__PURE__*/getDefaultExportFromCjs(semver);\n\n/**\n * a collection of utility functions\n * @namespace utils\n */\n\n// guid default value\nlet GUID_base  = \"\";\nlet GUID_index = 0;\n\n/**\n * Compare two version strings\n * @public\n * @memberof utils\n * @name checkVersion\n * @param {string} v1 - First version string to compare\n * @param {string} v2 - second version string to compare\n * @returns {number} Return 0 if v1 == v2, or 1 if v1 is greater, or -1 if v2 is greater\n * @example\n * if (me.utils.checkVersion(\"7.0.0\") > 0) {\n *     console.error(\n *         \"melonJS is too old. Expected: 7.0.0, Got: 6.3.0\"\n *     );\n * }\n */\nfunction checkVersion(v1, v2) {\n    // Convert to proper \"x.y.z\" format if necessary\n    if (/^\\d+$/.test(v1)) {\n        v1 += \".0.0\";\n    } else if (/^\\d+\\.\\d+$/.test(v1)) {\n        v1 += \".0\";\n    }\n    if (/^\\d+$/.test(v2)) {\n        v2 += \".0.0\";\n    } else if (/^\\d+\\.\\d+$/.test(v2)) {\n        v2 += \".0\";\n    }\n    return semver.compare(v1, v2);\n}\n\n/**\n * parse the fragment (hash) from a URL and returns them into\n * @public\n * @memberof utils\n * @name getUriFragment\n * @param {string} [url=document.location] - an optional params string or URL containing fragment (hash) params to be parsed\n * @returns {object} an object representing the deserialized params string.\n * @property {boolean} [hitbox=false] draw the hitbox in the debug panel (if enabled)\n * @property {boolean} [velocity=false] draw the entities velocity in the debug panel (if enabled)\n * @property {boolean} [quadtree=false] draw the quadtree in the debug panel (if enabled)\n * @property {boolean} [webgl=false] force the renderer to WebGL\n * @property {boolean} [debug=false] display the debug panel (if preloaded)\n * @property {string} [debugToggleKey=\"s\"] show/hide the debug panel (if preloaded)\n * @example\n * // http://www.example.com/index.html#debug&hitbox=true&mytag=value\n * let UriFragment = me.utils.getUriFragment();\n * console.log(UriFragment[\"mytag\"]); //> \"value\"\n */\nfunction getUriFragment(url) {\n    let hash = {};\n\n    if (typeof url === \"undefined\") {\n        if (typeof globalThis.document !== \"undefined\") {\n            let location = globalThis.document.location;\n\n            if (location && location.hash) {\n                url = location.hash;\n            } else {\n                // No \"document.location\" exist for Wechat mini game platform.\n                return hash;\n            }\n        } else {\n            // \"document\" undefined on node.js\n            return hash;\n        }\n    } else {\n        // never cache if a url is passed as parameter\n        let index = url.indexOf(\"#\");\n        if (index !== -1) {\n            url = url.slice(index, url.length);\n        } else {\n            return hash;\n        }\n    }\n\n    // parse the url\n    url.slice(1).split(\"&\").filter((value) => value !== \"\").forEach((value) => {\n        let kv = value.split(\"=\");\n        let k = kv.shift();\n        let v = kv.join(\"=\");\n        hash[k] = v || true;\n    });\n\n    return hash;\n}\n\n/**\n * reset the GUID Base Name\n * the idea here being to have a unique ID\n * per level / object\n * @ignore\n */\nfunction resetGUID(base, index = 0) {\n    // also ensure it's only 8bit ASCII characters\n    GUID_base  = toHex(base.toString().toUpperCase());\n    GUID_index = index;\n}\n\n/**\n * create and return a very simple GUID\n * Game Unique ID\n * @ignore\n */\nfunction createGUID(index = 1) {\n    // to cover the case of undefined id for groups\n    GUID_index += index;\n    return GUID_base + \"-\" + (index || GUID_index);\n}\n\nvar utils = {\n\t__proto__: null,\n\tagent: agent$1,\n\tarray: array$1,\n\tcheckVersion: checkVersion,\n\tcreateGUID: createGUID,\n\tfile: file$1,\n\tfunction: _function,\n\tgetUriFragment: getUriFragment,\n\tresetGUID: resetGUID,\n\tstring: string$1\n};\n\n/**\n * @classdesc\n * a TMX Tile Set Object\n */\nclass TMXTileset {\n    /**\n     *  @param {object} tileset - tileset data in JSON format ({@link http://docs.mapeditor.org/en/stable/reference/tmx-map-format/#tileset})\n     */\n    constructor(tileset) {\n        // tile properties (collidable, etc..)\n        this.TileProperties = [];\n\n        // hold reference to each tile image\n        this.imageCollection = [];\n\n        this.firstgid = this.lastgid = +tileset.firstgid;\n\n        // check if an external tileset is defined\n        if (typeof(tileset.source) !== \"undefined\") {\n            let src = tileset.source;\n            let ext = getExtension(src);\n            if (ext === \"tsx\" || ext === \"json\") {\n                // load the external tileset (TSX/JSON)\n                tileset = getTMX(getBasename(src));\n                if (!tileset) {\n                    throw new Error(src + \" external TSX/JSON tileset not found\");\n                }\n            }\n        }\n\n        this.name = tileset.name;\n        this.tilewidth = +tileset.tilewidth;\n        this.tileheight = +tileset.tileheight;\n        this.spacing = +tileset.spacing || 0;\n        this.margin = +tileset.margin || 0;\n\n        // set tile offset properties (if any)\n        this.tileoffset = new Vector2d();\n\n        /**\n         * Tileset contains animated tiles\n         * @type {boolean}\n         */\n        this.isAnimated = false;\n\n        /**\n         * true if the tileset is a \"Collection of Image\" Tileset\n         * @type {boolean}\n         */\n        this.isCollection = false;\n\n        /**\n         * the tileset class\n         * @type {boolean}\n         */\n        this.class = tileset.class;\n\n        /**\n         * Tileset animations\n         * @private\n         */\n        this.animations = new Map();\n\n        /**\n         * Remember the last update timestamp to prevent too many animation updates\n         * @private\n         */\n        this._lastUpdate = 0;\n\n        let tiles = tileset.tiles;\n        for (let i in tiles) {\n            if (tiles.hasOwnProperty(i)) {\n                if (\"animation\" in tiles[i]) {\n                    this.isAnimated = true;\n                    this.animations.set(tiles[+i].animation[0].tileid, {\n                        dt      : 0,\n                        idx     : 0,\n                        frames  : tiles[+i].animation,\n                        cur     : tiles[+i].animation[0]\n                    });\n                }\n                // set tile properties, if any\n                if (\"properties\" in tiles[i]) {\n                    if (Array.isArray(tiles[i].properties)) { // JSON (new format)\n                        let tileProperty = {};\n                        for (let j in tiles[i].properties) {\n                            tileProperty[tiles[i].properties[j].name] = tiles[i].properties[j].value;\n                        }\n                        this.setTileProperty(+tiles[i].id + this.firstgid, tileProperty);\n                    } else { // XML format\n                        this.setTileProperty(+i + this.firstgid, tiles[i].properties);\n                    }\n                }\n                if (\"image\" in tiles[i]) {\n                    let image = getImage(tiles[i].image);\n                    if (!image) {\n                        throw new Error(\"melonJS: '\" + tiles[i].image + \"' file for tile '\" + (+i + this.firstgid) + \"' not found!\");\n                    }\n                    this.imageCollection[+i + this.firstgid] = image;\n                }\n            }\n        }\n\n        this.isCollection = this.imageCollection.length > 0;\n\n        let offset = tileset.tileoffset;\n        if (offset) {\n            this.tileoffset.x = +offset.x;\n            this.tileoffset.y = +offset.y;\n        }\n\n        // set tile properties, if any (JSON old format)\n        let tileInfo = tileset.tileproperties;\n        if (tileInfo) {\n            for (let i in tileInfo) {\n                if (tileInfo.hasOwnProperty(i)) {\n                    this.setTileProperty(+i + this.firstgid, tileInfo[i]);\n                }\n            }\n        }\n\n        // if not a tile image collection\n        if (this.isCollection === false) {\n\n            // get the global tileset texture\n            this.image = getImage(tileset.image);\n\n            if (!this.image) {\n                throw new Error(\"melonJS: '\" + tileset.image + \"' file for tileset '\" + this.name + \"' not found!\");\n            }\n\n            // create a texture atlas for the given tileset\n            this.texture = renderer.cache.get(this.image, {\n                framewidth : this.tilewidth,\n                frameheight : this.tileheight,\n                margin : this.margin,\n                spacing : this.spacing\n            });\n            this.atlas = this.texture.getAtlas();\n\n            // calculate the number of tiles per horizontal line\n            let hTileCount = +tileset.columns || Math.round(this.image.width / (this.tilewidth + this.spacing));\n            let vTileCount = Math.round(this.image.height / (this.tileheight + this.spacing));\n            if (tileset.tilecount % hTileCount > 0) {\n                ++vTileCount;\n            }\n            // compute the last gid value in the tileset\n            this.lastgid = this.firstgid + (((hTileCount * vTileCount) - 1) || 0);\n            if (tileset.tilecount && this.lastgid - this.firstgid + 1 !== +tileset.tilecount) {\n                console.warn(\n                    \"Computed tilecount (\" + (this.lastgid - this.firstgid + 1) +\n                    \") does not match expected tilecount (\" + tileset.tilecount + \")\"\n                );\n            }\n        }\n    }\n\n    /**\n     * return the tile image from a \"Collection of Image\" tileset\n     * @param {number} gid\n     * @returns {Image} corresponding image or undefined\n     */\n    getTileImage(gid) {\n        return this.imageCollection[gid];\n    }\n\n\n    /**\n     * set the tile properties\n     * @ignore\n     */\n    setTileProperty(gid, prop) {\n        // set the given tile id\n        this.TileProperties[gid] = prop;\n    }\n\n    /**\n     * return true if the gid belongs to the tileset\n     * @param {number} gid\n     * @returns {boolean}\n     */\n    contains(gid) {\n        return gid >= this.firstgid && gid <= this.lastgid;\n    }\n\n    /**\n     * Get the view (local) tile ID from a GID, with animations applied\n     * @param {number} gid - Global tile ID\n     * @returns {number} View tile ID\n     */\n    getViewTileId(gid) {\n        let localId = gid - this.firstgid;\n\n        if (this.animations.has(localId)) {\n            // return the current corresponding tile id if animated\n            return this.animations.get(localId).cur.tileid;\n        }\n\n        return localId;\n    }\n\n    /**\n     * return the properties of the specified tile\n     * @param {number} tileId\n     * @returns {object}\n     */\n    getTileProperties(tileId) {\n        return this.TileProperties[tileId];\n    }\n\n    // update tile animations\n    update(dt) {\n        let duration = 0,\n            now = timer.getTime(),\n            result = false;\n\n        if (this._lastUpdate !== now) {\n            this._lastUpdate = now;\n\n            this.animations.forEach((anim) => {\n                anim.dt += dt;\n                duration = anim.cur.duration;\n                while (anim.dt >= duration) {\n                    anim.dt -= duration;\n                    anim.idx = (anim.idx + 1) % anim.frames.length;\n                    anim.cur = anim.frames[anim.idx];\n                    duration = anim.cur.duration;\n                    result = true;\n                }\n            });\n        }\n\n        return result;\n    }\n\n    // draw the x,y tile\n    drawTile(renderer, dx, dy, tmxTile) {\n\n        // check if any transformation is required\n        if (tmxTile.flipped) {\n            renderer.save();\n            // apply the tile current transform\n            renderer.translate(dx, dy);\n            renderer.transform(tmxTile.currentTransform);\n            // reset both values as managed through transform();\n            dx = dy = 0;\n        }\n\n        // check if the tile has an associated image\n        if (this.isCollection === true) {\n            // draw the tile\n            renderer.drawImage(\n                this.imageCollection[tmxTile.tileId],\n                0, 0,\n                tmxTile.width, tmxTile.height,\n                dx, dy,\n                tmxTile.width, tmxTile.height\n            );\n        } else {\n            // use the tileset texture\n            let offset = this.atlas[this.getViewTileId(tmxTile.tileId)].offset;\n            // draw the tile\n            renderer.drawImage(\n                this.image,\n                offset.x, offset.y,\n                this.tilewidth, this.tileheight,\n                dx, dy,\n                this.tilewidth + renderer.uvOffset, this.tileheight + renderer.uvOffset\n            );\n        }\n\n        if (tmxTile.flipped) {\n            // restore the context to the previous state\n            renderer.restore();\n        }\n    }\n}\n\n// bitmask constants to check for flipped & rotated tiles\nconst TMX_FLIP_H          = 0x80000000;\nconst TMX_FLIP_V          = 0x40000000;\nconst TMX_FLIP_AD         = 0x20000000;\nconst TMX_CLEAR_BIT_MASK  = ~(TMX_FLIP_H | TMX_FLIP_V  | TMX_FLIP_AD);\n\n// constant to identify the collision object layer\nconst COLLISION_GROUP     = \"collision\";\n\n/**\n * @classdesc\n * an object containing all tileset\n */\nclass TMXTilesetGroup {\n\n    constructor() {\n        this.tilesets = [];\n        this.length = 0;\n    }\n\n    /**\n     * add a tileset to the tileset group\n     * @param {TMXTileset} tileset\n     */\n    add(tileset) {\n        this.tilesets.push(tileset);\n        this.length++;\n    }\n\n    /**\n     * return the tileset at the specified index\n     * @param {number} i\n     * @returns {TMXTileset} corresponding tileset\n     */\n    getTilesetByIndex(i) {\n        return this.tilesets[i];\n    }\n\n    /**\n     * return the tileset corresponding to the specified id <br>\n     * will throw an exception if no matching tileset is found\n     * @param {number} gid\n     * @returns {TMXTileset} corresponding tileset\n     */\n    getTilesetByGid(gid) {\n        let invalidRange = -1;\n\n        // clear the gid of all flip/rotation flags\n        gid &= TMX_CLEAR_BIT_MASK;\n\n        // cycle through all tilesets\n        for (let i = 0, len = this.tilesets.length; i < len; i++) {\n            // return the corresponding tileset if matching\n            if (this.tilesets[i].contains(gid)) {\n                return this.tilesets[i];\n            }\n            // typically indicates a layer with no asset loaded (collision?)\n            if (this.tilesets[i].firstgid === this.tilesets[i].lastgid &&\n                gid >= this.tilesets[i].firstgid) {\n                // store the id if the [firstgid .. lastgid] is invalid\n                invalidRange = i;\n            }\n        }\n        // return the tileset with the invalid range\n        if (invalidRange !== -1) {\n            return this.tilesets[invalidRange];\n        }\n        else {\n            throw new Error(\"no matching tileset found for gid \" + gid);\n        }\n    }\n}\n\n/**\n * the function used to decompress zlib/gzip data\n * @ignore\n */\nlet inflateFunction;\n\n/**\n * set and interpret a TMX property value\n * @ignore\n */\nfunction setTMXValue(name, type, value) {\n    let match;\n\n    if (typeof(value) !== \"string\") {\n        // Value is already normalized (e.g. with JSON maps)\n        return value;\n    }\n\n    switch (type) {\n\n        case \"int\" :\n        case \"float\" :\n            value = Number(value);\n            break;\n\n        case \"bool\" :\n            value = (value === \"true\");\n            break;\n\n        default :\n            // try to parse it anyway\n            if (!value || isBoolean(value)) {\n                // if value not defined or boolean\n                value = value ? (value === \"true\") : true;\n            }\n            else if (isNumeric(value)) {\n                // check if numeric\n                value = Number(value);\n            }\n            else if (value.search(/^json:/i) === 0) {\n                // try to parse it\n                match = value.split(/^json:/i)[1];\n                try {\n                    value = JSON.parse(match);\n                }\n                catch {\n                    throw new Error(\"Unable to parse JSON: \" + match);\n                }\n            }\n            else if (value.search(/^eval:/i) === 0) {\n                // try to evaluate it\n                match = value.split(/^eval:/i)[1];\n                try {\n                    // eslint-disable-next-line\n                    value = Function(\"'use strict';return (\" + match + \")\")();\n                }\n                catch {\n                    throw new Error(\"Unable to evaluate: \" + match);\n                }\n            }\n            else if (\n                ((match = value.match(/^#([\\da-fA-F])([\\da-fA-F]{3})$/))) ||\n                ((match = value.match(/^#([\\da-fA-F]{2})([\\da-fA-F]{6})$/)))\n            ) {\n                value = \"#\" + match[2] + match[1];\n            }\n\n            // normalize values\n            if (name.search(/^(ratio|anchorPoint)$/) === 0) {\n                // convert number to vector\n                if (typeof(value) === \"number\") {\n                    value = {\n                        \"x\" : value,\n                        \"y\" : value\n                    };\n                }\n            }\n    }\n    // return the interpreted value\n    return value;\n}\n\n/**\n * @ignore\n */\nfunction parseAttributes(obj, elt) {\n    // do attributes\n    if (elt.attributes && elt.attributes.length > 0) {\n        for (let j = 0; j < elt.attributes.length; j++) {\n            const attribute = elt.attributes.item(j);\n            if (typeof(attribute.name) !== \"undefined\") {\n                // DOM4 (Attr no longer inherit from Node)\n                obj[attribute.name] = attribute.value;\n            } else {\n                // else use the deprecated ones\n                obj[attribute.nodeName] = attribute.nodeValue;\n            }\n        }\n    }\n}\n\n/**\n * Normalize TMX format to Tiled JSON format\n * @ignore\n */\nfunction normalize(obj, item) {\n    let nodeName = item.nodeName;\n\n    switch (nodeName) {\n        case \"data\": {\n            let data = parse(item);\n\n            data.encoding = data.encoding || \"xml\";\n\n            // decode chunks for infinite maps\n            if (typeof data.chunks !== \"undefined\") {\n                obj.chunks = obj.chunks || [];\n                // infinite maps containing chunk data\n                data.chunks.forEach((chunk) => {\n                    obj.chunks.push({\n                        x: +chunk.x,\n                        y: +chunk.y,\n                        // chunk width is in tiles\n                        width: +chunk.width,\n                        // chunk height is in tiles\n                        height: +chunk.height,\n                        data: decode(chunk.text, data.encoding, data.compression)\n                    });\n                });\n                obj.encoding = \"none\";\n            }\n            // Bug on if condition: when parsing data, data.text is sometimes defined when chunks are present\n            if (typeof data.text !== \"undefined\" && typeof obj.chunks === \"undefined\") {\n                // Finite maps\n                obj.data = decode(data.text, data.encoding, data.compression);\n                obj.encoding = \"none\";\n            }\n            break;\n        }\n        case \"chunk\":\n            obj.chunks = obj.chunks || [];\n            obj.chunks.push(parse(item));\n            break;\n\n        case \"imagelayer\":\n        case \"layer\":\n        case \"objectgroup\":\n        case \"group\": {\n            let layer = parse(item);\n            layer.type = (nodeName === \"layer\" ? \"tilelayer\" : nodeName);\n            if (layer.image) {\n                layer.image = layer.image.source;\n            }\n\n            obj.layers = obj.layers || [];\n            obj.layers.push(layer);\n            break;\n        }\n        case \"animation\":\n            obj.animation = parse(item).frames;\n            break;\n\n        case \"frame\":\n        case \"object\": {\n            const name = nodeName + \"s\";\n            obj[name] = obj[name] || [];\n            obj[name].push(parse(item));\n            break;\n        }\n        case \"tile\": {\n            let tile = parse(item);\n            if (tile.image) {\n                tile.imagewidth = tile.image.width;\n                tile.imageheight = tile.image.height;\n                tile.image = tile.image.source;\n            }\n            obj.tiles = obj.tiles || {};\n            obj.tiles[tile.id] = tile;\n            break;\n        }\n        case \"tileset\": {\n            let tileset = parse(item);\n            if (tileset.image) {\n                tileset.imagewidth = tileset.image.width;\n                tileset.imageheight = tileset.image.height;\n                tileset.image = tileset.image.source;\n            }\n\n            obj.tilesets = obj.tilesets || [];\n            obj.tilesets.push(tileset);\n            break;\n        }\n        case \"polygon\":\n        case \"polyline\": {\n            obj[nodeName] = [];\n\n            // Get a point array\n            let points = parse(item).points.split(\" \");\n\n            // And normalize them into an array of vectors\n            for (let i = 0; i < points.length; i++) {\n                const v = points[i].split(\",\");\n                obj[nodeName].push({\n                    \"x\" : +v[0],\n                    \"y\" : +v[1]\n                });\n            }\n\n            break;\n        }\n        case \"properties\":\n            obj.properties = parse(item);\n            break;\n\n        case \"property\": {\n            const property = parse(item);\n            // for custom properties, text is used\n            const value = (typeof property.value !== \"undefined\") ? property.value : property.text;\n\n            obj[property.name] = setTMXValue(\n                property.name,\n                // in XML type is undefined for \"string\" values\n                property.type || \"string\",\n                value\n            );\n            break;\n        }\n        default:\n            obj[nodeName] = parse(item);\n            break;\n    }\n}\n\n/**\n * a collection of utility functions for parsing TMX maps\n * @namespace TMXUtils\n */\n\n/**\n * decompress and decode zlib/gzip data\n * @memberof TMXUtils\n * @param {string} input - Base64 encoded and compressed data\n * @param {string} format - compressed data format (\"gzip\",\"zlib\", \"zstd\")\n * @returns {Uint32Array} Decoded and decompress data\n */\nfunction decompress(data, format) {\n    if (typeof inflateFunction === \"function\") {\n        return inflateFunction(data, format);\n    } else {\n        throw new Error(\"GZIP/ZLIB compressed TMX Tile Map not supported!\");\n    }\n}\n\n/**\n * Decode a CSV encoded array into a binary array\n * @memberof TMXUtils\n * @param  {string} input- -  CSV formatted data (only numbers, everything else will be converted to NaN)\n * @returns {number[]} Decoded data\n */\nfunction decodeCSV(input) {\n    let entries = input.replace(\"\\n\", \"\").trim().split(\",\");\n\n    let result = [];\n    for (let i = 0; i < entries.length; i++) {\n        result.push(+entries[i]);\n    }\n    return result;\n}\n\n/**\n * Decode a base64 encoded string into a byte array\n * @memberof TMXUtils\n * @param {string} input - Base64 encoded data\n * @param {number} [bytes] - number of bytes per array entry\n * @returns {Uint32Array} Decoded data\n */\nfunction decodeBase64AsArray(input, bytes = 1) {\n    let dec = globalThis.atob(input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\"));\n    let ar = new Uint32Array(dec.length / bytes);\n\n    for (let i = 0, len = dec.length / bytes; i < len; i++) {\n        ar[i] = 0;\n        for (let j = bytes - 1; j >= 0; --j) {\n            ar[i] += dec.charCodeAt((i * bytes) + j) << (j << 3);\n        }\n    }\n    return ar;\n}\n\n/**\n * set the function used to inflate gzip/zlib data\n * @memberof TMXUtils\n * @param {Func} fn - inflate function\n */\nfunction setInflateFunction(fn) {\n    inflateFunction = fn;\n}\n\n/**\n * Decode a encoded array into a binary array\n * @memberof TMXUtils\n * @param {string} data - data to be decoded\n * @param {string} [encoding=\"none\"] - data encoding (\"csv\", \"base64\", \"xml\")\n * @returns {number[]} Decoded data\n */\nfunction decode(data, encoding, compression) {\n    compression = compression || \"none\";\n    encoding = encoding || \"none\";\n\n    switch (encoding) {\n        case \"csv\":\n            return decodeCSV(data);\n\n        case \"base64\":\n            if (compression !== \"none\") {\n                data = decompress(data, compression);\n            } else {\n                data = decodeBase64AsArray(data, 4);\n            }\n            return data;\n\n        case \"none\":\n            return data;\n\n        case \"xml\":\n            throw new Error(\"XML encoding is deprecated, use base64 instead\");\n\n        default:\n            throw new Error(\"Unknown layer encoding: \" + encoding);\n    }\n}\n\n/**\n * Parse a XML TMX object and returns the corresponding javascript object\n * @memberof TMXUtils\n * @param {Document} xml - XML TMX object\n * @returns {object} Javascript object\n */\nfunction parse(xml) {\n    // Create the return object\n    let obj = {};\n\n    let text = \"\";\n\n    if (xml.nodeType === 1) {\n        // do attributes\n        parseAttributes(obj, xml);\n    }\n\n    // do children\n    if (xml.hasChildNodes()) {\n        let children = xml.childNodes;\n        for (const node of children) {\n            switch (node.nodeType) {\n                case 1:\n                    normalize(obj, node);\n                    break;\n\n                case 3:\n                    text += node.nodeValue.trim();\n                    break;\n            }\n        }\n    }\n\n    if (text) {\n        obj.text = text;\n    }\n\n    return obj;\n}\n\n/**\n * Apply TMX Properties to the given object\n * @memberof TMXUtils\n * @param {object} obj - object to apply the properties to\n * @param {object} data - TMX data object\n * @returns {object} obj\n */\nfunction applyTMXProperties(obj, data) {\n    let properties = data.properties;\n    let types = data.propertytypes;\n    if (typeof(properties) !== \"undefined\") {\n        for (let property in properties) {\n            if (properties.hasOwnProperty(property)) {\n                let type = \"string\";\n                let name = property;\n                let value = properties[property];\n                // proof-check for new and old JSON format\n                if (typeof properties[property].name !== \"undefined\") {\n                    name = properties[property].name;\n                }\n                if (typeof(types) !== \"undefined\") {\n                    type = types[property];\n                } else if (typeof properties[property].type !== \"undefined\") {\n                    type = properties[property].type;\n                }\n                if (typeof properties[property].value !== \"undefined\") {\n                    value = properties[property].value;\n                }\n                // set the value\n                obj[name] = setTMXValue(name, type, value);\n            }\n        }\n    }\n}\n\nvar TMXUtils = {\n\t__proto__: null,\n\tapplyTMXProperties: applyTMXProperties,\n\tdecode: decode,\n\tparse: parse,\n\tsetInflateFunction: setInflateFunction\n};\n\n/**\n * @classdesc\n * a basic tile object\n * @augments Bounds\n */\nclass Tile extends Bounds {\n    /**\n     * @param {number} x - x index of the Tile in the map\n     * @param {number} y - y index of the Tile in the map\n     * @param {number} gid - tile gid\n     * @param {TMXTileset} tileset - the corresponding tileset object\n     */\n    constructor(x, y, gid, tileset) {\n        let width, height;\n\n        // call the parent constructor\n        super();\n\n        // determine the tile size\n        if (tileset.isCollection) {\n            let image = tileset.getTileImage(gid & TMX_CLEAR_BIT_MASK);\n            width = image.width;\n            height = image.height;\n        } else {\n            width = tileset.tilewidth;\n            height = tileset.tileheight;\n        }\n\n        this.setMinMax(0, 0, width, height);\n\n        /**\n         * tileset\n         * @type {TMXTileset}\n         */\n        this.tileset = tileset;\n\n        /**\n         * the tile transformation matrix (if defined)\n         * @ignore\n         */\n        this.currentTransform = null;\n\n        // Tile col / row pos\n        this.col = x;\n        this.row = y;\n\n        /**\n         * tileId\n         * @type {number}\n         */\n        this.tileId = gid;\n\n        /**\n         * True if the tile is flipped horizontally\n         * @type {boolean}\n         */\n        this.flippedX  = (this.tileId & TMX_FLIP_H) !== 0;\n\n        /**\n         * True if the tile is flipped vertically\n         * @type {boolean}\n         */\n        this.flippedY  = (this.tileId & TMX_FLIP_V) !== 0;\n\n        /**\n         * True if the tile is flipped anti-diagonally\n         * @type {boolean}\n         */\n        this.flippedAD = (this.tileId & TMX_FLIP_AD) !== 0;\n\n        /**\n         * Global flag that indicates if the tile is flipped\n         * @type {boolean}\n         */\n        this.flipped = this.flippedX || this.flippedY || this.flippedAD;\n\n        // create and apply transformation matrix if required\n        if (this.flipped === true) {\n            if (this.currentTransform === null) {\n                this.currentTransform = new Matrix2d();\n            }\n            this.setTileTransform(this.currentTransform.identity());\n        }\n\n        // clear out the flags and set the tileId\n        this.tileId &= TMX_CLEAR_BIT_MASK;\n    }\n\n    /**\n     * set the transformation matrix for this tile\n     * @ignore\n     */\n    setTileTransform(transform) {\n        transform.translate(this.width / 2, this.height / 2);\n        if (this.flippedAD) {\n            transform.rotate(-90 * Math.PI / 180);\n            transform.scale(-1, 1);\n        }\n        if (this.flippedX) {\n            transform.scale(\n                this.flippedAD ? 1 : -1, this.flippedAD ? -1 : 1\n            );\n        }\n        if (this.flippedY) {\n            transform.scale(\n                this.flippedAD ? -1 : 1, this.flippedAD ? 1 : -1\n            );\n        }\n        transform.translate(-this.width / 2, -this.height / 2);\n    }\n\n    /**\n     * return a renderable object for this Tile object\n     * @param {object} [settings] - see {@link Sprite}\n     * @returns {Renderable} a me.Sprite object\n     */\n    getRenderable(settings) {\n        let renderable;\n        let tileset = this.tileset;\n\n        if (tileset.animations.has(this.tileId)) {\n            let frames = [];\n            let frameId = [];\n            (tileset.animations.get(this.tileId).frames).forEach((frame) => {\n                frameId.push(frame.tileid);\n                frames.push({\n                    name : \"\" + frame.tileid,\n                    delay : frame.duration\n                });\n            });\n            renderable = tileset.texture.createAnimationFromName(frameId, settings);\n            renderable.addAnimation(this.tileId - tileset.firstgid, frames);\n            renderable.setCurrentAnimation(this.tileId - tileset.firstgid);\n\n        } else {\n            if (tileset.isCollection === true) {\n                let image = tileset.getTileImage(this.tileId);\n                renderable = new Sprite(0, 0,\n                    Object.assign({\n                        image: image\n                    })//, settings)\n                );\n                renderable.anchorPoint.set(0, 0);\n                renderable.scale((settings.width / this.width), (settings.height / this.height));\n                if (typeof settings.rotation !== \"undefined\") {\n                    renderable.anchorPoint.set(0.5, 0.5);\n                    renderable.currentTransform.rotate(settings.rotation);\n                    renderable.currentTransform.translate(settings.width / 2, settings.height / 2);\n                    // TODO : move the rotation related code from TMXTiledMap to here (under)\n                    settings.rotation = undefined;\n                }\n            } else {\n                renderable = tileset.texture.createSpriteFromName(this.tileId - tileset.firstgid, settings);\n                renderable.anchorPoint.set(0, 0);\n            }\n        }\n\n        // any H/V flipping to apply?\n        this.setTileTransform(renderable.currentTransform);\n\n        return renderable;\n    }\n}\n\n/**\n * @classdesc\n * a TMX Object defintion, as defined in Tiled\n * (Object definition is translated into the virtual `me.game.world` using `me.Renderable`)\n * @ignore\n */\nclass TMXObject {\n\n    constructor(map, settings, z) {\n\n        /**\n         * point list in JSON format\n         * @type {object[]}\n         */\n        this.points = undefined;\n\n        /**\n         * object name\n         * @type {string}\n         */\n        this.name = settings.name;\n\n        /**\n         * object x position\n         * @type {number}\n         */\n        this.x = +settings.x;\n\n        /**\n         * object y position\n         * @type {number}\n         */\n        this.y = +settings.y;\n\n        /**\n         * object z order\n         * @type {number}\n         */\n        this.z = +z;\n\n        /**\n         * object width\n         * @type {number}\n         */\n        this.width = +settings.width || 0;\n\n        /**\n         * object height\n         * @type {number}\n         */\n        this.height = +settings.height || 0;\n\n        /**\n         * object gid value\n         * when defined the object is a tiled object\n         * @type {number}\n         */\n        this.gid = +settings.gid || null;\n\n        /**\n         * tint color\n         * @type {string}\n         */\n        this.tintcolor = settings.tintcolor;\n\n        /**\n         * object type\n         * @type {string}\n         * @deprecated since Tiled 1.9\n         * @see https://docs.mapeditor.org/en/stable/reference/tmx-changelog/#tiled-1-9\n         */\n        this.type = settings.type;\n\n        /**\n         * the object class\n         * @type {string}\n         */\n        this.class = typeof settings.class !== \"undefined\" ? settings.class : settings.type;\n\n        /**\n         * object text\n         * @type {object}\n         * @see http://docs.mapeditor.org/en/stable/reference/tmx-map-format/#text\n         */\n        this.text = undefined;\n\n        /**\n         * The rotation of the object in radians clockwise (defaults to 0)\n         * @type {number}\n         */\n        this.rotation = degToRad(+settings.rotation || 0);\n\n        /**\n         * object unique identifier per level (Tiled 0.11.x+)\n         * @type {number}\n         */\n        this.id = +settings.id || undefined;\n\n        /**\n         * object orientation (orthogonal or isometric)\n         * @type {string}\n         */\n        this.orientation = map.orientation;\n\n        /**\n         * the collision shapes defined for this object\n         * @type {object[]}\n         */\n        this.shapes = undefined;\n\n        /**\n         * if true, the object is an Ellipse\n         * @type {boolean}\n         */\n        this.isEllipse = false;\n\n        /**\n         * if true, the object is a Point\n         * @type {boolean}\n         */\n        this.isPoint = false;\n\n        /**\n         * if true, the object is a Polygon\n         * @type {boolean}\n         */\n        this.isPolygon = false;\n\n        /**\n         * if true, the object is a PolyLine\n         * @type {boolean}\n         */\n        this.isPolyLine = false;\n\n        // check if the object has an associated gid\n        if (typeof this.gid === \"number\") {\n            this.setTile(map.tilesets);\n        }\n        else {\n            if (typeof settings.ellipse !== \"undefined\") {\n                this.isEllipse = true;\n            } else if (typeof settings.point !== \"undefined\") {\n                this.isPoint = true;\n            } else if (typeof settings.polygon !== \"undefined\") {\n                this.points = settings.polygon;\n                this.isPolygon = true;\n            } else if (typeof settings.polyline !== \"undefined\") {\n                this.points = settings.polyline;\n                this.isPolyLine = true;\n            }\n        }\n\n        // check for text information\n        if (typeof settings.text !== \"undefined\") {\n            // a text object\n            this.text = settings.text;\n            // normalize field name and default value the melonjs way\n            this.text.font = settings.text.fontfamily || \"sans-serif\";\n            this.text.size = settings.text.pixelsize || 16;\n            this.text.fillStyle = settings.text.color || \"#000000\";\n            this.text.textAlign = settings.text.halign || \"left\";\n            this.text.textBaseline = settings.text.valign || \"top\";\n            this.text.width = this.width;\n            this.text.height = this.height;\n            // set the object properties\n            applyTMXProperties(this.text, settings);\n        } else {\n            // set the object properties\n            applyTMXProperties(this, settings);\n            // a standard object\n            if (!this.shapes) {\n                // else define the object shapes if required\n                this.shapes = this.parseTMXShapes();\n            }\n        }\n\n        // Adjust the Position to match Tiled\n        if (!map.isEditor) {\n            map.getRenderer().adjustPosition(this);\n        }\n    }\n\n    /**\n     * set the object image (for Tiled Object)\n     * @ignore\n     */\n    setTile(tilesets) {\n        // get the corresponding tileset\n        let tileset = tilesets.getTilesetByGid(this.gid);\n\n        if (tileset.isCollection === false) {\n            // set width and height equal to tile size\n            this.width = this.framewidth = tileset.tilewidth;\n            this.height = this.frameheight = tileset.tileheight;\n        }\n\n        // the object corresponding tile object\n        this.tile = new Tile(this.x, this.y, this.gid, tileset);\n    }\n\n    /**\n     * parses the TMX shape definition and returns a corresponding array of me.Shape object\n     * @private\n     * @returns {Polygon[]|Line[]|Ellipse[]} an array of shape objects\n     */\n    parseTMXShapes() {\n        let shapes = [];\n\n        // add an ellipse shape\n        if (this.isEllipse === true) {\n            // ellipse coordinates are the center position, so set default to the corresonding radius\n            shapes.push((pool.pull(\"Ellipse\",\n                this.width / 2,\n                this.height / 2,\n                this.width,\n                this.height\n            )).rotate(this.rotation));\n        } else if (this.isPoint === true) {\n            shapes.push(pool.pull(\"Point\", this.x, this.y));\n        } else {\n            // add a polygon\n            if (this.isPolygon === true) {\n                let _polygon = pool.pull(\"Polygon\", 0, 0, this.points);\n                let isConvex = _polygon.isConvex();\n                // make sure it's a convex polygon\n                if (isConvex === false) {\n                    throw new Error(\"collision polygones in Tiled should be defined as Convex\");\n                } else if (isConvex === null) {\n                    throw new Error(\"invalid polygone\");\n                }\n                shapes.push(_polygon.rotate(this.rotation));\n\n            } else if (this.isPolyLine === true) {\n                let p = this.points;\n                let p1, p2;\n                let segments = p.length - 1;\n                for (let i = 0; i < segments; i++) {\n                    // clone the value before, as [i + 1]\n                    // is reused later by the next segment\n                    p1 = pool.pull(\"Vector2d\", p[i].x, p[i].y);\n                    p2 = pool.pull(\"Vector2d\", p[i + 1].x, p[i + 1].y);\n                    if (this.rotation !== 0) {\n                        p1 = p1.rotate(this.rotation);\n                        p2 = p2.rotate(this.rotation);\n                    }\n                    shapes.push(pool.pull(\"Line\", 0, 0, [ p1, p2 ]));\n                }\n            }\n\n            // it's a rectangle, returns a polygon object anyway\n            else {\n                shapes.push((pool.pull(\"Polygon\",\n                    0, 0, [\n                        pool.pull(\"Vector2d\"),  pool.pull(\"Vector2d\", this.width, 0),\n                        pool.pull(\"Vector2d\", this.width, this.height), pool.pull(\"Vector2d\", 0, this.height)\n                    ]\n                )).rotate(this.rotation));\n            }\n\n        }\n\n        // Apply isometric projection\n        if (this.orientation === \"isometric\") {\n            for (let i = 0; i < shapes.length; i++) {\n                if (typeof shapes[i].toIso === \"function\") {\n                    shapes[i].toIso();\n                }\n            }\n        }\n\n        return shapes;\n    }\n\n    /**\n     * getObjectPropertyByName\n     * @ignore\n     */\n    getObjectPropertyByName(name) {\n        return this[name];\n    }\n}\n\nfunction correctRadii(signedRx, signedRy, x1p, y1p) {\n    const prx = Math.abs(signedRx);\n    const pry = Math.abs(signedRy);\n\n    const A = pow(x1p) / pow(prx) + pow(y1p) / pow(pry);\n\n    const rx = A > 1 ? Math.sqrt(A) * prx : prx;\n    const ry = A > 1 ? Math.sqrt(A) * pry : pry;\n\n    return [rx, ry];\n}\n\nfunction mat2DotVec2([m00, m01, m10, m11], [vx, vy]) {\n    return [m00 * vx + m01 * vy, m10 * vx + m11 * vy];\n}\n\nfunction vec2Add([ux, uy], [vx, vy]) {\n    return [ux + vx, uy + vy];\n}\n\nfunction vec2Scale([a0, a1], scalar) {\n    return [a0 * scalar, a1 * scalar];\n}\n\nfunction vec2Dot([ux, uy], [vx, vy]) {\n    return ux * vx + uy * vy;\n}\n\nfunction vec2Mag([ux, uy]) {\n    return Math.sqrt(ux ** 2 + uy ** 2);\n}\n\nfunction vec2Angle(u, v) {\n    const [ux, uy] = u;\n    const [vx, vy] = v;\n    const sign = ux * vy - uy * vx >= 0 ? 1 : -1;\n    return sign * Math.acos(vec2Dot(u, v) / (vec2Mag(u) * vec2Mag(v)));\n}\n\n// From https://svgwg.org/svg2-draft/implnote.html#ArcConversionEndpointToCenter\nfunction endpointToCenterParameterization(x1, y1, x2, y2, largeArcFlag, sweepFlag, srx, sry, xAxisRotationDeg) {\n    const xAxisRotation = degToRad(xAxisRotationDeg);\n\n    const cosphi = Math.cos(xAxisRotation);\n    const sinphi = Math.sin(xAxisRotation);\n\n    const [x1p, y1p] = mat2DotVec2(\n        [cosphi, sinphi, -sinphi, cosphi],\n        [(x1 - x2) / 2, (y1 - y2) / 2]\n    );\n\n    const [rx, ry] = correctRadii(srx, sry, x1p, y1p);\n\n    const sign = largeArcFlag !== sweepFlag ? 1 : -1;\n    const n = pow(rx) * pow(ry) - pow(rx) * pow(y1p) - pow(ry) * pow(x1p);\n    const d = pow(rx) * pow(y1p) + pow(ry) * pow(x1p);\n\n    const [cxp, cyp] = vec2Scale(\n        [(rx * y1p) / ry, (-ry * x1p) / rx],\n        sign * Math.sqrt(Math.abs(n / d))\n    );\n\n    const [cx, cy] = vec2Add(\n        mat2DotVec2([cosphi, -sinphi, sinphi, cosphi], [cxp, cyp]),\n        [(x1 + x2) / 2, (y1 + y2) / 2]\n    );\n\n    const a = [(x1p - cxp) / rx, (y1p - cyp) / ry];\n    const b = [(-x1p - cxp) / rx, (-y1p - cyp) / ry];\n    const startAngle = vec2Angle([1, 0], a);\n    const deltaAngle0 = vec2Angle(a, b) % (2 * Math.PI);\n\n    const deltaAngle =\n          !sweepFlag && deltaAngle0 > 0\n              ? deltaAngle0 - 2 * Math.PI\n              : sweepFlag && deltaAngle0 < 0\n                  ? deltaAngle0 + 2 * Math.PI\n                  : deltaAngle0;\n\n    const endAngle = startAngle + deltaAngle;\n\n    return {\n        cx,\n        cy,\n        rx,\n        ry,\n        startAngle,\n        endAngle,\n        xAxisRotation,\n        anticlockwise: deltaAngle < 0\n    };\n}\n\n/**\n * additional import for TypeScript\n * @import Point from \"./point.js\";\n */\n\n/**\n * @classdesc\n * a simplified path2d implementation, supporting only one path\n */\nclass Path2D {\n    constructor(svgPath) {\n        /**\n         * the points defining the current path\n         * @type {Point[]}\n         */\n        this.points = [];\n\n        /**\n         * space between interpolated points for quadratic and bezier curve approx. in pixels.\n         * @type {number}\n         * @default 5\n         */\n        this.arcResolution = 5;\n\n        /* @ignore */\n        this.vertices = [];\n\n        /* @ignore */\n        this.startPoint = pool.pull(\"Point\");\n\n        /* @ignore */\n        this.isDirty = false;\n\n        if (typeof svgPath === \"string\") {\n            this.parseSVGPath(svgPath);\n        }\n    }\n\n    /**\n     * Parses an SVG path string and adds the points to the current path.\n     * @param {string} svgPath - The SVG path string to parse.\n     */\n    parseSVGPath(svgPath) {\n        // Split path into commands and coordinates\n        const pathCommands = svgPath.match(/([a-df-z])[^a-df-z]*/gi);\n        const points = this.points;\n        const startPoint = this.startPoint;\n        let lastPoint = startPoint;\n\n        this.beginPath();\n\n        // Process each command and corresponding coordinates\n        for (let i = 0; i < pathCommands.length; i++) {\n            const pathCommand = pathCommands[i];\n            const command = pathCommand[0].toUpperCase();\n            const coordinates = pathCommand.slice(1).trim().split(/[\\s,]+/).map(parseFloat);\n\n            switch (command) {\n                case \"A\": {\n                    // A command takes 5 coordinates\n                    const p = endpointToCenterParameterization(...coordinates);\n                    this.arc(p.x, p.y, p.radiusX, p.radiusY, p.rotation, p.startAngle, p.endAngle, p.applyanticlockwise);\n                }\n                    break;\n                case \"H\":\n                    // H take 1 coordinate\n                    lastPoint = points.length === 0 ? startPoint : points[points.length - 1];\n                    this.lineTo(lastPoint.x + coordinates[0], lastPoint.y);\n                    break;\n                case \"V\":\n                    // V take 1 coordinate\n                    lastPoint = points.length === 0 ? startPoint : points[points.length - 1];\n                    this.lineTo(lastPoint.x, lastPoint.y + coordinates[0]);\n                    break;\n                case \"M\":\n                    // M takes 2 coordinates\n                    this.moveTo(...coordinates);\n                    break;\n                case \"L\":\n                    // L takes 2 coordinates\n                    this.lineTo(...coordinates);\n                    break;\n                case \"Q\":\n                    // Q takes 4 coordinates\n                    this.quadraticCurveTo(...coordinates);\n                    break;\n                case \"C\":\n                    // C takes 6 coordinates\n                    this.bezierCurveTo(...coordinates);\n                    break;\n                case \"Z\":\n                    this.closePath();\n                    break;\n                default:\n                    console.warn(\"Unsupported command:\", command);\n                    break;\n            }\n        }\n    }\n\n\n    /**\n     * begin a new path\n     */\n    beginPath() {\n        // empty the cache and recycle all vectors\n        this.points.forEach((point) => {\n            pool.push(point);\n        });\n        this.isDirty = true;\n        this.points.length = 0;\n        this.startPoint.set(0, 0);\n    }\n\n    /**\n     * causes the point of the pen to move back to the start of the current path.\n     * It tries to draw a straight line from the current point to the start.\n     * If the shape has already been closed or has only one point, this function does nothing.\n     */\n    closePath() {\n        let points = this.points;\n        if (points.length > 0) {\n            let firstPoint = points[0];\n            if (!firstPoint.equals(points[points.length - 1])) {\n                this.lineTo(firstPoint.x, firstPoint.y);\n            }\n            this.isDirty = true;\n        }\n    }\n\n    /**\n     * triangulate the shape defined by this path into an array of triangles\n     * @returns {Point[]} an array of vertices representing the triangulated path or shape\n     */\n    triangulatePath() {\n        let vertices = this.vertices;\n\n        if (this.isDirty) {\n            let points = this.points;\n            let indices = earcut$1(points.flatMap(p => [p.x, p.y]));\n            let indicesLength = indices.length;\n\n            // pre-allocate vertices if necessary\n            while (vertices.length < indicesLength) {\n                vertices.push(pool.pull(\"Point\"));\n            }\n\n            // calculate all vertices\n            for (let i = 0; i < indicesLength; i++) {\n                let point = points[indices[i]];\n                vertices[i].set(point.x, point.y);\n            }\n\n            // recycle overhead from a previous triangulation\n            while (vertices.length > indicesLength) {\n                pool.push(vertices[vertices.length - 1]);\n                vertices.length -= 1;\n            }\n            this.isDirty = false;\n        }\n\n        return vertices;\n    }\n\n    /**\n     * moves the starting point of the current path to the (x, y) coordinates.\n     * @param {number} x - the x-axis (horizontal) coordinate of the point.\n     * @param {number} y - the y-axis (vertical) coordinate of the point.\n     */\n    moveTo(x, y) {\n        this.startPoint.set(x, y);\n        this.isDirty = true;\n    }\n\n    /**\n     * connects the last point in the current path to the (x, y) coordinates with a straight line.\n     * @param {number} x - the x-axis coordinate of the line's end point.\n     * @param {number} y - the y-axis coordinate of the line's end point.\n     */\n    lineTo(x, y) {\n        let points = this.points;\n        let startPoint = this.startPoint;\n        let lastPoint = points.length === 0 ? startPoint : points[points.length - 1];\n\n        if (!startPoint.equals(lastPoint)) {\n            points.push(pool.pull(\"Point\", startPoint.x, startPoint.y));\n        } else {\n            points.push(pool.pull(\"Point\", lastPoint.x, lastPoint.y));\n        }\n        points.push(pool.pull(\"Point\", x, y));\n\n        startPoint.x = x;\n        startPoint.y = y;\n\n        this.isDirty = true;\n    }\n\n    /**\n     * adds an arc to the current path which is centered at (x, y) position with the given radius,\n     * starting at startAngle and ending at endAngle going in the given direction by counterclockwise (defaulting to clockwise).\n     * @param {number} x - the horizontal coordinate of the arc's center.\n     * @param {number} y - the vertical coordinate of the arc's center.\n     * @param {number} radius - the arc's radius. Must be positive.\n     * @param {number} startAngle - the angle at which the arc starts in radians, measured from the positive x-axis.\n     * @param {number} endAngle - the angle at which the arc ends in radians, measured from the positive x-axis.\n     * @param {boolean} [anticlockwise=false] - an optional boolean value. If true, draws the arc counter-clockwise between the start and end angles.\n     */\n    arc(x, y, radius, startAngle, endAngle, anticlockwise = false) {\n        // based on from https://github.com/karellodewijk/canvas-webgl/blob/master/canvas-webgl.js\n        //bring angles all in [0, 2*PI] range\n        if (startAngle === endAngle) return;\n        const fullCircle = anticlockwise ? Math.abs(startAngle - endAngle) >= (TAU) : Math.abs(endAngle - startAngle) >= (TAU);\n\n        startAngle = startAngle % (TAU);\n        endAngle = endAngle % (TAU);\n\n        if (startAngle < 0) startAngle += TAU;\n        if (endAngle < 0) endAngle += TAU;\n\n        if (startAngle >= endAngle) {\n            endAngle += TAU;\n        }\n\n        let diff = endAngle - startAngle;\n        let direction = 1;\n        if (anticlockwise) {\n            direction = -1;\n            diff = TAU - diff;\n        }\n\n        if (fullCircle) diff = TAU;\n\n        const length = diff * radius;\n        const nr_of_interpolation_points = length / this.arcResolution;\n        const dangle = diff / nr_of_interpolation_points;\n        const angleStep = dangle * direction;\n\n        this.moveTo(x + radius * Math.cos(startAngle), y + radius * Math.sin(startAngle));\n\n        let angle = startAngle;\n        for (let j = 0; j < nr_of_interpolation_points; j++) {\n            this.lineTo(x + radius * Math.cos(angle), y + radius * Math.sin(angle));\n            angle += angleStep;\n        }\n\n        this.lineTo(x + radius * Math.cos(endAngle), y + radius * Math.sin(endAngle));\n\n        this.isDirty = true;\n    }\n\n    /**\n     * adds a circular arc to the path with the given control points and radius, connected to the previous point by a straight line.\n     * @param {number} x1 - the x-axis coordinate of the first control point.\n     * @param {number} y1 - the y-axis coordinate of the first control point.\n     * @param {number} x2 - the x-axis coordinate of the second control point.\n     * @param {number} y2 - the y-axis coordinate of the second control point.\n     * @param {number} radius - the arc's radius. Must be positive.\n     */\n    arcTo(x1, y1, x2, y2, radius) {\n        let points = this.points;\n        let startPoint = this.startPoint;\n        let lastPoint = points.length === 0 ? startPoint : points[points.length - 1];\n\n        // based on from https://github.com/karellodewijk/canvas-webgl/blob/master/canvas-webgl.js\n        let x0 = lastPoint.x, y0 = lastPoint.y;\n        //a = -incoming vector, b = outgoing vector to x1, y1\n        let a0 = x0 - x1, a1 = y0 - y1;\n        let b0 = x2 - x1, b1 = y2 - y1;\n\n        //normalize\n        let l_a = Math.sqrt(Math.pow(a0, 2) + Math.pow(a1, 2));\n        let l_b = Math.sqrt(Math.pow(b0, 2) + Math.pow(b1, 2));\n        a0 /= l_a; a1 /= l_a; b0 /= l_b; b1 /= l_b;\n        let angle = Math.atan2(a1, a0) - Math.atan2(b1, b0);\n\n        //work out tangent points using tan(Î¸) = opposite / adjacent; angle/2 because hypotenuse is the bisection of a,b\n        let tan_angle_div2 = Math.tan(angle / 2);\n        let adj_l = (radius / tan_angle_div2);\n\n        let tangent1_pointx = x1 + a0 * adj_l, tangent1_pointy = y1 + a1 * adj_l;\n        let tangent2_pointx = x1 + b0 * adj_l, tangent2_pointy = y1 + b1 * adj_l;\n\n        this.moveTo(tangent1_pointx, tangent1_pointy);\n\n        let bisec0 = (a0 + b0) / 2.0, bisec1 = (a1 + b1) / 2.0;\n        let bisec_l = Math.sqrt(Math.pow(bisec0, 2) + Math.pow(bisec1, 2));\n        bisec0 /= bisec_l; bisec1 /= bisec_l;\n\n        let hyp_l = Math.sqrt(Math.pow(radius, 2) + Math.pow(adj_l, 2));\n        let centerx = x1 + hyp_l * bisec0, centery = y1 + hyp_l * bisec1;\n\n        let startAngle = Math.atan2(tangent1_pointy - centery, tangent1_pointx - centerx);\n        let endAngle = Math.atan2(tangent2_pointy - centery, tangent2_pointx - centerx);\n\n        this.arc(centerx, centery, radius, startAngle, endAngle);\n    }\n\n    /**\n     * adds an elliptical arc to the path which is centered at (x, y) position with the radii radiusX and radiusY\n     * starting at startAngle and ending at endAngle going in the given direction by counterclockwise.\n     * @param {number} x - the x-axis (horizontal) coordinate of the ellipse's center.\n     * @param {number} y - the  y-axis (vertical) coordinate of the ellipse's center.\n     * @param {number} radiusX - the ellipse's major-axis radius. Must be non-negative.\n     * @param {number} radiusY - the ellipse's minor-axis radius. Must be non-negative.\n     * @param {number} rotation - the rotation of the ellipse, expressed in radians.\n     * @param {number} startAngle - the angle at which the ellipse starts, measured clockwise from the positive x-axis and expressed in radians.\n     * @param {number} endAngle - the angle at which the ellipse ends, measured clockwise from the positive x-axis and expressed in radians.\n     * @param {boolean} [anticlockwise=false] - an optional boolean value which, if true, draws the ellipse counterclockwise (anticlockwise).\n     */\n    ellipse(x, y, radiusX, radiusY, rotation, startAngle, endAngle, anticlockwise = false) {\n        // based on from https://github.com/karellodewijk/canvas-webgl/blob/master/canvas-webgl.js\n        if (startAngle === endAngle) return;\n        let fullCircle = anticlockwise ? Math.abs(startAngle - endAngle) >= (TAU) : Math.abs(endAngle - startAngle) >= (TAU);\n\n        //bring angles all in [0, 2*PI] range\n        startAngle = startAngle % (TAU);\n        endAngle = endAngle % (TAU);\n        if (startAngle < 0) startAngle += TAU;\n        if (endAngle < 0) endAngle += TAU;\n\n        if (startAngle >= endAngle) {\n            endAngle += TAU;\n        }\n\n        let diff = endAngle - startAngle;\n\n        let direction = 1;\n        if (anticlockwise) {\n            direction = -1;\n            diff = TAU - diff;\n        }\n\n        if (fullCircle) diff = TAU;\n\n        const length = (diff * radiusX + diff * radiusY) / 2;\n        const nr_of_interpolation_points = length / this.arcResolution;\n        const dangle = diff / nr_of_interpolation_points;\n        const angleStep = dangle * direction;\n\n        let angle = startAngle;\n        const cos_rotation = Math.cos(rotation);\n        const sin_rotation = Math.sin(rotation);\n\n        this.moveTo(x + radiusX * Math.cos(startAngle), y + radiusY * Math.sin(startAngle));\n\n        for (let j = 0; j < nr_of_interpolation_points; j++) {\n            const _x1 = radiusX * Math.cos(angle);\n            const _y1 = radiusY * Math.sin(angle);\n            const _x2 = x + _x1 * cos_rotation - _y1 * sin_rotation;\n            const _y2 = y + _x1 * sin_rotation + _y1 * cos_rotation;\n            this.lineTo(_x2, _y2);\n            angle += angleStep;\n        }\n        // close the ellipse\n        this.lineTo(x + radiusX * Math.cos(startAngle), y + radiusY * Math.sin(startAngle));\n        this.isDirty = true;\n    }\n\n    /**\n     * Adds a quadratic BÃ©zier curve to the path.\n     * @param {number} cpX - The x-coordinate of the control point.\n     * @param {number} cpY - The y-coordinate of the control point.\n     * @param {number} x - The x-coordinate of the end point of the curve.\n     * @param {number} y - The y-coordinate of the end point of the curve.\n     */\n    quadraticCurveTo(cpX, cpY, x, y) {\n        const points = this.points;\n        const startPoint = this.startPoint;\n        const lastPoint = points.length === 0 ? startPoint : points[points.length - 1];\n        const endPoint = pool.pull(\"Point\").set(x, y);\n        const controlPoint = pool.pull(\"Point\").set(cpX, cpY);\n        const resolution = this.arcResolution;\n\n        const t = 1 / resolution;\n        for (let i = 1; i <= resolution; i++) {\n            this.lineTo(\n                lastPoint.x * Math.pow(1 - t * i, 2) + controlPoint.x * 2 * (1 - t * i) * t * i + endPoint.x * Math.pow(t * i, 2),\n                lastPoint.y * Math.pow(1 - t * i, 2) + controlPoint.y * 2 * (1 - t * i) * t * i + endPoint.y * Math.pow(t * i, 2)\n            );\n        }\n        pool.push(endPoint, controlPoint);\n        this.isDirty = true;\n    }\n\n    /**\n     * Adds a cubic BÃ©zier curve to the path.\n     * @param {number} cp1X - The x-coordinate of the first control point.\n     * @param {number} cp1Y - The y-coordinate of the first control point.\n     * @param {number} cp2X - The x-coordinate of the second control point.\n     * @param {number} cp2Y - The y-coordinate of the second control point.\n     * @param {number} x - The x-coordinate of the end point of the curve.\n     * @param {number} y - The y-coordinate of the end point of the curve.\n     */\n    bezierCurveTo(cp1X, cp1Y, cp2X, cp2Y, x, y) {\n        const points = this.points;\n        const startPoint = this.startPoint;\n        const lastPoint = points.length === 0 ? startPoint : points[points.length - 1];\n        const endPoint = pool.pull(\"Point\").set(x, y);\n        const controlPoint1 = pool.pull(\"Point\").set(cp1X, cp1Y);\n        const controlPoint2 = pool.pull(\"Point\").set(cp2X, cp2Y);\n        const resolution = this.arcResolution;\n\n        const t = 1 / resolution;\n        for (let i = 1; i <= resolution; i++) {\n            this.lineTo(\n                lastPoint.x * Math.pow(1 - t * i, 3) + controlPoint1.x * 3 * Math.pow(1 - t * i, 2) * t * i + controlPoint2.x * 3 * (1 - t * i) * Math.pow(t * i, 2) + endPoint.x * Math.pow(t * i, 3),\n                lastPoint.y * Math.pow(1 - t * i, 3) + controlPoint1.y * 3 * Math.pow(1 - t * i, 2) * t * i + controlPoint2.y * 3 * (1 - t * i) * Math.pow(t * i, 2) + endPoint.y * Math.pow(t * i, 3)\n            );\n        }\n\n        pool.push(endPoint, controlPoint1, controlPoint2);\n        this.isDirty = true;\n    }\n\n    /**\n     * creates a path for a rectangle at position (x, y) with a size that is determined by width and height.\n     * @param {number} x - the x-axis coordinate of the rectangle's starting point.\n     * @param {number} y - the y-axis coordinate of the rectangle's starting point.\n     * @param {number} width - the rectangle's width. Positive values are to the right, and negative to the left.\n     * @param {number} height - the rectangle's height. Positive values are down, and negative are up.\n     */\n    rect(x, y, width, height) {\n        this.moveTo(x, y);\n        this.lineTo(x + width, y);\n\n        this.moveTo(x + width, y);\n        this.lineTo(x + width, y + height);\n\n        this.moveTo(x + width, y + height);\n        this.lineTo(x, y + height);\n\n        this.moveTo(x, y + height);\n        this.lineTo(x, y);\n\n        this.isDirty = true;\n    }\n\n    /**\n     * adds an rounded rectangle to the current path.\n     * @param {number} x - the x-axis coordinate of the rectangle's starting point.\n     * @param {number} y - the y-axis coordinate of the rectangle's starting point.\n     * @param {number} width - the rectangle's width. Positive values are to the right, and negative to the left.\n     * @param {number} height - the rectangle's height. Positive values are down, and negative are up.\n     * @param {number} radius - the arc's radius to draw the borders. Must be positive.\n     */\n    roundRect(x, y, width, height, radius) {\n        this.moveTo(x + radius, y);\n        this.lineTo(x + width - radius, y);\n        this.arcTo(x + width, y, x + width, y + radius, radius);\n\n        this.moveTo(x + width, y + radius);\n        this.lineTo(x + width, y + height - radius);\n        this.arcTo(x + width, y + height, x + width - radius, y + height, radius);\n\n        this.moveTo(x + width - radius, y + height);\n        this.lineTo(x + radius, y + height);\n        this.arcTo(x, y + height, x, y + height - radius, radius);\n\n        this.moveTo(x, y + height - radius);\n        this.lineTo(x, y + radius);\n        this.arcTo(x, y, x + radius, y, radius);\n\n        this.isDirty = true;\n    }\n}\n\n/**\n * additional import for TypeScript\n * @import CanvasRenderer from \"./../canvas/canvas_renderer.js\";\n * @import WebGLRenderer from \"./../webgl/webgl_renderer.js\";\n */\n\n// default canvas settings\nlet defaultAttributes = {\n    offscreenCanvas : false,\n    willReadFrequently : false,\n    antiAlias : false,\n    context: \"2d\",\n    transparent : false,\n    premultipliedAlpha: true,\n    stencil: true,\n    blendMode : \"normal\",\n    failIfMajorPerformanceCaveat : true,\n    preferWebGL1 : false,\n    powerPreference : \"default\"\n};\n\n// WebGL version (if a gl context is created)\nlet WebGLVersion;\n\n// a helper function to create the 2d/webgl context\nfunction createContext(canvas, attributes) {\n    let context;\n\n    if (attributes.context === \"2d\") {\n        // 2d/canvas mode\n        context = canvas.getContext(attributes.context, { willReadFrequently: attributes.willReadFrequently });\n    } else if (attributes.context === \"webgl\") {\n        let attr = {\n            alpha : attributes.transparent,\n            antialias : attributes.antiAlias,\n            depth : attributes.depth,\n            stencil: true,\n            preserveDrawingBuffer : false,\n            premultipliedAlpha: attributes.transparent ? attributes.premultipliedAlpha : false,\n            powerPreference: attributes.powerPreference,\n            failIfMajorPerformanceCaveat : attributes.failIfMajorPerformanceCaveat\n        };\n\n        // attempt to create a WebGL2 context unless not requested\n        if (attributes.preferWebGL1 !== true) {\n            context = canvas.getContext(\"webgl2\", attr);\n            if (context) {\n                WebGLVersion = 2;\n            }\n        }\n\n        // fallback to WebGL1\n        if (!context) {\n            WebGLVersion = 1;\n            context = canvas.getContext(\"webgl\", attr) || canvas.getContext(\"experimental-webgl\", attr);\n        }\n\n        if (!context) {\n            throw new Error(\n                \"A WebGL context could not be created.\"\n            );\n        }\n    } else {\n        throw new Error(\n            \"Invalid context type. Must be one of '2d' or 'webgl'\"\n        );\n    }\n\n    // set the context size\n    return context;\n}\n\n/**\n * CanvasRenderTarget is 2D render target which exposes a Canvas interface.\n */\nclass CanvasRenderTarget {\n    /**\n     * @param {number} width - the desired width of the canvas\n     * @param {number} height - the desired height of the canvas\n     * @param {object} attributes - The attributes to create both the canvas and context\n     * @param {string} [attributes.context=\"2d\"] - the context type to be created (\"2d\", \"webgl\")\n     * @param {boolean} [attributes.preferWebGL1=false] - set to true for force using WebGL1 instead of WebGL2 (if supported)\n     * @param {boolean} [attributes.transparent=false] - specify if the canvas contains an alpha channel\n     * @param {boolean} [attributes.offscreenCanvas=false] - will create an offscreenCanvas if true instead of a standard canvas\n     * @param {boolean} [attributes.willReadFrequently=false] - Indicates whether or not a lot of read-back operations are planned\n     * @param {boolean} [attributes.antiAlias=false] - Whether to enable anti-aliasing, use false (default) for a pixelated effect.\n     */\n    constructor(width, height, attributes = defaultAttributes) {\n        /**\n         * the canvas created for this CanvasRenderTarget\n         * @type {HTMLCanvasElement|OffscreenCanvas}\n         */\n        this.canvas;\n\n        /**\n         * the rendering context of this CanvasRenderTarget\n         * @type {CanvasRenderingContext2D|WebGLRenderingContext}\n         */\n        this.context;\n\n        // clean up the given attributes\n        this.attributes = Object.assign({}, defaultAttributes, attributes);\n\n        // make sure context is defined\n        if (typeof attributes.context === \"undefined\") {\n            attributes.context = \"2d\";\n        }\n\n        // used the given canvas if any\n        if (typeof attributes.canvas !== \"undefined\") {\n            this.canvas = attributes.canvas;\n        } else {\n            this.canvas = createCanvas(width, height, this.attributes.offscreenCanvas);\n        }\n\n        // create the context\n        this.context = createContext(this.canvas, this.attributes);\n\n        this.WebGLVersion = WebGLVersion;\n\n        // enable or disable antiAlias if specified\n        this.setAntiAlias(this.attributes.antiAlias);\n    }\n\n    /**\n     * @ignore\n     */\n    onResetEvent(width, height) {\n        this.clear();\n        this.resize(width, height);\n    }\n\n    /**\n     * Clears the content of the canvas texture\n     */\n    clear() {\n        this.context.setTransform(1, 0, 0, 1, 0, 0);\n        this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    }\n\n    /**\n     * enable/disable image smoothing (scaling interpolation)\n     * @param {boolean} [enable=false] - whether to enable or not image smoothing (scaling interpolation)\n     */\n    setAntiAlias(enable = false) {\n        let canvas = this.canvas;\n\n        // enable/disable antialias on the given Context2d object\n        setPrefixed(\"imageSmoothingEnabled\", enable, this.context);\n\n        // set antialias CSS property on the main canvas\n        if (typeof canvas.style !== \"undefined\") {\n            if (enable !== true) {\n                // https://developer.mozilla.org/en-US/docs/Web/CSS/image-rendering\n                canvas.style[\"image-rendering\"] = \"optimizeSpeed\"; // legal fallback\n                canvas.style[\"image-rendering\"] = \"-moz-crisp-edges\"; // Firefox\n                canvas.style[\"image-rendering\"] = \"-o-crisp-edges\"; // Opera\n                canvas.style[\"image-rendering\"] = \"-webkit-optimize-contrast\"; // Safari\n                canvas.style[\"image-rendering\"] = \"optimize-contrast\"; // CSS 3\n                canvas.style[\"image-rendering\"] = \"crisp-edges\"; // CSS 4\n                canvas.style[\"image-rendering\"] = \"pixelated\"; // CSS 4\n                canvas.style.msInterpolationMode = \"nearest-neighbor\"; // IE8+\n            } else {\n                canvas.style[\"image-rendering\"] = \"auto\";\n            }\n        }\n    }\n\n    /**\n     * Resizes the canvas texture to the given width and height.\n     * @param {number} width - the desired width\n     * @param {number} height - the desired height\n     */\n    resize(width, height) {\n        this.canvas.width = Math.round(width);\n        this.canvas.height = Math.round(height);\n    }\n\n    /**\n     * Returns an ImageData object representing the underlying pixel data for a specified portion of this canvas texture.\n     * (Note: when using getImageData(), it is highly recommended to use the `willReadFrequently` attribute when creatimg the corresponding canvas texture)\n     * @param {number} x - The x-axis coordinate of the top-left corner of the rectangle from which the ImageData will be extracted\n     * @param {number} y - The y-axis coordinate of the top-left corner of the rectangle from which the ImageData will be extracted\n     * @param {number} width - The width of the rectangle from which the ImageData will be extracted. Positive values are to the right, and negative to the left\n     * @param {number} height - The height of the rectangle from which the ImageData will be extracted. Positive values are down, and negative are up\n     * @returns {ImageData} The ImageData extracted from this CanvasRenderTarget.\n     */\n    getImageData(x, y, width, height) {\n        // clamp values\n        x = clamp(Math.floor(x), 0, this.canvas.width - 1);\n        y = clamp(Math.floor(y), 0, this.canvas.height - 1);\n        width = clamp(width, 1, this.canvas.width - x);\n        height = clamp(height, 1, this.canvas.height - y);\n        // return imageData\n        return this.context.getImageData(x, y, width, height);\n    }\n\n    /**\n     * creates a Blob object representing the image contained in this canvas texture\n     * @param {string} [type=\"image/png\"] - A string indicating the image format\n     * @param {number} [quality] - A Number between 0 and 1 indicating the image quality to be used when creating images using file formats that support lossy compression (such as image/jpeg or image/webp). A user agent will use its default quality value if this option is not specified, or if the number is outside the allowed range.\n     * @returns {Promise} A Promise returning a Blob object representing the image contained in this canvas texture\n     * @example\n     * renderTarget.convertToBlob().then((blob) => console.log(blob));\n     */\n    toBlob(type = \"image/png\", quality) {\n        if (typeof this.canvas.convertToBlob === \"function\") {\n            return this.canvas.convertToBlob(type, quality);\n        } else {\n            return new Promise(function(resolve) {\n                this.canvas.toBlob((blob) => {\n                    resolve(blob);\n                }, type, quality);\n            });\n        }\n    }\n\n    /**\n     * creates an ImageBitmap object from the most recently rendered image of this canvas texture\n     * @param {string} [type=\"image/png\"] - A string indicating the image format\n     * @param {number} [quality] - A Number between 0 and 1 indicating the image quality to be used when creating images using file formats that support lossy compression (such as image/jpeg or image/webp). A user agent will use its default quality value if this option is not specified, or if the number is outside the allowed range.\n     * @returns {Promise} A Promise returning an ImageBitmap.\n     * @example\n     * renderTarget.transferToImageBitmap().then((bitmap) => console.log(bitmap));\n     */\n    toImageBitmap(type = \"image/png\", quality) {\n        return new Promise((resolve) => {\n            if (typeof this.canvas.transferToImageBitmap === \"function\") {\n                resolve(this.canvas.transferToImageBitmap());\n            } else {\n                let image = new Image();\n                image.src = this.canvas.toDataURL(type, quality);\n                image.onload = () => {\n                    globalThis.createImageBitmap(image).then((bitmap) => resolve(bitmap));\n                };\n            }\n        });\n    }\n\n    /**\n     * returns a data URL containing a representation of the most recently rendered image of this canvas texture\n     * (not supported by OffscreenCanvas)\n     * @param {string} [type=\"image/png\"] - A string indicating the image format\n     * @param {number} [quality] - A Number between 0 and 1 indicating the image quality to be used when creating images using file formats that support lossy compression (such as image/jpeg or image/webp). A user agent will use its default quality value if this option is not specified, or if the number is outside the allowed range.\n     * @returns {Promise} A Promise returning a string containing the requested data URL.\n     * @example\n     * renderer.toDataURL().then((dataURL) => console.log(dataURL));\n     */\n    toDataURL(type = \"image/png\", quality) {\n        return new Promise((resolve) => {\n            resolve(this.canvas.toDataURL(type, quality));\n        });\n    }\n\n    /**\n     * invalidate the current CanvasRenderTarget, and force a reupload of the corresponding texture\n     * (call this if you modify the canvas content between two draw calls)\n     * @param {CanvasRenderer|WebGLRenderer} renderer - the renderer to which this canvas texture is attached\n     */\n    invalidate(renderer) {\n        if (typeof renderer.gl !== \"undefined\") {\n            // make sure the right compositor is active\n            renderer.setCompositor(\"quad\");\n            // invalidate the previous corresponding texture so that it can reuploaded once changed\n            this.glTextureUnit = renderer.cache.getUnit(renderer.cache.get(this.canvas));\n            renderer.currentCompositor.unbindTexture2D(null, this.glTextureUnit);\n        }\n    }\n\n    /**\n     * @ignore\n     */\n    destroy() {\n        this.context = undefined;\n        this.canvas = undefined;\n    }\n\n    /**\n     * The width of this canvas texture in pixels\n     * @public\n     * @type {number}\n     */\n    get width() {\n        return this.canvas.width;\n    }\n\n    set width(val) {\n        this.canvas.width = Math.round(val);\n    }\n\n    /**\n     * The height of this canvas texture in pixels\n     * @public\n     * @type {number}\n     */\n    get height() {\n        return this.canvas.height;\n    }\n\n    set height(val) {\n        this.canvas.height = Math.round(val);\n    }\n}\n\n/**\n * @import Rect from \"./../geometries/rectangle.js\";\n * @import RoundRect from \"./../geometries/roundrect.js\";\n * @import Polygon from \"./../geometries/poly.js\";\n * @import Line from \"./../geometries/line.js\";\n * @import Ellipse from \"./../geometries/ellipse.js\";\n * @import Bounds from \"./../physics/bounds.js\";\n */\n\n/**\n * @classdesc\n * a base renderer object\n */\nclass Renderer {\n    /**\n     * @param {ApplicationSettings} [options] - optional parameters for the renderer\n     */\n    constructor(options) {\n\n        /**\n         * The renderer renderTarget\n         * @name renderTarget\n         * @type {CanvasRenderTarget}\n         */\n        this.renderTarget = new CanvasRenderTarget(options.width, options.height,\n            // support case when a global canvas is available, e.g. webapp adapter for wechat\n            typeof globalThis.canvas !== \"undefined\" ? Object.assign(options, { canvas: globalThis.canvas }) : options\n        );\n\n        /**\n         * The given constructor options\n         * @public\n         * @type {object}\n         */\n        this.settings = options;\n\n        /**\n         * the requested video size ratio\n         * @public\n         * @type {number}\n         */\n        this.designRatio = this.settings.width / this.settings.height;\n\n        /**\n         * the scaling ratio to be applied to the main canvas\n         * @type {Vector2d}\n         * @default <1,1>\n         */\n        this.scaleRatio = new Vector2d(this.settings.scale, this.settings.scale);\n\n        /**\n         * true if the current rendering context is valid\n         * @default true\n         * @type {boolean}\n         */\n        this.isContextValid = true;\n\n        /**\n         * the default method to sort object (\"sorting\", \"z-buffer\")\n         * @type {string}\n         * @default \"sorting\"\n         */\n        this.depthTest = \"sorting\";\n\n\n        /**\n         * The Path2D instance used by the renderer to draw primitives\n         * @type {Path2D}\n         */\n        this.path2D = new Path2D();\n\n        /**\n         * The renderer type : Canvas, WebGL, etc...\n         * (override this property with a specific value when implementing a custom renderer)\n         * @type {string}\n         */\n        this.type = \"Generic\";\n\n        /**\n         * @ignore\n         */\n        this.currentScissor = new Int32Array([ 0, 0, this.settings.width, this.settings.height ]);\n\n        /**\n         * @ignore\n         */\n        this.maskLevel = 0;\n\n        /**\n         * @ignore\n         */\n        this.currentBlendMode = \"none\";\n\n        // global color\n        this.currentColor = new Color(0, 0, 0, 1.0);\n\n        // global tint color\n        this.currentTint = new Color(255, 255, 255, 1.0);\n\n        // the projectionMatrix (set through setProjection)\n        this.projectionMatrix = new Matrix3d();\n\n        // default uvOffset\n        this.uvOffset = 0;\n    }\n\n    /**\n     * return the height of the canvas which this renderer draws to\n     * @returns {number} height of the system Canvas\n     */\n    get height() {\n        return this.getCanvas().height;\n    }\n\n    set height(value) {\n        this.resize(this.width, value);\n    }\n\n    /**\n     * return the width of the canvas which this renderer draws to\n     * @returns {number} width of the system Canvas\n     */\n    get width() {\n        return this.getCanvas().width;\n    }\n\n    set width(value) {\n        this.resize(value, this.height);\n    }\n\n    /**\n     * prepare the framebuffer for drawing a new frame\n     */\n    clear() {}\n\n    /**\n     * render the main framebuffer on screen\n     */\n    flush() {}\n\n    /**\n     * Reset context state\n     */\n    reset() {\n        this.resetTransform();\n        this.setBlendMode(this.settings.blendMode);\n        this.setColor(\"#000000\");\n        this.clearTint();\n        this.cache.clear();\n        this.currentScissor[0] = 0;\n        this.currentScissor[1] = 0;\n        this.currentScissor[2] = this.width;\n        this.currentScissor[3] = this.height;\n        this.clearMask();\n    }\n\n    /**\n     * return a reference to the current render target corresponding canvas which this renderer draws to\n     * @returns {HTMLCanvasElement}\n     */\n    getCanvas() {\n        return this.renderTarget.canvas;\n    }\n\n    /**\n     * return a reference to the current render target corresponding Context\n     * @returns {CanvasRenderingContext2D|WebGLRenderingContext}\n     */\n    getContext() {\n        return this.renderTarget.context;\n    }\n\n    /**\n     * returns the current blend mode for this renderer\n     * @returns {string} blend mode\n     */\n    getBlendMode() {\n        return this.currentBlendMode;\n    }\n\n    /**\n     * get the current fill & stroke style color.\n     * @returns {Color} current global color\n     */\n    getColor() {\n        return this.currentColor;\n    }\n\n    /**\n     * return the current global alpha\n     * @returns {number}\n     */\n    globalAlpha() {\n        return this.currentColor.glArray[3];\n    }\n\n    /**\n     * check if the given rect or bounds overlaps with the renderer screen coordinates\n     * @param {Rect|Bounds} bounds\n     * @returns {boolean} true if overlaps\n     */\n    overlaps(bounds) {\n        return (\n            bounds.left <= this.width && bounds.right >= 0 &&\n            bounds.top <= this.height && bounds.bottom >= 0\n        );\n    }\n\n    /**\n     * resizes the system canvas\n     * @param {number} width - new width of the canvas\n     * @param {number} height - new height of the canvas\n     */\n    resize(width, height) {\n        let canvas = this.getCanvas();\n        if (width !== canvas.width || height !== canvas.height) {\n            canvas.width = width;\n            canvas.height = height;\n            this.currentScissor[0] = 0;\n            this.currentScissor[1] = 0;\n            this.currentScissor[2] = width;\n            this.currentScissor[3] = height;\n            // publish the corresponding event\n            emit(CANVAS_ONRESIZE, width, height);\n        }\n    }\n\n    /**\n     * enable/disable image smoothing (scaling interpolation) for the current render target\n     * @param {boolean} [enable=false]\n     */\n    setAntiAlias(enable = false) {\n        this.renderTarget.setAntiAlias(enable);\n    }\n\n    /**\n     * set/change the current projection matrix (WebGL only)\n     * @param {Matrix3d} matrix\n     */\n    setProjection(matrix) {\n        this.projectionMatrix.copy(matrix);\n    }\n\n    /**\n     * stroke the given shape\n     * @param {Rect|RoundRect|Polygon|Line|Ellipse} shape - a shape object to stroke\n     * @param {boolean} [fill=false] - fill the shape with the current color if true\n     */\n    stroke(shape, fill) {\n        switch (shape.type) {\n\n            // RoundRect\n            case \"RoundRect\":\n                this.strokeRoundRect(shape.left, shape.top, shape.width, shape.height, shape.radius, fill);\n                break;\n\n            // Rect or Bounds\n            case \"Rectangle\":\n            case \"Bounds\":\n                this.strokeRect(shape.left, shape.top, shape.width, shape.height, fill);\n                break;\n\n            // Polygon or Line\n            case \"Polygon\":\n            case \"Line\":\n                this.strokePolygon(shape, fill);\n                break;\n\n            case \"Ellipse\":\n                this.strokeEllipse(shape.pos.x, shape.pos.y, shape.radiusV.x, shape.radiusV.y, fill);\n                break;\n\n            // Point\n            case \"Point\":\n                this.strokePoint(shape.x, shape.y);\n                break;\n\n            default:\n                throw new Error(\"Invalid geometry for fill/stroke\");\n        }\n    }\n\n    /**\n     * fill the given shape\n     * @param {Rect|RoundRect|Polygon|Line|Ellipse} shape - a shape object to fill\n     */\n    fill(shape) {\n        this.stroke(shape, true);\n    }\n\n    /**\n     * tint the given image or canvas using the given color\n     * @param {HTMLImageElement|HTMLCanvasElement|OffscreenCanvas} src - the source image to be tinted\n     * @param {Color|string} color - the color that will be used to tint the image\n     * @param {string} [mode=\"multiply\"] - the composition mode used to tint the image\n     * @returns {HTMLCanvasElement|OffscreenCanvas} a new canvas or offscreencanvas (if supported) element representing the tinted image\n     */\n    tint(src, color, mode = \"multiply\") {\n        const attributes = { context:\"2d\", offscreenCanvas: true, transparent: true, antiAlias: this.settings.antiAlias };\n        let canvasTexture = new CanvasRenderTarget(src.width, src.height, attributes);\n        let context = canvasTexture.context;\n\n        context.fillStyle = color instanceof Color ? color.toRGB() : color;\n        context.fillRect(0, 0, src.width, src.height);\n\n        context.globalCompositeOperation = mode;\n        context.drawImage(src, 0, 0);\n        context.globalCompositeOperation = \"destination-atop\";\n        context.drawImage(src, 0, 0);\n\n        return canvasTexture.canvas;\n    }\n\n    /**\n     * A mask limits rendering elements to the shape and position of the given mask object.\n     * So, if the renderable is larger than the mask, only the intersecting part of the renderable will be visible.\n     * Mask are not preserved through renderer context save and restore.\n     * @param {Rect|RoundRect|Polygon|Line|Ellipse} [mask] - the shape defining the mask to be applied\n     * @param {boolean} [invert=false] - either the given shape should define what is visible (default) or the opposite\n     */\n    // eslint-disable-next-line no-unused-vars\n    setMask(mask, invert = false) {}\n\n    /**\n     * disable (remove) the rendering mask set through setMask.\n     * @see Renderer#setMask\n     */\n    clearMask() {}\n\n    /**\n     * set a coloring tint for sprite based renderables\n     * @param {Color} tint - the tint color\n     * @param {number} [alpha] - an alpha value to be applied to the tint\n     */\n    setTint(tint, alpha = tint.alpha) {\n        // global tint color\n        this.currentTint.copy(tint);\n        this.currentTint.alpha *= alpha;\n    }\n\n    /**\n     * clear the rendering tint set through setTint.\n     * @see Renderer#setTint\n     */\n    clearTint() {\n        // reset to default\n        this.currentTint.setFloat(1.0, 1.0, 1.0, 1.0);\n    }\n\n    /**\n     * creates a Blob object representing the last rendered frame\n     * @param {string} [type=\"image/png\"] - A string indicating the image format\n     * @param {number} [quality] - A Number between 0 and 1 indicating the image quality to be used when creating images using file formats that support lossy compression (such as image/jpeg or image/webp). A user agent will use its default quality value if this option is not specified, or if the number is outside the allowed range.\n     * @returns {Promise} A Promise returning a Blob object representing the last rendered frame\n     * @example\n     * renderer.convertToBlob().then((blob) => console.log(blob));\n     */\n    toBlob(type = \"image/png\", quality) {\n        return this.renderTarget.toBlob(type, quality);\n    }\n\n    /**\n     * creates an ImageBitmap object of the last frame rendered\n     * (not supported by standard Canvas)\n     * @param {string} [type=\"image/png\"] - A string indicating the image format\n     * @param {number} [quality] - A Number between 0 and 1 indicating the image quality to be used when creating images using file formats that support lossy compression (such as image/jpeg or image/webp). A user agent will use its default quality value if this option is not specified, or if the number is outside the allowed range.\n     * @returns {Promise} A Promise returning an ImageBitmap.\n     * @example\n     * renderer.transferToImageBitmap().then((image) => console.log(image));\n     */\n    toImageBitmap(type = \"image/png\", quality) {\n        return this.renderTarget.toImageBitmap(type, quality);\n    }\n\n    /**\n     * returns a data URL containing a representation of the last frame rendered\n     * @param {string} [type=\"image/png\"] - A string indicating the image format\n     * @param {number} [quality] - A Number between 0 and 1 indicating the image quality to be used when creating images using file formats that support lossy compression (such as image/jpeg or image/webp). A user agent will use its default quality value if this option is not specified, or if the number is outside the allowed range.\n     * @returns {Promise} A Promise returning a string containing the requested data URL.\n     * @example\n     * renderer.toDataURL().then((dataURL) => console.log(dataURL));\n     */\n    toDataURL(type = \"image/png\", quality) {\n        return this.renderTarget.toDataURL(type, quality);\n    }\n}\n\n/**\n * parse the given data and return a corresponding atlas\n * @param {Object} data - atlas data information. See {@link loader.getJSON}\n * @param {TextureAtlas} textureAtlas - the texture atlas class calling the parser\n * @returns {Object} the corresponding Atlas\n * @ignore\n */\nfunction parseTexturePacker(data, textureAtlas) {\n    let atlas = {};\n\n    data.frames.forEach((frame) => {\n        // fix wrongly formatted JSON (e.g. last dummy object in ShoeBox)\n        if (frame.hasOwnProperty(\"filename\")) {\n            // Source coordinates\n            let s = frame.frame;\n            let trimmed = !!frame.trimmed;\n\n            let trim;\n\n            if (trimmed) {\n                trim = {\n                    x : frame.spriteSourceSize.x,\n                    y : frame.spriteSourceSize.y,\n                    w : frame.spriteSourceSize.w,\n                    h : frame.spriteSourceSize.h\n                };\n            }\n\n            let originX, originY;\n            // Pixel-based offset origin from the top-left of the source frame\n            let hasTextureAnchorPoint = (frame.sourceSize && frame.pivot);\n            if (hasTextureAnchorPoint) {\n                originX = (frame.sourceSize.w * frame.pivot.x) - ((trimmed) ? trim.x : 0);\n                originY = (frame.sourceSize.h * frame.pivot.y) - ((trimmed) ? trim.y : 0);\n            }\n\n            atlas[frame.filename] = {\n                name         : frame.filename, // frame name\n                texture      : data.meta.image || \"default\", // the source texture\n                offset       : new Vector2d(s.x, s.y),\n                anchorPoint  : (hasTextureAnchorPoint) ? new Vector2d(originX / s.w, originY / s.h) : null,\n                trimmed      : trimmed,\n                trim         : trim,\n                width        : s.w,\n                height       : s.h,\n                angle        : (frame.rotated === true) ? -ETA : 0\n            };\n            textureAtlas.addUVs(atlas, frame.filename, data.meta.size.w, data.meta.size.h);\n        }\n    });\n    return atlas;\n}\n\n/**\n * parse the given data and return a corresponding atlas\n * @param {Object} data - atlas data information. See {@link loader.getJSON}\n * @param {TextureAtlas} textureAtlas - the texture atlas class calling the parser\n * @returns {Object} the corresponding Atlas\n * @ignore\n */\nfunction parseSpriteSheet(data, textureAtlas) {\n    let atlas = {};\n    let image = data.image;\n    let spacing = data.spacing || 0;\n    let margin = data.margin || 0;\n\n    let width = image.width;\n    let height = image.height;\n\n    // calculate the sprite count (line, col)\n    let spritecount = pool.pull(\"Vector2d\",\n        ~~((width - margin + spacing) / (data.framewidth + spacing)),\n        ~~((height - margin + spacing) / (data.frameheight + spacing))\n    );\n\n    // verifying the texture size\n    if ((width % (data.framewidth + spacing)) !== 0 ||\n        (height % (data.frameheight + spacing)) !== 0) {\n        let computed_width = spritecount.x * (data.framewidth + spacing);\n        let computed_height = spritecount.y * (data.frameheight + spacing);\n        if (computed_width - width !== spacing && computed_height - height !== spacing) {\n            // \"truncate size\" if delta is different from the spacing size\n            width = computed_width;\n            height = computed_height;\n            // warning message\n            console.warn(\n                \"Spritesheet Texture for image: \" + image.src +\n                \" is not divisible by \" + (data.framewidth + spacing) +\n                \"x\" + (data.frameheight + spacing) +\n                \", truncating effective size to \" + width + \"x\" + height\n            );\n        }\n    }\n\n    // build the local atlas\n    for (let frame = 0, count = spritecount.x * spritecount.y; frame < count; frame++) {\n        let name = \"\" + frame;\n        atlas[name] = {\n            name            : name,\n            texture         : \"default\", // the source texture\n            offset          : new Vector2d(\n                margin + (spacing + data.framewidth) * (frame % spritecount.x),\n                margin + (spacing + data.frameheight) * ~~(frame / spritecount.x)\n            ),\n            anchorPoint     : (data.anchorPoint || null),\n            trimmed         : false,\n            trim            : undefined,\n            width           : data.framewidth,\n            height          : data.frameheight,\n            angle           : 0\n        };\n        textureAtlas.addUVs(atlas, name, width, height);\n    }\n\n    pool.push(spritecount);\n\n    return atlas;\n}\n\n/**\n * parse the given data and return a corresponding atlas\n * @param {Object} data - atlas data information. See {@link loader.getJSON}\n * @param {TextureAtlas} textureAtlas - the texture atlas class calling the parser\n * @returns {Object} the corresponding Atlas\n * @ignore\n */\nfunction parseAseprite(data, textureAtlas) {\n    let atlas = {};\n\n    const frames = data.frames;\n    for (const name in frames) {\n        let frame = frames[name].frame;\n        let trimmed = !!frame.trimmed;\n\n        let trim;\n\n        if (trimmed) {\n            trim = {\n                x : frame.spriteSourceSize.x,\n                y : frame.spriteSourceSize.y,\n                w : frame.spriteSourceSize.w,\n                h : frame.spriteSourceSize.h\n            };\n        }\n\n        let originX, originY;\n        // Pixel-based offset origin from the top-left of the source frame\n        let hasTextureAnchorPoint = (frame.sourceSize && frame.pivot);\n        if (hasTextureAnchorPoint) {\n            originX = (frame.sourceSize.w * frame.pivot.x) - ((trimmed) ? trim.x : 0);\n            originY = (frame.sourceSize.h * frame.pivot.y) - ((trimmed) ? trim.y : 0);\n        }\n\n        atlas[name] = {\n            name         : name, // frame name\n            texture      : data.meta.image || \"default\", // the source texture\n            offset       : new Vector2d(frame.x, frame.y),\n            anchorPoint  : (hasTextureAnchorPoint) ? new Vector2d(originX / frame.w, originY / frame.h) : null,\n            trimmed      : trimmed,\n            trim         : trim,\n            width        : frame.w,\n            height       : frame.h,\n            angle        : (frame.rotated === true) ? -ETA : 0\n        };\n        textureAtlas.addUVs(atlas, name, data.meta.size.w, data.meta.size.h);\n    }\n\n    const anims = {};\n    for (const name in data.meta.frameTags) {\n        const anim = data.meta.frameTags[name];\n        // aseprite provide a range from [from] to [to], so build the corresponding index array\n        const indexArray = Array.from({ length: anim.to - anim.from + 1 }, (_, i) => anim.from + i);\n        anims[name] = {\n            name: anim.name,\n            index: indexArray,\n            // aseprite provide animation speed between frame, melonJS expect total duration for a given animation\n            speed: 10 * (indexArray.length - 1),\n            // only \"forward\" is supported for now\n            direction: anim.direction\n        };\n    }\n    atlas.anims = anims;\n\n    return atlas;\n}\n\n/**\n * additional import for TypeScript\n * @import NineSliceSprite from \"./../../renderable/nineslicesprite.js\";\n */\n\n/**\n * create a simple 1 frame texture atlas based on the given parameters\n * @ignore\n */\nfunction createAtlas(width, height, name = \"default\", repeat = \"no-repeat\") {\n    return {\n        \"meta\" : {\n            \"app\" : \"melonJS\",\n            \"size\" : { \"w\" : width, \"h\" : height },\n            \"repeat\" : repeat,\n            \"image\" : \"default\"\n        },\n        \"frames\" : [{\n            \"filename\" : name,\n            \"frame\" : { \"x\" : 0, \"y\" : 0, \"w\" : width, \"h\" : height }\n        }]\n    };\n}\n\n/**\n * return a string that identifies the texture atlas type\n * @ignore\n */\nfunction identifyFormat(app) {\n    if (app.includes(\"texturepacker\") || app.includes(\"free-tex-packer\")) {\n        return \"texturepacker\";\n    } else if (app.includes(\"shoebox\")) {\n        return \"shoebox\";\n    } else if (app.includes(\"aseprite\")) {\n        return \"aseprite\";\n    } else if (app.includes(\"melonJS\")) {\n        return \"melonJS\";\n    } else {\n        throw new Error(\"Unknown texture atlas format: \" + app);\n    }\n\n\n}\n\n/**\n * @classdesc\n * A Texture atlas class, currently supports : <br>\n * - [TexturePacker]{@link http://www.codeandweb.com/texturepacker/} : through JSON export (standard and multipack texture atlas) <br>\n * - [Free Texture Packer]{@link http://free-tex-packer.com/app/} : through JSON export (standard and multipack texture atlas) <br>\n * - [aseprite]{@link https://www.aseprite.org/} : through JSON export (standard and multipack texture atlas) <br>\n * - [ShoeBox]{@link http://renderhjs.net/shoebox/} : through JSON export using the\n * melonJS setting [file]{@link https://github.com/melonjs/melonJS/raw/master/media/shoebox_JSON_export.sbx} <br>\n * - Standard (fixed cell size) spritesheet : through a {framewidth:xx, frameheight:xx, anchorPoint:me.Vector2d} object\n * );\n */\nclass TextureAtlas {\n    /**\n     * @param {object|object[]} atlases - atlas information. See {@link loader.getJSON}\n     * @param {HTMLImageElement|HTMLCanvasElement|string|HTMLImageElement[]|HTMLCanvasElement[]|string[]} [src=atlas.meta.image] - Image source\n     * @param {boolean} [cache=false] - Use true to skip caching this Texture\n     * @example\n     * // create a texture atlas from a JSON Object\n     * game.texture = new me.TextureAtlas(\n     *     me.loader.getJSON(\"texture\")\n     * );\n     *\n     * // create a texture atlas from a multipack JSON Object\n     * game.texture = new me.TextureAtlas([\n     *     me.loader.getJSON(\"texture-0\"),\n     *     me.loader.getJSON(\"texture-1\"),\n     *     me.loader.getJSON(\"texture-2\")\n     * ]);\n     *\n     * // create a texture atlas for a spritesheet with an anchorPoint in the center of each frame\n     * game.texture = new me.TextureAtlas(\n     *     {\n     *         framewidth : 32,\n     *         frameheight : 32,\n     *         anchorPoint : new me.Vector2d(0.5, 0.5)\n     *     },\n     *     me.loader.getImage(\"spritesheet\")\n     */\n    constructor (atlases, src, cache) {\n        /**\n         * to identify the atlas format (e.g. texture packer)\n         * @ignore\n         */\n        this.format = null;\n\n        /**\n         * the texture source(s) itself\n         * @type {Map}\n         * @ignore\n         */\n        this.sources = new Map();\n\n        /**\n         * the atlas dictionnaries\n         * @type {Map}\n         * @ignore\n         */\n        this.atlases = new Map();\n\n        /**\n         * the default \"active\" atlas (used for multiAtlas)\n         * @type {Map}\n         * @ignore\n         */\n        this.activeAtlas = undefined;\n\n\n        // parse given atlas(es) paremeters\n        if (typeof (atlases) !== \"undefined\") {\n            // normalize to array to keep the following code generic\n            atlases = Array.isArray(atlases) ? atlases : [atlases];\n            for (let i in atlases) {\n                let atlas = atlases[i];\n\n                if (typeof(atlas.meta) !== \"undefined\") {\n                    this.format = identifyFormat(atlas.meta.app);\n                    this.repeat = atlas.meta.repeat || \"no-repeat\";\n                    switch (this.format) {\n                        case \"texturepacker\":\n                        case \"aseprite\":\n                            // set the texture\n                            if (typeof(src) === \"undefined\") {\n                                // get the texture name from the atlas meta data\n                                let image = getImage(atlas.meta.image);\n                                if (!image) {\n                                    throw new Error(\n                                        \"Atlas texture '\" + image + \"' not found\"\n                                    );\n                                }\n                                this.sources.set(atlas.meta.image, image);\n                            } else {\n                                this.sources.set(atlas.meta.image || \"default\", typeof src === \"string\" ? getImage(src) : src);\n                            }\n                            // initialize the atlas\n                            if (this.format === \"texturepacker\") {\n                                this.atlases.set(atlas.meta.image || \"default\", parseTexturePacker(atlas, this));\n                            } else {\n                                this.atlases.set(atlas.meta.image || \"default\", parseAseprite(atlas, this));\n                            }\n                            break;\n                        case \"shoebox\":\n                            if (!atlas.meta.exporter || !atlas.meta.exporter.includes(\"melonJS\")) {\n                                throw new Error(\n                                    \"ShoeBox requires the JSON exporter : \" +\n                                    \"https://github.com/melonjs/melonJS/tree/master/media/shoebox_JSON_export.sbx\"\n                                );\n                            }\n                            this.sources.set(\"default\", typeof src === \"string\" ? getImage(src) : src);\n                            // initialize the atlas\n                            this.atlases.set(atlas.meta.image || \"default\", parseTexturePacker(atlas, this));\n                            break;\n                        case \"melonJS\":\n                            this.sources.set(\"default\", typeof src === \"string\" ? getImage(src) : src);\n                            // initialize the atlas\n                            this.atlases.set(atlas.meta.image || \"default\", parseTexturePacker(atlas, this));\n                            break;\n                        default:\n                            throw new Error(\"Unknown texture atlas format: \" + atlas.meta.app);\n                    }\n                } else {\n                    // a regular spritesheet\n                    if (typeof(atlas.framewidth) !== \"undefined\" &&\n                        typeof(atlas.frameheight) !== \"undefined\") {\n                        this.format = \"Spritesheet (fixed cell size)\";\n                        this.repeat = \"no-repeat\";\n\n                        if (typeof(src) !== \"undefined\") {\n                            // overwrite if specified\n                            atlas.image = typeof src === \"string\" ? getImage(src) : src;\n                        }\n                        // initialize the atlas\n                        this.atlases.set(\"default\", parseSpriteSheet(atlas, this));\n                        this.sources.set(\"default\", atlas.image);\n                    }\n                }\n            } // end forEach\n            this.activeAtlas = this.atlases.keys().next().value;\n        }\n\n        // if format not recognized\n        if (this.atlases.length === 0) {\n            throw new Error(\"texture atlas format not supported\");\n        }\n\n        // Add self to TextureCache if cache !== false\n        if (cache !== false) {\n            this.sources.forEach((source) => {\n                renderer.cache.set(source, this);\n            });\n        }\n    }\n\n    /**\n     * return the default or specified atlas dictionnary\n     * @param {string} [name] - atlas name in case of multipack textures\n     * @returns {object}\n     */\n    getAtlas(name) {\n        if (typeof name === \"string\") {\n            return this.atlases.get(name);\n        } else {\n            return this.atlases.get(this.activeAtlas);\n        }\n    }\n\n    /**\n     * return the format of the atlas dictionnary\n     * @returns {string} will return \"texturepacker\", or \"ShoeBox\", or \"melonJS\", or \"Spritesheet (fixed cell size)\"\n     */\n    getFormat() {\n        return this.format;\n    }\n\n    /**\n     * return the source texture for the given region (or default one if none specified)\n     * @param {object} [region] - region name in case of multipack textures\n     * @returns {HTMLImageElement|HTMLCanvasElement}\n     */\n    getTexture(region) {\n        if ((typeof region === \"object\") && (typeof region.texture === \"string\")) {\n            return this.sources.get(region.texture);\n        } else {\n            return this.sources.get(this.activeAtlas);\n\n        }\n    }\n\n    /**\n     * add a region to the atlas\n     * @param {string} name - region mame\n     * @param {number} x - x origin of the region\n     * @param {number} y - y origin of the region\n     * @param {number} w - width of the region\n     * @param {number} h - height of the region\n     * @returns {object} the created region\n     */\n    addRegion(name, x, y, w, h) {\n        // TODO: Require proper atlas regions instead of caching arbitrary region keys\n        if (renderer.settings.verbose === true) {\n            console.warn(\"Adding texture region\", name, \"for texture\", this);\n        }\n\n        let source = this.getTexture();\n        let atlas = this.getAtlas();\n        let dw = source.width;\n        let dh = source.height;\n\n        atlas[name] = {\n            name    : name,\n            offset  : new Vector2d(x, y),\n            width   : w,\n            height  : h,\n            angle   : 0\n        };\n\n        this.addUVs(atlas, name, dw, dh);\n\n        return atlas[name];\n    }\n\n    /**\n     * return a normalized region (or frame) information for the specified sprite name\n     * @param {string} name - name of the sprite\n     * @param {string} [atlas] - name of a specific atlas where to search for the region\n     * @returns {object}\n     */\n    getRegion(name, atlas) {\n        let region;\n        if (typeof atlas === \"string\") {\n            region = this.getAtlas(atlas)[name];\n        } else {\n            // look for the given region in each existing atlas\n            for (let atlas of this.atlases.values()) {\n                if (typeof atlas[name] !== \"undefined\") {\n                    // there should be only one\n                    region = atlas[name];\n                    break;\n                }\n            }\n        }\n        return region;\n    }\n\n    /**\n     * return the uvs mapping for the given region\n     * @param {object} name - region (or frame) name\n     * @returns {Float32Array} region Uvs\n     */\n    getUVs(name) {\n        // Get the source texture region\n        let region = this.getRegion(name);\n\n        if (typeof(region) === \"undefined\") {\n            // TODO: Require proper atlas regions instead of caching arbitrary region keys\n            let keys = name.split(\",\"),\n                sx = +keys[0],\n                sy = +keys[1],\n                sw = +keys[2],\n                sh = +keys[3];\n            region = this.addRegion(name, sx, sy, sw, sh);\n        }\n        return region.uvs;\n    }\n\n    /**\n     * add uvs mapping for the given region\n     * @param {object} atlas - the atlas dictionnary where the region is define\n     * @param {object} name - region (or frame) name\n     * @param {number} w - the width of the region\n     * @param {number} h - the height of the region\n     * @returns {Float32Array} the created region UVs\n     */\n    addUVs(atlas, name, w, h) {\n        // ignore if using the Canvas Renderer\n        if (typeof renderer.gl !== \"undefined\") {\n            // Source coordinates\n            let s = atlas[name].offset;\n            let sw = atlas[name].width;\n            let sh = atlas[name].height;\n\n            atlas[name].uvs = new Float32Array([\n                s.x / w,        // u0 (left)\n                s.y / h,        // v0 (top)\n                (s.x + sw) / w, // u1 (right)\n                (s.y + sh) / h  // v1 (bottom)\n            ]);\n            // Cache source coordinates\n            // TODO: Remove this when the Batcher only accepts a region name\n            let key = s.x + \",\" + s.y + \",\" + w + \",\" + h;\n            atlas[key] = atlas[name];\n        }\n        return atlas[name].uvs;\n    }\n\n    /**\n     * Create a sprite object using the first region found using the specified name\n     * @param {string} name - name of the sprite\n     * @param {object} [settings] - Additional settings passed to the {@link Sprite} contructor\n     * @param {boolean} [nineSlice=false] - if true returns a 9-slice sprite\n     * @returns {Sprite|NineSliceSprite}\n     * @example\n     * // create a new texture object under the `game` namespace\n     * game.texture = new me.TextureAtlas(\n     *    me.loader.getJSON(\"texture\"),\n     *    me.loader.getImage(\"texture\")\n     * );\n     * ...\n     * ...\n     * // create a new \"coin\" sprite\n     * let sprite = game.texture.createSpriteFromName(\"coin.png\");\n     * // set the renderable position to bottom center\n     * sprite.anchorPoint.set(0.5, 1.0);\n     * ...\n     * ...\n     * // create a 9-slice sprite\n     * let dialogPanel = game.texture.createSpriteFromName(\n     *    \"rpg_dialo.png\",\n     *    // width & height are mandatory for 9-slice sprites\n     *    { width: this.width, height: this.height },\n     *    true\n     * );\n     */\n    createSpriteFromName(name, settings, nineSlice = false) {\n        // instantiate a new sprite object\n        return pool.pull(\n            nineSlice === true ? \"me.NineSliceSprite\" : \"me.Sprite\",\n            0, 0,\n            Object.assign({\n                image: this,\n                region : name\n            }, settings || {})\n        );\n    }\n\n    /**\n     * Create an animation object using the first region found using all specified names\n     * @param {string[]|number[]} [names] - list of names for each sprite (if not specified all defined names/entries in the atlas will be added)\n     * (when manually creating a Texture out of a spritesheet, only numeric values are authorized)\n     * @param {object} [settings] - Additional settings passed to the {@link Sprite} contructor\n     * @returns {Sprite}\n     * @example\n     * // create a new texture object under the `game` namespace\n     * game.texture = new me.TextureAtlas(\n     *     me.loader.getJSON(\"texture\"),\n     *     me.loader.getImage(\"texture\")\n     * );\n     *\n     * // create a new Animated Sprite\n     * let sprite = game.texture.createAnimationFromName([\n     *     \"walk0001.png\", \"walk0002.png\", \"walk0003.png\",\n     *     \"walk0004.png\", \"walk0005.png\", \"walk0006.png\",\n     *     \"walk0007.png\", \"walk0008.png\", \"walk0009.png\",\n     *     \"walk0010.png\", \"walk0011.png\"\n     * ]);\n     *\n     * // define an additional basic walking animation\n     * sprite.addAnimation (\"simple_walk\", [0,2,1]);\n     * // you can also use frame name to define your animation\n     * sprite.addAnimation (\"speed_walk\", [\"walk0007.png\", \"walk0008.png\", \"walk0009.png\", \"walk0010.png\"]);\n     * // set the default animation\n     * sprite.setCurrentAnimation(\"simple_walk\");\n     * // set the renderable position to bottom center\n     * sprite.anchorPoint.set(0.5, 1.0);\n     */\n    createAnimationFromName(names, settings) {\n        let tpAtlas = [], indices = {};\n        let width = 0, height = 0;\n        const textureAtlas = this.getAtlas();\n        // iterate through the given names\n        // and create a \"normalized\" atlas\n\n        if (typeof names === \"undefined\") {\n            names = textureAtlas;\n        }\n\n        for (const i in names) {\n            const name = Array.isArray(names) ? names[i] : i;\n            const region = this.getRegion(name);\n            if (region == null) {\n                // throw an error\n                throw new Error(\"Texture - region for \" + name + \" not found\");\n            }\n            tpAtlas.push(region);\n            // save the corresponding index\n            indices[name] = tpAtlas.length - 1;\n            // calculate the max size of a frame\n            width = Math.max(region.width, width);\n            height = Math.max(region.height, height);\n        }\n\n        // instantiate a new animation sheet object\n        return new Sprite(0, 0, Object.assign({\n            image: this,\n            framewidth: width,\n            frameheight: height,\n            margin: 0,\n            spacing: 0,\n            atlas: tpAtlas,\n            anims: textureAtlas.anims,\n            atlasIndices: indices\n        }, settings || {}));\n    }\n}\n\nclass Multimap {\n    constructor(operator, iterable) {\n        this.size_ = 0;\n        this.map = new Map();\n        this.operator = operator;\n        if (iterable) {\n            for (const [key, value] of iterable) {\n                this.put(key, value);\n            }\n        }\n        return this;\n    }\n    get size() {\n        return this.size_;\n    }\n    get(key) {\n        const values = this.map.get(key);\n        if (values) {\n            return this.operator.clone(values);\n        }\n        else {\n            return this.operator.create();\n        }\n    }\n    put(key, value) {\n        let values = this.map.get(key);\n        if (!values) {\n            values = this.operator.create();\n        }\n        if (!this.operator.add(value, values)) {\n            return false;\n        }\n        this.map.set(key, values);\n        this.size_++;\n        return true;\n    }\n    putAll(arg1, arg2) {\n        let pushed = 0;\n        if (arg2) {\n            const key = arg1;\n            const values = arg2;\n            for (const value of values) {\n                this.put(key, value);\n                pushed++;\n            }\n        }\n        else if (arg1 instanceof Multimap) {\n            for (const [key, value] of arg1.entries()) {\n                this.put(key, value);\n                pushed++;\n            }\n        }\n        else {\n            throw new TypeError(\"unexpected arguments\");\n        }\n        return pushed > 0;\n    }\n    has(key) {\n        return this.map.has(key);\n    }\n    hasEntry(key, value) {\n        return this.operator.has(value, this.get(key));\n    }\n    delete(key) {\n        this.size_ -= this.operator.size(this.get(key));\n        return this.map.delete(key);\n    }\n    deleteEntry(key, value) {\n        const current = this.get(key);\n        if (!this.operator.delete(value, current)) {\n            return false;\n        }\n        this.map.set(key, current);\n        this.size_--;\n        return true;\n    }\n    clear() {\n        this.map.clear();\n        this.size_ = 0;\n    }\n    keys() {\n        return this.map.keys();\n    }\n    entries() {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        const self = this;\n        function* gen() {\n            for (const [key, values] of self.map.entries()) {\n                for (const value of values) {\n                    yield [key, value];\n                }\n            }\n        }\n        return gen();\n    }\n    values() {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        const self = this;\n        function* gen() {\n            for (const [, value] of self.entries()) {\n                yield value;\n            }\n        }\n        return gen();\n    }\n    forEach(callback, thisArg) {\n        for (const [key, value] of this.entries()) {\n            callback.call(thisArg === undefined ? this : thisArg, value, key, this);\n        }\n    }\n    [Symbol.iterator]() {\n        return this.entries();\n    }\n    asMap() {\n        const ret = new Map();\n        for (const key of this.keys()) {\n            ret.set(key, this.operator.clone(this.get(key)));\n        }\n        return ret;\n    }\n}\n\nclass ArrayMultimap extends Multimap {\n    constructor(iterable) {\n        super(new ArrayOperator(), iterable);\n    }\n    get [Symbol.toStringTag]() {\n        return \"ArrayMultimap\";\n    }\n}\nclass ArrayOperator {\n    create() {\n        return [];\n    }\n    clone(collection) {\n        return collection.slice();\n    }\n    add(value, collection) {\n        collection.push(value);\n        return true;\n    }\n    size(collection) {\n        return collection.length;\n    }\n    delete(value, collection) {\n        const index = collection.indexOf(value);\n        if (index > -1) {\n            collection.splice(index, 1);\n            return true;\n        }\n        return false;\n    }\n    has(value, collection) {\n        return collection.includes(value);\n    }\n}\n\nclass SetMultimap extends Multimap {\n    constructor(iterable) {\n        super(new SetOperator(), iterable);\n    }\n    get [Symbol.toStringTag]() {\n        return \"SetMultimap\";\n    }\n}\nclass SetOperator {\n    create() {\n        return new Set();\n    }\n    clone(collection) {\n        return new Set(collection);\n    }\n    add(value, collection) {\n        const prev = collection.size;\n        collection.add(value);\n        return prev !== collection.size;\n    }\n    size(collection) {\n        return collection.size;\n    }\n    delete(value, collection) {\n        return collection.delete(value);\n    }\n    has(value, collection) {\n        return collection.has(value);\n    }\n}\n\n/**\n * a basic texture cache object\n * @ignore\n */\nclass TextureCache {\n\n    /**\n     * @ignore\n     */\n    constructor(max_size = Infinity) {\n        // cache uses an array to allow for duplicated key\n        this.cache = new ArrayMultimap();\n        this.tinted = new Map();\n        this.units = new Map();\n        this.usedUnits = new Set();\n        this.max_size = max_size;\n        this.clear();\n    }\n\n    /**\n     * @ignore\n     */\n    clear() {\n        this.cache.clear();\n        this.tinted.clear();\n        this.units.clear();\n        this.usedUnits.clear();\n    }\n\n    /**\n     * @ignore\n     */\n    allocateTextureUnit() {\n        // find the first unit available among the max_size\n        for (let unit = 0; unit < this.max_size; unit++) {\n            // Check if unit is available\n            if (!this.usedUnits.has(unit)) {\n                // Add to used set\n                this.usedUnits.add(unit);\n                // return the new unit\n                return unit;\n            }\n        }\n\n        // No units available\n        // TODO: Merge textures instead of throwing an exception\n        throw new Error(\n            \"Texture cache overflow: \" + this.max_size +\n            \" texture units available for this GPU.\"\n        );\n    }\n\n    /**\n     * @ignore\n     */\n    freeTextureUnit(texture) {\n        let source = texture.sources.get(texture.activeAtlas);\n        let unit = this.units.get(source);\n        // was a texture unit allocated ?\n        if (typeof unit !== \"undefined\") {\n            this.usedUnits.delete(source);\n            this.units.delete(source);\n        }\n    }\n\n    /**\n     * @ignore\n     */\n    getUnit(texture) {\n        let source = texture.sources.get(texture.activeAtlas);\n        if (!this.units.has(source)) {\n            this.units.set(source, this.allocateTextureUnit());\n        }\n        return this.units.get(source);\n    }\n\n    /**\n     * @ignore\n     * cache the textureAltas for the given image\n     */\n    set(image, textureAtlas) {\n        let width = image.width || image.videoWidth;\n        let height = image.height || image.videoHeight;\n\n        // warn if a non POT texture is added to the cache when using WebGL1\n        if (renderer.WebGLVersion === 1 && (!isPowerOfTwo(width) || !isPowerOfTwo(height))) {\n            let src = typeof image.src !== \"undefined\" ? image.src : image;\n            console.warn(\n                \"[Texture] \" + src + \" is not a POT texture \" +\n                \"(\" + width + \"x\" + height + \")\"\n            );\n        }\n        return this.cache.put(image, textureAtlas);\n    }\n\n    /**\n     * @ignore\n     * return the textureAltas for the given image\n     */\n    get(image, atlas) {\n        let entry = this.cache.get(image)[0];\n\n        if (typeof entry !== \"undefined\" && typeof atlas !== \"undefined\") {\n            this.cache.forEach((value, key) => {\n                let _atlas = value.getAtlas();\n                if (key === image && _atlas.width === atlas.framewidth && _atlas.height === atlas.frameheight) {\n                    entry = value;\n                }\n            });\n        }\n\n        if (typeof entry === \"undefined\") {\n            console.log(\"cache miss\");\n            if (!atlas) {\n                atlas = createAtlas(image.width || image.videoWidth, image.height || image.videoHeight, image.src ? getBasename(image.src) : undefined);\n            }\n            entry = new TextureAtlas(atlas, image, false);\n            this.set(image, entry);\n        }\n\n        // \"activate\" the corresponding sources (in case of multi texture atlas)\n        if (typeof entry.sources !== \"undefined\" && entry.sources.size > 1) {\n            console.log(entry);\n            // manage cases where a specific atlas is specified\n            for (const [key, value] of entry.sources.entries()) {\n                // Check if the imageData matches the provided image\n                if (value === image) {\n                    console.log(\"cache hit\");\n                    // If a match is found, return the corresponding entry from cache.atlases\n                    console.log(key);\n                    //return entry.atlases.get(key);\n                    entry.activeAtlas = key;\n                }\n            }\n        }\n\n        return entry;\n    }\n\n    /**\n     * @ignore\n     */\n    delete(image) {\n        if (this.cache.has(image)) {\n            let texture = this.cache.get(image)[0];\n            if (typeof texture !== \"undefined\") {\n                this.freeTextureUnit(texture);\n            }\n            this.cache.delete(image);\n        }\n    }\n\n    /**\n     * @ignore\n     */\n    tint(src, color) {\n        // make sure the src is in the cache\n        let image_cache = this.tinted.get(src);\n\n        if (image_cache === undefined) {\n            image_cache = this.tinted.set(src, new Map());\n        }\n\n        if (!image_cache.has(color)) {\n            image_cache.set(color, renderer.tint(src, color, \"multiply\"));\n        }\n\n        return image_cache.get(color);\n    }\n\n}\n\n/**\n * additional import for TypeScript\n * @import Rect from \"./../../geometries/rectangle.js\";\n * @import RoundRect from \"./../../geometries/roundrect.js\";\n * @import Polygon from \"./../../geometries/poly.js\";\n * @import Line from \"./../../geometries/line.js\";\n * @import Ellipse from \"./../../geometries/ellipse.js\";\n * @import Matrix2d from \"./../../math/matrix2.js\";\n */\n\n/**\n * @classdesc\n * a canvas renderer object\n * @augments Renderer\n */\nclass CanvasRenderer extends Renderer {\n    /**\n     * @param {ApplicationSettings} [options] - optional parameters for the renderer\n     */\n    constructor(options) {\n        // parent constructor\n        super(options);\n\n        this.setBlendMode(this.settings.blendMode);\n\n        // apply the default color to the 2d context\n        this.setColor(this.currentColor);\n\n        // create a texture cache\n        this.cache = new TextureCache();\n\n        if (this.settings.textureSeamFix !== false && !this.settings.antiAlias) {\n            // enable the tile texture seam fix with the canvas renderer\n            this.uvOffset = 1;\n        }\n\n        // set the renderer type\n        this.type = \"CANVAS\";\n\n        // context lost & restore event for canvas\n        this.getCanvas().addEventListener(\"contextlost\", (e) => {\n            e.preventDefault();\n            this.isContextValid = false;\n            emit(ONCONTEXT_LOST, this);\n        }, false);\n        // ctx.restoreContext()\n        this.getCanvas().addEventListener(\"contextrestored\", () => {\n            this.isContextValid = true;\n            emit(ONCONTEXT_RESTORED, this);\n        }, false);\n\n        // reset the renderer on game reset\n        on(GAME_RESET, () => {\n            this.reset();\n        });\n    }\n\n    /**\n     * Reset context state\n     */\n    reset() {\n        super.reset();\n        this.clearColor(this.currentColor, this.settings.transparent !== true);\n    }\n\n    /**\n     * Reset the canvas transform to identity\n     */\n    resetTransform() {\n        this.getContext().setTransform(1, 0, 0, 1, 0, 0);\n    }\n\n    /**\n     * set a blend mode for the given context. <br>\n     * Supported blend mode between Canvas and WebGL remderer : <br>\n     * - \"normal\" : this is the default mode and draws new content on top of the existing content <br>\n     * <img src=\"images/normal-blendmode.png\" width=\"510\"/> <br>\n     * - \"multiply\" : the pixels of the top layer are multiplied with the corresponding pixel of the bottom layer. A darker picture is the result. <br>\n     * <img src=\"images/multiply-blendmode.png\" width=\"510\"/> <br>\n     * - \"additive or lighter\" : where both content overlap the color is determined by adding color values. <br>\n     * <img src=\"images/lighter-blendmode.png\" width=\"510\"/> <br>\n     * - \"screen\" : The pixels are inverted, multiplied, and inverted again. A lighter picture is the result (opposite of multiply) <br>\n     * <img src=\"images/screen-blendmode.png\" width=\"510\"/> <br>\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/globalCompositeOperation\n     * @param {string} [mode=\"normal\"] - blend mode : \"normal\", \"multiply\", \"lighter, \"additive\", \"screen\"\n     * @param {CanvasRenderingContext2D} [context]\n     */\n    setBlendMode(mode = \"normal\", context) {\n        context = context || this.getContext();\n        this.currentBlendMode = mode;\n        switch (mode) {\n            case \"screen\" :\n                context.globalCompositeOperation = \"screen\";\n                break;\n\n            case \"lighter\" :\n            case \"additive\" :\n                context.globalCompositeOperation = \"lighter\";\n                break;\n\n            case \"multiply\" :\n                context.globalCompositeOperation = \"multiply\";\n                break;\n\n            default : // normal\n                context.globalCompositeOperation = \"source-over\";\n                this.currentBlendMode = \"normal\";\n                break;\n        }\n    }\n\n    /**\n     * prepare the framebuffer for drawing a new frame\n     */\n    clear() {\n        if (this.settings.transparent === false) {\n            let canvas = this.getCanvas();\n            let context = this.getContext();\n            context.clearRect(0, 0, canvas.width, canvas.height);\n        }\n    }\n\n    /**\n     * Clears the main framebuffer with the given color\n     * @param {Color|string} [color=\"#000000\"] - CSS color.\n     * @param {boolean} [opaque=false] - Allow transparency [default] or clear the surface completely [true]\n     */\n    clearColor(color = \"#000000\", opaque = false) {\n        let canvas = this.getCanvas();\n        let context = this.getContext();\n\n        this.save();\n        this.resetTransform();\n        context.globalAlpha = 1;\n        context.globalCompositeOperation = opaque === true ? \"copy\" : \"source-over\";\n        context.fillStyle = (color instanceof Color) ? color.toRGBA() : color;\n        this.fillRect(0, 0, canvas.width, canvas.height);\n        this.restore();\n    }\n\n    /**\n     * Erase the pixels in the given rectangular area by setting them to transparent black (rgba(0,0,0,0)).\n     * @param {number} x - x axis of the coordinate for the rectangle starting point.\n     * @param {number} y - y axis of the coordinate for the rectangle starting point.\n     * @param {number} width - The rectangle's width.\n     * @param {number} height - The rectangle's height.\n     */\n    clearRect(x, y, width, height) {\n        this.getContext().clearRect(x, y, width, height);\n    }\n\n    /**\n     * Create a pattern with the specified repetition\n     * @param {HTMLImageElement|SVGImageElement|HTMLVideoElement|HTMLCanvasElement|ImageBitmap|OffscreenCanvas|VideoFrame} image - Source image to be used as the pattern's image\n     * @param {string} repeat - Define how the pattern should be repeated\n     * @returns {CanvasPattern}\n     * @see ImageLayer#repeat\n     * @example\n     * let tileable   = renderer.createPattern(image, \"repeat\");\n     * let horizontal = renderer.createPattern(image, \"repeat-x\");\n     * let vertical   = renderer.createPattern(image, \"repeat-y\");\n     * let basic      = renderer.createPattern(image, \"no-repeat\");\n     */\n    createPattern(image, repeat) {\n        return this.getContext().createPattern(image, repeat);\n    }\n\n    /**\n     * Draw an image onto the main using the canvas api\n     * @param {HTMLImageElement|SVGImageElement|HTMLVideoElement|HTMLCanvasElement|ImageBitmap|OffscreenCanvas|VideoFrame} image - An element to draw into the context.\n     * @param {number} sx - The X coordinate of the top left corner of the sub-rectangle of the source image to draw into the destination context.\n     * @param {number} sy - The Y coordinate of the top left corner of the sub-rectangle of the source image to draw into the destination context.\n     * @param {number} sw - The width of the sub-rectangle of the source image to draw into the destination context. If not specified, the entire rectangle from the coordinates specified by sx and sy to the bottom-right corner of the image is used.\n     * @param {number} sh - The height of the sub-rectangle of the source image to draw into the destination context.\n     * @param {number} dx - The X coordinate in the destination canvas at which to place the top-left corner of the source image.\n     * @param {number} dy - The Y coordinate in the destination canvas at which to place the top-left corner of the source image.\n     * @param {number} dw - The width to draw the image in the destination canvas. This allows scaling of the drawn image. If not specified, the image is not scaled in width when drawn.\n     * @param {number} dh - The height to draw the image in the destination canvas. This allows scaling of the drawn image. If not specified, the image is not scaled in height when drawn.\n     * @example\n     * // Position the image on the canvas:\n     * renderer.drawImage(image, dx, dy);\n     * // Position the image on the canvas, and specify width and height of the image:\n     * renderer.drawImage(image, dx, dy, dWidth, dHeight);\n     * // Clip the image and position the clipped part on the canvas:\n     * renderer.drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight);\n     */\n    drawImage(image, sx, sy, sw, sh, dx, dy, dw, dh) {\n        if (this.getGlobalAlpha() < 1 / 255) {\n            // Fast path: don't draw fully transparent\n            return;\n        }\n        let context = this.getContext();\n\n        if (typeof sw === \"undefined\") {\n            sw = dw = image.width;\n            sh = dh = image.height;\n            dx = sx;\n            dy = sy;\n            sx = 0;\n            sy = 0;\n        }\n        else if (typeof dx === \"undefined\") {\n            dx = sx;\n            dy = sy;\n            dw = sw;\n            dh = sh;\n            sw = image.width;\n            sh = image.height;\n            sx = 0;\n            sy = 0;\n        }\n\n        if (this.settings.subPixel === false) {\n            // clamp to pixel grid\n            dx = ~~dx;\n            dy = ~~dy;\n        }\n\n        // apply a tint if required\n        let source = image;\n        let tint = this.currentTint.toArray();\n        if (tint[0] !== 1.0 || tint[1] !== 1.0 || tint[2] !== 1.0) {\n            // get a tinted version of this image from the texture cache\n            source = this.cache.tint(image, this.currentTint.toRGB());\n        }\n        context.drawImage(source, sx, sy, sw, sh, dx, dy, dw, dh);\n    }\n\n    /**\n     * Draw a pattern within the given rectangle.\n     * @param {CanvasPattern} pattern - Pattern object\n     * @param {number} x\n     * @param {number} y\n     * @param {number} width\n     * @param {number} height\n     * @see CanvasRenderer#createPattern\n     */\n    drawPattern(pattern, x, y, width, height) {\n        if (this.getGlobalAlpha() < 1 / 255) {\n            // Fast path: don't draw fully transparent\n            return;\n        }\n        let context = this.getContext();\n        let fillStyle = context.fillStyle;\n        context.fillStyle = pattern;\n        context.fillRect(x, y, width, height);\n        context.fillStyle = fillStyle;\n    }\n\n    /**\n     * starts a new path by emptying the list of sub-paths. Call this method when you want to create a new path\n     * @example\n     * // First path\n     * renderer.beginPath();\n     * renderer.setColor(\"blue\");\n     * renderer.moveTo(20, 20);\n     * renderer.lineTo(200, 20);\n     * renderer.stroke();\n     * // Second path\n     * renderer.beginPath();\n     * renderer.setColor(\"green\");\n     * renderer.moveTo(20, 20);\n     * renderer.lineTo(120, 120);\n     * renderer.stroke();\n     */\n    beginPath() {\n        this.getContext().beginPath();\n    }\n\n    /**\n     * begins a new sub-path at the point specified by the given (x, y) coordinates.\n     * @param {number} x - The x axis of the point.\n     * @param {number} y - The y axis of the point.\n     */\n    moveTo(x, y) {\n        this.getContext().moveTo(x, y);\n    }\n\n    /**\n     * adds a straight line to the current sub-path by connecting the sub-path's last point to the specified (x, y) coordinates.\n     */\n    lineTo(x, y) {\n        this.getContext().lineTo(x, y);\n    }\n\n    /**\n     * creates a rectangular path whose starting point is at (x, y) and whose size is specified by width and height.\n     * @param {number} x - The x axis of the coordinate for the rectangle starting point.\n     * @param {number} y - The y axis of the coordinate for the rectangle starting point.\n     * @param {number} width - The rectangle's width.\n     * @param {number} height - The rectangle's height.\n     */\n    rect(x, y, width, height) {\n        this.getContext().rect(x, y, width, height);\n    }\n\n    /**\n     * adds a rounded rectangle to the current path.\n     * @param {number} x - The x axis of the coordinate for the rectangle starting point.\n     * @param {number} y - The y axis of the coordinate for the rectangle starting point.\n     * @param {number} width - The rectangle's width.\n     * @param {number} height - The rectangle's height.\n     * @param {number} radius - The corner radius.\n     */\n    roundRect(x, y, width, height, radii) {\n        this.getContext().roundRect(x, y, width, height, radii);\n    }\n\n    /**\n     * stroke the given shape or the current defined path\n     * @param {Rect|RoundRect|Polygon|Line|Ellipse} [shape] - a shape object to stroke\n     * @param {boolean} [fill=false] - fill the shape with the current color if true\n     */\n    stroke(shape, fill) {\n        if (typeof shape === \"undefined\") {\n            if (fill === true) {\n                this.getContext().fill();\n            } else {\n                this.getContext().stroke();\n            }\n        } else {\n            super.stroke(shape, fill);\n        }\n    }\n\n    /**\n     * fill the given shape or the current defined path\n     * @param {Rect|RoundRect|Polygon|Line|Ellipse} [shape] - a shape object to fill\n     */\n    fill(shape) {\n        this.stroke(shape, true);\n    }\n\n    /**\n     * add a straight line from the current point to the start of the current sub-path. If the shape has already been closed or has only one point, this function does nothing\n    */\n    closePath() {\n        this.getContext().closePath();\n    }\n\n\n    /**\n     * Stroke an arc at the specified coordinates with given radius, start and end points\n     * @param {number} x - arc center point x-axis\n     * @param {number} y - arc center point y-axis\n     * @param {number} radius\n     * @param {number} start - start angle in radians\n     * @param {number} end - end angle in radians\n     * @param {boolean} [antiClockwise=false] - draw arc anti-clockwise\n     * @param {boolean} [fill=false] - also fill the shape with the current color if true\n     */\n    strokeArc(x, y, radius, start, end, antiClockwise, fill = false) {\n        if (this.getGlobalAlpha() < 1 / 255) {\n            // Fast path: don't draw fully transparent\n            return;\n        }\n        let context = this.getContext();\n\n        context.translate(x, y);\n        context.beginPath();\n        context.arc(0, 0, radius, start, end, antiClockwise || false);\n        context[fill === true ? \"fill\" : \"stroke\"]();\n        context.translate(-x, -y);\n    }\n\n    /**\n     * Fill an arc at the specified coordinates with given radius, start and end points\n     * @param {number} x - arc center point x-axis\n     * @param {number} y - arc center point y-axis\n     * @param {number} radius\n     * @param {number} start - start angle in radians\n     * @param {number} end - end angle in radians\n     * @param {boolean} [antiClockwise=false] - draw arc anti-clockwise\n     */\n    fillArc(x, y, radius, start, end, antiClockwise) {\n        this.strokeArc(x, y, radius, start, end, antiClockwise || false, true);\n    }\n\n    /**\n     * Stroke an ellipse at the specified coordinates with given radius\n     * @param {number} x - ellipse center point x-axis\n     * @param {number} y - ellipse center point y-axis\n     * @param {number} w - horizontal radius of the ellipse\n     * @param {number} h - vertical radius of the ellipse\n     * @param {boolean} [fill=false] - also fill the shape with the current color if true\n     */\n    strokeEllipse(x, y, w, h, fill = false) {\n        if (this.getGlobalAlpha() < 1 / 255) {\n            // Fast path: don't draw fully transparent\n            return;\n        }\n        let context = this.getContext();\n\n        let hw = w,\n            hh = h,\n            lx = x - hw,\n            rx = x + hw,\n            ty = y - hh,\n            by = y + hh;\n\n        let xmagic = hw * 0.551784,\n            ymagic = hh * 0.551784,\n            xmin = x - xmagic,\n            xmax = x + xmagic,\n            ymin = y - ymagic,\n            ymax = y + ymagic;\n\n        context.beginPath();\n        context.moveTo(x, ty);\n        context.bezierCurveTo(xmax, ty, rx, ymin, rx, y);\n        context.bezierCurveTo(rx, ymax, xmax, by, x, by);\n        context.bezierCurveTo(xmin, by, lx, ymax, lx, y);\n        context.bezierCurveTo(lx, ymin, xmin, ty, x, ty);\n        context[fill === true ? \"fill\" : \"stroke\"]();\n        context.closePath();\n    }\n\n    /**\n     * Fill an ellipse at the specified coordinates with given radius\n     * @param {number} x - ellipse center point x-axis\n     * @param {number} y - ellipse center point y-axis\n     * @param {number} w - horizontal radius of the ellipse\n     * @param {number} h - vertical radius of the ellipse\n     */\n    fillEllipse(x, y, w, h) {\n        this.strokeEllipse(x, y, w, h, true);\n    }\n\n    /**\n     * Stroke a line of the given two points\n     * @param {number} startX - the start x coordinate\n     * @param {number} startY - the start y coordinate\n     * @param {number} endX - the end x coordinate\n     * @param {number} endY - the end y coordinate\n     */\n    strokeLine(startX, startY, endX, endY) {\n        if (this.getGlobalAlpha() < 1 / 255) {\n            // Fast path: don't draw fully transparent\n            return;\n        }\n\n        let context = this.getContext();\n\n        context.beginPath();\n        context.moveTo(startX, startY);\n        context.lineTo(endX, endY);\n        context.stroke();\n    }\n\n    /**\n     * Fill a line of the given two points\n     * @param {number} startX - the start x coordinate\n     * @param {number} startY - the start y coordinate\n     * @param {number} endX - the end x coordinate\n     * @param {number} endY - the end y coordinate\n     */\n    fillLine(startX, startY, endX, endY) {\n        this.strokeLine(startX, startY, endX, endY);\n    }\n\n    /**\n     * Stroke the given me.Polygon on the screen\n     * @param {Polygon} poly - the shape to draw\n     * @param {boolean} [fill=false] - also fill the shape with the current color if true\n     */\n    strokePolygon(poly, fill = false) {\n        if (this.getGlobalAlpha() < 1 / 255) {\n            // Fast path: don't draw fully transparent\n            return;\n        }\n        let context = this.getContext();\n        let points = poly.points;\n        let pointsLength = points.length;\n        let firstPoint = points[0];\n\n        this.translate(poly.pos.x, poly.pos.y);\n\n        context.beginPath();\n        context.moveTo(firstPoint.x, firstPoint.y);\n        for (let i = 1; i < pointsLength; i++) {\n            const point = points[i];\n            context.lineTo(point.x, point.y);\n        }\n        context.lineTo(firstPoint.x, firstPoint.y);\n        context[fill === true ? \"fill\" : \"stroke\"]();\n        context.closePath();\n\n        this.translate(-poly.pos.x, -poly.pos.y);\n    }\n\n    /**\n     * Fill the given me.Polygon on the screen\n     * @param {Polygon} poly - the shape to draw\n     */\n    fillPolygon(poly) {\n        this.strokePolygon(poly, true);\n    }\n\n    /**\n     * Stroke a rectangle at the specified coordinates\n     * @param {number} x\n     * @param {number} y\n     * @param {number} width\n     * @param {number} height\n     * @param {boolean} [fill=false] - also fill the shape with the current color if true\n     */\n    strokeRect(x, y, width, height, fill = false) {\n        if (this.getGlobalAlpha() < 1 / 255) {\n            // Fast path: don't draw fully transparent\n            return;\n        }\n        let context = this.getContext();\n\n        context[fill === true ? \"fillRect\" : \"strokeRect\"](x, y, width, height);\n    }\n\n    /**\n     * Draw a filled rectangle at the specified coordinates\n     * @param {number} x\n     * @param {number} y\n     * @param {number} width\n     * @param {number} height\n     */\n    fillRect(x, y, width, height) {\n        this.strokeRect(x, y, width, height, true);\n    }\n\n    /**\n     * Stroke a rounded rectangle at the specified coordinates\n     * @param {number} x\n     * @param {number} y\n     * @param {number} width\n     * @param {number} height\n     * @param {number} radius\n     * @param {boolean} [fill=false] - also fill the shape with the current color if true\n     */\n    strokeRoundRect(x, y, width, height, radius, fill = false) {\n        if (this.getGlobalAlpha() < 1 / 255) {\n            // Fast path: don't draw fully transparent\n            return;\n        }\n        let context = this.getContext();\n\n        context.beginPath();\n        context.roundRect(x, y, width, height, radius);\n        context[fill === true ? \"fill\" : \"stroke\"]();\n    }\n\n    /**\n     * Draw a rounded filled rectangle at the specified coordinates\n     * @param {number} x\n     * @param {number} y\n     * @param {number} width\n     * @param {number} height\n     * @param {number} radius\n     */\n    fillRoundRect(x, y, width, height, radius) {\n        this.strokeRoundRect(x, y, width, height, radius, true);\n    }\n\n    /**\n     * Stroke a Point at the specified coordinates\n     * @param {number} x\n     * @param {number} y\n     */\n    strokePoint(x, y) {\n        this.strokeLine(x, y, x + 1, y + 1);\n    }\n\n    /**\n     * Draw a a point at the specified coordinates\n     * @param {number} x\n     * @param {number} y\n     * @param {number} width\n     * @param {number} height\n     */\n    fillPoint(x, y) {\n        this.strokePoint(x, y);\n    }\n\n    /**\n     * restores the most recently saved renderer state by popping the top entry in the drawing state stack\n     * @example\n     * // Save the current state\n     * renderer.save();\n     *\n     * // apply a transform and draw a rect\n     * renderer.tranform(matrix);\n     * renderer.fillRect(10, 10, 100, 100);\n     *\n     * // Restore to the state saved by the most recent call to save()\n     * renderer.restore();\n     */\n    restore() {\n        const canvas = this.getCanvas();\n        this.getContext().restore();\n        this.currentColor.glArray[3] = this.getGlobalAlpha();\n        this.currentScissor[0] = 0;\n        this.currentScissor[1] = 0;\n        this.currentScissor[2] = canvas.width;\n        this.currentScissor[3] = canvas.height;\n    }\n\n    /**\n     * saves the entire state of the renderer by pushing the current state onto a stack.\n     * @example\n     * // Save the current state\n     * renderer.save();\n     *\n     * // apply a transform and draw a rect\n     * renderer.tranform(matrix);\n     * renderer.fillRect(10, 10, 100, 100);\n     *\n     * // Restore to the state saved by the most recent call to save()\n     * renderer.restore();\n     */\n    save() {\n        this.getContext().save();\n    }\n\n    /**\n     * adds a rotation to the transformation matrix.\n     * @param {number} angle - the rotation angle, clockwise in radians\n     * @example\n     * // Rotated rectangle\n     * renderer.rotate((45 * Math.PI) / 180);\n     * renderer.setColor(\"red\");\n     * renderer.fillRect(10, 10, 100, 100);\n     *\n     * // Reset transformation matrix to the identity matrix\n     * renderer.setTransform(1, 0, 0, 1, 0, 0);\n     */\n    rotate(angle) {\n        this.getContext().rotate(angle);\n    }\n\n    /**\n     * adds a scaling transformation to the renderer units horizontally and/or vertically\n     * @param {number} x - Scaling factor in the horizontal direction. A negative value flips pixels across the vertical axis. A value of 1 results in no horizontal scaling.\n     * @param {number} y - Scaling factor in the vertical direction. A negative value flips pixels across the horizontal axis. A value of 1 results in no vertical scaling\n     */\n    scale(x, y) {\n        this.getContext().scale(x, y);\n    }\n\n    /**\n     * Set the current fill & stroke style color.\n     * By default, or upon reset, the value is set to #000000.\n     * @param {Color|string} color - css color value\n     */\n    setColor(color) {\n        let currentColor = this.currentColor;\n        let context = this.getContext();\n\n        currentColor.copy(color);\n        // globalAlpha is applied at rendering time by the canvas\n\n        context.strokeStyle = context.fillStyle = currentColor.toRGBA();\n    }\n\n    /**\n     * Set the global alpha\n     * @param {number} alpha - 0.0 to 1.0 values accepted.\n     */\n    setGlobalAlpha(alpha) {\n        this.getContext().globalAlpha = alpha;\n    }\n\n    /**\n     * Return the global alpha\n     * @returns {number} global alpha value\n     */\n    getGlobalAlpha() {\n        return this.getContext().globalAlpha;\n    }\n\n    /**\n     * sets or returns the thickness of lines for shape drawing\n     * @type {number}\n     * @default 1\n     */\n    get lineWidth() {\n        return this.getContext().lineWidth;\n    }\n\n    /**\n     * @ignore\n     */\n    set lineWidth(value) {\n        this.getContext().lineWidth = value;\n        return value;\n    }\n\n    /**\n     * sets or returns the shape used to join two line segments where they meet.\n     * There are three possible values for this property: \"round\", \"bevel\", and \"miter\"\n     * @type {string}\n     * @default \"miter\"\n     */\n    get lineJoin() {\n        return this.getContext().lineJoin;\n    }\n\n    /**\n     * @ignore\n     */\n    set lineJoin(value) {\n        let context = this.getContext();\n        context.lineJoin = value;\n        return context.lineJoin;\n    }\n\n    /**\n     * Reset (overrides) the renderer transformation matrix to the\n     * identity one, and then apply the given transformation matrix.\n     * @param {Matrix2d|number} a - a matrix2d to transform by, or a the a component to multiply the current matrix by\n     * @param {number} b - the b component to multiply the current matrix by\n     * @param {number} c - the c component to multiply the current matrix by\n     * @param {number} d - the d component to multiply the current matrix by\n     * @param {number} e - the e component to multiply the current matrix by\n     * @param {number} f - the f component to multiply the current matrix by\n     */\n    setTransform(a, b, c, d, e, f) {\n        this.resetTransform();\n        this.transform(a, b, c, d, e, f);\n    }\n\n    /**\n     * Multiply given matrix into the renderer tranformation matrix\n     * @see {@link CanvasRenderer.setTransform} which will reset the current transform matrix prior to performing the new transformation\n     * @param {Matrix2d|number} a - a matrix2d to transform by, or a the a component to multiply the current matrix by\n     * @param {number} b - the b component to multiply the current matrix by\n     * @param {number} c - the c component to multiply the current matrix by\n     * @param {number} d - the d component to multiply the current matrix by\n     * @param {number} e - the e component to multiply the current matrix by\n     * @param {number} f - the f component to multiply the current matrix by\n     */\n    transform(a, b, c, d, e, f) {\n        if (typeof a === \"object\") {\n            let m = a.toArray();\n            a = m[0];\n            b = m[1];\n            c = m[3];\n            d = m[4];\n            e = m[6];\n            f = m[7];\n        }\n        // else individual components\n\n        if (this.settings.subPixel === false) {\n            e |= 0;\n            f |= 0;\n        }\n\n        this.getContext().transform(a, b, c, d, e, f);\n    }\n\n    /**\n     * adds a translation transformation to the current matrix.\n     * @param {number} x - Distance to move in the horizontal direction. Positive values are to the right, and negative to the left.\n     * @param {number} y - Distance to move in the vertical direction. Positive values are down, and negative are up.\n     */\n    translate(x, y) {\n        if (this.settings.subPixel === false) {\n            this.getContext().translate(~~x, ~~y);\n        } else {\n            this.getContext().translate(x, y);\n        }\n    }\n\n    /**\n     * clip the given region from the original canvas. Once a region is clipped,\n     * all future drawing will be limited to the clipped region.\n     * You can however save the current region using the save(),\n     * and restore it (with the restore() method) any time in the future.\n     * (<u>this is an experimental feature !</u>)\n     * @param {number} x\n     * @param {number} y\n     * @param {number} width\n     * @param {number} height\n     */\n    clipRect(x, y, width, height) {\n        let canvas = this.getCanvas();\n        // if requested box is different from the current canvas size;\n        if (x !== 0 || y !== 0 || width !== canvas.width || height !== canvas.height) {\n            let currentScissor = this.currentScissor;\n            // if different from the current scissor box\n            if (currentScissor[0] !== x || currentScissor[1] !== y ||\n                currentScissor[2] !== width || currentScissor[3] !== height) {\n                let context = this.getContext();\n                context.beginPath();\n                context.rect(x, y, width, height);\n                context.clip();\n                // save the new currentScissor box\n                currentScissor[0] = x;\n                currentScissor[1] = y;\n                currentScissor[2] = width;\n                currentScissor[3] = height;\n            }\n        }\n    }\n\n    /**\n     * A mask limits rendering elements to the shape and position of the given mask object.\n     * If the drawing or rendering area is larger than the mask, only the intersecting part of the renderable will be visible.\n     * (Note Mask are not preserved through renderer context save and restore and need so be manually cleared)\n     * @see CanvasRenderer#clearMask\n     * @param {Rect|RoundRect|Polygon|Line|Ellipse} [mask] - the shape defining the mask to be applied\n     * @param {boolean} [invert=false] - either the given shape should define what is visible (default) or the opposite\n     */\n    setMask(mask, invert = false) {\n        let context = this.getContext();\n\n        if (this.maskLevel === 0) {\n            // only save context on the first mask\n            context.save();\n            if (typeof mask !== \"undefined\") {\n                context.beginPath();\n            }\n            // else use the current path\n        }\n\n        if (typeof mask !== \"undefined\") {\n            switch (mask.type) {\n                // RoundRect\n                case \"RoundRect\":\n                    context.roundRect(mask.top, mask.left, mask.width, mask.height, mask.radius);\n                    break;\n\n                // Rect or Bounds\n                case \"Rectangle\":\n                case \"Bounds\":\n                    context.rect(mask.top, mask.left, mask.width, mask.height);\n                    break;\n\n                // Polygon or Line\n                case \"Polygon\":\n                    {\n                        // polygon\n                        const _x = mask.pos.x, _y = mask.pos.y;\n                        context.moveTo(_x + mask.points[0].x, _y + mask.points[0].y);\n                        for (let i = 1; i < mask.points.length; i++) {\n                            const point = mask.points[i];\n                            context.lineTo(_x + point.x, _y + point.y);\n                        }\n                    }\n                    break;\n\n                case \"Ellipse\":\n                    {\n                        const _x = mask.pos.x, _y = mask.pos.y,\n                            hw = mask.radiusV.x,\n                            hh = mask.radiusV.y,\n                            lx = _x - hw,\n                            rx = _x + hw,\n                            ty = _y - hh,\n                            by = _y + hh;\n\n                        let xmagic = hw * 0.551784,\n                            ymagic = hh * 0.551784,\n                            xmin = _x - xmagic,\n                            xmax = _x + xmagic,\n                            ymin = _y - ymagic,\n                            ymax = _y + ymagic;\n\n                        context.moveTo(_x, ty);\n                        context.bezierCurveTo(xmax, ty, rx, ymin, rx, _y);\n                        context.bezierCurveTo(rx, ymax, xmax, by, _x, by);\n                        context.bezierCurveTo(xmin, by, lx, ymax, lx, _y);\n                        context.bezierCurveTo(lx, ymin, xmin, ty, _x, ty);\n                    }\n                    break;\n\n                default:\n                    throw new Error(\"Invalid geometry for setMask\");\n            }\n        }\n\n        this.maskLevel++;\n\n        if (invert === true) {\n            context.closePath();\n            context.globalCompositeOperation = \"destination-atop\";\n            context.fill();\n        } else {\n            context.clip();\n        }\n    }\n\n    /**\n     * disable (remove) the rendering mask set through setMask.\n     * @see CanvasRenderer#setMask\n     */\n    clearMask() {\n        if (this.maskLevel > 0) {\n            this.maskLevel = 0;\n            this.getContext().restore();\n        }\n    }\n}\n\n/**\n * Create required arrays for the given layer object\n * @ignore\n */\nfunction initArray(rows, cols) {\n    // initialize the array\n    let array = new Array(cols);\n    for (let col = 0; col < cols; col++) {\n        array[col] = new Array(rows);\n        for (let row = 0; row < rows; row++) {\n            array[col][row] = null;\n        }\n    }\n    return array;\n}\n\n/**\n * Set a tiled layer Data\n * @ignore\n */\nfunction setLayerData(layer, bounds, data) {\n    let idx = 0;\n    let width, height;\n\n    // layer provide rows and cols, chunk width and height\n    if (typeof bounds.rows === \"undefined\") {\n        width = bounds.width;\n        height = bounds.height;\n    } else {\n        width = bounds.cols;\n        height = bounds.rows;\n    }\n    // set everything\n    for (let y = 0; y < height; y++) {\n        for (let x = 0; x < width; x++) {\n            // get the value of the gid\n            const gid = data[idx++];\n            // fill the array\n            if (gid !== 0) {\n                // add a new tile to the layer\n                layer.layerData[x + bounds.x][y + bounds.y] = layer.getTileById(gid, x + bounds.x, y + bounds.y);\n            }\n        }\n    }\n}\n\n/**\n * @classdesc\n * a TMX Tile Layer Object\n * Tiled QT 0.7.x format\n * @augments Renderable\n */\nclass TMXLayer extends Renderable {\n    /**\n     * @param {object} map - layer data in JSON format ({@link http://docs.mapeditor.org/en/stable/reference/tmx-map-format/#layer})\n     * @param {object} data - layer data in JSON format ({@link http://docs.mapeditor.org/en/stable/reference/tmx-map-format/#layer})\n     * @param {number} tilewidth - width of each tile in pixels\n     * @param {number} tileheight - height of each tile in pixels\n     * @param {string} orientation - \"isometric\" or \"orthogonal\"\n     * @param {TMXTilesetGroup} tilesets - tileset as defined in Tiled\n     * @param {number} z - z-index position\n     */\n    constructor(map, data, tilewidth, tileheight, orientation, tilesets, z) {\n        // super constructor\n        super(0, 0, 0, 0);\n\n        // tile width & height\n        this.tilewidth = data.tilewidth || tilewidth;\n        this.tileheight = data.tileheight || tileheight;\n\n        // layer orientation\n        this.orientation = orientation;\n\n        /**\n         * Horizontal layer offset in tiles\n         * @default 0\n         * @type {number}\n         */\n        this.x = 0;\n\n        /**\n         * Vertical layer offset in tiles\n         * @default 0\n         * @type {number}\n         */\n        this.y = 0;\n\n        /**\n         * The Layer corresponding Tilesets\n         * @type {TMXTilesetGroup}\n         */\n        this.tilesets = tilesets;\n\n        // the default tileset\n        // XXX: Is this even used?\n        this.tileset = (this.tilesets ? this.tilesets.getTilesetByIndex(0) : null);\n\n        // Biggest tile size to draw\n        this.maxTileSize = {\n            \"width\" : 0,\n            \"height\" : 0\n        };\n        for (let i = 0; i < this.tilesets.length; i++) {\n            const tileset = this.tilesets.getTilesetByIndex(i);\n            this.maxTileSize.width = Math.max(this.maxTileSize.width, tileset.tilewidth);\n            this.maxTileSize.height = Math.max(this.maxTileSize.height, tileset.tileheight);\n        }\n\n        /**\n         * All animated tilesets in this layer\n         * @type {TMXTileset[]}\n         */\n        this.animatedTilesets = [];\n\n        /**\n         * Layer contains tileset animations\n         * @type {boolean}\n         */\n        this.isAnimated = false;\n\n        /**\n         * the order in which tiles on orthogonal tile layers are rendered.\n         * (valid values are \"left-down\", \"left-up\", \"right-down\", \"right-up\")\n         * @type {string}\n         * @default \"right-down\"\n         */\n        this.renderorder = data.renderorder || \"right-down\";\n\n        /**\n         * the layer class\n         * @type {string}\n         */\n        this.class = data.class;\n\n        // for displaying order\n        this.pos.z = z;\n\n        // tiled default coordinates are top-left\n        this.anchorPoint.set(0, 0);\n\n        // additional TMX flags\n        this.name = data.name;\n        this.cols = +data.width;\n        this.rows = +data.height;\n\n        // layer opacity\n        let visible = typeof(data.visible) !== \"undefined\" ? +data.visible : 1;\n        this.setOpacity(visible ? +data.opacity : 0);\n\n        // layer tint\n        if (typeof data.tintcolor === \"string\") {\n            // Tiled provides #RRGGBB or #AARRGGBB\n            this.tint.parseHex(data.tintcolor, true);\n        }\n\n        // layer \"real\" size\n        if (this.orientation === \"isometric\") {\n            this.width = (this.cols + this.rows) * (this.tilewidth / 2);\n            this.height = (this.cols + this.rows) * (this.tileheight / 2);\n        } else {\n            this.width = this.cols * this.tilewidth;\n            this.height = this.rows * this.tileheight;\n        }\n\n        // check if we have any user-defined properties\n        applyTMXProperties(this, data);\n\n        // set a renderer\n        this.setRenderer(map.getRenderer());\n\n\n        // initialize the data array\n        this.layerData = initArray(this.rows, this.cols);\n\n        if (map.infinite === 0) {\n            // initialize and set the layer data\n            setLayerData(\n                this,\n                this,\n                decode(\n                    data.data,\n                    data.encoding,\n                    data.compression\n                )\n            );\n        } else if (map.infinite === 1) {\n            // infinite map, initialize per chunk\n            data.chunks.forEach((chunk) => {\n                // initialize and set the layer data\n                setLayerData(\n                    this,\n                    chunk,\n                    decode(\n                        chunk.data,\n                        data.encoding,\n                        data.compression\n                    )\n                );\n            });\n        }\n\n    }\n\n    // called when the layer is added to the game world or a container\n    onActivateEvent() {\n\n        if (this.animatedTilesets === undefined) {\n            this.animatedTilesets = [];\n        }\n\n        if (this.tilesets) {\n            let tileset = this.tilesets.tilesets;\n            for (let i = 0; i < tileset.length; i++) {\n                if (tileset[i].isAnimated) {\n                    this.animatedTilesets.push(tileset[i]);\n                }\n            }\n        }\n\n        this.isAnimated = this.animatedTilesets.length > 0;\n\n        // check for the correct rendering method\n        if (typeof this.preRender === \"undefined\" && this.isAnimated === false) {\n            this.preRender = this.ancestor.getRootAncestor().preRender;\n        } else {\n            // Force pre-render off when tileset animation is used\n            this.preRender = false;\n        }\n\n        // if pre-rendering method is use, create an offline canvas/renderer\n        if ((this.preRender === true) && (!this.canvasRenderer)) {\n            this.canvasRenderer = new CanvasRenderer({\n                canvas : createCanvas(this.width, this.height),\n                width : this.width,\n                heigth : this.height,\n                transparent : true\n            });\n            // pre render the layer on the canvas\n            this.getRenderer().drawTileLayer(this.canvasRenderer, this, this);\n        }\n\n        this.isDirty = true;\n    }\n\n    // called when the layer is removed from the game world or a container\n    onDeactivateEvent() {\n        // clear all allocated objects\n        //this.layerData = undefined;\n        this.animatedTilesets = undefined;\n    }\n\n    /**\n     * Set the TMX renderer for this layer object\n     * @param {TMXRenderer} renderer\n     * @example\n     * // use the parent map default renderer\n     * let layer = new me.TMXLayer(...);\n     * layer.setRenderer(map.getRenderer());\n     */\n    setRenderer(renderer) {\n        this.renderer = renderer;\n        this.isDirty = true;\n    }\n\n    /**\n     * Return the layer current renderer object\n     * @returns {TMXRenderer} renderer\n     */\n    getRenderer() {\n        return this.renderer;\n    }\n\n    /**\n     * Return the TileId of the Tile at the specified position\n     * @param {number} x - X coordinate (in world/pixels coordinates)\n     * @param {number} y - Y coordinate (in world/pixels coordinates)\n     * @returns {number} TileId or null if there is no Tile at the given position\n     */\n    getTileId(x, y) {\n        let tile = this.getTile(x, y);\n        return (tile ? tile.tileId : null);\n    }\n\n    /**\n     * Return the Tile object at the specified position\n     * @param {number} x - X coordinate (in world/pixels coordinates)\n     * @param {number} y - Y coordinate (in world/pixels coordinates)\n     * @returns {Tile} corresponding tile or null if there is no defined tile at the coordinate or if outside of the layer bounds\n     * @example\n     * // get the TMX Map Layer called \"Front layer\"\n     * let layer = me.game.world.getChildByName(\"Front Layer\")[0];\n     * // get the tile object corresponding to the latest pointer position\n     * let tile = layer.getTile(me.input.pointer.x, me.input.pointer.y);\n     */\n    getTile(x, y) {\n        let tile = null;\n\n        if (this.contains(x, y)) {\n            let coord = this.getRenderer().pixelToTileCoords(x, y, pool.pull(\"Vector2d\"));\n            tile = this.cellAt(coord.x, coord.y);\n            pool.push(coord);\n        }\n        return tile;\n    }\n\n    /**\n     * assign the given Tile object to the specified position\n     * @param {Tile} tile - the tile object to be assigned\n     * @param {number} x - x coordinate (in world/pixels coordinates)\n     * @param {number} y - y coordinate (in world/pixels coordinates)\n     * @returns {Tile} the tile object\n     */\n    setTile(tile, x, y) {\n        this.layerData[x][y] = tile;\n        this.isDirty = true;\n        return tile;\n    }\n\n    /**\n     * return a new the Tile object corresponding to the given tile id\n     * @param {number} tileId - tileId\n     * @param {number} x - X coordinate (in world/pixels coordinates)\n     * @param {number} y - Y coordinate (in world/pixels coordinates)\n     * @returns {Tile} the tile object\n     */\n    getTileById(tileId, x, y) {\n        if (!this.tileset.contains(tileId)) {\n            // look for the corresponding tileset\n            this.tileset = this.tilesets.getTilesetByGid(tileId);\n        }\n        return new Tile(x, y, tileId, this.tileset);\n    }\n\n    /**\n     * Return the Tile object at the specified tile coordinates\n     * @param {number} x - x position of the tile (in Tile unit)\n     * @param {number} y - x position of the tile (in Tile unit)\n     * @param {number} [boundsCheck=true] - check first if within the layer bounds\n     * @returns {Tile} corresponding tile or null if there is no defined tile at the position or if outside of the layer bounds\n     * @example\n     * // return the first tile at offset 0, 0\n     * let tile = layer.cellAt(0, 0);\n     */\n    cellAt(x, y, boundsCheck) {\n        let _x = ~~x;\n        let _y = ~~y;\n\n        let renderer = this.getRenderer();\n        // boundsCheck only used internally by the tiled renderer, when the layer bound check was already done\n        if (boundsCheck === false || (_x >= 0 && _x < renderer.cols && _y >= 0 && _y < renderer.rows)) {\n            return this.layerData[_x][_y];\n        } else {\n            return null;\n        }\n    }\n\n    /**\n     * clear the tile at the specified position\n     * @param {number} x - X coordinate (in map coordinates: row/column)\n     * @param {number} y - Y coordinate (in map coordinates: row/column)\n     * @example\n     * me.game.world.getChildByType(me.TMXLayer).forEach(function(layer) {\n     *     // clear all tiles at the given x,y coordinates\n     *     layer.clearTile(x, y);\n     * });\n     */\n    clearTile(x, y) {\n        // clearing tile\n        this.layerData[x][y] = null;\n        // erase the corresponding area in the canvas\n        if (this.preRender) {\n            this.canvasRenderer.clearRect(x * this.tilewidth, y * this.tileheight, this.tilewidth, this.tileheight);\n        }\n        this.isDirty = true;\n    }\n\n    /**\n     * update animations in a tileset layer\n     * @ignore\n     */\n    update(dt) {\n        let result = this.isDirty;\n        if (this.isAnimated) {\n            for (let i = 0; i < this.animatedTilesets.length; i++) {\n                result = this.animatedTilesets[i].update(dt) || result;\n            }\n        }\n        return result;\n    }\n\n    /**\n     * draw a tileset layer\n     * @ignore\n     */\n    draw(renderer, rect) {\n        // use the offscreen canvas\n        if (this.preRender) {\n            const width = Math.min(rect.width, this.width);\n            const height = Math.min(rect.height, this.height);\n\n            // draw using the cached canvas\n            renderer.drawImage(\n                this.canvasRenderer.getCanvas(),\n                rect.pos.x, rect.pos.y, // sx,sy\n                width, height,          // sw,sh\n                rect.pos.x, rect.pos.y, // dx,dy\n                width, height           // dw,dh\n            );\n        }\n        // dynamically render the layer\n        else {\n            // draw the layer\n            this.getRenderer().drawTileLayer(renderer, this, rect);\n        }\n    }\n}\n\n/**\n * @classdesc\n * object group definition as defined in Tiled.\n * (group definition is translated into the virtual `me.game.world` using `me.Container`)\n * @ignore\n */\nclass TMXGroup {\n\n    constructor(map, data, z) {\n\n        /**\n         * group name\n         * @type {string}\n         */\n        this.name = data.name;\n\n        /**\n         * group width\n         * @type {number}\n         */\n        this.width = data.width || 0;\n\n        /**\n         * group height\n         * @type {number}\n         */\n        this.height = data.height || 0;\n\n        /**\n         * tint color\n         * @type {string}\n         */\n        this.tintcolor = data.tintcolor;\n\n\n        /**\n         * the group class\n         * @type {string}\n         */\n        this.class = data.class;\n\n        /**\n         * group z order\n         * @type {number}\n         */\n        this.z = z;\n\n        /**\n         * group objects list definition\n         * @see TMXObject\n         * @type {object[]}\n         */\n        this.objects = [];\n\n        let visible = typeof(data.visible) !== \"undefined\" ? data.visible : true;\n        this.opacity = (visible === true) ? clamp(+data.opacity || 1.0, 0.0, 1.0) : 0;\n\n        // check if we have any user-defined properties\n        applyTMXProperties(this, data);\n\n        // parse all child objects/layers\n        if (data.objects) {\n            data.objects.forEach((object) => {\n                object.tintcolor = this.tintcolor;\n                this.objects.push(new TMXObject(map, object, z));\n            });\n        }\n\n        if (data.layers) {\n            data.layers.forEach((data) => {\n                let layer = new TMXLayer(map, data, map.tilewidth, map.tileheight, map.orientation, map.tilesets, z++);\n                // set a renderer\n                layer.setRenderer(map.getRenderer());\n                // resize container accordingly\n                this.width = Math.max(this.width, layer.width);\n                this.height = Math.max(this.height, layer.height);\n                this.objects.push(layer);\n            });\n        }\n    }\n\n    /**\n     * reset function\n     * @ignore\n     */\n    destroy() {\n        // clear all allocated objects\n        this.objects = null;\n    }\n\n    /**\n     * return the object count\n     * @ignore\n     */\n    getObjectCount() {\n        return this.objects.length;\n    }\n\n    /**\n     * returns the object at the specified index\n     * @ignore\n     */\n    getObjectByIndex(idx) {\n        return this.objects[idx];\n    }\n}\n\n/**\n * Private function to re-use for object removal in a defer\n * @ignore\n */\nfunction deferredRemove(child, keepalive) {\n    this.removeChildNow(child, keepalive);\n}\n\nlet globalFloatingCounter = 0;\n\n/**\n * additional import for TypeScript\n * @import Color from \"./../math/color.js\";\n * @import Entity from \"./entity/entity.js\";\n * @import Sprite from \"./sprite.js\";\n * @import Collectable from \"./collectable.js\";\n * @import Trigger from \"./trigger.js\";\n * @import { Draggable } from \"./draggable.js\";\n * @import { DropTarget } from \"./dragndrop.js\";\n * @import NineSliceSprite from \"./nineslicesprite.js\";\n * @import ImageLayer from \"./imagelayer.js\";\n * @import ColorLayer from \"./colorlayer.js\";\n * @import Light2d from \"./light2d.js\";\n * @import UIBaseElement from \"./ui/uibaseelement.js\";\n * @import UISpriteElement from \"./ui/uispriteelement.js\";\n * @import UITextButton from \"./ui/uitextbutton.js\";\n * @import Text from \"./text/text.js\";\n * @import BitmapText from \"./text/bitmaptext.js\";\n * @import Bounds from \"./../physics/bounds.js\";\n * @import CanvasRenderer from \"./../video/canvas/canvas_renderer.js\";\n * @import WebGLRenderer from \"./../video/webgl/webgl_renderer.js\";\n */\n\n/**\n * @classdesc\n * Container represents a collection of child objects\n * @augments Renderable\n */\nclass Container extends Renderable {\n    /**\n     * @param {number} [x=0] - position of the container (accessible via the inherited pos.x property)\n     * @param {number} [y=0] - position of the container (accessible via the inherited pos.y property)\n     * @param {number} [width=game.viewport.width] - width of the container\n     * @param {number} [height=game.viewport.height] - height of the container\n     */\n    constructor(x = 0, y = 0, width, height, root = false) {\n\n        // call the super constructor\n        super(\n            x, y,\n            typeof width === \"undefined\" ? (typeof game.viewport !== \"undefined\" ? game.viewport.width : Infinity) : width,\n            typeof height === \"undefined\" ? (typeof game.viewport !== \"undefined\" ? game.viewport.height : Infinity) : height\n        );\n\n        /**\n         * keep track of pending sort\n         * @ignore\n         */\n        this.pendingSort = null;\n\n        /**\n         * whether the container is the root of the scene\n         * @type {boolean}\n         * @default false\n         */\n        this.root = root;\n\n        /**\n         * The array of children of this container.\n         * @ignore\n         */\n        this.children = undefined;\n\n        /**\n         * The property of the child object that should be used to sort on this container\n         * value : \"x\", \"y\", \"z\"\n         * @type {string}\n         * @default \"z\"\n         */\n        this.sortOn = \"z\";\n\n        /**\n         * Specify if the children list should be automatically sorted when adding a new child\n         * @type {boolean}\n         * @default true\n         */\n        this.autoSort = true;\n\n        /**\n         * Specify if the children z index should automatically be managed by the parent container\n         * @type {boolean}\n         * @default true\n         */\n        this.autoDepth = true;\n\n        /**\n         * Specify if the container draw operation should clip his children to its own bounds\n         * @type {boolean}\n         * @default false\n         */\n        this.clipping = false;\n\n        /**\n         * a callback to be extended, triggered after a child has been added or removed\n         * @param {number} index - added or removed child index\n         */\n        this.onChildChange = function (index) {   // eslint-disable-line no-unused-vars\n            // to be extended\n        };\n\n        /**\n         * Specify if the container bounds should automatically take in account\n         * all child bounds when updated (this is expensive and disabled by default,\n         * only enable if necessary)\n         * @type {boolean}\n         * @default false\n         */\n        this.enableChildBoundsUpdate = false;\n\n        /**\n         * define a background color for this container\n         * @type {Color}\n         * @default (0, 0, 0, 0.0)\n         * @example\n         * // add a red background color to this container\n         * this.backgroundColor.setColor(255, 0, 0);\n         */\n        this.backgroundColor = pool.pull(\"Color\", 0, 0, 0, 0.0);\n\n        /**\n         * Used by the debug panel plugin\n         * @ignore\n         */\n        this.drawCount = 0;\n\n        // container self apply any defined transformation\n        this.autoTransform = true;\n\n        // enable collision and event detection\n        this.isKinematic = false;\n\n        this.anchorPoint.set(0, 0);\n\n        // subscribe on the canvas resize event\n        if (this.root === true) {\n            // Workaround for not updating container child-bounds automatically (it's expensive!)\n            on(CANVAS_ONRESIZE, () => {\n                // temporarly enable the enableChildBoundsUpdate flag\n                this.enableChildBoundsUpdate === true;\n                // update bounds\n                this.updateBounds();\n                this.enableChildBoundsUpdate === false;\n            });\n        }\n    }\n\n    /**\n     * reset the container, removing all childrens, and reseting transforms.\n     */\n    reset() {\n        // cancel any sort operation\n        if (this.pendingSort) {\n            clearTimeout(this.pendingSort);\n            this.pendingSort = null;\n        }\n\n        // delete all children\n        let children = this.getChildren();\n        for (let i = children.length, child; i >= 0; (child = children[--i])) {\n            // don't remove it if a persistent object\n            if (child && child.isPersistent !== true) {\n                this.removeChildNow(child);\n            }\n        }\n\n        if (typeof this.currentTransform !== \"undefined\") {\n            // just reset some variables\n            this.currentTransform.identity();\n        }\n\n        this.backgroundColor.setColor(0, 0, 0, 0.0);\n    }\n\n    /**\n     * Add a child to the container <br>\n     * if auto-sort is disable, the object will be appended at the bottom of the list.\n     * Adding a child to the container will automatically remove it from its other container.\n     * Meaning a child can only have one parent. This is important if you add a renderable\n     * to a container then add it to the World container it will move it out of the\n     * orginal container. Then when the World container reset() method is called the renderable\n     * will not be in any container. <br>\n     * if the given child implements a onActivateEvent method, that method will be called\n     * once the child is added to this container.\n     * @param {Renderable|Entity|Sprite|Collectable|Trigger|Draggable|DropTarget|NineSliceSprite|ImageLayer|ColorLayer|Light2d|UIBaseElement|UISpriteElement|UITextButton|Text|BitmapText} child - Child to be added\n     * @param {number} [z] - forces the z index of the child to the specified value\n     * @returns {Renderable} the added child\n     */\n    addChild(child, z) {\n        if (child.ancestor instanceof Container) {\n            child.ancestor.removeChildNow(child);\n        }\n        else {\n            // only allocate a GUID if the object has no previous ancestor\n            // (e.g. move one child from one container to another)\n            if (child.isRenderable) {\n                // allocated a GUID value (use child.id as based index if defined)\n                child.GUID = createGUID(child.id);\n            }\n        }\n\n        // add the new child\n        child.ancestor = this;\n        this.getChildren().push(child);\n\n        // update child bounds to reflect the new ancestor\n        if (typeof child.updateBounds === \"function\") {\n            if (this.isFloating === true) {\n                // only parent container can be floating\n                child.floating = false;\n            }\n            child.updateBounds();\n        }\n\n        // set the child z value if required\n        if (typeof(child.pos) !== \"undefined\") {\n            if (typeof(z) === \"number\") {\n                child.pos.z = z;\n            } else if (this.autoDepth === true) {\n                child.pos.z = this.getChildren().length;\n            }\n        }\n\n        if (this.autoSort === true) {\n            this.sort();\n        }\n\n        if (typeof child.onActivateEvent === \"function\" && this.isAttachedToRoot()) {\n            child.onActivateEvent();\n        }\n\n        // force container bounds update if required\n        if (this.enableChildBoundsUpdate === true) {\n            this.updateBounds();\n        }\n\n        // if a physic body(ies) to the game world\n        if (this.isAttachedToRoot()) {\n            let worldContainer = this.getRootAncestor();\n            if (child.body instanceof Body) {\n                worldContainer.addBody(child.body);\n            }\n            // if the child is a container\n            if (child instanceof Container) {\n                // add all container child bodies\n                // TODO: make it recursive ?\n                child.forEach((cchild) => {\n                    if (cchild.body instanceof Body) {\n                        worldContainer.addBody(cchild.body);\n                    }\n                });\n            }\n        }\n\n        // mark the container for repaint\n        this.isDirty = true;\n\n        // triggered callback if defined\n        this.onChildChange.call(this, this.getChildren().length - 1);\n\n        return child;\n    }\n\n    /**\n     * Add a child to the container at the specified index<br>\n     * (the list won't be sorted after insertion)\n     * @param {Renderable|Entity|Sprite|Collectable|Trigger|Draggable|DropTarget|NineSliceSprite|ImageLayer|ColorLayer|Light2d|UIBaseElement|UISpriteElement|UITextButton|Text|BitmapText} child - Child to be added\n     * @param {number} index - The index at which to insert the child\n     * @returns {Renderable} the added child\n     */\n    addChildAt(child, index) {\n        if (index >= 0 && index < this.getChildren().length) {\n            if (child.ancestor instanceof Container) {\n                child.ancestor.removeChildNow(child);\n            }\n            else {\n                // only allocate a GUID if the object has no previous ancestor\n                // (e.g. move one child from one container to another)\n                if (child.isRenderable) {\n                    // allocated a GUID value\n                    child.GUID = createGUID();\n                }\n            }\n\n            // add the new child\n            child.ancestor = this;\n            this.getChildren().splice(index, 0, child);\n\n            // update child bounds to reflect the new ancestor\n            if (typeof child.updateBounds === \"function\") {\n                if (this.isFloating === true) {\n                    // only parent container can be floating\n                    child.floating = false;\n                }\n                child.updateBounds();\n            }\n\n            if (typeof child.onActivateEvent === \"function\" && this.isAttachedToRoot()) {\n                child.onActivateEvent();\n            }\n\n            // force container bounds update if required\n            if (this.enableChildBoundsUpdate === true) {\n                this.updateBounds();\n            }\n\n            // if a physic body(ies) to the game world\n            if (this.isAttachedToRoot()) {\n                let worldContainer = this.getRootAncestor();\n                if (child.body instanceof Body) {\n                    worldContainer.addBody(child.body);\n                }\n                // if the child is a container\n                if (child instanceof Container) {\n                    // add all container child bodies\n                    // TODO: make it recursive ?\n                    child.forEach((cchild) => {\n                        if (cchild.body instanceof Body) {\n                            worldContainer.addBody(cchild.body);\n                        }\n                    });\n                }\n            }\n\n            // mark the container for repaint\n            this.isDirty = true;\n\n            // triggered callback if defined\n            this.onChildChange.call(this, index);\n\n            return child;\n        }\n        else {\n            throw new Error(\"Index (\" + index + \") Out Of Bounds for addChildAt()\");\n        }\n    }\n\n    /**\n     * The forEach() method executes a provided function once per child element. <br>\n     * the callback function is invoked with three arguments: <br>\n     *    - The current element being processed in the array <br>\n     *    - The index of element in the array. <br>\n     *    - The array forEach() was called upon. <br>\n     * @param {Function} callback - fnction to execute on each element\n     * @param {object} [thisArg] - value to use as this(i.e reference Object) when executing callback.\n     * @example\n     * // iterate through all children of this container\n     * container.forEach((child) => {\n     *    // do something with the child\n     *    child.doSomething();\n     * });\n     * container.forEach((child, index) => { ... });\n     * container.forEach((child, index, array) => { ... });\n     * container.forEach((child, index, array) => { ... }, thisArg);\n     */\n    forEach(callback, thisArg) {\n        let context = this, i = 0;\n        let children = this.getChildren();\n\n        let len = children.length;\n\n        if (typeof callback !== \"function\") {\n            throw new Error(callback + \" is not a function\");\n        }\n\n        if (arguments.length > 1) {\n            context = thisArg;\n        }\n\n        while (i < len) {\n            callback.call(context, children[i], i, children);\n            i++;\n        }\n    }\n\n    /**\n     * Swaps the position (z-index) of 2 children\n     * @param {Renderable|Entity|Sprite|Collectable|Trigger|Draggable|DropTarget|NineSliceSprite|ImageLayer|ColorLayer|Light2d|UIBaseElement|UISpriteElement|UITextButton|Text|BitmapText} child - Child to be added\n     * @param {Renderable|Entity|Sprite|Collectable|Trigger|Draggable|DropTarget|NineSliceSprite|ImageLayer|ColorLayer|Light2d|UIBaseElement|UISpriteElement|UITextButton|Text|BitmapText} child2 - Child to be added\n     */\n    swapChildren(child, child2) {\n        let index = this.getChildIndex(child);\n        let index2 = this.getChildIndex(child2);\n\n        if ((index !== -1) && (index2 !== -1)) {\n            // swap z index\n            let _z = child.pos.z;\n            child.pos.z = child2.pos.z;\n            child2.pos.z = _z;\n            // swap the positions..\n            this.getChildren()[index] = child2;\n            this.getChildren()[index2] = child;\n            // mark the container as dirty\n            this.isDirty = true;\n        }\n        else {\n            throw new Error(child + \" Both the supplied childs must be a child of the caller \" + this);\n        }\n    }\n\n    /**\n     * Returns the Child at the specified index\n     * @param {number} index - The index of the child\n     * @returns {Renderable} the child at the specified index\n     */\n    getChildAt(index) {\n        if (index >= 0 && index < this.getChildren().length) {\n            return this.getChildren()[index];\n        }\n        else {\n            throw new Error(\"Index (\" + index + \") Out Of Bounds for getChildAt()\");\n        }\n    }\n\n    /**\n     * Returns the index of the given Child\n     * @param {Renderable|Entity|Sprite|Collectable|Trigger|Draggable|DropTarget|NineSliceSprite|ImageLayer|ColorLayer|Light2d|UIBaseElement|UISpriteElement|UITextButton|Text|BitmapText} child - The child object\n     * @returns {number} index\n     */\n    getChildIndex(child) {\n        return this.getChildren().indexOf(child);\n    }\n\n    /**\n     * Returns the next child within the container or undefined if none\n     * @param {Renderable|Entity|Sprite|Collectable|Trigger|Draggable|DropTarget|NineSliceSprite|ImageLayer|ColorLayer|Light2d|UIBaseElement|UISpriteElement|UITextButton|Text|BitmapText} child - The child object\n     * @returns {Renderable} child\n     */\n    getNextChild(child) {\n        let index = this.getChildren().indexOf(child) - 1;\n        if (index >= 0 && index < this.getChildren().length) {\n            return this.getChildAt(index);\n        }\n        return undefined;\n    }\n\n    /**\n     * Returns true if contains the specified Child\n     * @param {Renderable|Entity|Sprite|Collectable|Trigger|Draggable|DropTarget|NineSliceSprite|ImageLayer|ColorLayer|Light2d|UIBaseElement|UISpriteElement|UITextButton|Text|BitmapText} child - The child object\n     * @returns {boolean}\n     */\n    hasChild(child) {\n        return this === child.ancestor;\n    }\n\n    /**\n     * return the child corresponding to the given property and value.<br>\n     * note : avoid calling this function every frame since\n     * it parses the whole object tree each time\n     * @param {string} prop - Property name\n     * @param {string|RegExp|number|boolean} value - Value of the property\n     * @returns {Renderable[]} Array of childs\n     * @example\n     * // get the first child object called \"mainPlayer\" in a specific container :\n     * let ent = myContainer.getChildByProp(\"name\", \"mainPlayer\");\n     *\n     * // or query the whole world :\n     * let ent = container.getChildByProp(\"name\", \"mainPlayer\");\n     *\n     * // partial property matches are also allowed by using a RegExp.\n     * // the following matches \"redCOIN\", \"bluecoin\", \"bagOfCoins\", etc :\n     * let allCoins = container.getChildByProp(\"name\", /coin/i);\n     *\n     * // searching for numbers or other data types :\n     * let zIndex10 = container.getChildByProp(\"z\", 10);\n     * let inViewport = container.getChildByProp(\"inViewport\", true);\n     */\n    getChildByProp(prop, value)    {\n        let objList = [];\n\n        /**\n         * @ignore\n         */\n        function compare(obj, prop) {\n            let v = obj[prop];\n            if (value instanceof RegExp && typeof(v) === \"string\") {\n                if (value.test(v)) {\n                    objList.push(obj);\n                }\n            }\n            else if (v === value) {\n                objList.push(obj);\n            }\n        }\n\n        this.forEach((child) => {\n            compare(child, prop);\n            if (child instanceof Container) {\n                objList = objList.concat(child.getChildByProp(prop, value));\n            }\n        });\n\n        return objList;\n    }\n\n    /**\n     * returns the list of childs with the specified class type\n     * @param {object} classType - Class type\n     * @returns {Renderable[]} Array of children\n     */\n    getChildByType(classType) {\n        let objList = [];\n\n        this.forEach((child) => {\n            if (child instanceof classType) {\n                objList.push(child);\n            }\n            if (child instanceof Container) {\n                objList = objList.concat(child.getChildByType(classType));\n            }\n        });\n\n        return objList;\n    }\n\n    /**\n     * returns the list of childs with the specified name<br>\n     * as defined in Tiled (Name field of the Object Properties)<br>\n     * note : avoid calling this function every frame since\n     * it parses the whole object list each time\n     * @param {string|RegExp|number|boolean} name - child name\n     * @returns {Renderable[]} Array of children\n     */\n    getChildByName(name) {\n        return this.getChildByProp(\"name\", name);\n    }\n\n    /**\n     * return the child corresponding to the specified GUID<br>\n     * note : avoid calling this function every frame since\n     * it parses the whole object list each time\n     * @param {string|RegExp|number|boolean} guid - child GUID\n     * @returns {Renderable} corresponding child or null\n     */\n    getChildByGUID(guid) {\n        let obj = this.getChildByProp(\"GUID\", guid);\n        return (obj.length > 0) ? obj[0] : null;\n    }\n\n    /**\n     * return all child in this container\n     * @returns {Renderable[]} an array of renderable object\n     */\n    getChildren() {\n        if (typeof this.children === \"undefined\") {\n            this.children = [];\n        }\n        return this.children;\n    }\n\n    /**\n     * update the bounding box for this container.\n     * @param {boolean} [absolute=true] - update the bounds size and position in (world) absolute coordinates\n     * @returns {Bounds} this container bounding box Rectangle object\n     */\n    updateBounds(absolute = true) {\n        let bounds = this.getBounds();\n\n        // call parent method\n        super.updateBounds(absolute);\n\n        if (this.enableChildBoundsUpdate === true) {\n            this.forEach((child) => {\n                if (child.isRenderable) {\n                    let childBounds = child.updateBounds(true);\n                    if (childBounds.isFinite()) {\n                        bounds.addBounds(childBounds);\n                    }\n                }\n            });\n        }\n\n        return bounds;\n    }\n\n    /**\n     * Checks if this container is root or if it's attached to the root container.\n     * @returns {boolean} true if this container is root or if it's attached to the root container\n     */\n    isAttachedToRoot() {\n        if (this.root === true) {\n            return true;\n        } else {\n            let ancestor = this.ancestor;\n            while (ancestor) {\n                if (ancestor.root === true) {\n                    return true;\n                }\n                ancestor = ancestor.ancestor;\n            }\n            return false;\n        }\n    }\n\n    /**\n     * Returns the instance of the root container (i.e. the current application World container).\n     * @returns {Container} root container\n     */\n    getRootAncestor() {\n        if (this.root === true) {\n            return this;\n        } else {\n            let ancestor = this.ancestor;\n            while (ancestor) {\n                if (ancestor.root === true) {\n                    break;\n                }\n                ancestor = ancestor.ancestor;\n            }\n            return ancestor;\n        }\n    }\n\n    /**\n     * update the cointainer's bounding rect (private)\n     * @ignore\n     */\n    updateBoundsPos(newX = this.pos.x, newY = this.pos.y) {\n        // call the parent method\n        super.updateBoundsPos(newX, newY);\n\n        // Notify children that the parent's position has changed\n        this.forEach((child) => {\n            if (child.isRenderable) {\n                child.updateBoundsPos(\n                    child.pos.x + newX - this.pos.x,\n                    child.pos.y + newY - this.pos.y\n                );\n            }\n        });\n    }\n\n    /**\n     * @ignore\n     */\n    onActivateEvent() {\n        this.forEach((child) => {\n            if (typeof child.onActivateEvent === \"function\") {\n                child.onActivateEvent();\n            }\n        });\n    }\n\n    /**\n     * Invokes the removeChildNow in a defer, to ensure the child is removed safely after the update & draw stack has completed. <br>\n     * if the given child implements a onDeactivateEvent() method, that method will be called once the child is removed from this container.\n     * @param {Renderable|Sprite|Collectable|Trigger|Draggable|DropTarget|NineSliceSprite|ImageLayer|ColorLayer|Light2d|UIBaseElement|UISpriteElement|UITextButton|Text|BitmapText} child - Child to be removed\n     * @param {boolean} [keepalive=false] - true to prevent calling child.destroy()\n     */\n    removeChild(child, keepalive) {\n        if (this.hasChild(child)) {\n            defer(deferredRemove, this, child, keepalive);\n        }\n        else {\n            throw new Error(\"Child is not mine.\");\n        }\n    }\n\n    /**\n     * Removes (and optionally destroys) a child from the container.<br>\n     * (removal is immediate and unconditional)<br>\n     * Never use keepalive=true with objects from {@link pool}. Doing so will create a memory leak.\n     * @param {Renderable|Entity|Sprite|Collectable|Trigger|Draggable|DropTarget|NineSliceSprite|ImageLayer|ColorLayer|Light2d|UIBaseElement|UISpriteElement|UITextButton|Text|BitmapText} child - Child to be removed\n     * @param {boolean} [keepalive=False] - True to prevent calling child.destroy()\n     */\n    removeChildNow(child, keepalive) {\n        if (this.hasChild(child) && (this.getChildIndex(child) >= 0)) {\n            if (typeof child.onDeactivateEvent === \"function\") {\n                child.onDeactivateEvent();\n            }\n\n            // remove the body first to avoid a condition where a body can be detached\n            // from its parent, before the body is removed from the game world\n            if (child.body instanceof Body) {\n                this.getRootAncestor().removeBody(child.body);\n            }\n\n            if (!keepalive) {\n                // attempt at recycling the object\n                if (pool.push(child, false) === false) {\n                    //  else just destroy it\n                    if (typeof child.destroy === \"function\") {\n                        child.destroy();\n                    }\n                }\n            }\n\n            // Don't cache the child index; another element might have been removed\n            // by the child's `onDeactivateEvent` or `destroy` methods\n            let childIndex = this.getChildIndex(child);\n            if (childIndex >= 0) {\n                this.getChildren().splice(childIndex, 1);\n                child.ancestor = undefined;\n            }\n\n            // force bounds update if required\n            if (this.enableChildBoundsUpdate === true) {\n                this.updateBounds();\n            }\n\n            // mark the container for repaint\n            this.isDirty = true;\n\n            // triggered callback if defined\n            this.onChildChange.call(this, childIndex);\n        }\n    }\n\n    /**\n     * Automatically set the specified property of all childs to the given value\n     * @param {string} prop - property name\n     * @param {object} value - property value\n     * @param {boolean} [recursive=false] - recursively apply the value to child containers if true\n     */\n    setChildsProperty(prop, value, recursive) {\n        this.forEach((child) => {\n            if ((recursive === true) && (child instanceof Container)) {\n                child.setChildsProperty(prop, value, recursive);\n            }\n            child[prop] = value;\n        });\n    }\n\n    /**\n     * Move the child in the group one step forward (z depth).\n     * @param {Renderable|Entity|Sprite|Collectable|Trigger|Draggable|DropTarget|NineSliceSprite|ImageLayer|ColorLayer|Light2d|UIBaseElement|UISpriteElement|UITextButton|Text|BitmapText} child -  Child to be moved\n     */\n    moveUp(child) {\n        let childIndex = this.getChildIndex(child);\n        if (childIndex - 1 >= 0) {\n            // note : we use an inverted loop\n            this.swapChildren(child, this.getChildAt(childIndex - 1));\n            // mark the container as dirty\n            this.isDirty = true;\n        }\n    }\n\n    /**\n     * Move the child in the group one step backward (z depth).\n     * @param {Renderable|Entity|Sprite|Collectable|Trigger|Draggable|DropTarget|NineSliceSprite|ImageLayer|ColorLayer|Light2d|UIBaseElement|UISpriteElement|UITextButton|Text|BitmapText} child - Child to be moved\n     */\n    moveDown(child) {\n        let childIndex = this.getChildIndex(child);\n        if (childIndex >= 0 && (childIndex + 1) < this.getChildren().length) {\n            // note : we use an inverted loop\n            this.swapChildren(child, this.getChildAt(childIndex + 1));\n            // mark the container as dirty\n            this.isDirty = true;\n        }\n    }\n\n    /**\n     * Move the specified child to the top(z depth).\n     * @param {Renderable|Entity|Sprite|Collectable|Trigger|Draggable|DropTarget|NineSliceSprite|ImageLayer|ColorLayer|Light2d|UIBaseElement|UISpriteElement|UITextButton|Text|BitmapText} child - Child to be moved\n     */\n    moveToTop(child) {\n        let childIndex = this.getChildIndex(child);\n        if (childIndex > 0) {\n            let children = this.getChildren();\n            // note : we use an inverted loop\n            children.splice(0, 0, children.splice(childIndex, 1)[0]);\n            // increment our child z value based on the previous child depth\n            child.pos.z = children[1].pos.z + 1;\n            // mark the container as dirty\n            this.isDirty = true;\n        }\n    }\n\n    /**\n     * Move the specified child the bottom (z depth).\n     * @param {Renderable|Entity|Sprite|Collectable|Trigger|Draggable|DropTarget|NineSliceSprite|ImageLayer|ColorLayer|Light2d|UIBaseElement|UISpriteElement|UITextButton|Text|BitmapText} child - Child to be moved\n     */\n    moveToBottom(child) {\n        let childIndex = this.getChildIndex(child);\n        let children = this.getChildren();\n        if (childIndex >= 0 && childIndex < (children.length - 1)) {\n            // note : we use an inverted loop\n            children.splice((children.length - 1), 0, children.splice(childIndex, 1)[0]);\n            // increment our child z value based on the next child depth\n            child.pos.z = children[(children.length - 2)].pos.z - 1;\n            // mark the container as dirty\n            this.isDirty = true;\n        }\n    }\n\n    /**\n     * Manually trigger the sort of all the childs in the container\n     * @param {boolean} [recursive=false] - recursively sort all containers if true\n     */\n    sort(recursive) {\n        // do nothing if there is already a pending sort\n        if (!this.pendingSort) {\n            if (recursive === true) {\n                this.forEach((child) => {\n                    if (child instanceof Container) {\n                        // note : this will generate one defered sorting function\n                        // for each existing containe\n                        child.sort(recursive);\n                    }\n                });\n            }\n            /** @ignore */\n            this.pendingSort = defer(function () {\n                // sort everything in this container\n                this.getChildren().sort(this[\"_sort\" + this.sortOn.toUpperCase()]);\n                // clear the defer id\n                this.pendingSort = null;\n                // make sure we redraw everything\n                this.isDirty = true;\n            }, this);\n        }\n    }\n\n    /**\n     * @ignore\n     */\n    onDeactivateEvent() {\n        this.forEach((child) => {\n            if (typeof child.onDeactivateEvent === \"function\") {\n                child.onDeactivateEvent();\n            }\n        });\n    }\n\n    /**\n     * Z Sorting function\n     * @ignore\n     */\n    _sortZ(a, b) {\n        return (b.pos && a.pos) ? (b.pos.z - a.pos.z) : (a.pos ? -Infinity : Infinity);\n    }\n\n    /**\n     * Reverse Z Sorting function\n     * @ignore\n     */\n    _sortReverseZ(a, b) {\n        return (a.pos && b.pos) ? (a.pos.z - b.pos.z) : (a.pos ? Infinity : -Infinity);\n    }\n\n    /**\n     * X Sorting function\n     * @ignore\n     */\n    _sortX(a, b) {\n        if (!b.pos || !a.pos) {\n            return (a.pos ? -Infinity : Infinity);\n        }\n        let result = b.pos.z - a.pos.z;\n        return (result ? result : (b.pos.x - a.pos.x));\n    }\n\n    /**\n     * Y Sorting function\n     * @ignore\n     */\n    _sortY(a, b) {\n        if (!b.pos || !a.pos) {\n            return (a.pos ? -Infinity : Infinity);\n        }\n        let result = b.pos.z - a.pos.z;\n        return (result ? result : (b.pos.y - a.pos.y));\n    }\n\n    /**\n     * Destroy function<br>\n     * @ignore\n     */\n    destroy() {\n        // empty the container\n        this.reset();\n        // call the parent destroy method\n        super.destroy(arguments);\n    }\n\n    /**\n     * container update function. <br>\n     * automatically called by the application update loop {@link Application}\n     * @protected\n     * @param {number} dt - time since the last update in milliseconds.\n     * @returns {boolean} true if the Container is dirty\n     */\n    update(dt) {\n        let isFloating = false;\n        let isPaused = state.isPaused();\n        let children = this.getChildren();\n        const childrenLength = children.length;\n\n        for (let i = childrenLength, obj; i--, (obj = children[i]);) {\n            if (isPaused && (!obj.updateWhenPaused)) {\n                // skip this object\n                continue;\n            }\n\n            if (obj.isRenderable) {\n                isFloating = (globalFloatingCounter > 0 || obj.floating);\n                if (isFloating) {\n                    globalFloatingCounter++;\n                }\n\n                // check if object is in any active cameras\n                obj.inViewport = false;\n                // iterate through all cameras\n                state.current().cameras.forEach((camera) => {\n                    if (camera.isVisible(obj, isFloating)) {\n                        obj.inViewport = true;\n                    }\n                });\n\n                // update our object\n                this.isDirty |= ((obj.inViewport || obj.alwaysUpdate) && obj.update(dt));\n\n                if (globalFloatingCounter > 0) {\n                    globalFloatingCounter--;\n                }\n            }\n            else {\n                // just directly call update() for non renderable object\n                this.isDirty |= obj.update(dt);\n            }\n        }\n\n        // call the parent method\n        return super.update(dt);\n    }\n\n    /**\n     * draw this renderable (automatically called by melonJS)\n     * @param {CanvasRenderer|WebGLRenderer} renderer - a renderer instance\n     * @param {Camera2d} [viewport] - the viewport to (re)draw\n     */\n    draw(renderer, viewport) {\n        let isFloating = false;\n        let bounds = this.getBounds();\n\n        this.drawCount = 0;\n\n        // clip the containter children to the container bounds\n        if (this.root === false && this.clipping === true && bounds.isFinite() === true) {\n            renderer.clipRect(\n                bounds.left,\n                bounds.top,\n                bounds.width,\n                bounds.height\n            );\n        }\n\n        // adjust position if required (e.g. canvas/window centering)\n        renderer.translate(this.pos.x, this.pos.y);\n\n        // color background if defined\n        if (this.backgroundColor.alpha > 1 / 255) {\n            renderer.clearColor(this.backgroundColor);\n        }\n\n        let children = this.getChildren();\n        for (let i = children.length, obj; i--, (obj = children[i]);) {\n            if (obj.isRenderable) {\n\n                isFloating = obj.floating === true;\n\n                if ((obj.inViewport || isFloating)) {\n\n                    if (isFloating) {\n                        // translate to screen coordinates\n                        renderer.save();\n                        renderer.resetTransform();\n                    }\n\n                    // predraw (apply transforms)\n                    obj.preDraw(renderer);\n\n                    // draw the object\n                    obj.draw(renderer, viewport);\n\n                    // postdraw (clean-up);\n                    obj.postDraw(renderer);\n\n                    // restore the previous \"state\"\n                    if (isFloating) {\n                        renderer.restore();\n                    }\n\n                    this.drawCount++;\n                }\n            }\n        }\n    }\n}\n\n/* eslint-disable no-unused-vars */\n\n\n/**\n * @classdesc\n * The map renderer base class\n */\nclass TMXRenderer {\n    /**\n     * @param {number} cols - width of the tilemap in tiles\n     * @param {number} rows - height of the tilemap in tiles\n     * @param {number} tilewidth - width of each tile in pixels\n     * @param {number} tileheight - height of each tile in pixels\n     */\n    constructor(cols, rows, tilewidth, tileheight) {\n        this.cols = cols;\n        this.rows = rows;\n        this.tilewidth = tilewidth;\n        this.tileheight = tileheight;\n        this.bounds = new Bounds();\n    }\n\n    /**\n     * return true if the renderer can render the specified map or layer\n     * @param {TMXTileMap|TMXLayer} component - TMX Map or Layer\n     * @returns {boolean}\n     */\n    canRender(component) {\n        return (\n            /*\n            // layers can have different size within\n            // the same maps, so commenting these two lines\n            (this.cols === component.cols) &&\n            (this.rows === component.rows) &&\n            */\n            (this.tilewidth === component.tilewidth) &&\n            (this.tileheight === component.tileheight)\n        );\n    }\n\n    /**\n     * return the bounding rect for this map renderer\n     * @param {TMXLayer} [layer] - calculate the bounding rect for a specific layer (will return a new bounds object)\n     * @returns {Bounds}\n     */\n    getBounds(layer) {\n        let bounds = layer instanceof TMXLayer ? pool.pull(\"Bounds\") : this.bounds;\n        bounds.setMinMax(\n            0, 0,\n            this.cols * this.tilewidth,\n            this.rows * this.tileheight\n        );\n        return bounds;\n    }\n\n    /**\n     * return the tile position corresponding to the specified pixel\n     * @param {number} x - X coordinate\n     * @param {number} y - Y coordinate\n     * @param {Vector2d} [v] - an optional vector object where to put the return values\n     * @returns {Vector2d}\n     */\n    pixelToTileCoords(x, y, v) {\n        return v;\n    }\n\n    /**\n     * return the pixel position corresponding of the specified tile\n     * @param {number} col - tile horizontal position\n     * @param {number} row - tile vertical position\n     * @param {Vector2d} [v] - an optional vector object where to put the return values\n     * @returns {Vector2d}\n     */\n    tileToPixelCoords(col, row, v) {\n        return v;\n    }\n\n    /**\n     * draw the given tile at the specified layer\n     * @param {CanvasRenderer|WebGLRenderer} renderer - a renderer object\n     * @param {number} x - X coordinate where to draw the tile\n     * @param {number} y - Y coordinate where to draw the tile\n     * @param {Tile} tile - the tile object to draw\n     */\n    drawTile(renderer, x, y, tile) {\n    }\n\n    /**\n     * draw the given TMX Layer for the given area\n     * @param {CanvasRenderer|WebGLRenderer} renderer - a renderer object\n     * @param {TMXLayer} layer - a TMX Layer object\n     * @param {Rect} rect - the area of the layer to draw\n     */\n    drawTileLayer(renderer, layer, rect) {\n    }\n\n}\n\n\n/* eslint-enable no-unused-vars */\n\n/**\n * @classdesc\n * an Orthogonal Map Renderder\n * @augments TMXRenderer\n */\nclass TMXOrthogonalRenderer extends TMXRenderer {\n    /**\n     * @param {TMXTileMap} map - the TMX map\n     */\n    constructor(map) {\n        super(\n            map.cols,\n            map.rows,\n            map.tilewidth,\n            map.tileheight\n        );\n    }\n\n    /**\n     * return true if the renderer can render the specified layer\n     * @ignore\n     */\n    canRender(layer) {\n        return (\n            (layer.orientation === \"orthogonal\") &&\n            super.canRender(layer)\n        );\n    }\n\n    /**\n     * return the tile position corresponding to the specified pixel\n     * @ignore\n     */\n    pixelToTileCoords(x, y, v) {\n        let ret = v || new Vector2d();\n        return ret.set(\n            x / this.tilewidth,\n            y / this.tileheight\n        );\n    }\n\n\n    /**\n     * return the pixel position corresponding of the specified tile\n     * @ignore\n     */\n    tileToPixelCoords(x, y, v) {\n        let ret = v || new Vector2d();\n        return ret.set(\n            x * this.tilewidth,\n            y * this.tileheight\n        );\n    }\n\n    /**\n     * fix the position of Objects to match\n     * the way Tiled places them\n     * @ignore\n     */\n    adjustPosition(obj) {\n        // only adjust position if obj.gid is defined\n        if (typeof(obj.gid) === \"number\") {\n            // Tiled objects origin point is \"bottom-left\" in Tiled,\n            // \"top-left\" in melonJS)\n            obj.y -= obj.height;\n        }\n    }\n\n    /**\n     * draw the tile map\n     * @ignore\n     */\n    drawTile(renderer, x, y, tmxTile) {\n        let tileset = tmxTile.tileset;\n        // draw the tile\n        tileset.drawTile(\n            renderer,\n            tileset.tileoffset.x + x * this.tilewidth,\n            tileset.tileoffset.y + (y + 1) * this.tileheight - tileset.tileheight,\n            tmxTile\n        );\n    }\n\n    /**\n     * draw the tile map\n     * @ignore\n     */\n    drawTileLayer(renderer, layer, rect) {\n        let incX = 1, incY = 1;\n\n        // get top-left and bottom-right tile position\n        let start = this.pixelToTileCoords(\n            Math.max(rect.pos.x - (layer.maxTileSize.width - layer.tilewidth), 0),\n            Math.max(rect.pos.y - (layer.maxTileSize.height - layer.tileheight), 0),\n            pool.pull(\"Vector2d\")\n        ).floorSelf();\n\n        let end = this.pixelToTileCoords(\n            rect.pos.x + rect.width + this.tilewidth,\n            rect.pos.y + rect.height + this.tileheight,\n            pool.pull(\"Vector2d\")\n        ).ceilSelf();\n\n        //ensure we are in the valid tile range\n        end.x = end.x > this.cols ? this.cols : end.x;\n        end.y = end.y > this.rows ? this.rows : end.y;\n\n        switch (layer.renderorder) {\n            case \"right-up\" :\n                // swapping start.y and end.y\n                end.y = start.y + (start.y = end.y) - end.y;\n                incY = -1;\n                break;\n            case \"left-down\" :\n                // swapping start.x and end.x\n                end.x = start.x + (start.x = end.x) - end.x;\n                incX = -1;\n                break;\n            case \"left-up\" :\n                // swapping start.x and end.x\n                end.x = start.x + (start.x = end.x) - end.x;\n                // swapping start.y and end.y\n                end.y = start.y + (start.y = end.y) - end.y;\n                incX = -1;\n                incY = -1;\n                break;\n            default: // right-down\n                break;\n        }\n\n        // main drawing loop\n        for (let y = start.y; y !== end.y; y += incY) {\n            for (let x = start.x; x !== end.x; x += incX) {\n                let tmxTile = layer.cellAt(x, y, false);\n                if (tmxTile) {\n                    this.drawTile(renderer, x, y, tmxTile);\n                }\n            }\n        }\n\n        pool.push(start);\n        pool.push(end);\n    }\n}\n\n/**\n * @classdesc\n * an Isometric Map Renderder\n * @augments TMXRenderer\n */\nclass TMXIsometricRenderer extends TMXRenderer {\n    /**\n     * @param {TMXTileMap} map - the TMX map\n     */\n    constructor(map) {\n        super(\n            map.cols,\n            map.rows,\n            map.tilewidth,\n            map.tileheight\n        );\n\n        this.hTilewidth = this.tilewidth / 2;\n        this.hTileheight = this.tileheight / 2;\n        this.originX = this.rows * this.hTilewidth;\n    }\n\n    /**\n     * return true if the renderer can render the specified layer\n     * @ignore\n     */\n    canRender(layer) {\n        return (\n            (layer.orientation === \"isometric\") &&\n            super.canRender(layer)\n        );\n    }\n\n    /**\n     * return the bounding rect for this map renderer\n     * @ignore\n     */\n    getBounds(layer) {\n        let bounds = layer instanceof TMXLayer ? pool.pull(\"Bounds\") : this.bounds;\n        bounds.setMinMax(\n            0, 0,\n            (this.cols + this.rows) * (this.tilewidth / 2),\n            (this.cols + this.rows) * (this.tileheight / 2)\n        );\n        return bounds;\n    }\n\n    /**\n     * return the tile position corresponding to the specified pixel\n     * @ignore\n     */\n    pixelToTileCoords(x, y, v) {\n        let ret = v || new Vector2d();\n        return ret.set(\n            (y / this.tileheight) + ((x - this.originX) / this.tilewidth),\n            (y / this.tileheight) - ((x - this.originX) / this.tilewidth)\n        );\n    }\n\n    /**\n     * return the pixel position corresponding of the specified tile\n     * @ignore\n     */\n    tileToPixelCoords(x, y, v) {\n        let ret = v || new Vector2d();\n        return ret.set(\n            (x - y) * this.hTilewidth + this.originX,\n            (x + y) * this.hTileheight\n        );\n    }\n\n    /**\n     * fix the position of Objects to match\n     * the way Tiled places them\n     * @ignore\n     */\n    adjustPosition(obj) {\n        let tileX = obj.x / this.hTilewidth;\n        let tileY = obj.y / this.tileheight;\n        let isoPos = pool.pull(\"Vector2d\");\n\n        this.tileToPixelCoords(tileX, tileY, isoPos);\n\n        obj.x = isoPos.x;\n        obj.y = isoPos.y;\n\n        pool.push(isoPos);\n    }\n\n    /**\n     * draw the tile map\n     * @ignore\n     */\n    drawTile(renderer, x, y, tmxTile) {\n        let tileset = tmxTile.tileset;\n        // draw the tile\n        tileset.drawTile(\n            renderer,\n            ((this.cols - 1) * tileset.tilewidth + (x - y) * tileset.tilewidth >> 1),\n            (-tileset.tilewidth + (x + y) * tileset.tileheight >> 2),\n            tmxTile\n        );\n    }\n\n    /**\n     * draw the tile map\n     * @ignore\n     */\n    drawTileLayer(renderer, layer, rect) {\n        // cache a couple of useful references\n        let tileset = layer.tileset;\n\n        // get top-left and bottom-right tile position\n        let rowItr = this.pixelToTileCoords(\n            rect.pos.x - tileset.tilewidth,\n            rect.pos.y - tileset.tileheight,\n            pool.pull(\"Vector2d\")\n        ).floorSelf();\n        let tileEnd = this.pixelToTileCoords(\n            rect.pos.x + rect.width + tileset.tilewidth,\n            rect.pos.y + rect.height + tileset.tileheight,\n            pool.pull(\"Vector2d\")\n        ).ceilSelf();\n\n        let rectEnd = this.tileToPixelCoords(tileEnd.x, tileEnd.y, pool.pull(\"Vector2d\"));\n\n        // Determine the tile and pixel coordinates to start at\n        let startPos = this.tileToPixelCoords(rowItr.x, rowItr.y, pool.pull(\"Vector2d\"));\n        startPos.x -= this.hTilewidth;\n        startPos.y += this.tileheight;\n\n        /* Determine in which half of the tile the top-left corner of the area we\n         * need to draw is. If we're in the upper half, we need to start one row\n         * up due to those tiles being visible as well. How we go up one row\n         * depends on whether we're in the left or right half of the tile.\n         */\n        let inUpperHalf = startPos.y - rect.pos.y > this.hTileheight;\n        let inLeftHalf  = rect.pos.x - startPos.x < this.hTilewidth;\n\n        if (inUpperHalf) {\n            if (inLeftHalf) {\n                rowItr.x--;\n                startPos.x -= this.hTilewidth;\n            }\n            else {\n                rowItr.y--;\n                startPos.x += this.hTilewidth;\n            }\n            startPos.y -= this.hTileheight;\n        }\n\n        // Determine whether the current row is shifted half a tile to the right\n        let shifted = inUpperHalf ^ inLeftHalf;\n\n        // initialize the columItr vector\n        let columnItr = rowItr.clone();\n\n        // main drawing loop\n        for (let y = startPos.y * 2; y - this.tileheight * 2 < rectEnd.y * 2; y += this.tileheight) {\n            columnItr.setV(rowItr);\n            for (let x = startPos.x; x < rectEnd.x; x += this.tilewidth) {\n                let tmxTile = layer.cellAt(columnItr.x, columnItr.y);\n                // render if a valid tile position\n                if (tmxTile) {\n                    tileset = tmxTile.tileset;\n                    // offset could be different per tileset\n                    let offset  = tileset.tileoffset;\n                    // draw our tile\n                    tileset.drawTile(\n                        renderer,\n                        offset.x + x,\n                        offset.y + y / 2 - tileset.tileheight,\n                        tmxTile\n                    );\n                }\n\n                // Advance to the next column\n                columnItr.x++;\n                columnItr.y--;\n            }\n\n            // Advance to the next row\n            if (!shifted) {\n                rowItr.x++;\n                startPos.x += this.hTilewidth;\n                shifted = true;\n            }\n            else {\n                rowItr.y++;\n                startPos.x -= this.hTilewidth;\n                shifted = false;\n            }\n        }\n\n        pool.push(columnItr);\n        pool.push(rowItr);\n        pool.push(tileEnd);\n        pool.push(rectEnd);\n        pool.push(startPos);\n    }\n}\n\n// scope global variables & constants\nconst offsetsStaggerX = [\n    {x:   0, y:   0},\n    {x: + 1, y: - 1},\n    {x: + 1, y:   0},\n    {x: + 2, y:   0}\n];\nconst offsetsStaggerY = [\n    {x:   0, y:   0},\n    {x: - 1, y: + 1},\n    {x:   0, y: + 1},\n    {x:   0, y: + 2}\n];\n\n/**\n * @classdesc\n * an Hexagonal Map Renderder\n * @augments TMXRenderer\n */\nclass TMXHexagonalRenderer extends TMXRenderer {\n    /**\n     * @param {TMXTileMap} map - the TMX map\n     */\n    constructor(map) {\n        super(\n            map.cols,\n            map.rows,\n            map.tilewidth & ~1,\n            map.tileheight & ~1\n        );\n\n        this.hexsidelength = map.hexsidelength || 0;\n        this.staggerX = map.staggeraxis === \"x\";\n        this.staggerEven = map.staggerindex === \"even\";\n\n        this.sidelengthx = 0;\n        this.sidelengthy = 0;\n\n        if (map.orientation === \"hexagonal\") {\n            if (this.staggerX) {\n                this.sidelengthx = this.hexsidelength;\n            }\n            else {\n                this.sidelengthy = this.hexsidelength;\n            }\n        }\n\n        this.sideoffsetx = (this.tilewidth - this.sidelengthx) / 2;\n        this.sideoffsety = (this.tileheight - this.sidelengthy) / 2;\n\n        this.columnwidth = this.sideoffsetx + this.sidelengthx;\n        this.rowheight = this.sideoffsety + this.sidelengthy;\n\n        this.centers = [\n            new Vector2d(),\n            new Vector2d(),\n            new Vector2d(),\n            new Vector2d()\n        ];\n    }\n\n    /**\n     * return true if the renderer can render the specified layer\n     * @ignore\n     */\n    canRender(layer) {\n        return (\n            (layer.orientation === \"hexagonal\") &&\n            super.canRender(layer)\n        );\n    }\n\n    /**\n     * return the bounding rect for this map renderer\n     * @ignore\n     */\n    getBounds(layer) {\n        let bounds = layer instanceof TMXLayer ? pool.pull(\"Bounds\") : this.bounds;\n\n        // The map size is the same regardless of which indexes are shifted.\n        if (this.staggerX) {\n            bounds.setMinMax(\n                0, 0,\n                this.cols * this.columnwidth + this.sideoffsetx,\n                this.rows * (this.tileheight + this.sidelengthy)\n            );\n            if (bounds.width > 1) {\n                bounds.height += this.rowheight;\n            }\n        } else {\n            bounds.setMinMax(\n                0, 0,\n                this.cols * (this.tilewidth + this.sidelengthx),\n                this.rows * this.rowheight + this.sideoffsety\n            );\n            if (bounds.height > 1) {\n                bounds.width += this.columnwidth;\n            }\n        }\n        return bounds;\n    }\n\n    /**\n     * @ignore\n     */\n    doStaggerX (x) {\n        return this.staggerX && (x & 1) ^ this.staggerEven;\n    }\n\n    /**\n     * @ignore\n     */\n    doStaggerY(y) {\n        return !this.staggerX && (y & 1) ^ this.staggerEven;\n    }\n\n    /**\n     * @ignore\n     */\n    topLeft(x, y, v) {\n        let ret = v || new Vector2d();\n\n        if (!this.staggerX) {\n            if ((y & 1) ^ this.staggerEven) {\n                ret.set(x, y - 1);\n            }\n            else {\n                ret.set(x - 1, y - 1);\n            }\n        } else {\n            if ((x & 1) ^ this.staggerEven) {\n                ret.set(x - 1, y);\n            }\n            else {\n                ret.set(x - 1, y - 1);\n            }\n        }\n        return ret;\n    }\n\n    /**\n     * @ignore\n     */\n    topRight(x, y, v) {\n        let ret = v || new Vector2d();\n\n        if (!this.staggerX) {\n            if ((y & 1) ^ this.staggerEven) {\n                ret.set(x + 1, y - 1);\n            }\n            else {\n                ret.set(x, y - 1);\n            }\n        } else {\n            if ((x & 1) ^ this.staggerEven) {\n                ret.set(x + 1, y);\n            }\n            else {\n                ret.set(x + 1, y - 1);\n            }\n        }\n        return ret;\n    }\n\n\n    /**\n     * @ignore\n     */\n    bottomLeft(x, y, v) {\n        let ret = v || new Vector2d();\n\n        if (!this.staggerX) {\n            if ((y & 1) ^ this.staggerEven) {\n                ret.set(x, y + 1);\n            }\n            else {\n                ret.set(x - 1, y + 1);\n            }\n        } else {\n            if ((x & 1) ^ this.staggerEven) {\n                ret.set(x - 1, y + 1);\n            }\n            else {\n                ret.set(x - 1, y);\n            }\n        }\n        return ret;\n    }\n\n    /**\n     * @ignore\n     */\n    bottomRight(x, y, v) {\n        let ret = v || new Vector2d();\n\n        if (!this.staggerX) {\n            if ((y & 1) ^ this.staggerEven) {\n                ret.set(x + 1, y + 1);\n            }\n            else {\n                ret.set(x, y + 1);\n            }\n        } else {\n            if ((x & 1) ^ this.staggerEven) {\n                ret.set(x + 1, y + 1);\n            }\n            else {\n                ret.set(x + 1, y);\n            }\n        }\n        return ret;\n    }\n\n    /**\n     * return the tile position corresponding to the specified pixel\n     * @ignore\n     */\n    pixelToTileCoords(x, y, v) {\n        let ret = v || new Vector2d();\n\n        if (this.staggerX) { //flat top\n            x -= this.staggerEven ? this.tilewidth : this.sideoffsetx;\n        }\n        else { //pointy top\n            y -= this.staggerEven ? this.tileheight : this.sideoffsety;\n        }\n\n        // Start with the coordinates of a grid-aligned tile\n        let referencePoint = pool.pull(\"Vector2d\",\n            Math.floor(x / (this.columnwidth * 2)),\n            Math.floor((y / (this.rowheight * 2)))\n        );\n\n        // Relative x and y position on the base square of the grid-aligned tile\n        let rel = pool.pull(\"Vector2d\",\n            x - referencePoint.x * (this.columnwidth * 2),\n            y - referencePoint.y * (this.rowheight * 2)\n        );\n\n        // Adjust the reference point to the correct tile coordinates\n        if (this.staggerX) {\n            referencePoint.x = referencePoint.x * 2;\n            if (this.staggerEven) {\n                ++referencePoint.x;\n            }\n        }\n        else {\n            referencePoint.y = referencePoint.y * 2;\n            if (this.staggerEven) {\n                ++referencePoint.y;\n            }\n        }\n\n        // Determine the nearest hexagon tile by the distance to the center\n        let left, top, centerX, centerY;\n        if (this.staggerX) {\n            left = this.sidelengthx / 2;\n            centerX = left + this.columnwidth;\n            centerY = this.tileheight / 2;\n\n            this.centers[0].set(left, centerY);\n            this.centers[1].set(centerX, centerY - this.rowheight);\n            this.centers[2].set(centerX, centerY + this.rowheight);\n            this.centers[3].set(centerX + this.columnwidth, centerY);\n        }\n        else {\n            top = this.sidelengthy / 2;\n            centerX = this.tilewidth / 2;\n            centerY = top + this.rowheight;\n\n            this.centers[0].set(centerX, top);\n            this.centers[1].set(centerX - this.columnwidth, centerY);\n            this.centers[2].set(centerX + this.columnwidth, centerY);\n            this.centers[3].set(centerX, centerY + this.rowheight);\n        }\n\n        let nearest = 0;\n        let minDist = Number.MAX_VALUE;\n        for (let i = 0; i < 4; ++i) {\n            const dc = this.centers[i].sub(rel).length2();\n            if (dc < minDist) {\n                minDist = dc;\n                nearest = i;\n            }\n        }\n\n        let offsets = (this.staggerX) ? offsetsStaggerX : offsetsStaggerY;\n\n        ret.set(\n            referencePoint.x + offsets[nearest].x,\n            referencePoint.y + offsets[nearest].y\n        );\n\n        pool.push(referencePoint);\n        pool.push(rel);\n\n        return ret;\n    }\n\n    /**\n     * return the pixel position corresponding of the specified tile\n     * @ignore\n     */\n    tileToPixelCoords(x, y, v) {\n        let tileX = Math.floor(x),\n            tileY = Math.floor(y);\n        let ret = v || new Vector2d();\n\n        if (this.staggerX) {\n            ret.y = tileY * (this.tileheight + this.sidelengthy);\n            if (this.doStaggerX(tileX)) {\n                ret.y += this.rowheight;\n            }\n            ret.x = tileX * this.columnwidth;\n        } else {\n            ret.x = tileX * (this.tilewidth + this.sidelengthx);\n            if (this.doStaggerY(tileY)) {\n                ret.x += this.columnwidth;\n            }\n            ret.y = tileY * this.rowheight;\n        }\n\n        return ret;\n    }\n\n    /**\n     * fix the position of Objects to match\n     * the way Tiled places them\n     * @ignore\n     */\n    adjustPosition(obj) {\n        // only adjust position if obj.gid is defined\n        if (typeof(obj.gid) === \"number\") {\n            // Tiled objects origin point is \"bottom-left\" in Tiled,\n            // \"top-left\" in melonJS)\n            obj.y -= obj.height;\n        }\n    }\n\n    /**\n     * draw the tile map\n     * @ignore\n     */\n    drawTile(renderer, x, y, tmxTile) {\n        let tileset = tmxTile.tileset;\n        let point = this.tileToPixelCoords(x, y, pool.pull(\"Vector2d\"));\n\n        // draw the tile\n        tileset.drawTile(\n            renderer,\n            tileset.tileoffset.x + point.x,\n            tileset.tileoffset.y + point.y + (this.tileheight - tileset.tileheight),\n            tmxTile\n        );\n\n        pool.push(point);\n    }\n\n    /**\n     * draw the tile map\n     * @ignore\n     */\n    drawTileLayer(renderer, layer, rect) {\n        let tile;\n\n        // get top-left and bottom-right tile position\n        let startTile = this.pixelToTileCoords(\n            rect.pos.x,\n            rect.pos.y,\n            pool.pull(\"Vector2d\")\n        );\n\n        // Compensate for the layer position\n        startTile.sub(layer.pos);\n\n        // get top-left and bottom-right tile position\n        let startPos = this.tileToPixelCoords(\n            startTile.x + layer.pos.x,\n            startTile.y + layer.pos.y,\n            pool.pull(\"Vector2d\")\n        );\n\n        let rowTile = startTile.clone();\n        let rowPos = startPos.clone();\n\n        /* Determine in which half of the tile the top-left corner of the area we\n        * need to draw is. If we're in the upper half, we need to start one row\n        * up due to those tiles being visible as well. How we go up one row\n        * depends on whether we're in the left or right half of the tile.\n        */\n        let inUpperHalf = rect.pos.y - startPos.y < this.sideoffsety;\n        let inLeftHalf = rect.pos.x - startPos.x < this.sideoffsetx;\n\n        if (inUpperHalf) {\n            startTile.y--;\n        }\n        if (inLeftHalf) {\n            startTile.x--;\n        }\n\n        let endX = layer.cols;\n        let endY = layer.rows;\n\n        if (this.staggerX) {\n            //ensure we are in the valid tile range\n            startTile.x = Math.max(0, startTile.x);\n            startTile.y = Math.max(0, startTile.y);\n\n            startPos = this.tileToPixelCoords(\n                startTile.x + layer.pos.x,\n                startTile.y + layer.pos.y,\n                startPos\n            );\n\n            let staggeredRow = this.doStaggerX(startTile.x + layer.pos.x);\n\n            // main drawing loop\n            for (; startPos.y < rect.bottom && startTile.y < endY;) {\n                rowTile.setV(startTile);\n                rowPos.setV(startPos);\n\n                for (; rowPos.x < rect.right && rowTile.x < endX; rowTile.x += 2) {\n                    tile = layer.cellAt(rowTile.x, rowTile.y, false);\n                    if (tile) {\n                        // draw the tile\n                        tile.tileset.drawTile(renderer, rowPos.x, rowPos.y, tile);\n                    }\n                    rowPos.x += this.tilewidth + this.sidelengthx;\n                }\n\n                if (staggeredRow) {\n                    startTile.x -= 1;\n                    startTile.y += 1;\n                    startPos.x -= this.columnwidth;\n                    staggeredRow = false;\n                } else {\n                    startTile.x += 1;\n                    startPos.x += this.columnwidth;\n                    staggeredRow = true;\n                }\n\n                startPos.y += this.rowheight;\n            }\n            pool.push(rowTile);\n            pool.push(rowPos);\n\n        } else {\n            //ensure we are in the valid tile range\n            startTile.x = Math.max(0, startTile.x);\n            startTile.y = Math.max(0, startTile.y);\n\n            startPos = this.tileToPixelCoords(\n                startTile.x + layer.pos.x,\n                startTile.y + layer.pos.y,\n                startPos\n            );\n\n            // Odd row shifting is applied in the rendering loop, so un-apply it here\n            if (this.doStaggerY(startTile.y)) {\n                startPos.x -= this.columnwidth;\n            }\n\n            // main drawing loop\n            for (; startPos.y < rect.bottom && startTile.y < endY; startTile.y++) {\n                rowTile.setV(startTile);\n                rowPos.setV(startPos);\n\n                if (this.doStaggerY(startTile.y)) {\n                    rowPos.x += this.columnwidth;\n                }\n\n                for (; rowPos.x < rect.right && rowTile.x < endX; rowTile.x++) {\n                    tile = layer.cellAt(rowTile.x, rowTile.y, false);\n                    if (tile) {\n                        // draw the tile\n                        tile.tileset.drawTile(renderer, rowPos.x, rowPos.y, tile);\n                    }\n                    rowPos.x += this.tilewidth + this.sidelengthx;\n                }\n                startPos.y += this.rowheight;\n            }\n            pool.push(rowTile);\n            pool.push(rowPos);\n        }\n\n        pool.push(startTile);\n        pool.push(startPos);\n    }\n}\n\n/**\n * @classdesc\n * a Staggered Map Renderder\n * @augments TMXHexagonalRenderer\n */\nclass TMXStaggeredRenderer extends TMXHexagonalRenderer {\n\n    /**\n     * return true if the renderer can render the specified layer\n     * @ignore\n     */\n    canRender(layer) {\n        return (\n            (layer.orientation === \"staggered\") &&\n            super.canRender(layer)\n        );\n    }\n\n    /**\n     * return the tile position corresponding to the specified pixel\n     * @ignore\n     */\n    pixelToTileCoords(x, y, v) {\n        let ret = v || new Vector2d();\n\n        let alignedX = x,\n            alignedY = y;\n\n        if (this.staggerX) {\n            alignedX -= this.staggerEven ? this.sideoffsetx : 0;\n        } else {\n            alignedY -= this.staggerEven ? this.sideoffsety : 0;\n        }\n\n        // Start with the coordinates of a grid-aligned tile\n        let referencePoint = pool.pull(\"Vector2d\",\n            Math.floor(alignedX / this.tilewidth),\n            Math.floor(alignedY / this.tileheight)\n        );\n\n        // Adjust the reference point to the correct tile coordinates\n        if (this.staggerX) {\n            referencePoint.x = referencePoint.x * 2;\n            if (this.staggerEven) {\n                ++referencePoint.x;\n            }\n        } else {\n            referencePoint.y = referencePoint.y * 2;\n            if (this.staggerEven) {\n                ++referencePoint.y;\n            }\n        }\n\n        // Relative x and y position on the base square of the grid-aligned tile\n        let rel = pool.pull(\"Vector2d\",\n            alignedX - referencePoint.x * this.tilewidth,\n            alignedY - referencePoint.y * this.tileheight\n        );\n\n        // Check whether the cursor is in any of the corners (neighboring tiles)\n        let y_pos = rel.x * (this.tileheight / this.tilewidth);\n\n        if (this.sideoffsety - y_pos > rel.y) {\n            referencePoint = this.topLeft(referencePoint.x, referencePoint.y, referencePoint);\n        }\n        if (-this.sideoffsety + y_pos > rel.y) {\n            referencePoint = this.topRight(referencePoint.x, referencePoint.y, referencePoint);\n        }\n        if (this.sideoffsety + y_pos < rel.y) {\n            referencePoint = this.bottomLeft(referencePoint.x, referencePoint.y, referencePoint);\n        }\n        if (this.sideoffsety * 3 - y_pos < rel.y) {\n            referencePoint = this.bottomRight(referencePoint.x, referencePoint.y, referencePoint);\n        }\n\n        ret = this.tileToPixelCoords(referencePoint.x, referencePoint.y, ret);\n\n        ret.set(x - ret.x, y - ret.y);\n\n        // Start with the coordinates of a grid-aligned tile\n        ret.set(\n            ret.x - (this.tilewidth / 2),\n            ret.y * (this.tilewidth / this.tileheight)\n        );\n\n        ret.div(this.tilewidth / Math.sqrt(2)).rotate(degToRad(-45)).add(referencePoint);\n\n        pool.push(referencePoint);\n        pool.push(rel);\n\n        return ret;\n    }\n}\n\n/**\n * return a compatible renderer object for the given map\n * @param {TMXTileMap} map\n * @ignore\n */\nfunction getNewTMXRenderer(map) {\n    switch (map.orientation) {\n        case \"orthogonal\":\n            return new TMXOrthogonalRenderer(map);\n\n        case \"isometric\":\n            return new TMXIsometricRenderer(map);\n\n        case \"hexagonal\":\n            return new TMXHexagonalRenderer(map);\n\n        case \"staggered\":\n            return new TMXStaggeredRenderer(map);\n\n        // if none found, throw an exception\n        default:\n            throw new Error(map.orientation + \" type TMX Tile Map not supported!\");\n    }\n}\n\n/**\n * display a deprecation warning in the console\n * @param {string} deprecated - deprecated class,function or property name\n * @param {string} replacement - the replacement class, function, or property name\n * @param {string} version - the version since when the lass,function or property is deprecated\n */\nfunction warning(deprecated, replacement, version) {\n    const msg = \"melonJS: %s is deprecated since version %s, please use %s\";\n    let stack = new Error().stack;\n\n    if (console.groupCollapsed) {\n        console.groupCollapsed(\n            \"%c\" + msg,\n            \"font-weight:normal;color:yellow;\",\n            deprecated,\n            version,\n            replacement\n        );\n    } else {\n        console.warn(\n            msg,\n            deprecated,\n            version,\n            replacement\n        );\n    }\n\n    if (typeof stack !== \"undefined\") {\n        console.warn(stack);\n    }\n\n    if (console.groupCollapsed) {\n        console.groupEnd();\n    }\n}\n\n/**\n * read the layer Data\n * @ignore\n */\nfunction readLayer(map, data, z) {\n    return new TMXLayer(map, data, map.tilewidth, map.tileheight, map.orientation, map.tilesets, z);\n}\n\n/**\n * read the Image Layer Data\n * @ignore\n */\nfunction readImageLayer(map, data, z) {\n    // Normalize properties\n    applyTMXProperties(data.properties, data);\n\n    // create the layer\n    let imageLayer = pool.pull(\"ImageLayer\",\n        // x/y is deprecated since 0.15 and replace by offsetx/y\n        +data.offsetx || +data.x || 0,\n        +data.offsety || +data.y || 0,\n        Object.assign({\n            name: data.name,\n            image: data.image,\n            ratio : pool.pull(\"Vector2d\", +data.parallaxx || 1.0, +data.parallaxy || 1.0),\n            // convert to melonJS color format (note: this should be done earlier when parsing data)\n            tint : typeof (data.tintcolor) !== \"undefined\" ? (pool.pull(\"Color\")).parseHex(data.tintcolor, true) : undefined,\n            z: z\n        }, data.properties)\n    );\n\n\n    // set some additional flags\n    let visible = typeof(data.visible) !== \"undefined\" ? data.visible : true;\n    imageLayer.setOpacity(visible ? +data.opacity : 0);\n\n    return imageLayer;\n}\n\n/**\n * read the tileset Data\n * @ignore\n */\nfunction readTileset(data) {\n    return (new TMXTileset(data));\n}\n\n/**\n * read the object group Data\n * @ignore\n */\nfunction readObjectGroup(map, data, z) {\n    return (new TMXGroup(map, data, z));\n}\n\n/**\n * @classdesc\n * a TMX Tile Map Object\n * Tiled QT +0.7.x format\n */\nclass TMXTileMap {\n    /**\n     * @param {string} levelId - name of TMX map\n     * @param {object} data - TMX map in JSON format\n     * @example\n     * // create a new level object based on the TMX JSON object\n     * let level = new me.TMXTileMap(levelId, me.loader.getTMX(levelId));\n     * // add the level to the game world container\n     * level.addTo(me.game.world, true);\n     */\n    constructor(levelId, data) {\n\n        /**\n         * the level data (JSON)\n         * @ignore\n         */\n        this.data = data;\n\n        /**\n         * name of the tilemap\n         * @type {string}\n         */\n        this.name = levelId;\n\n        /**\n         * width of the tilemap in tiles\n         * @type {number}\n         */\n        this.cols = +data.width;\n\n        /**\n         * height of the tilemap in tiles\n         * @type {number}\n         */\n        this.rows = +data.height;\n\n        /**\n         * Tile width\n         * @type {number}\n         */\n        this.tilewidth = +data.tilewidth;\n\n        /**\n         * Tile height\n         * @type {number}\n         */\n        this.tileheight = +data.tileheight;\n\n        /**\n         * is the map an infinite map\n         * @type {number}\n         * @default 0\n         */\n        this.infinite = +data.infinite || 0;\n\n        /**\n         * the map orientation type. melonJS supports âorthogonalâ, âisometricâ, âstaggeredâ and âhexagonalâ.\n         * @type {string}\n         * @default \"orthogonal\"\n         */\n        this.orientation = data.orientation;\n\n        /**\n         * the order in which tiles on orthogonal tile layers are rendered.\n         * (valid values are \"left-down\", \"left-up\", \"right-down\", \"right-up\")\n         * @type {string}\n         * @default \"right-down\"\n         */\n        this.renderorder = data.renderorder || \"right-down\";\n\n        /**\n         * the TMX format version\n         * @type {string}\n         */\n        this.version = \"\" + data.version;\n\n        /**\n         * The Tiled version used to save the file (since Tiled 1.0.1).\n         * @type {string}\n         */\n        this.tiledversion = \"\" + data.tiledversion;\n\n        /**\n         * The map class.\n         * @type {string}\n         */\n        this.class = data.class;\n\n        // tilesets for this map\n        this.tilesets = null;\n\n        // layers\n        if (typeof this.layers === \"undefined\") {\n            this.layers = [];\n        }\n        // group objects\n        if (typeof this.objectGroups === \"undefined\") {\n            this.objectGroups = [];\n        }\n\n        // Check if map is from melon editor\n        this.isEditor = data.editor === \"melon-editor\";\n\n        // object id\n        this.nextobjectid = +data.nextobjectid || undefined;\n\n        // hex/iso properties\n        this.hexsidelength = +data.hexsidelength;\n        this.staggeraxis = data.staggeraxis;\n        this.staggerindex = data.staggerindex;\n\n        // calculate the map bounding rect\n        this.bounds = this.getRenderer().getBounds().clone();\n\n        // map \"real\" size\n        this.width = this.bounds.width;\n        this.height = this.bounds.height;\n\n        // background color\n        this.backgroundcolor = data.backgroundcolor;\n\n        // if version is undefined or empty it usually means the map was not created with Tiled\n        if (this.version !== \"undefined\" && this.version !== \"\") {\n            // deprecation warning if map tiled version is older than 1.5\n            if (checkVersion(this.version, \"1.5\") < 0) {\n                warning(\"(\" + this.name + \") Tiled Map format version 1.4 and below\", \"format 1.5 or higher\", \"10.4.4\");\n            }\n        }\n\n\n        // set additional map properties (if any)\n        applyTMXProperties(this, data);\n\n        // internal flag\n        this.initialized = false;\n    }\n\n    /**\n     * Return the map default renderer\n     * @returns {TMXRenderer} a TMX renderer\n     */\n    getRenderer() {\n        if ((typeof(this.renderer) === \"undefined\") || (!this.renderer.canRender(this))) {\n            this.renderer = getNewTMXRenderer(this);\n        }\n        return this.renderer;\n    }\n\n    /**\n     * return the map bounding rect\n     * @returns {Bounds}\n     */\n    getBounds() {\n        // calculated in the constructor\n        return this.bounds;\n    }\n\n    /**\n     * parse the map\n     * @ignore\n     */\n    readMapObjects(data) {\n\n        if (this.initialized === true) {\n            return;\n        }\n\n        // to automatically increment z index\n        let zOrder = 0;\n\n        // Tileset information\n        if (!this.tilesets) {\n            // make sure we have a TilesetGroup Object\n            this.tilesets = new TMXTilesetGroup();\n        }\n\n        // parse all tileset objects\n        if (typeof (data.tilesets) !== \"undefined\") {\n            let tilesets = data.tilesets;\n            tilesets.forEach((tileset) => {\n                // add the new tileset\n                this.tilesets.add(readTileset(tileset));\n            });\n        }\n\n        // check if a background image is defined\n        if (this.background_image) {\n            // add a new image layer\n            this.layers.push(\n                pool.pull(\"ImageLayer\",\n                    0, 0, {\n                        name : \"background_image\",\n                        image : this.background_image,\n                        z : zOrder++\n                    }\n                ));\n        }\n\n        data.layers.forEach((layer) => {\n            switch (layer.type) {\n                case \"imagelayer\":\n                    this.layers.push(readImageLayer(this, layer, zOrder++));\n                    break;\n\n                case \"tilelayer\":\n                    this.layers.push(readLayer(this, layer, zOrder++));\n                    break;\n\n                // get the object groups information\n                case \"objectgroup\":\n                    this.objectGroups.push(readObjectGroup(this, layer, zOrder++));\n                    break;\n\n                // get the object groups information\n                case \"group\":\n                    this.objectGroups.push(readObjectGroup(this, layer, zOrder++));\n                    break;\n\n                default:\n                    break;\n            }\n        });\n\n        this.initialized = true;\n    }\n\n\n    /**\n     * add all the map layers and objects to the given container.\n     * note : this will not automatically update the camera viewport\n     * @param {Container} container - target container\n     * @param {boolean} [flatten=true] - if true, flatten all objects into the given container, else a `me.Container` object will be created for each corresponding groups\n     * @param {boolean} [setViewportBounds=false] - if true, set the viewport bounds to the map size, this should be set to true especially if adding a level to the game world container.\n     * @example\n     * // create a new level object based on the TMX JSON object\n     * let level = new me.TMXTileMap(levelId, me.loader.getTMX(levelId));\n     * // add the level to the game world container\n     * level.addTo(me.game.world, true, true);\n     */\n    addTo(container, flatten, setViewportBounds) {\n        let _sort = container.autoSort;\n        let _depth = container.autoDepth;\n\n        let levelBounds = this.getBounds();\n\n        // disable auto-sort and auto-depth\n        container.autoSort = false;\n        container.autoDepth = false;\n\n        if (this.backgroundcolor) {\n            container.backgroundColor.parseCSS(this.backgroundcolor);\n        }\n\n        // add all layers instances\n        this.getLayers().forEach((layer) => {\n            container.addChild(layer);\n        });\n\n        // add all Object instances\n        this.getObjects(flatten).forEach((object) => {\n            container.addChild(object);\n        });\n\n        // resize the container accordingly\n        container.resize(this.bounds.width, this.bounds.height);\n\n        // sort everything (recursively)\n        container.sort(true);\n\n        /**\n         * callback funtion for the viewport resize event\n         * @ignore\n         */\n        function _setBounds(width, height) {\n            // adjust the viewport bounds if level is smaller\n            game.viewport.setBounds(\n                0, 0,\n                Math.max(levelBounds.width, width),\n                Math.max(levelBounds.height, height)\n            );\n            // center the map if smaller than the current viewport\n            container.pos.set(\n                Math.max(0, ~~((width - levelBounds.width) / 2)),\n                Math.max(0, ~~((height - levelBounds.height) / 2)),\n                // don't change the container z position if defined\n                container.pos.z\n            );\n        }\n\n        if (setViewportBounds === true) {\n            off(VIEWPORT_ONRESIZE, _setBounds);\n            // force viewport bounds update\n            _setBounds(game.viewport.width, game.viewport.height);\n            // Replace the resize handler\n            on(VIEWPORT_ONRESIZE, _setBounds, this);\n        }\n\n        //  set back auto-sort and auto-depth\n        container.autoSort = _sort;\n        container.autoDepth = _depth;\n    }\n\n    /**\n     * return an Array of instantiated objects, based on the map object definition\n     * @param {boolean} [flatten=true] - if true, flatten all objects into the returned array.\n     * when false, a `me.Container` object will be created for each corresponding groups\n     * @returns {Renderable[]} Array of Objects\n     */\n    getObjects(flatten) {\n        let objects = [];\n        let isCollisionGroup = false;\n        let targetContainer;\n\n        // parse the map for objects\n        this.readMapObjects(this.data);\n\n        for (let g = 0; g < this.objectGroups.length; g++) {\n            let group = this.objectGroups[g];\n\n            // check if this is the collision shape group\n            isCollisionGroup = group.name.toLowerCase().includes(COLLISION_GROUP);\n\n            if (flatten === false) {\n                // create a new container\n                targetContainer = new Container(0, 0, this.width, this.height);\n\n                // tiled uses 0,0 by default\n                targetContainer.anchorPoint.set(0, 0);\n\n                // set additional properties\n                targetContainer.name = group.name;\n                targetContainer.pos.z = group.z;\n                targetContainer.setOpacity(group.opacity);\n\n                // disable auto-sort and auto-depth\n                targetContainer.autoSort = false;\n                targetContainer.autoDepth = false;\n            }\n\n            // iterate through the group and add all object into their\n            // corresponding target Container\n            for (let o = 0; o < group.objects.length; o++) {\n                // TMX object settings\n                let settings = group.objects[o];\n                // reference to the instantiated object\n                let obj;\n                // a reference to the default shape\n                let shape;\n\n                // Tiled uses 0,0 by default\n                if (typeof (settings.anchorPoint) === \"undefined\") {\n                    settings.anchorPoint = {x : 0, y : 0};\n                }\n                // convert to melonJS renderable argument name\n                if (typeof (settings.tintcolor) !== \"undefined\") {\n                    settings.tint = pool.pull(\"Color\");\n                    settings.tint.parseHex(settings.tintcolor, true);\n                }\n\n                /// XXX Clean/rewrite all this part to remove object\n                /// specific instantiation logic/details from here\n\n                // groups can contains either text, objects or layers\n                if (settings instanceof TMXLayer) {\n                    // layers are already instantiated & initialized\n                    obj = settings;\n                    // z value set already\n                } else if (typeof settings.text === \"object\") {\n                    // Tiled uses 0,0 by default\n                    if (typeof (settings.text.anchorPoint) === \"undefined\") {\n                        settings.text.anchorPoint = settings.anchorPoint;\n                    }\n                    if (settings.text.bitmap === true) {\n                        obj = pool.pull(\"BitmapText\", settings.x, settings.y, settings.text);\n                    } else {\n                        obj = pool.pull(\"Text\", settings.x, settings.y, settings.text);\n                    }\n                    // set the obj z order\n                    obj.pos.z = settings.z;\n                } else if (typeof settings.tile === \"object\") {\n                    // create a default shape if none is specified\n                    shape = settings.shapes;\n                    if (typeof shape === \"undefined\") {\n                        shape = pool.pull(\"Polygon\", 0, 0, [\n                            pool.pull(\"Vector2d\", 0,          0),\n                            pool.pull(\"Vector2d\", this.width, 0),\n                            pool.pull(\"Vector2d\", this.width, this.height)\n                        ]);\n                    }\n                    // check if a me.Tile object is embedded\n                    obj = settings.tile.getRenderable(settings);\n                    obj.body = new Body(obj, shape);\n                    obj.body.setStatic(true);\n                    // set the obj z order\n                    obj.pos.setMuted(settings.x, settings.y, settings.z);\n                } else {\n                    // pull the corresponding object from the object pool\n                    if (typeof settings.name !== \"undefined\" && settings.name !== \"\") {\n                        obj = pool.pull(\n                            settings.name,\n                            settings.x, settings.y,\n                            settings\n                        );\n                    } else {\n                        // unnamed shape object\n                        obj = pool.pull(\n                            \"Renderable\",\n                            settings.x, settings.y,\n                            settings.width, settings.height\n                        );\n                        // create a default shape if none is specified\n                        shape = settings.shapes;\n                        if (typeof shape === \"undefined\") {\n                            shape = pool.pull(\"Polygon\", 0, 0, [\n                                pool.pull(\"Vector2d\", 0,          0),\n                                pool.pull(\"Vector2d\", this.width, 0),\n                                pool.pull(\"Vector2d\", this.width, this.height)\n                            ]);\n                        }\n                        obj.anchorPoint.set(0, 0);\n                        obj.name = settings.name;\n                        obj.type = settings.type;\n                        // for backward compatibility\n                        obj.class = settings.class || settings.type;\n                        obj.id = settings.id;\n                        obj.body = new Body(obj, shape);\n                        obj.body.setStatic(true);\n                        obj.resize(obj.body.getBounds().width, obj.body.getBounds().height);\n                    }\n                    // set the obj z order\n                    obj.pos.z = settings.z;\n                }\n\n                if (isCollisionGroup && !settings.name && obj.body) {\n                    // configure the body accordingly\n                    obj.body.collisionType = collision.types.WORLD_SHAPE;\n                    // mark collision shapes as static\n                    obj.body.isStatic = true;\n                }\n\n                //apply group opacity value to the child objects if group are merged\n                if (flatten !== false) {\n                    if (obj.isRenderable === true) {\n                        obj.setOpacity(obj.getOpacity() * group.opacity);\n                        // and to child renderables if any\n                        if (typeof obj.renderable !== \"undefined\" && obj.renderable.isRenderable === true) {\n                            obj.renderable.setOpacity(obj.renderable.getOpacity() * group.opacity);\n                        }\n                    }\n                    // directly add the obj into the objects array\n                    objects.push(obj);\n                } else /* false*/ {\n                    // add it to the new container\n                    targetContainer.addChild(obj);\n                }\n\n            }\n\n            // if we created a new container\n            if ((flatten === false) && (targetContainer.children.length > 0)) {\n\n                // re-enable auto-sort and auto-depth\n                targetContainer.autoSort = true;\n                targetContainer.autoDepth = true;\n\n                // add our container to the world\n                objects.push(targetContainer);\n            }\n        }\n        return objects;\n    }\n\n    /**\n     * return all the existing layers\n     * @returns {TMXLayer[]} Array of Layers\n     */\n    getLayers() {\n        // parse the map for objects\n        this.readMapObjects(this.data);\n        return this.layers;\n    }\n\n    /**\n     * destroy function, clean all allocated objects\n     */\n    destroy() {\n        this.tilesets = undefined;\n        this.layers.length = 0;\n        this.objectGroups.length = 0;\n        this.initialized = false;\n    }\n}\n\n// our levels\nlet levels = {};\n// level index table\nlet levelIdx = [];\n// current level index\nlet currentLevelIdx = 0;\n\n/**\n * @ignore\n */\nfunction safeLoadLevel(levelId, options, restart) {\n    // clean the destination container\n    options.container.reset();\n\n    // reset the renderer\n    game.reset();\n\n    // clean the current (previous) level\n    if (levels[level.getCurrentLevelId()]) {\n        levels[level.getCurrentLevelId()].destroy();\n    }\n\n    // update current level index\n    currentLevelIdx = levelIdx.indexOf(levelId);\n\n    // add the specified level to the game world\n    loadTMXLevel(levelId, options.container, options.flatten, options.setViewportBounds);\n\n    // publish the corresponding message\n    emit(LEVEL_LOADED, levelId);\n\n    // fire the callback\n    options.onLoaded(levelId);\n\n    if (restart) {\n        // resume the game loop if it was previously running\n        state.restart();\n    }\n}\n\n/**\n * Load a TMX level\n * @name loadTMXLevel\n * @memberof level\n * @private\n * @param {string} levelId - level id\n * @param {Container} container - target container\n * @param {boolean} [flatten=true] - if true, flatten all objects into the given container\n * @param {boolean} [setViewportBounds=false] - if true, set the viewport bounds to the map size, this should be set to true especially if adding a level to the game world container.\n * @ignore\n */\nfunction loadTMXLevel(levelId, container, flatten, setViewportBounds) {\n    let level = levels[levelId];\n\n    // reset the GUID generator\n    // and pass the level id as parameter\n    resetGUID(levelId, level.nextobjectid);\n\n    // Tiled use 0,0 anchor coordinates\n    container.anchorPoint.set(0, 0);\n\n    // add all level elements to the target container\n    level.addTo(container, flatten, setViewportBounds);\n}\n\n\n/**\n * a level manager. once ressources loaded, the level manager contains all references of defined levels.\n * @namespace level\n */\n\nlet level = {\n\n    /**\n     * add a level into the game manager (usually called by the preloader)\n     * @name add\n     * @memberof level\n     * @public\n     * @param {string} format - level format (only \"tmx\" supported)\n     * @param {string} levelId - the level id (or name)\n     * @param {Function} [callback] - a function to be called once the level is loaded\n     * @returns {boolean} true if the level was loaded\n     */\n    add(format, levelId, callback) {\n        switch (format) {\n            case \"tmx\" :\n                // just load the level with the XML stuff\n                if (levels[levelId] == null) {\n                    //console.log(\"loading \"+ levelId);\n                    levels[levelId] = new TMXTileMap(levelId, getTMX(levelId));\n                    // level index\n                    levelIdx.push(levelId);\n                }\n                else {\n                    //console.log(\"level %s already loaded\", levelId);\n                    return false;\n                }\n\n                // call the callback if defined\n                if (callback) {\n                    callback();\n                }\n                // true if level loaded\n                return true;\n\n            default :\n                throw new Error(\"no level loader defined for format \" + format);\n        }\n    },\n\n    /**\n     * load a level into the game manager<br>\n     * (will also create all level defined entities, etc..)\n     * @name load\n     * @memberof level\n     * @public\n     * @param {string} levelId - level id\n     * @param {object} [options] - additional optional parameters\n     * @param {Container} [options.container=game.world] - container in which to load the specified level\n     * @param {Function} [options.onLoaded=game.onLevelLoaded] - callback for when the level is fully loaded\n     * @param {boolean} [options.flatten=game.mergeGroup] - if true, flatten all objects into the given container\n     * @param {boolean} [options.setViewportBounds=true] - if true, set the viewport bounds to the map size\n     * @returns {boolean} true if the level was successfully loaded\n     * @example\n     * // the game assets to be be preloaded\n     * // TMX maps\n     * let resources = [\n     *     {name: \"a4_level1\",   type: \"tmx\",   src: \"data/level/a4_level1.tmx\"},\n     *     {name: \"a4_level2\",   type: \"tmx\",   src: \"data/level/a4_level2.tmx\"},\n     *     {name: \"a4_level3\",   type: \"tmx\",   src: \"data/level/a4_level3.tmx\"},\n     *     // ...\n     * ];\n     *\n     * // ...\n     *\n     * // load a level into the game world\n     * me.level.load(\"a4_level1\");\n     * ...\n     * ...\n     * // load a level into a specific container\n     * let levelContainer = new me.Container();\n     * me.level.load(\"a4_level2\", {container:levelContainer});\n     * // add a simple transformation\n     * levelContainer.currentTransform.translate(levelContainer.width / 2, levelContainer.height / 2 );\n     * levelContainer.currentTransform.rotate(0.05);\n     * levelContainer.currentTransform.translate(-levelContainer.width / 2, -levelContainer.height / 2 );\n     * // add it to the game world\n     * me.game.world.addChild(levelContainer);\n     */\n    load(levelId, options) {\n        options = Object.assign({\n            \"container\"         : game.world,\n            \"onLoaded\"          : game.onLevelLoaded,\n            \"flatten\"           : game.mergeGroup,\n            \"setViewportBounds\" : true\n        }, options || {});\n\n        // throw an exception if not existing\n        if (typeof(levels[levelId]) === \"undefined\") {\n            throw new Error(\"level \" + levelId + \" not found\");\n        }\n\n        if (levels[levelId] instanceof TMXTileMap) {\n\n            // check the status of the state mngr\n            let wasRunning = state.isRunning();\n\n            if (wasRunning) {\n                // stop the game loop to avoid\n                // some silly side effects\n                state.stop();\n\n                defer(safeLoadLevel, this, levelId, options, true);\n            }\n            else {\n                safeLoadLevel(levelId, options);\n            }\n        }\n        else {\n            throw new Error(\"no level loader defined\");\n        }\n        return true;\n    },\n\n    /**\n     * return the current level id<br>\n     * @name getCurrentLevelId\n     * @memberof level\n     * @public\n     * @returns {string}\n     */\n    getCurrentLevelId() {\n        return levelIdx[currentLevelIdx];\n    },\n\n    /**\n     * return the current level definition.\n     * for a reference to the live instantiated level,\n     * rather use the container in which it was loaded (e.g. me.game.world)\n     * @name getCurrentLevel\n     * @memberof level\n     * @public\n     * @returns {TMXTileMap}\n     */\n    getCurrentLevel() {\n        return levels[this.getCurrentLevelId()];\n    },\n\n    /**\n     * reload the current level\n     * @name reload\n     * @memberof level\n     * @public\n     * @param {object} [options] - additional optional parameters\n     * @param {Container} [options.container=game.world] - container in which to load the specified level\n     * @param {Function} [options.onLoaded=game.onLevelLoaded] - callback for when the level is fully loaded\n     * @param {boolean} [options.flatten=game.mergeGroup] - if true, flatten all objects into the given container\n     * @returns {object} the current level\n     */\n    reload(options) {\n        // reset the level to initial state\n        //levels[currentLevel].reset();\n        return this.load(this.getCurrentLevelId(), options);\n    },\n\n    /**\n     * load the next level\n     * @name next\n     * @memberof level\n     * @public\n     * @param {object} [options] - additional optional parameters\n     * @param {Container} [options.container=game.world] - container in which to load the specified level\n     * @param {Function} [options.onLoaded=game.onLevelLoaded] - callback for when the level is fully loaded\n     * @param {boolean} [options.flatten=game.mergeGroup] - if true, flatten all objects into the given container\n     * @returns {boolean} true if the next level was successfully loaded\n     */\n    next(options) {\n        //go to the next level\n        if (currentLevelIdx + 1 < levelIdx.length) {\n            return this.load(levelIdx[currentLevelIdx + 1], options);\n        }\n        else {\n            return false;\n        }\n    },\n\n    /**\n     * load the previous level<br>\n     * @name previous\n     * @memberof level\n     * @public\n     * @param {object} [options] - additional optional parameters\n     * @param {Container} [options.container=game.world] - container in which to load the specified level\n     * @param {Function} [options.onLoaded=game.onLevelLoaded] - callback for when the level is fully loaded\n     * @param {boolean} [options.flatten=game.mergeGroup] - if true, flatten all objects into the given container\n     * @returns {boolean} true if the previous level was successfully loaded\n     */\n    previous(options) {\n        // go to previous level\n        if (currentLevelIdx - 1 >= 0) {\n            return this.load(levelIdx[currentLevelIdx - 1], options);\n        }\n        else {\n            return false;\n        }\n    },\n\n    /**\n     * return the amount of level preloaded\n     * @name levelCount\n     * @memberof level\n     * @public\n     * @returns {number} the amount of level preloaded\n     */\n    levelCount() {\n        return levelIdx.length;\n    }\n\n};\n\n/**\n * parse/preload a TMX file\n * @param {loader.Asset} data - asset data\n * @param {Function} [onload] - function to be called when the asset is loaded\n * @param {Function} [onload] - function to be called when the resource is loaded\n * @param {Function} [onerror] - function to be called in case of error\n * @param {Object} [settings] - Additional settings to be passed when loading the asset\n * @returns {number} the amount of corresponding resource parsed/preloaded\n * @ignore\n */\nfunction preloadTMX(tmxData, onload, onerror, settings) {\n    if (typeof tmxList[tmxData.name] !== \"undefined\") {\n        // already loaded\n        return 0;\n    }\n\n    /**\n     * @ignore\n     */\n    function addToTMXList(data) {\n        // set the TMX content\n        tmxList[tmxData.name] = data;\n\n        // add the tmx to the level manager\n        if (tmxData.type === \"tmx\") {\n            level.add(tmxData.type, tmxData.name);\n        }\n    }\n\n    //if the data is in the tmxData object, don't get it via a XMLHTTPRequest\n    if (tmxData.data) {\n        addToTMXList(tmxData.data);\n        if (typeof onload === \"function\") {\n            onload();\n        }\n        return;\n    }\n\n    fetchData(tmxData.src, \"text\", settings)\n        .then(response => {\n            if (typeof response !== \"string\") {\n                throw new Error(\"Invalid response type\");\n            }\n\n            let result;\n\n            switch (getExtension(tmxData.src)) {\n                case \"xml\":\n                case \"tmx\":\n                case \"tsx\": {\n                    const parser = new DOMParser();\n\n                    if (typeof parser.parseFromString === \"undefined\") {\n                        throw new Error(\n                            \"XML file format loading supported, use the JSON file format instead\"\n                        );\n                    }\n\n                    const xmlDoc = parser.parseFromString(response, \"text/xml\");\n                    const data = parse(xmlDoc);\n\n                    result = data.map || data.tilesets[0] || data;\n\n                    break;\n                }\n                case \"json\":\n                case \"tmj\":\n                case \"tsj\":\n                    result = JSON.parse(response);\n                    break;\n                default:\n                    throw new Error(`TMX file format not supported: ${getExtension(tmxData.src)}`);\n            }\n\n            addToTMXList(result);\n\n            if (typeof onload === \"function\") {\n                onload();\n            }\n        })\n        .catch(error => {\n            if (typeof onerror === \"function\") {\n                onerror(error);\n            }\n        });\n\n    return 1;\n}\n\n/**\n * parse/preload a JSON files\n * @param {loader.Asset} data - asset data\n * @param {Function} [onload] - function to be called when the resource is loaded\n * @param {Function} [onerror] - function to be called in case of error\n * @param {Object} [settings] - Additional settings to be passed when loading the asset\n * @returns {number} the amount of corresponding resource parsed/preloaded\n * @ignore\n */\nfunction preloadJSON(data, onload, onerror, settings) {\n    if (typeof jsonList[data.name] !== \"undefined\") {\n        // already loaded\n        return 0;\n    }\n\n    fetchData(data.src, \"json\", settings)\n        .then(response => {\n            jsonList[data.name] = response;\n            if (typeof onload === \"function\") {\n                // callback\n                onload();\n            }\n        })\n        .catch(error => {\n            if (typeof onerror === \"function\") {\n                onerror(error);\n            }\n        });\n\n    return 1;\n}\n\n/**\n * parse/preload a Binary file\n * @param {loader.Asset} data - asset data\n * @param {Function} [onload] - function to be called when the asset is loaded\n * @param {Function} [onerror] - function to be called in case of error\n * @param {Object} [settings] - Additional settings to be passed when loading the asset\n * @returns {number} the amount of corresponding resource parsed/preloaded\n * @ignore\n */\nfunction preloadBinary(data, onload, onerror, settings) {\n\n    fetchData(data.src, \"arrayBuffer\", settings)\n        .then(response => {\n            // this method is native and might be slightly more efficient\n            const decoder = new TextDecoder(); // the default for this is 'utf-8'\n            binList[data.name] = decoder.decode(response);\n\n            if (typeof onload === \"function\") {\n                // callback\n                onload();\n            }\n        })\n        .catch(error => {\n            if (typeof onerror === \"function\") {\n                onerror(error);\n            }\n        });\n\n    return 1;\n}\n\n/**\n * parse/preload a Javascript files\n * @param {loader.Asset} data - asset data\n * @param {Function} [onload] - function to be called when the resource is loaded\n * @param {Function} [onerror] - function to be called in case of error\n * @param {Object} [settings] - Additional settings to be passed when loading the asset\n * @returns {number} the amount of corresponding resource parsed/preloaded\n * @ignore\n */\nfunction preloadJavascript(data, onload, onerror, settings) {\n    let script = globalThis.document.createElement(\"script\");\n\n    script.src = data.src;\n    script.type = \"text/javascript\";\n    if (typeof (crossOrigin) === \"string\") {\n        script.crossOrigin = settings.crossOrigin;\n    }\n    script.defer = true;\n\n    if (typeof onload === \"function\") {\n        script.onload = () => {\n            // callback\n            onload();\n        };\n    }\n\n    if (typeof onerror === \"function\") {\n        script.onerror = () => {\n            // callback\n            onerror(data.name);\n        };\n    }\n\n    globalThis.document.getElementsByTagName(\"body\")[0].appendChild(script);\n\n    return 1;\n}\n\n/**\n * parse/preload a Video file\n * @param {loader.Asset} data - asset data\n * @param {Function} [onload] - function to be called when the resource is loaded\n * @param {Function} [onerror] - function to be called in case of error\n * @param {Object} [settings] - Additional settings to be passed when loading the asset\n * @returns {number} the amount of corresponding resource parsed/preloaded\n * @ignore\n */\nfunction preloadVideo(data, onload, onerror, settings) {\n\n    if (typeof videoList[data.name] !== \"undefined\") {\n        // Video already preloaded\n        return 0;\n    }\n\n    let videoElement = videoList[data.name] = globalThis.document.createElement(\"video\");\n\n    if (isDataUrl(data.src)) {\n        const mimeType = data.src.match(/[^:]\\w+\\/[\\w-+\\d.]+(?=;|,)/)[0];\n        if (!mimeType || videoElement.canPlayType(mimeType) === \"\") {\n            throw new Error(`Invalid dataURL or Video file format not supported: ${mimeType}`);\n        }\n    } else {\n        if (!hasVideoFormat(getExtension(data.src))) {\n            throw new Error(`Video file format not supported: ${getExtension(data.src)}`);\n        }\n    }\n\n    if (isDataUrl(data.src)) {\n        fetchData(data.src, \"blob\", settings)\n            .then(blob => {\n                videoElement.src = globalThis.URL.createObjectURL(blob);\n            })\n            .catch(error => {\n                if (typeof onerror === \"function\") {\n                    onerror(error);\n                }\n            });\n    } else {\n        // just a url path\n        videoElement.src = data.src;\n    }\n\n    videoElement.setAttribute(\"preload\", data.stream === true ? \"metadata\" : \"auto\");\n    videoElement.setAttribute(\"playsinline\", \"true\");\n    videoElement.setAttribute(\"disablePictureInPicture\", \"true\");\n    videoElement.setAttribute(\"controls\", \"false\");\n    videoElement.setAttribute(\"crossorigin\", settings.crossOrigin);\n\n    if (data.autoplay === true) {\n        videoElement.setAttribute(\"autoplay\", \"true\");\n    }\n    if (data.loop === true) {\n        videoElement.setAttribute(\"loop\", \"true\");\n    }\n\n    if (typeof onload === \"function\") {\n        // some mobile browser (e.g. safari) won't emit the canplay event if autoplay is disabled\n        if (data.stream === true || data.autoplay === false) {\n            videoElement.onloadedmetadata = () => {\n                if (typeof onload === \"function\") {\n                    onload();\n                }\n            };\n        } else {\n            videoElement.oncanplay = () => {\n                if (typeof onload === \"function\") {\n                    onload();\n                }\n            };\n        }\n    }\n\n    if (typeof onerror === \"function\") {\n        videoElement.onerror = () => {\n            onerror();\n        };\n    }\n\n    videoElement.load();\n\n    return 1;\n}\n\n/**\n * a small class to manage loading of stuff and manage resources\n * @namespace loader\n */\n\n\n//  to enable/disable caching\nlet nocache = \"\";\n\n// baseURL\nlet baseURL = {};\n\n/**\n * crossOrigin attribute to configure the CORS requests for Image and Video data element.\n * By default (that is, when the attribute is not specified), CORS is not used at all.\n * The \"anonymous\" keyword means that there will be no exchange of user credentials via cookies,\n * client-side SSL certificates or HTTP authentication as described in the Terminology section of the CORS specification.<br>\n * @type {string}\n * @name crossOrigin\n * @default undefined\n * @see loader.setOptions\n * @memberof loader\n * @see https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_settings_attributes\n * @example\n *  // allow for cross-origin texture loading\n * me.loader.crossOrigin = \"anonymous\";\n *\n * // set all ressources to be loaded\n * me.loader.preload(game.resources, () => this.loaded());\n */\nlet crossOrigin$1;\n\n/**\n * indicates whether or not cross-site Access-Control requests should be made using credentials such as cookies,\n * authorization headers or TLS client certificates. Setting withCredentials has no effect on same-site requests.\n * @public\n * @type {boolean}\n * @name withCredentials\n * @see loader.setOptions\n * @default false\n * @memberof loader\n * @see https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/withCredentials\n * @example\n *  // enable withCredentials\n * me.loader.withCredentials = true;\n *\n * // set all ressources to be loaded\n * me.loader.preload(game.resources, () => this.loaded());\n */\nlet withCredentials = false;\n\n/**\n * enable the nocache mechanism\n * @ignore\n */\nfunction setNocache(enable = false) {\n    nocache = enable ? \"?\" + ~~(Math.random() * 10000000) : \"\";\n}\n\n/**\n * Sets the options for the loader.\n * @memberof loader\n * @param {Object} options - The options to set.\n * @param {string} [options.crossOrigin] - The crossOrigin attribute to configure the CORS requests for Image and Video data element.\n * @param {boolean} [options.nocache] - Enable or disable the nocache mechanism.\n * @param {boolean} [options.withCredentials] - Indicates whether or not cross-site Access-Control requests should be made using credentials.\n * @example\n * // Set the crossOrigin attribute to \"anonymous\"\n * me.loader.setOptions({ crossOrigin: \"anonymous\" });\n *\n * // Enable the nocache mechanism\n * me.loader.setOptions({ nocache: true });\n *\n * // Enable withCredentials\n * me.loader.setOptions({ withCredentials: true });\n */\nfunction setOptions(options) {\n    if (options.crossOrigin !== undefined) {\n        crossOrigin$1 = options.crossOrigin;\n    }\n    if (options.nocache !== undefined) {\n        setNocache(options.nocache);\n    }\n    if (options.withCredentials !== undefined) {\n        withCredentials = options.withCredentials;\n    }\n}\n\n/**\n * change the default baseURL for the given asset type.<br>\n * (this will prepend the asset URL and must finish with a '/')\n * @name setBaseURL\n * @memberof loader\n * @public\n * @param {string} type  - \"*\", \"audio\", \"video\", \"binary\", \"image\", \"json\", \"js\", \"tmx\", \"tsx\"\n * @param {string} [url=\"./\"] - default base URL\n * @example\n * // change the base URL relative address for audio assets\n * me.loader.setBaseURL(\"audio\", \"data/audio/\");\n * // change the base URL absolute address for all object types\n * me.loader.setBaseURL(\"*\", \"http://myurl.com/\")\n */\nfunction setBaseURL(type, url) {\n    if (type !== \"*\") {\n        baseURL[type] = url;\n    } else {\n        // \"wildcards\"\n        baseURL[\"audio\"] = url;\n        baseURL[\"video\"] = url;\n        baseURL[\"binary\"] = url;\n        baseURL[\"image\"] = url;\n        baseURL[\"json\"] = url;\n        baseURL[\"js\"] = url;\n        baseURL[\"tmx\"] = url;\n        baseURL[\"tsx\"] = url;\n        // XXX ?\n        //baseURL[\"fontface\"] = url;\n    }\n}\n\n/**\n * onload callback\n * @default undefined\n * @memberof loader\n * @type {function}\n * @example\n * // set a callback when everything is loaded\n * me.loader.onload = this.loaded.bind(this);\n */\nlet onload;\n\n/**\n * onProgress callback<br>\n * each time a resource is loaded, the loader will fire the specified function,\n * giving the actual progress [0 ... 1], as argument, and an object describing the resource loaded\n * @default undefined\n * @memberof loader\n * @type {function}\n * @example\n * // set a callback for progress notification\n * me.loader.onProgress = this.updateProgress.bind(this);\n */\nlet onProgress;\n\n/**\n * onError callback<br>\n * each time a resource loading is failed, the loader will fire the specified function giving the actual asset as argument.\n * @default undefined\n * @memberof loader\n * @type {function}\n * @example\n * // set a callback for error notification\n * me.loader.onError = this.loaderError.bind(this);\n */\nlet onError;\n\n/**\n * list of parser function for supported format type\n */\nlet parsers = new Map();\n\n/**\n * keep track if parsers were registered\n */\nlet parserInitialized = false;\n\n// flag to check loading status\nlet resourceCount = 0;\nlet loadCount = 0;\nlet timerId = 0;\n\n/**\n * Assets uploaded with an error\n */\nconst failureLoadedAssets = {};\n\n/**\n * init all supported parsers\n * @ignore\n */\nfunction initParsers() {\n    setParser(\"binary\", preloadBinary);\n    setParser(\"image\", preloadImage);\n    setParser(\"json\", preloadJSON);\n    setParser(\"js\", preloadJavascript);\n    setParser(\"tmx\", preloadTMX);\n    setParser(\"tsx\", preloadTMX);\n    setParser(\"audio\", load$1);\n    setParser(\"fontface\", preloadFontFace);\n    setParser(\"video\", preloadVideo);\n    parserInitialized = true;\n}\n\n/**\n * check the loading status\n * @ignore\n */\nfunction checkLoadStatus(onloadcb) {\n    if (loadCount === resourceCount) {\n        // wait 1/2s and execute callback (cheap workaround to ensure everything is loaded)\n        if (typeof onloadcb === \"function\" || onload) {\n            // make sure we clear the timer\n            clearTimeout(timerId);\n            // trigger the onload callback\n            // we call either the supplied callback (which takes precedence) or the global one\n            let callback = onloadcb || onload;\n            setTimeout(() => {\n                callback();\n                emit(LOADER_COMPLETE);\n            }, 300);\n        }\n        else {\n            throw new Error(\"no load callback defined\");\n        }\n    }\n    else {\n        timerId = setTimeout(() => {\n            checkLoadStatus(onloadcb);\n        }, 100);\n    }\n}\n\n/**\n * just increment the number of already loaded resources\n * @ignore\n */\nfunction onResourceLoaded(res) {\n    delete failureLoadedAssets[res.src];\n    // increment the loading counter\n    loadCount++;\n\n    // currrent progress\n    let progress = loadCount / resourceCount;\n\n    // call callback if defined\n    if (typeof onProgress === \"function\") {\n        // pass the load progress in percent, as parameter\n        onProgress(progress, res);\n    }\n    emit(LOADER_PROGRESS, progress, res);\n}\n\n/**\n * on error callback for image loading\n * @param {Asset} asset - asset that loaded with failure\n * @ignore\n */\nfunction onLoadingError(res) {\n    failureLoadedAssets[res.src] = res;\n    if (this.onError) {\n        this.onError(res);\n    }\n    emit(LOADER_ERROR, res);\n    throw new Error(\"Failed loading resource \" + res.src);\n}\n\n/**\n * an asset definition to be used with the loader\n * @typedef {object} Asset\n * @memberof loader\n * @property {string} name - name of the asset\n * @property {string} type  - the type of the asset (\"audio\"|\"binary\"|\"image\"|\"json\"|\"js\"|\"tmx\"|\"tmj\"|\"tsx\"|\"tsj\"|\"fontface\"|\"video\")\n * @property {string} [src]  - path and/or file name of the resource (for audio assets only the path is required)\n * @property {string} [data]  - TMX data if not provided through a src url\n * @property {boolean} [stream=false] - Set to true to not to wait for large audio or video file to be downloaded before playing.\n * @property {boolean} [autoplay=false] - Set to true to automatically start playing audio or video when loaded or added to a scene (using autoplay might require user iteraction to enable it)\n * @property {boolean} [loop=false] - Set to true to automatically loop the audio or video when playing\n * @see loader.preload\n * @see loader.load\n * @example\n *   // PNG tileset\n *   {name: \"tileset-platformer\", type: \"image\",  src: \"data/map/tileset.png\"}\n *   // PNG packed texture\n *   {name: \"texture\", type:\"image\", src: \"data/gfx/texture.png\"}\n *   // PNG base64 encoded image\n *   {name: \"texture\", type:\"image\", src: \"data:image/png;base64,iVBORw0KAAAQAAAAEACA...\"}\n *   // TSX file\n *   {name: \"meta_tiles\", type: \"tsx\", src: \"data/map/meta_tiles.tsx\"}\n *   // TMX level (XML & JSON)\n *   {name: \"map1\", type: \"tmx\", src: \"data/map/map1.json\"}\n *   {name: \"map2\", type: \"tmx\", src: \"data/map/map2.tmx\"}\n *   {name: \"map3\", type: \"tmx\", format: \"json\", data: {\"height\":15,\"layers\":[...],\"tilewidth\":32,\"version\":1,\"width\":20}}\n *   {name: \"map4\", type: \"tmx\", format: \"xml\", data: {xml representation of tmx}}\n *   // audio resources\n *   {name: \"bgmusic\", type: \"audio\",  src: \"data/audio/\"}\n *   {name: \"cling\",   type: \"audio\",  src: \"data/audio/\"}\n *   // base64 encoded audio resources\n *   {name: \"band\",   type: \"audio\",  src: \"data:audio/wav;base64,...\"}\n *   // binary file\n *   {name: \"ymTrack\", type: \"binary\", src: \"data/audio/main.ym\"}\n *   // JSON file (used for texturePacker)\n *   {name: \"texture\", type: \"json\", src: \"data/gfx/texture.json\"}\n *   // JavaScript file\n *   {name: \"plugin\", type: \"js\", src: \"data/js/plugin.js\"}\n *   // Font Face\n *   { name: \"'kenpixel'\", type: \"fontface\",  src: \"url('data/font/kenvector_future.woff2')\" }\n *   // video resources\n *   {name: \"intro\", type: \"video\",  src: \"data/video/\"}\n */\n\n/**\n * specify a parser/preload function for the given asset type\n * @memberof loader\n * @param {string} type - asset type\n * @param {function} parserFn - parser function\n * @see Asset.type\n * @example\n * // specify a custom function for \"abc\" format\n * function customAbcParser(data, onload, onerror) {\n *    // preload and do something with the data\n *    let parsedData = doSomething(data);\n *    // when done, call the onload callback with the parsed data\n *    onload(parsedData);\n *    // in case of error, call the onerror callback\n *    onerror();\n *    // return the amount of asset parsed\n *    return 1\n * }\n * // set the parser for the custom format\n * loader.setParser(\"abc\", customAbcParser);\n */\nfunction setParser(type, parserFn) {\n    if (typeof parserFn !== \"function\") {\n        throw new Error(\"invalid parser function for \" + type);\n    }\n\n    if (typeof parsers.get(type) !== \"undefined\") {\n        warning(\"overriding parser for \" + type + \" format\");\n    }\n\n    parsers.set(type, parserFn);\n}\n\n/**\n * set all the specified game assets to be preloaded.\n * @memberof loader\n * @param {Asset[]} assets - list of assets to load\n * @param {Function} [onloadcb=loader.onload] - function to be called when all resources are loaded\n * @param {boolean} [switchToLoadState=true] - automatically switch to the loading screen\n * @example\n * game.assets = [\n *   // PNG tileset\n *   {name: \"tileset-platformer\", type: \"image\",  src: \"data/map/tileset.png\"},\n *   // PNG packed texture\n *   {name: \"texture\", type:\"image\", src: \"data/gfx/texture.png\"}\n *   // PNG base64 encoded image\n *   {name: \"texture\", type:\"image\", src: \"data:image/png;base64,iVBORw0KAAAQAAAAEACA...\"}\n *   // TSX file\n *   {name: \"meta_tiles\", type: \"tsx\", src: \"data/map/meta_tiles.tsx\"},\n *   // TMX level (XML & JSON)\n *   {name: \"map1\", type: \"tmx\", src: \"data/map/map1.json\"},\n *   {name: \"map2\", type: \"tmx\", src: \"data/map/map2.tmx\"},\n *   {name: \"map3\", type: \"tmx\", format: \"json\", data: {\"height\":15,\"layers\":[...],\"tilewidth\":32,\"version\":1,\"width\":20}},\n *   {name: \"map4\", type: \"tmx\", format: \"xml\", data: {xml representation of tmx}},\n *   // audio resources\n *   {name: \"bgmusic\", type: \"audio\",  src: \"data/audio/\"},\n *   {name: \"cling\",   type: \"audio\",  src: \"data/audio/\"},\n *   // base64 encoded audio resources\n *   {name: \"band\",   type: \"audio\",  src: \"data:audio/wav;base64,...\"},\n *   // binary file\n *   {name: \"ymTrack\", type: \"binary\", src: \"data/audio/main.ym\"},\n *   // JSON file (used for texturePacker)\n *   {name: \"texture\", type: \"json\", src: \"data/gfx/texture.json\"},\n *   // JavaScript file\n *   {name: \"plugin\", type: \"js\", src: \"data/js/plugin.js\"},\n *   // Font Face\n *   {name: \"'kenpixel'\", type: \"fontface\",  src: \"url('data/font/kenvector_future.woff2')\"},\n *   // video resources\n *   {name: \"intro\", type: \"video\",  src: \"data/video/\"},\n *   // base64 encoded video asset\n *   me.loader.load({name: \"avatar\", type:\"video\", src: \"data:video/mp4;base64,AAAAIGZ0eXBpc29tAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZ...\"};\n * ];\n * ...\n * // set all resources to be loaded\n * me.loader.preload(game.assets, () => this.loaded());\n */\nfunction preload(assets, onloadcb, switchToLoadState = true) {\n    // parse the resources\n    for (let i = 0; i < assets.length; i++) {\n        resourceCount += load(\n            assets[i],\n            onResourceLoaded.bind(this, assets[i]),\n            onLoadingError.bind(this, assets[i])\n        );\n    }\n    // set the onload callback if defined\n    if (typeof(onloadcb) !== \"undefined\") {\n        onload = onloadcb;\n    }\n\n    if (switchToLoadState === true) {\n        // swith to the loading screen\n        state.change(state.LOADING);\n    }\n\n    // check load status\n    checkLoadStatus(onload);\n}\n\n/**\n * retry loading assets after a loading failure\n * @memberof loader\n * @param {string} src - src of asset to reload\n * @example\n *  event.on(\n *      event.LOADER_ERROR,\n *      (res) => {\n *          // custom function\n *          showErrorNotification({\n *              text: `Error during loading content: ${res.name}`,\n *              done: loader.reload(res.src);\n *          })\n *      }\n *  );\n**/\nfunction reload(src) {\n    const assetToReload = failureLoadedAssets[src];\n    this.unload(assetToReload);\n    resourceCount -= 1;\n    resourceCount += this.load(\n        assetToReload,\n        this.onResourceLoaded.bind(this, assetToReload),\n        this.onLoadingError.bind(this, assetToReload)\n    );\n    // check load status\n    checkLoadStatus(this.onload);\n}\n\n/**\n * Load a single asset (to be used if you need to load additional asset(s) during the game)\n * @memberof loader\n * @param {Asset} asset\n * @param {Function} [onload] - function to be called when the asset is loaded\n * @param {Function} [onerror] - function to be called in case of error\n * @returns {number} the amount of corresponding resource to be preloaded\n * @example\n * // load an image asset\n * me.loader.load({name: \"avatar\",  type:\"image\",  src: \"data/avatar.png\"}, () => this.onload(), () => this.onerror());\n * // load a base64 image asset\n *  me.loader.load({name: \"avatar\", type:\"image\", src: \"data:image/png;base64,iVBORw0KAAAQAAAAEACA...\"};\n *  // load a base64 video asset\n *  me.loader.load({\n *     name: \"avatar\",\n *     type:\"video\",\n *     src: \"data:video/mp4;base64,AAAAIGZ0eXBpc29tAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZ..\"\n *  };\n * // start loading music\n * me.loader.load({\n *     name   : \"bgmusic\",\n *     type   : \"audio\",\n *     src    : \"data/audio/\"\n * }, function () {\n *     me.audio.play(\"bgmusic\");\n * });\n */\nfunction load(asset, onload, onerror) {\n\n    // make sure all parsers have been initialized\n    if (parserInitialized === false) {\n        initParsers();\n    }\n\n    // transform the url if necessary\n    if (typeof (baseURL[asset.type]) !== \"undefined\") {\n        asset.src = baseURL[asset.type] + asset.src;\n    }\n\n    let parser = parsers.get(asset.type);\n\n    if (typeof parser === \"undefined\") {\n        throw new Error(\"load : unknown or invalid resource type : \" + asset.type);\n    }\n\n    // parser returns the amount of asset to be loaded (usually 1 unless an asset is splitted into several ones)\n    return parser.call(this, asset, onload, onerror, {\n        nocache: nocache,\n        crossOrigin: crossOrigin$1,\n        withCredentials: withCredentials\n    });\n}\n\n/**\n * unload the specified asset to free memory\n * @memberof loader\n * @param {Asset} asset\n * @returns {boolean} true if unloaded\n * @example me.loader.unload({name: \"avatar\",  type:\"image\"});\n */\nfunction unload(asset) {\n    switch (asset.type) {\n        case \"binary\":\n            if (!(asset.name in binList)) {\n                return false;\n            }\n\n            delete binList[asset.name];\n            return true;\n\n        case \"image\":\n            if (!(asset.name in imgList)) {\n                return false;\n            }\n            delete imgList[asset.name];\n            return true;\n\n        case \"json\":\n            if (!(asset.name in jsonList)) {\n                return false;\n            }\n\n            delete jsonList[asset.name];\n            return true;\n\n        case \"js\":\n            // ??\n            return true;\n\n        case \"fontface\":\n            if (typeof typeof globalThis.document !== \"undefined\" && typeof globalThis.document.fonts !== \"undefined\") {\n                globalThis.document.fonts.delete(fontList[asset.name]);\n                delete fontList[asset.name];\n                return true;\n            }\n            return false;\n\n        case \"tmx\":\n        case \"tsx\":\n            if (!(asset.name in tmxList)) {\n                return false;\n            }\n\n            delete tmxList[asset.name];\n            return true;\n\n        case \"audio\":\n            return unload$1(asset.name);\n\n        case \"video\":\n            if (!(asset.name in videoList)) {\n                return false;\n            }\n\n            delete videoList[asset.name];\n            return true;\n\n        default:\n            throw new Error(\"unload : unknown or invalid resource type : \" + asset.type);\n    }\n}\n\n/**\n * unload all resources to free memory\n * @memberof loader\n * @example me.loader.unloadAll();\n */\nfunction unloadAll() {\n    let name;\n\n    // unload all binary resources\n    for (name in binList) {\n        if (binList.hasOwnProperty(name)) {\n            unload({\n                \"name\" : name,\n                \"type\" : \"binary\"\n            });\n        }\n    }\n\n    // unload all image resources\n    for (name in imgList) {\n        if (imgList.hasOwnProperty(name)) {\n            unload({\n                \"name\" : name,\n                \"type\" : \"image\"\n            });\n        }\n    }\n\n    // unload all tmx resources\n    for (name in tmxList) {\n        if (tmxList.hasOwnProperty(name)) {\n            unload({\n                \"name\" : name,\n                \"type\" : \"tmx\"\n            });\n        }\n    }\n\n    // unload all json resources\n    for (name in jsonList) {\n        if (jsonList.hasOwnProperty(name)) {\n            unload({\n                \"name\" : name,\n                \"type\" : \"json\"\n            });\n        }\n    }\n\n    // unload all video resources\n    for (name in videoList) {\n        if (videoList.hasOwnProperty(name)) {\n            unload({\n                \"name\" : name,\n                \"type\" : \"json\"\n            });\n        }\n    }\n\n    // unload all video resources\n    for (name in fontList) {\n        if (fontList.hasOwnProperty(name)) {\n            unload({\n                \"name\" : name,\n                \"type\" : \"font\"\n            });\n        }\n    }\n\n    // unload all audio resources\n    unloadAll$1();\n}\n\n/**\n * return the specified TMX/TSX object\n * @memberof loader\n * @param {string} elt - name of the tmx/tsx element (\"map1\");\n * @returns {object} requested element or null if not found\n */\nfunction getTMX(elt) {\n    // force as string\n    elt = \"\" + elt;\n    if (elt in tmxList) {\n        return tmxList[elt];\n    }\n    return null;\n}\n\n/**\n * return the specified Binary object\n * @memberof loader\n * @param {string} elt - name of the binary object (\"ymTrack\");\n * @returns {object} requested element or null if not found\n */\nfunction getBinary(elt) {\n    // force as string\n    elt = \"\" + elt;\n    if (elt in binList) {\n        return binList[elt];\n    }\n    return null;\n}\n\n/**\n * return the specified Image Object\n * @memberof loader\n * @param {string} image - name of the Image element (\"tileset-platformer\");\n * @returns {HTMLImageElement} requested element or null if not found\n */\nfunction getImage(image) {\n    // force as string and extract the base name\n    image = getBasename(\"\" + image);\n    if (image in imgList) {\n        // return the corresponding Image object\n        return imgList[image];\n    }\n    return null;\n}\n\n/**\n * return the specified JSON Object\n * @memberof loader\n * @param {string} elt - name of the json file\n * @returns {JSON}\n */\nfunction getJSON(elt) {\n    // force as string\n    elt = \"\" + elt;\n    if (elt in jsonList) {\n        return jsonList[elt];\n    }\n    return null;\n}\n\n/**\n * return the specified Video Object\n * @memberof loader\n * @param {string} elt - name of the video file\n * @returns {HTMLVideoElement}\n */\nfunction getVideo(elt) {\n    // force as string\n    elt = \"\" + elt;\n    if (elt in videoList) {\n        return videoList[elt];\n    }\n    return null;\n}\n\n/**\n * return the specified FontFace Object\n * @memberof loader\n * @param {string} elt - name of the font file\n * @returns {FontFace}\n */\nfunction getFont(elt) {\n    // force as string\n    elt = \"\" + elt;\n    if (elt in fontList) {\n        return fontList[elt];\n    }\n    return null;\n}\n\nvar loader = {\n\t__proto__: null,\n\tbaseURL: baseURL,\n\tget crossOrigin () { return crossOrigin$1; },\n\tgetBinary: getBinary,\n\tgetFont: getFont,\n\tgetImage: getImage,\n\tgetJSON: getJSON,\n\tgetTMX: getTMX,\n\tgetVideo: getVideo,\n\tload: load,\n\tget nocache () { return nocache; },\n\tonError: onError,\n\tonProgress: onProgress,\n\tget onload () { return onload; },\n\tpreload: preload,\n\treload: reload,\n\tsetBaseURL: setBaseURL,\n\tsetNocache: setNocache,\n\tsetOptions: setOptions,\n\tsetParser: setParser,\n\tunload: unload,\n\tunloadAll: unloadAll,\n\tget withCredentials () { return withCredentials; }\n};\n\n/**\n * additional import for TypeScript\n * @import Vector2d from \"./../math/vector2.js\";\n * @import CanvasRenderer from \"./../video/canvas/canvas_renderer.js\";\n * @import WebGLRenderer from \"./../video/webgl/webgl_renderer.js\";\n */\n\n/**\n * @classdesc\n * An object to display a fixed or animated sprite on screen.\n * @augments Renderable\n */\nclass Sprite extends Renderable {\n    /**\n     * @param {number} x - the x coordinates of the sprite object\n     * @param {number} y - the y coordinates of the sprite object\n     * @param {object} settings - Configuration parameters for the Sprite object\n     * @param {HTMLImageElement|HTMLCanvasElement|HTMLVideoElement|TextureAtlas|string} settings.image - reference to spritesheet image, a texture atlas, a video element, or to a texture atlas\n     * @param {string} [settings.name=\"\"] - name of this object\n     * @param {string} [settings.region] - region name of a specific region to use when using a texture atlas, see {@link TextureAtlas}\n     * @param {number} [settings.framewidth] - Width of a single frame within the spritesheet\n     * @param {number} [settings.frameheight] - Height of a single frame within the spritesheet\n     * @param {string|Color} [settings.tint] - a tint to be applied to this sprite\n     * @param {number} [settings.flipX] - flip the sprite on the horizontal axis\n     * @param {number} [settings.flipY] - flip the sprite on the vertical axis\n     * @param {Vector2d} [settings.anchorPoint={x:0.5, y:0.5}] - Anchor point to draw the frame at (defaults to the center of the frame).\n     * @example\n     * // create a single sprite from a standalone image, with anchor in the center\n     * let sprite = new me.Sprite(0, 0, {\n     *     image : \"PlayerTexture\",\n     *     framewidth : 64,\n     *     frameheight : 64,\n     *     anchorPoint : new me.Vector2d(0.5, 0.5)\n     * });\n     *\n     * // create a single sprite from a packed texture\n     * mytexture = new me.TextureAtlas(\n     *     me.loader.getJSON(\"texture\"),\n     *     me.loader.getImage(\"texture\")\n     * );\n     * let sprite = new me.Sprite(0, 0, {\n     *     image : mytexture,\n     *     region : \"npc2.png\",\n     * });\n     *\n     * // create a video sprite\n     * let videoSprite = new me.Sprite(0, 0, {\n     *     image : me.loader.getVideo(\"bigbunny\"),\n     *     anchorPoint : new me.Vector2d(0.5, 0.5)\n     * });\n     * // scale the video sprite\n     * videoSprite.currentTransform.scale(2);\n     * // start playing the video (if video is preloaded with `autoplay` set to false)\n     * videoSprite.play();\n     */\n    constructor(x, y, settings) {\n\n        // call the super constructor\n        super(x, y, 0, 0);\n\n        /**\n         * @type {boolean}\n         * @default false\n         */\n        this.animationpause = false;\n\n        /**\n         * animation cycling speed (delay between frame in ms)\n         * @type {number}\n         * @default 100\n         */\n        this.animationspeed = 100;\n\n        /**\n         * global offset for the position to draw from on the source image.\n         * @type {Vector2d}\n         * @default <0.0,0.0>\n         */\n        this.offset = pool.pull(\"Vector2d\", 0, 0);\n\n        /**\n         * true if this is a video sprite (e.g. a HTMLVideoElement was passed as as source)\n         * @type {boolean}\n         * @default false\n         */\n        this.isVideo = false;\n\n        /**\n         * a callback fired when the end of a video or current animation was reached\n         * @type {Function}\n         * @default undefined\n         */\n        this.onended;\n\n        /**\n         * The source texture object this sprite object is using\n         * @type {TextureAtlas}\n         */\n        this.source = null;\n\n        // hold all defined animation\n        this.anim = {};\n\n        // a flag to reset animation\n        this.resetAnim = undefined;\n\n        // current frame information\n        // (reusing current, any better/cleaner place?)\n        this.current = {\n            // the current animation name\n            name : undefined,\n            // length of the current animation name\n            length : 0,\n            //current frame texture offset\n            offset : pool.pull(\"Vector2d\", 0, 0),\n            // current frame size\n            width : 0,\n            height : 0,\n            // Source rotation angle for pre-rotating the source image\n            angle : 0,\n            // current frame index\n            idx : 0\n        };\n\n        // animation frame delta\n        this.dt = 0;\n\n        // flicker settings\n        this._flicker = {\n            isFlickering : false,\n            duration : 0,\n            callback : null,\n            state : false\n        };\n\n        // set the proper image/texture to use\n        if (settings.image instanceof TextureAtlas) {\n            this.source = settings.image;\n            this.image = this.source.getTexture();\n            this.textureAtlas = settings.image;\n            // check for defined region\n            if (typeof (settings.region) !== \"undefined\") {\n                // use a texture atlas\n                let region = this.source.getRegion(settings.region);\n                if (region) {\n                    // set the sprite region within the texture\n                    this.setRegion(region);\n                } else {\n                    // throw an error\n                    throw new Error(\"Texture - region for \" + settings.region + \" not found\");\n                }\n            }\n        } else {\n            // HTMLImageElement/HTMLVideoElementCanvas or {string}\n            this.image = (typeof settings.image === \"object\") ? settings.image : getImage(settings.image);\n            // throw an error if image ends up being null/undefined\n            if (!this.image) {\n                throw new Error(\"me.Sprite: '\" + settings.image + \"' image/texture not found!\");\n            }\n\n            this.isVideo = HTMLVideoElement && this.image instanceof HTMLVideoElement;\n\n            if (this.isVideo) {\n                this.width = this.current.width = settings.framewidth = settings.framewidth || this.image.videoWidth;\n                this.height = this.current.height = settings.frameheight = settings.frameheight || this.image.videoHeight;\n                // video specific parameter\n                this.animationpause = this.image.autoplay !== true;\n                if (this.animationpause) {\n                    this.image.pause();\n                }\n\n                // pause the video when losing focus\n                this._onBlurFn = () => { this.image.pause(); };\n                on(STATE_PAUSE, this._onBlurFn);\n\n                // call the onended when the video has ended\n                this.image.onended = () => {\n                    if (typeof this.onended === \"function\") {\n                        // prevent the video from restarting if video.loop is false\n                        if (!this.image.loop) {\n                            this.animationpause = true;\n                        }\n                        this.onended();\n                    }\n                };\n\n            } else {\n                // update the default \"current\" frame size\n                this.width = this.current.width = settings.framewidth = settings.framewidth || this.image.width;\n                this.height = this.current.height = settings.frameheight = settings.frameheight || this.image.height;\n                this.source = renderer.cache.get(this.image, settings);\n                this.textureAtlas = this.source.getAtlas();\n            }\n        }\n\n        // store/reset the current atlas information if specified\n        if (typeof(settings.atlas) !== \"undefined\") {\n            this.textureAtlas = settings.atlas;\n            this.atlasIndices = settings.atlasIndices;\n        }\n\n        // apply flip flags if specified\n        if (typeof (settings.flipX) !== \"undefined\") {\n            this.flipX(!!settings.flipX);\n        }\n        if (typeof (settings.flipY) !== \"undefined\") {\n            this.flipY(!!settings.flipY);\n        }\n\n        // set the default rotation angle is defined in the settings\n        // * WARNING: rotating sprites decreases performance with Canvas Renderer\n        if (typeof (settings.rotation) !== \"undefined\") {\n            this.rotate(settings.rotation);\n        }\n\n        // update anchorPoint\n        if (settings.anchorPoint) {\n            this.anchorPoint.set(settings.anchorPoint.x, settings.anchorPoint.y);\n        }\n\n        if (typeof (settings.tint) !== \"undefined\") {\n            if (settings.tint instanceof Color) {\n                this.tint.copy(settings.tint);\n            } else {\n                // string (#RGB, #ARGB, #RRGGBB, #AARRGGBB)\n                this.tint.parseCSS(settings.tint);\n            }\n        }\n\n        // set the sprite name if specified\n        if (typeof (settings.name) === \"string\") {\n            this.name = settings.name;\n        }\n\n        // displaying order\n        if (typeof settings.z !== \"undefined\") {\n            this.pos.z = settings.z;\n        }\n\n        // add predefined animations if defined (e.g. aseprite)\n        if (typeof settings.anims !== \"undefined\") {\n            for (const anim in settings.anims) {\n                this.addAnimation(settings.anims[anim].name, settings.anims[anim].index, settings.anims[anim].speed);\n            }\n        }\n\n        // addAnimation will return 0 if no texture atlas is defined\n        if (!this.isVideo && this.addAnimation(\"default\", null) !== 0) {\n            // set as default\n            this.setCurrentAnimation(\"default\");\n        }\n    }\n\n    /**\n     * return the flickering state of the object\n     * @returns {boolean}\n     */\n    isFlickering() {\n        return this._flicker.isFlickering;\n    }\n\n    /**\n     * play or resume the current animation or video\n     */\n    play() {\n        this.animationpause = false;\n    }\n\n    /**\n     * play or resume the current animation or video\n     */\n    pause() {\n        this.animationpause = true;\n    }\n\n    /**\n     * make the object flicker\n     * @param {number} duration - expressed in milliseconds\n     * @param {Function} callback - Function to call when flickering ends\n     * @returns {Sprite} Reference to this object for method chaining\n     * @example\n     * // make the object flicker for 1 second\n     * // and then remove it\n     * this.flicker(1000, function () {\n     *     world.removeChild(this);\n     * });\n     */\n    flicker(duration, callback) {\n        this._flicker.duration = duration;\n        if (this._flicker.duration <= 0) {\n            this._flicker.isFlickering = false;\n            this._flicker.callback = null;\n        }\n        else if (!this._flicker.isFlickering) {\n            this._flicker.callback = callback;\n            this._flicker.isFlickering = true;\n        }\n        return this;\n    }\n\n    /**\n     * add an animation <br>\n     * For fixed-sized cell sprite sheet, the index list must follow the\n     * logic as per the following example :<br>\n     * <img src=\"images/spritesheet_grid.png\"/>\n     * @param {string} name - animation id\n     * @param {number[]|string[]|object[]} index - list of sprite index or name defining the animation. Can also use objects to specify delay for each frame, see below\n     * @param {number} [animationspeed] - cycling speed for animation in ms\n     * @returns {number} frame amount of frame added to the animation (delay between each frame).\n     * @see Sprite#animationspeed\n     * @example\n     * // walking animation\n     * this.addAnimation(\"walk\", [ 0, 1, 2, 3, 4, 5 ]);\n     * // standing animation\n     * this.addAnimation(\"stand\", [ 11, 12 ]);\n     * // eating animation\n     * this.addAnimation(\"eat\", [ 6, 6 ]);\n     * // rolling animation\n     * this.addAnimation(\"roll\", [ 7, 8, 9, 10 ]);\n     * // slower animation\n     * this.addAnimation(\"roll\", [ 7, 8, 9, 10 ], 200);\n     * // or get more specific with delay for each frame. Good solution instead of repeating:\n     * this.addAnimation(\"turn\", [{ name: 0, delay: 200 }, { name: 1, delay: 100 }])\n     * // can do this with atlas values as well:\n     * this.addAnimation(\"turn\", [{ name: \"turnone\", delay: 200 }, { name: \"turntwo\", delay: 100 }])\n     * // define an dying animation that stop on the last frame\n     * this.addAnimation(\"die\", [{ name: 3, delay: 200 }, { name: 4, delay: 100 }, { name: 5, delay: Infinity }])\n     * // set the standing animation as default\n     * this.setCurrentAnimation(\"stand\");\n     */\n    addAnimation(name, index, animationspeed) {\n        this.anim[name] = {\n            name : name,\n            frames : [],\n            idx : 0,\n            length : 0\n        };\n\n        // # of frames\n        let counter = 0;\n\n        if (typeof (this.textureAtlas) !== \"object\") {\n            return 0;\n        }\n\n\n        if (index == null) {\n            index = [];\n            // create a default animation with all frame\n            Object.keys(this.textureAtlas).forEach((v, i) => {\n                index[i] = i;\n            });\n        }\n\n        // set each frame configuration (offset, size, etc..)\n        for (let i = 0, len = index.length; i < len; i++) {\n            let frame = index[i];\n            let frameObject;\n            if (typeof(frame) === \"number\" || typeof(frame) === \"string\") {\n                frameObject = {\n                    name: frame,\n                    delay: animationspeed || this.animationspeed\n                };\n            }\n            else {\n                frameObject = frame;\n            }\n            let frameObjectName = frameObject.name;\n            if (typeof(frameObjectName) === \"number\") {\n                if (typeof (this.textureAtlas[frameObjectName]) !== \"undefined\") {\n                    // TODO: adding the cache source coordinates add undefined entries in webGL mode\n                    this.anim[name].frames[i] = Object.assign(\n                        {},\n                        this.textureAtlas[frameObjectName],\n                        frameObject\n                    );\n                    counter++;\n                }\n            } else { // string\n                if (this.source.getFormat().includes(\"Spritesheet\")) {\n                    throw new Error(\n                        \"string parameters for addAnimation are not allowed for standard spritesheet based Texture\"\n                    );\n                } else {\n                    this.anim[name].frames[i] = Object.assign(\n                        {},\n                        this.textureAtlas[this.atlasIndices[frameObjectName]],\n                        frameObject\n                    );\n                    counter++;\n                }\n            }\n        }\n        this.anim[name].length = counter;\n\n        return counter;\n    }\n\n    /**\n     * set the current animation\n     * this will always change the animation & set the frame to zero\n     * @param {string} name - animation id\n     * @param {string|Function} [resetAnim] - animation id to switch to when complete, or callback\n     * @param {boolean} [preserve_dt=false] - if false will reset the elapsed time counter since last frame\n     * @returns {Sprite} Reference to this object for method chaining\n     * @example\n     * // set \"walk\" animation\n     * this.setCurrentAnimation(\"walk\");\n     *\n     * // set \"walk\" animation if it is not the current animation\n     * if (this.isCurrentAnimation(\"walk\")) {\n     *     this.setCurrentAnimation(\"walk\");\n     * }\n     *\n     * // set \"eat\" animation, and switch to \"walk\" when complete\n     * this.setCurrentAnimation(\"eat\", \"walk\");\n     *\n     * // set \"die\" animation, and remove the object when finished\n     * this.setCurrentAnimation(\"die\", () => {\n     *    world.removeChild(this);\n     *    return false; // do not reset to first frame\n     * });\n     *\n     * // set \"attack\" animation, and pause for a short duration\n     * this.setCurrentAnimation(\"die\", () => {\n     *    this.animationpause = true;\n     *\n     *    // back to \"standing\" animation after 1 second\n     *    setTimeout(function () {\n     *        this.setCurrentAnimation(\"standing\");\n     *    }, 1000);\n     *\n     *    return false; // do not reset to first frame\n     * });\n     */\n    setCurrentAnimation(name, resetAnim, preserve_dt = false) {\n        if (typeof this.anim[name] !== \"undefined\") {\n            if (!this.isCurrentAnimation(name)) {\n                this.current.name = name;\n                this.current.length = this.anim[this.current.name].length;\n                if (typeof resetAnim === \"string\") {\n                    this.resetAnim = this.setCurrentAnimation.bind(this, resetAnim, null, true);\n                } else if (typeof resetAnim === \"function\") {\n                    this.resetAnim = resetAnim;\n                } else {\n                    this.resetAnim = undefined;\n                }\n                this.setAnimationFrame(0);\n                if (!preserve_dt) {\n                    this.dt = 0;\n                }\n                this.isDirty = true;\n            }\n        } else {\n            throw new Error(\"animation id '\" + name + \"' not defined\");\n        }\n        return this;\n    }\n\n    /**\n     * reverse the given or current animation if none is specified\n     * @param {string} [name] - animation id\n     * @returns {Sprite} Reference to this object for method chaining\n     * @see Sprite#animationspeed\n     */\n    reverseAnimation(name) {\n        if (typeof name !== \"undefined\" && typeof this.anim[name] !== \"undefined\") {\n            this.anim[name].frames.reverse();\n        } else {\n            this.anim[this.current.name].frames.reverse();\n        }\n        this.isDirty = true;\n        return this;\n    }\n\n    /**\n     * return true if the specified animation is the current one.\n     * @param {string} name - animation id\n     * @returns {boolean}\n     * @example\n     * if (!this.isCurrentAnimation(\"walk\")) {\n     *     // do something funny...\n     * }\n     */\n    isCurrentAnimation(name) {\n        return this.current.name === name;\n    }\n\n    /**\n     * change the current texture atlas region for this sprite\n     * @see Texture.getRegion\n     * @param {object} region - typically returned through me.Texture.getRegion()\n     * @returns {Sprite} Reference to this object for method chaining\n     * @example\n     * // change the sprite to \"shadedDark13.png\";\n     * mySprite.setRegion(mytexture.getRegion(\"shadedDark13.png\"));\n     */\n    setRegion(region) {\n        // set the source texture for the given region\n        this.image = this.source.getTexture(region);\n        // set the sprite offset within the texture\n        this.current.offset.setV(region.offset);\n        // set angle if defined\n        this.current.angle = typeof region.angle === \"number\" ? region.angle : 0;\n        // update the default \"current\" size\n        this.width = this.current.width = region.width;\n        this.height = this.current.height = region.height;\n        // set global anchortPoint if defined\n        if (region.anchorPoint) {\n            this.anchorPoint.setMuted(\n                this._flip.x && region.trimmed === true ? 1 - region.anchorPoint.x : region.anchorPoint.x,\n                this._flip.y && region.trimmed === true ? 1 - region.anchorPoint.y : region.anchorPoint.y\n            );\n        }\n        // update the sprite bounding box\n        this.updateBounds();\n        this.isDirty = true;\n        return this;\n    }\n\n    /**\n     * force the current animation frame index.\n     * @param {number} [index=0] - animation frame index\n     * @returns {Sprite} Reference to this object for method chaining\n     * @example\n     * // reset the current animation to the first frame\n     * this.setAnimationFrame();\n     */\n    setAnimationFrame(index = 0) {\n        this.current.idx = index % this.current.length;\n        return this.setRegion(this.getAnimationFrameObjectByIndex(this.current.idx));\n    }\n\n    /**\n     * return the current animation frame index.\n     * @returns {number} current animation frame index\n     */\n    getCurrentAnimationFrame() {\n        return this.current.idx;\n    }\n\n    /**\n     * Returns the frame object by the index.\n     * @ignore\n     * @param {number} id - the frame id\n     * @returns {number} if using number indices. Returns {object} containing frame data if using texture atlas\n     */\n    getAnimationFrameObjectByIndex(id) {\n        return this.anim[this.current.name].frames[id];\n    }\n\n    /**\n     * update function. <br>\n     * automatically called by the game manager {@link game}\n     * @protected\n     * @param {number} dt - time since the last update in milliseconds.\n     * @returns {boolean} true if the Sprite is dirty\n     */\n    update(dt) {\n        // play/pause video if necessary\n        if (this.isVideo) {\n            if (this.animationpause) {\n                this.image.pause();\n            } else if (this.image.paused) {\n                this.image.play();\n            }\n            this.isDirty = !this.image.paused;\n        } else {\n            // Update animation if necessary\n            if (!this.animationpause && this.current.length > 1) {\n                let duration = this.getAnimationFrameObjectByIndex(this.current.idx).delay;\n                this.dt += dt;\n                while (this.dt >= duration) {\n                    this.isDirty = true;\n                    this.dt -= duration;\n\n                    let nextFrame = (this.current.length > 1 ? this.current.idx + 1 : this.current.idx);\n                    this.setAnimationFrame(nextFrame);\n\n                    // Switch animation if we reach the end of the strip and a callback is defined\n                    if (this.current.idx === 0) {\n                        if (typeof this.onended === \"function\") {\n                            this.onended();\n                        }\n                        if (typeof this.resetAnim === \"function\") {\n                            // Otherwise is must be callable\n                            if (this.resetAnim() === false) {\n                                // Reset to last frame\n                                this.setAnimationFrame(this.current.length - 1);\n\n                                // Bail early without skipping any more frames.\n                                this.dt %= duration;\n                                break;\n                            }\n                        }\n                    }\n                    // Get next frame duration\n                    duration = this.getAnimationFrameObjectByIndex(this.current.idx).delay;\n                }\n            }\n        }\n\n        //update the \"flickering\" state if necessary\n        if (this._flicker.isFlickering) {\n            this._flicker.duration -= dt;\n            if (this._flicker.duration < 0) {\n                if (typeof (this._flicker.callback) === \"function\") {\n                    this._flicker.callback();\n                }\n                this.flicker(-1);\n            }\n            this.isDirty = true;\n        }\n\n        return super.update(dt);\n    }\n\n    /**\n     * draw this srite (automatically called by melonJS)\n     * @param {CanvasRenderer|WebGLRenderer} renderer - a renderer instance\n     * @param {Camera2d} [viewport] - the viewport to (re)draw\n     */\n    draw(renderer, viewport) {   // eslint-disable-line no-unused-vars\n        // do nothing if we are flickering\n        if (this._flicker.isFlickering) {\n            this._flicker.state = !this._flicker.state;\n            if (!this._flicker.state) {\n                return;\n            }\n        }\n\n        // the frame to draw\n        let frame = this.current;\n\n        // cache the current position and size\n        let xpos = this.pos.x,\n            ypos = this.pos.y;\n\n        let w = frame.width,\n            h = frame.height;\n\n        // frame offset in the texture/atlas\n        let frame_offset = frame.offset;\n        let g_offset = this.offset;\n\n\n        // remove image's TexturePacker/ShoeBox rotation\n        if (frame.angle !== 0) {\n            renderer.translate(-xpos, -ypos);\n            renderer.rotate(frame.angle);\n            xpos -= h;\n            w = frame.height;\n            h = frame.width;\n        }\n\n        renderer.drawImage(\n            this.image,\n            g_offset.x + frame_offset.x, // sx\n            g_offset.y + frame_offset.y, // sy\n            w, h,                        // sw,sh\n            xpos, ypos,                  // dx,dy\n            w, h                         // dw,dh\n        );\n    }\n\n    /**\n     * Destroy function<br>\n     * @ignore\n     */\n    destroy() {\n        pool.push(this.offset);\n        this.offset = undefined;\n        if (this.isVideo) {\n            off(STATE_PAUSE, this._onBlurFn);\n            this._onBlurFn = undefined;\n            this.image.onended = undefined;\n            this.image.pause();\n            this.image.currentTime = 0;\n        }\n        this.image = undefined;\n        super.destroy();\n    }\n}\n\nvar img = \"data:image/png;base64,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\";\n\n// a basic progress bar object\nclass ProgressBar extends Renderable {\n    /**\n     * @ignore\n     */\n    constructor(x, y, w, h) {\n        super(x, y, w, h);\n\n        this.barHeight = h;\n        this.anchorPoint.set(0, 0);\n\n        on(LOADER_PROGRESS, this.onProgressUpdate, this);\n        on(VIEWPORT_ONRESIZE, this.resize, this);\n\n        this.anchorPoint.set(0, 0);\n\n        // store current progress\n        this.progress = 0;\n    }\n\n    /**\n     * make sure the screen is refreshed every frame\n     * @ignore\n     */\n    onProgressUpdate(progress) {\n        this.progress = ~~(progress * this.width);\n        this.isDirty = true;\n    }\n\n    /**\n     * draw function\n     * @ignore\n     */\n    draw(renderer, viewport) {\n        // draw the progress bar\n        renderer.setColor(\"black\");\n        renderer.fillRect(this.pos.x, viewport.centerY, renderer.width, this.barHeight / 2);\n\n        renderer.setColor(\"#55aa00\");\n        renderer.fillRect(this.pos.x, viewport.centerY, this.progress, this.barHeight / 2);\n    }\n\n    /**\n     * Called by engine before deleting the object\n     * @ignore\n     */\n    onDestroyEvent() {\n        // cancel the callback\n        off(LOADER_PROGRESS, this.onProgressUpdate);\n        off(VIEWPORT_ONRESIZE, this.resize);\n    }\n\n}\n\n/**\n * a default loading screen\n * @ignore\n */\nclass DefaultLoadingScreen extends Stage {\n    /**\n     * call when the loader is resetted\n     * @ignore\n     */\n    onResetEvent() {\n        const barHeight = 8;\n\n        // set a background color\n        game.world.backgroundColor.parseCSS(\"#202020\");\n\n        // progress bar\n        game.world.addChild(new ProgressBar(\n            0,\n            renderer.height / 2,\n            renderer.width,\n            barHeight\n        ), 1);\n\n        // load the melonJS logo\n        load({name: \"melonjs_logo\", type: \"image\", src: img}, () => {\n            // melonJS logo\n            game.world.addChild(new Sprite(\n                renderer.width / 2,\n                renderer.height / 2, {\n                    image : \"melonjs_logo\",\n                    framewidth : 256,\n                    frameheight : 256\n                }), 2\n            );\n        });\n    }\n\n    /**\n     * Called by engine before deleting the object\n     * @ignore\n     */\n    onDestroyEvent() {\n        // cancel the callback\n        unload({name: \"melonjs_logo\", type:\"image\"});\n    }\n}\n\n// current state\nlet _state = -1;\n\n// requestAnimeFrame Id\nlet _animFrameId = -1;\n\n// whether the game state is \"paused\"\nlet _isPaused = false;\n\n// list of stages\nlet _stages = {};\n\n// fading transition parameters between screen\nlet _fade = {\n    color : \"\",\n    duration : 0\n};\n\n// callback when state switch is done\n/** @ignore */\nlet _onSwitchComplete = null;\n\n// just to keep track of possible extra arguments\nlet _extraArgs = null;\n\n// store the elapsed time during pause/stop period\nlet _pauseTime = 0;\n\n/**\n * @ignore\n */\nfunction _startRunLoop() {\n    // ensure nothing is running first and in valid state\n    if ((_animFrameId === -1) && (_state !== -1)) {\n        // start the main loop\n        _animFrameId = globalThis.requestAnimationFrame(_renderFrame);\n    }\n}\n\n/**\n * Resume the game loop after a pause.\n * @ignore\n */\nfunction _resumeRunLoop() {\n    // ensure game is actually paused and in valid state\n    if (_isPaused && (_state !== -1)) {\n        _isPaused = false;\n    }\n}\n\n/**\n * Pause the loop for most stage objects.\n * @ignore\n */\nfunction _pauseRunLoop() {\n    // Set the paused boolean to stop updates on (most) entities\n    _isPaused = true;\n}\n\n/**\n * this is only called when using requestAnimFrame stuff\n * @param {number} time - current timestamp in milliseconds\n * @ignore\n */\nfunction _renderFrame(time) {\n    emit(TICK, time);\n    // schedule the next frame update\n    if (_animFrameId !== -1) {\n        _animFrameId = globalThis.requestAnimationFrame(_renderFrame);\n    }\n}\n\n/**\n * stop the SO main loop\n * @ignore\n */\nfunction _stopRunLoop() {\n    // cancel any previous animationRequestFrame\n    globalThis.cancelAnimationFrame(_animFrameId);\n    _animFrameId = -1;\n}\n\n/**\n * start the SO main loop\n * @ignore\n */\nfunction _switchState(state) {\n    // clear previous interval if any\n    _stopRunLoop();\n\n    // call the stage destroy method\n    if (_stages[_state]) {\n        // just notify the object\n        _stages[_state].stage.destroy();\n    }\n\n    if (_stages[state]) {\n        // set the global variable\n        _state = state;\n\n        // call the reset function with _extraArgs as arguments\n        _stages[_state].stage.reset.apply(_stages[_state].stage, _extraArgs);\n\n        // and start the main loop of the\n        // new requested state\n        _startRunLoop();\n\n        // publish the pause event\n        emit(STATE_CHANGE);\n\n        // execute callback if defined\n        if (_onSwitchComplete) {\n            _onSwitchComplete();\n        }\n    }\n}\n\n// initialize me.state on system boot\nonce(BOOT, () => {\n    // set the built-in loading stage\n    state.set(state.LOADING, new DefaultLoadingScreen());\n    // set and enable the default stage\n    state.set(state.DEFAULT, new Stage());\n    // enable by default as soon as the display is initialized\n    once(VIDEO_INIT, () => {\n        state.change(state.DEFAULT, true);\n    });\n});\n\n/**\n * a State Manager (state machine)\n * @namespace state\n */\nlet state = {\n\n    /**\n     * default state ID for Loading Stage\n     * @constant\n     * @name LOADING\n     * @memberof state\n     */\n    LOADING : 0,\n\n    /**\n     * default state ID for Menu Stage\n     * @constant\n     * @name MENU\n     * @memberof state\n     */\n    MENU : 1,\n\n    /**\n     * default state ID for \"Ready\" Stage\n     * @constant\n     * @name READY\n     * @memberof state\n     */\n    READY : 2,\n\n    /**\n     * default state ID for Play Stage\n     * @constant\n     * @name PLAY\n     * @memberof state\n     */\n    PLAY : 3,\n\n    /**\n     * default state ID for Game Over Stage\n     * @constant\n     * @name GAMEOVER\n     * @memberof state\n     */\n    GAMEOVER : 4,\n\n    /**\n     * default state ID for Game End Stage\n     * @constant\n     * @name GAME_END\n     * @memberof state\n     */\n    GAME_END : 5,\n\n    /**\n     * default state ID for High Score Stage\n     * @constant\n     * @name SCORE\n     * @memberof state\n     */\n    SCORE : 6,\n\n    /**\n     * default state ID for Credits Stage\n     * @constant\n     * @name CREDITS\n     * @memberof state\n     */\n    CREDITS : 7,\n\n    /**\n     * default state ID for Settings Stage\n     * @constant\n     * @name SETTINGS\n     * @memberof state\n     */\n    SETTINGS : 8,\n\n    /**\n     * default state ID for the default Stage\n     * (the default stage is the one running as soon as melonJS is started)\n     * @constant\n     * @name DEFAULT\n     * @memberof state\n     */\n    DEFAULT : 9,\n\n    /**\n     * default state ID for user defined constants<br>\n     * @constant\n     * @name USER\n     * @memberof state\n     * @example\n     * let STATE_INFO = me.state.USER + 0;\n     * let STATE_WARN = me.state.USER + 1;\n     * let STATE_ERROR = me.state.USER + 2;\n     * let STATE_CUTSCENE = me.state.USER + 3;\n     */\n    USER : 100,\n\n    /**\n     * Stop the current stage.\n     * @name stop\n     * @memberof state\n     * @public\n     * @param {boolean} [pauseTrack=false] - pause current track on screen stop.\n     */\n    stop(pauseTrack = false) {\n        // only stop when we are not loading stuff\n        if ((_state !== this.LOADING) && this.isRunning()) {\n            // stop the main loop\n            _stopRunLoop();\n\n            // current music stop\n            if (pauseTrack === true) {\n                pauseTrack();\n            }\n\n            // store time when stopped\n            _pauseTime = globalThis.performance.now();\n\n            // publish the stop notification\n            emit(STATE_STOP);\n        }\n    },\n\n    /**\n     * pause the current stage\n     * @name pause\n     * @memberof state\n     * @public\n     * @param {boolean} [music=false] - pause current music track on screen pause\n     */\n    pause(music = false) {\n        // only pause when we are not loading stuff\n        if ((_state !== this.LOADING) && !this.isPaused()) {\n            // stop the main loop\n            _pauseRunLoop();\n            // current music stop\n            if (music === true) {\n                pauseTrack();\n            }\n\n            // store time when paused\n            _pauseTime = globalThis.performance.now();\n\n            // publish the pause event\n            emit(STATE_PAUSE);\n        }\n    },\n\n    /**\n     * Restart the current stage from a full stop.\n     * @name restart\n     * @memberof state\n     * @public\n     * @param {boolean} [music=false] - resume current music track on screen resume\n     */\n    restart(music = false) {\n        if (!this.isRunning()) {\n            // restart the main loop\n            _startRunLoop();\n            // current music stop\n            if (music === true) {\n                resumeTrack();\n            }\n\n            // calculate the elpased time\n            _pauseTime = globalThis.performance.now() - _pauseTime;\n\n            // publish the restart notification\n            emit(STATE_RESTART, _pauseTime);\n        }\n    },\n\n    /**\n     * resume the current stage\n     * @name resume\n     * @memberof state\n     * @public\n     * @param {boolean} [music=false] - resume current music track on screen resume\n     */\n    resume(music = false) {\n        if (this.isPaused()) {\n            // resume the main loop\n            _resumeRunLoop();\n            // current music stop\n            if (music === true) {\n                resumeTrack();\n            }\n\n            // calculate the elpased time\n            _pauseTime = globalThis.performance.now() - _pauseTime;\n\n            // publish the resume event\n            emit(STATE_RESUME, _pauseTime);\n        }\n    },\n\n    /**\n     * return the running state of the state manager\n     * @name isRunning\n     * @memberof state\n     * @public\n     * @returns {boolean} true if a \"process is running\"\n     */\n    isRunning() {\n        return _animFrameId !== -1;\n    },\n\n    /**\n     * Return the pause state of the state manager\n     * @name isPaused\n     * @memberof state\n     * @public\n     * @returns {boolean} true if the game is paused\n     */\n    isPaused() {\n        return _isPaused;\n    },\n\n    /**\n     * associate the specified state with a Stage\n     * @name set\n     * @memberof state\n     * @public\n     * @param {number} state - State ID (see constants)\n     * @param {Stage} stage - Instantiated Stage to associate with state ID\n     * @param {boolean} [start = false] - if true the state will be changed immediately after adding it.\n     * @example\n     * class MenuButton extends me.GUI_Object {\n     *     onClick() {\n     *         // Change to the PLAY state when the button is clicked\n     *         me.state.change(me.state.PLAY);\n     *         return true;\n     *     }\n     * };\n     *\n     * class MenuScreen extends me.Stage {\n     *     onResetEvent() {\n     *         // Load background image\n     *         me.game.world.addChild(\n     *             new me.ImageLayer(0, 0, {\n     *                 image : \"bg\",\n     *                 z: 0 // z-index\n     *             }\n     *         );\n     *\n     *         // Add a button\n     *         me.game.world.addChild(\n     *             new MenuButton(350, 200, { \"image\" : \"start\" }),\n     *             1 // z-index\n     *         );\n     *\n     *         // Play music\n     *         me.audio.playTrack(\"menu\");\n     *     }\n     *\n     *     onDestroyEvent() {\n     *         // Stop music\n     *         me.audio.stopTrack();\n     *     }\n     * };\n     *\n     * me.state.set(me.state.MENU, new MenuScreen());\n     */\n    set(state, stage, start = false) {\n        if (!(stage instanceof Stage)) {\n            throw new Error(stage + \" is not an instance of me.Stage\");\n        }\n        _stages[state] = {};\n        _stages[state].stage = stage;\n        _stages[state].transition = true;\n\n        if (start === true) {\n            this.change(state);\n        }\n    },\n\n    /**\n     * returns the stage associated with the specified state\n     * (or the current one if none is specified)\n     * @name set\n     * @memberof state\n     * @public\n     * @param {number} [state] - State ID (see constants)\n     * @returns {Stage}\n     */\n    get(state = _state) {\n        if (typeof _stages[state] !== \"undefined\") {\n            return _stages[state].stage;\n        } else {\n            return undefined;\n        }\n\n    },\n\n    /**\n     * return a reference to the current stage<br>\n     * useful to call a object specific method\n     * @name current\n     * @memberof state\n     * @public\n     * @returns {Stage}\n     */\n    current() {\n        return this.get();\n    },\n\n    /**\n     * specify a global transition effect\n     * @name transition\n     * @memberof state\n     * @public\n     * @param {string} effect - (only \"fade\" is supported for now)\n     * @param {Color|string} color - a CSS color value\n     * @param {number} [duration=1000] - expressed in milliseconds\n     */\n    transition(effect, color, duration) {\n        if (effect === \"fade\") {\n            _fade.color = color;\n            _fade.duration = duration;\n        }\n    },\n\n    /**\n     * enable/disable the transition to a particular state (by default enabled for all)\n     * @name setTransition\n     * @memberof state\n     * @public\n     * @param {number} state - State ID (see constants)\n     * @param {boolean} enable\n     */\n    setTransition(state, enable) {\n        _stages[state].transition = enable;\n    },\n\n    /**\n     * change the game/app state\n     * @name change\n     * @memberof state\n     * @public\n     * @param {number} state - State ID (see constants)\n     * @param {boolean} forceChange - if true the state will be changed immediately\n     * @param {...*} [args] - extra arguments to be passed to the reset functions\n     * @example\n     * // The onResetEvent method on the play screen will receive two args:\n     * // \"level_1\" and the number 3\n     * me.state.change(me.state.PLAY, \"level_1\", 3);\n     */\n    change(state, forceChange) {\n        // Protect against undefined Stage\n        if (typeof(_stages[state]) === \"undefined\") {\n            throw new Error(\"Undefined Stage for state '\" + state + \"'\");\n        }\n\n        // do nothing if already the current state\n        if (!this.isCurrent(state)) {\n            _extraArgs = null;\n            if (arguments.length > 1) {\n                // store extra arguments if any\n                _extraArgs = Array.prototype.slice.call(arguments, 1);\n            }\n            // if fading effect\n            if (_fade.duration && _stages[state].transition) {\n                _onSwitchComplete = () => {\n                    game.viewport.fadeOut(_fade.color, _fade.duration);\n                };\n                game.viewport.fadeIn(\n                    _fade.color,\n                    _fade.duration,\n                    function () {\n                        defer(_switchState, this, state);\n                    }\n                );\n\n            }\n            // else just switch without any effects\n            else {\n                // wait for the last frame to be\n                // \"finished\" before switching\n                if (forceChange === true) {\n                    _switchState(state);\n                } else {\n                    defer(_switchState, this, state);\n                }\n            }\n        }\n    },\n\n    /**\n     * return true if the specified state is the current one\n     * @name isCurrent\n     * @memberof state\n     * @public\n     * @param {number} state - State ID (see constants)\n     * @returns {boolean} true if the specified state is the current one\n     */\n    isCurrent(state) {\n        return _state === state;\n    }\n\n};\n\n/**\n * @classdesc\n * a Timer class to manage timing related function (FPS, Game Tick, Time...)\n * @see {@link timer} the default global timer instance\n */\nclass Timer {\n\n    constructor() {\n        /**\n         * Last game tick value. <br>\n         * Use this value to scale velocities during frame drops due to slow hardware or when setting an FPS limit.\n         * This feature is disabled by default (Enable interpolation to use it).\n         * @public\n         * @see interpolation\n         * @See maxfps\n         * @type {number}\n         * @name tick\n         */\n        this.tick = 1.0;\n\n        /**\n         * Last measured fps rate.<br>\n         * This feature is disabled by default, unless the debugPanel is enabled/visible.\n         * @public\n         * @type {number}\n         * @name fps\n         */\n        this.fps = 0;\n\n        /**\n         * Set the maximum target display frame per second\n         * @public\n         * @see tick\n         * @type {number}\n         * @default 60\n         */\n        this.maxfps = 60;\n\n        /**\n         * Enable/disable frame interpolation\n         * @see tick\n         * @type {boolean}\n         * @default false\n         */\n        this.interpolation = false;\n\n        //hold element to display fps\n        this.framecount = 0;\n        this.framedelta = 0;\n\n        /* fps count stuff */\n        this.last = 0;\n        this.now = 0;\n        this.delta = 0;\n        // for timeout/interval update\n        this.step = 0;\n        this.minstep = 0;\n\n        // list of defined timer function\n        this.timers = [];\n        this.timerId = 0;\n\n        // Initialize timer on Boot event\n        once(BOOT, () => {\n            // reset variables to initial state\n            this.reset();\n            this.now = this.last = 0;\n            // register to the game before update event\n            on(GAME_BEFORE_UPDATE, (time) => this.update(time));\n        });\n\n        // reset timer\n        on(STATE_RESUME, () => {\n            this.reset();\n        });\n        on(STATE_RESTART, () => {\n            this.reset();\n        });\n        on(STATE_CHANGE, () => {\n            this.reset();\n        });\n    }\n\n\n    /**\n     * reset time (e.g. usefull in case of pause)\n     * @ignore\n     */\n    reset() {\n        // set to \"now\"\n        this.last = this.now = globalThis.performance.now();\n        this.delta = 0;\n        // reset delta counting variables\n        this.framedelta = 0;\n        this.framecount = 0;\n        this.step = Math.ceil(1000 / this.maxfps); // ROUND IT ?\n        // define some step with some margin\n        this.minstep = (1000 / this.maxfps) * 1.25; // IS IT NECESSARY?\\\n    }\n\n    /**\n     * Calls a function once after a specified delay. See me.timer.setInterval to repeativly call a function.\n     * @param {Function} fn - the function you want to execute after delay milliseconds.\n     * @param {number} delay - the number of milliseconds (thousandths of a second) that the function call should be delayed by.\n     * @param {boolean} [pauseable=true] - respects the pause state of the engine.\n     * @param {...*} args - optional parameters which are passed through to the function specified by fn once the timer expires.\n     * @returns {number} a positive integer value which identifies the timer created by the call to setTimeout(), which can be used later with me.timer.clearTimeout().\n     * @example\n     * // set a timer to call \"myFunction\" after 1000ms\n     * me.timer.setTimeout(myFunction, 1000);\n     * // set a timer to call \"myFunction\" after 1000ms (respecting the pause state) and passing param1 and param2\n     * me.timer.setTimeout(myFunction, 1000, true, param1, param2);\n     */\n    setTimeout(fn, delay, pauseable, ...args) {\n        this.timers.push({\n            fn : fn,\n            delay : delay,\n            elapsed : 0,\n            repeat : false,\n            timerId : ++this.timerId,\n            pauseable : pauseable === true || true,\n            args : args\n        });\n        return this.timerId;\n    }\n\n    /**\n     * Calls a function continously at the specified interval.  See setTimeout to call function a single time.\n     * @param {Function} fn - the function to execute\n     * @param {number} delay - the number of milliseconds (thousandths of a second) on how often to execute the function\n     * @param {boolean} [pauseable=true] - respects the pause state of the engine.\n     * @param {...*} args - optional parameters which are passed through to the function specified by fn once the timer expires.\n     * @returns {number} a numeric, non-zero value which identifies the timer created by the call to setInterval(), which can be used later with me.timer.clearInterval().\n     * @example\n     * // set a timer to call \"myFunction\" every 1000ms\n     * me.timer.setInterval(myFunction, 1000);\n     * // set a timer to call \"myFunction\" every 1000ms (respecting the pause state) and passing param1 and param2\n     * me.timer.setInterval(myFunction, 1000, true, param1, param2);\n     */\n    setInterval(fn, delay, pauseable, ...args) {\n        this.timers.push({\n            fn : fn,\n            delay : delay,\n            elapsed : 0,\n            repeat : true,\n            timerId : ++this.timerId,\n            pauseable : pauseable === true || true,\n            args : args\n        });\n        return this.timerId;\n    }\n\n    /**\n     * Cancels a timeout previously established by calling setTimeout().\n     * @param {number} timeoutID - ID of the timeout to be cancelled\n     */\n    clearTimeout(timeoutID) {\n        if (timeoutID > 0) {\n            defer(this.clearTimer.bind(this), this, timeoutID);\n        }\n    }\n\n    /**\n     * cancels the timed, repeating action which was previously established by a call to setInterval().\n     * @param {number} intervalID - ID of the interval to be cleared\n     */\n    clearInterval(intervalID) {\n        if (intervalID > 0) {\n            defer(this.clearTimer.bind(this), this, intervalID);\n        }\n    }\n\n    /**\n     * Return the current timestamp in milliseconds <br>\n     * since the game has started or since linux epoch (based on browser support for High Resolution Timer)\n     * @returns {number}\n     */\n    getTime() {\n        return this.now;\n    }\n\n    /**\n     * Return elapsed time in milliseconds since the last update\n     * @returns {number}\n     */\n    getDelta() {\n        return this.delta;\n    }\n\n    /**\n     * compute the actual frame time and fps rate\n     * @ignore\n     */\n    countFPS() {\n        this.framecount++;\n        this.framedelta += this.delta;\n        if (this.framecount % 10 === 0) {\n            this.fps = clamp(Math.round((1000 * this.framecount) / this.framedelta), 0, this.maxfps);\n            this.framedelta = 0;\n            this.framecount = 0;\n        }\n    }\n\n    /**\n     * update\n     * @ignore\n     */\n    update(time) {\n        this.last = this.now;\n        this.now = time;\n        this.delta = (this.now - this.last);\n\n        // fix for negative timestamp returned by wechat or chrome on startup\n        if (this.delta < 0) {\n            this.delta = 0;\n        }\n\n        // get the game tick\n        this.tick = (this.delta > this.minstep && this.interpolation) ? this.delta / this.step : 1;\n\n        this.updateTimers();\n    }\n\n    /**\n     * clear Timers\n     * @ignore\n     */\n    clearTimer(timerId) {\n        for (let i = 0, len = this.timers.length; i < len; i++) {\n            if (this.timers[i].timerId === timerId) {\n                this.timers.splice(i, 1);\n                break;\n            }\n        }\n    }\n\n\n    /**\n     * update timers\n     * @ignore\n     */\n    updateTimers() {\n        for (let i = 0, len = this.timers.length; i < len; i++) {\n            let _timer = this.timers[i];\n            if (!(_timer.pauseable && state.isPaused())) {\n                _timer.elapsed += this.delta;\n            }\n            if (_timer.elapsed >= _timer.delay) {\n                _timer.fn.apply(null, _timer.args);\n                if (_timer.repeat === true) {\n                    _timer.elapsed -= _timer.delay;\n                } else {\n                    this.clearTimeout(_timer.timerId);\n                }\n            }\n        }\n    }\n}\n\nconst timer = new Timer();\n\n/**\n * @import Entity from \"./../renderable/entity/entity.js\";\n * @import Container from \"./../renderable/container.js\";\n * @import Renderable from \"./../renderable/renderable.js\";\n * @import Sprite from \"./../renderable/sprite.js\";\n * @import NineSliceSprite from \"./../renderable/nineslicesprite.js\";\n * @import Line from \"./../geometries/line.js\";\n * @import Vector2d from \"./../math/vector2.js\";\n * @import ObservableVector2d from \"./../math/observable_vector2.js\";\n **/\n\n/**\n * @classdesc\n * a Generic Physic Body Object with some physic properties and behavior functionality, to add as a member of a Renderable.\n * @see Renderable.body\n */\nclass Body {\n    /**\n     * @param {Renderable|Container|Entity|Sprite|NineSliceSprite} ancestor - the parent object this body is attached to\n     * @param {Rect|Rect[]|Polygon|Polygon[]|Line|Line[]|Ellipse|Ellipse[]|Point|Point[]|Bounds|Bounds[]|object} [shapes] - a initial shape, list of shapes, or JSON object defining the body\n     * @param {Function} [onBodyUpdate] - callback for when the body is updated (e.g. add/remove shapes)\n     */\n    constructor(ancestor, shapes, onBodyUpdate) {\n\n        /**\n         * a reference to the parent object that contains this body,\n         * or undefined if it has not been added to one.\n         * @public\n         * @type {Renderable|Container|Entity|Sprite|NineSliceSprite}\n         * @default undefined\n         */\n        this.ancestor = ancestor;\n\n        if (typeof this.bounds === \"undefined\") {\n            /**\n             * The AABB bounds box reprensenting this body\n             * @public\n             * @type {Bounds}\n             */\n            this.bounds = pool.pull(\"Bounds\");\n        }\n\n        if (typeof this.shapes === \"undefined\") {\n            /**\n             * The collision shapes of the body\n             * @ignore\n             * @type {Polygon[]|Line[]|Ellipse[]|Point|Point[]}\n             */\n            this.shapes = [];\n        }\n\n        /**\n         * The body collision mask, that defines what should collide with what.<br>\n         * (by default will collide with all entities)\n         * @ignore\n         * @type {number}\n         * @default collision.types.ALL_OBJECT\n         * @see collision.types\n         */\n        this.collisionMask = collision.types.ALL_OBJECT;\n\n        /**\n         * define the collision type of the body for collision filtering\n         * @public\n         * @type {number}\n         * @default collision.types.ENEMY_OBJECT\n         * @see collision.types\n         * @example\n         * // set the body collision type\n         * body.collisionType = me.collision.types.PLAYER_OBJECT;\n         */\n        this.collisionType = collision.types.ENEMY_OBJECT;\n\n        if (typeof this.vel === \"undefined\") {\n            /**\n             * The current velocity of the body.\n             * See to apply a force if you need to modify a body velocity\n             * @see Body.force\n             * @public\n             * @type {Vector2d}\n             * @default <0,0>\n             */\n            this.vel = pool.pull(\"Vector2d\");\n        }\n        this.vel.set(0, 0);\n\n        if (typeof this.force === \"undefined\") {\n            /**\n             * body force to apply to this the body in the current step.\n             * (any positive or negative force will be cancelled after every world/body update cycle)\n             * @public\n             * @type {Vector2d}\n             * @default <0,0>\n             * @see Body.setMaxVelocity\n             * @example\n             * // define a default maximum acceleration, initial force and friction\n             * this.body.force.set(1, 0);\n             * this.body.friction.set(0.4, 0);\n             * this.body.setMaxVelocity(3, 15);\n             *\n             * // apply a postive or negative force when pressing left of right key\n             * update(dt) {\n             *     if (me.input.isKeyPressed(\"left\"))    {\n             *          this.body.force.x = -this.body.maxVel.x;\n             *      } else if (me.input.isKeyPressed(\"right\")) {\n             *         this.body.force.x = this.body.maxVel.x;\n             *     }\n             * }\n             */\n            this.force = pool.pull(\"Vector2d\");\n        }\n        this.force.set(0, 0);\n\n        if (typeof this.friction === \"undefined\") {\n            /**\n             * body friction\n             * @public\n             * @type {Vector2d}\n             * @default <0,0>\n             */\n            this.friction = pool.pull(\"Vector2d\");\n        }\n        this.friction.set(0, 0);\n\n        /**\n         * the body bouciness level when colliding with other solid bodies :\n         * a value of 0 will not bounce, a value of 1 will fully rebound.\n         * @public\n         * @type {number}\n         * @default 0\n         */\n        this.bounce = 0;\n\n        /**\n         * the body mass\n         * @public\n         * @type {number}\n         * @default 1\n         */\n        this.mass = 1;\n\n        if (typeof this.maxVel === \"undefined\") {\n            /**\n             * max velocity (to limit body velocity)\n             * @public\n             * @type {Vector2d}\n             * @default <490,490>\n             */\n            this.maxVel = pool.pull(\"Vector2d\");\n        }\n        // cap by default to half the default gravity force\n        this.maxVel.set(490, 490);\n\n\n        /**\n         * Either this body is a static body or not.\n         * A static body is completely fixed and can never change position or angle.\n         * @readonly\n         * @public\n         * @type {boolean}\n         * @default false\n         */\n        this.isStatic = false;\n\n\n        /**\n         * The degree to which this body is affected by the world gravity\n         * @public\n         * @see World.gravity\n         * @type {number}\n         * @default 1.0\n         */\n        this.gravityScale = 1.0;\n\n        /**\n         * If true this body won't be affected by the world gravity\n         * @public\n         * @see World.gravity\n         * @type {boolean}\n         * @default false\n         */\n        this.ignoreGravity = false;\n\n        /**\n         * falling state of the body<br>\n         * true if the object is falling<br>\n         * false if the object is standing on something<br>\n         * @readonly\n         * @public\n         * @type {boolean}\n         * @default false\n         */\n        this.falling = false;\n\n        /**\n         * jumping state of the body<br>\n         * equal true if the body is jumping<br>\n         * @readonly\n         * @public\n         * @type {boolean}\n         * @default false\n         */\n        this.jumping = false;\n\n\n        if (typeof onBodyUpdate === \"function\") {\n            this.onBodyUpdate = onBodyUpdate;\n        }\n\n        this.bounds.clear();\n\n        // parses the given shapes array and add them\n        if (typeof shapes !== \"undefined\") {\n            if (Array.isArray(shapes)) {\n                for (let s = 0; s < shapes.length; s++) {\n                    this.addShape(shapes[s]);\n                }\n            } else {\n                this.addShape(shapes);\n            }\n        }\n\n        // automatically enable physic when a body is added to a renderable\n        this.ancestor.isKinematic = false;\n    }\n\n    /**\n     * set the body as a static body\n     * static body do not move automatically and do not check againt collision with others\n     * @param {boolean} [isStatic=true]\n     */\n    setStatic(isStatic = true) {\n        this.isStatic = isStatic === true;\n    }\n\n    /**\n     * add a collision shape to this body <br>\n     * (note: me.Rect objects will be converted to me.Polygon before being added)\n     * @param {Rect|Polygon|Line|Ellipse|Point|Point[]|Bounds|object} shape - a shape or JSON object\n     * @returns {number} the shape array length\n     * @example\n     * // add a rectangle shape\n     * this.body.addShape(new me.Rect(0, 0, image.width, image.height));\n     * // add a shape from a JSON object\n     * this.body.addShape(me.loader.getJSON(\"shapesdef\").banana);\n     */\n    addShape(shape) {\n        if (shape instanceof Rect || shape instanceof Bounds) {\n            let poly = shape.toPolygon();\n            this.shapes.push(poly);\n            // update the body bounds\n            this.bounds.add(poly.points);\n            this.bounds.translate(poly.pos);\n        } else if (shape instanceof Ellipse) {\n            if (!this.shapes.includes(shape)) {\n                // see removeShape\n                this.shapes.push(shape);\n            }\n            // update the body bounds\n            this.bounds.addBounds(shape.getBounds());\n            // use bounds position as ellipse position is center\n            this.bounds.translate(\n                shape.getBounds().x,\n                shape.getBounds().y\n            );\n        } else if (shape instanceof Polygon) {\n            if (!this.shapes.includes(shape)) {\n                // see removeShape\n                this.shapes.push(shape);\n            }\n            // update the body bounds\n            this.bounds.add(shape.points);\n            this.bounds.translate(shape.pos);\n        } else if (shape instanceof Point) {\n            if (!this.shapes.includes(shape)) {\n                // see removeShape\n                this.shapes.push(shape);\n            }\n            this.bounds.addPoint(shape);\n        } else {\n            // JSON object\n            this.fromJSON(shape);\n        }\n\n        if (typeof this.onBodyUpdate === \"function\") {\n            this.onBodyUpdate(this);\n        }\n\n        // return the length of the shape list\n        return this.shapes.length;\n    }\n\n    /**\n     * set the body vertices to the given one\n     * @param {Vector2d[]} vertices - an array of me.Vector2d points defining a convex hull\n     * @param {number} [index=0] - the shape object for which to set the vertices\n     * @param {boolean} [clear=true] - either to reset the body definition before adding the new vertices\n     */\n    setVertices(vertices, index = 0, clear = true) {\n        let polygon = this.getShape(index);\n        if (polygon instanceof Polygon) {\n            polygon.setShape(0, 0, vertices);\n        } else {\n            // this will replace any other non polygon shape type if defined\n            this.shapes[index] = pool.pull(\"Polygon\", 0, 0, vertices);\n        }\n\n        // update the body bounds to take in account the new vertices\n        this.bounds.add(this.shapes[index].points, clear);\n\n        if (typeof this.onBodyUpdate === \"function\") {\n            this.onBodyUpdate(this);\n        }\n    }\n\n    /**\n     * add the given vertices to the body shape\n     * @param {Vector2d[]} vertices - an array of me.Vector2d points defining a convex hull\n     * @param {number} [index=0] - the shape object for which to set the vertices\n     */\n    addVertices(vertices, index = 0) {\n        this.setVertices(vertices, index, false);\n    }\n\n    /**\n     * add collision mesh based on a JSON object\n     * (this will also apply any physic properties defined in the given JSON file)\n     * @param {object} json - a JSON object as exported from a Physics Editor tool\n     * @param {string} [id] - an optional shape identifier within the given the json object\n     * @see https://www.codeandweb.com/physicseditor\n     * @returns {number} how many shapes were added to the body\n     * @example\n     * // define the body based on the banana shape\n     * this.body.fromJSON(me.loader.getJSON(\"shapesdef\").banana);\n     * // or ...\n     * this.body.fromJSON(me.loader.getJSON(\"shapesdef\"), \"banana\");\n     */\n    fromJSON(json, id) {\n        let data = json;\n\n        if (typeof id !== \"undefined\") {\n            data = json[id];\n        }\n\n        // Physic Editor Format (https://www.codeandweb.com/physicseditor)\n        if (typeof data === \"undefined\") {\n            throw new Error(\"Identifier (\" + id + \") undefined for the given JSON object)\");\n        }\n\n        if (data.length) {\n            // go through all shapes and add them to the body\n            for (let i = 0; i < data.length; i++) {\n                this.addVertices(data[i].shape, i);\n            }\n            // apply density, friction and bounce properties from the first shape\n            // Note : how to manage different mass or friction for all different shapes?\n            this.mass = data[0].density || 0;\n            this.friction.set(data[0].friction || 0, data[0].friction || 0);\n            this.bounce = data[0].bounce || 0;\n        }\n\n        // return the amount of shapes added to the body\n        return data.length;\n    }\n\n    /**\n     * return the collision shape at the given index\n     * @param {number} [index=0] - the shape object at the specified index\n     * @returns {Polygon|Line|Ellipse} shape a shape object if defined\n     */\n    getShape(index) {\n        return this.shapes[index || 0];\n    }\n\n    /**\n     * returns the AABB bounding box for this body\n     * @returns {Bounds} bounding box Rectangle object\n     */\n    getBounds() {\n        return this.bounds;\n    }\n\n    /**\n     * remove the specified shape from the body shape list\n     * @param {Polygon|Line|Ellipse} shape - a shape object\n     * @returns {number} the shape array length\n     */\n    removeShape(shape) {\n        // clear the current bounds\n        this.bounds.clear();\n        // remove the shape from shape list\n        remove(this.shapes, shape);\n        // add everything left back\n        for (let s = 0; s < this.shapes.length; s++) {\n            this.addShape(this.shapes[s]);\n        }\n        // return the length of the shape list\n        return this.shapes.length;\n    }\n\n    /**\n     * remove the shape at the given index from the body shape list\n     * @param {number} index - the shape object at the specified index\n     * @returns {number} the shape array length\n     */\n    removeShapeAt(index) {\n        return this.removeShape(this.getShape(index));\n    }\n\n    /**\n     * By default all physic bodies are able to collide with all other bodies, <br>\n     * but it's also possible to specify 'collision filters' to provide a finer <br>\n     * control over which body can collide with each other.\n     * @see collision.types\n     * @param {number} [bitmask = collision.types.ALL_OBJECT] - the collision mask\n     * @example\n     * // filter collision detection with collision shapes, enemies and collectables\n     * body.setCollisionMask(me.collision.types.WORLD_SHAPE | me.collision.types.ENEMY_OBJECT | me.collision.types.COLLECTABLE_OBJECT);\n     * ...\n     * // disable collision detection with all other objects\n     * body.setCollisionMask(me.collision.types.NO_OBJECT);\n     */\n    setCollisionMask(bitmask = collision.types.ALL_OBJECT) {\n        this.collisionMask = bitmask;\n    }\n\n    /**\n     * define the collision type of the body for collision filtering\n     * @see collision.types\n     * @param {number} type - the collision type\n     * @example\n     * // set the body collision type\n     * body.collisionType = me.collision.types.PLAYER_OBJECT;\n     */\n    setCollisionType(type) {\n        if (typeof type !== \"undefined\") {\n            if (typeof collision.types[type] !== \"undefined\") {\n                this.collisionType = collision.types[type];\n            } else {\n                throw new Error(\"Invalid value for the collisionType property\");\n            }\n        }\n    }\n\n    /**\n     * the built-in function to solve the collision response\n     * @param {object} response - the collision response object (see {@link ResponseObject})\n     */\n    respondToCollision(response) {\n        // the overlap vector\n        let overlap = response.overlapV;\n\n        // FIXME: Respond proportionally to object mass\n\n        // Move out of the other object shape\n        this.ancestor.pos.sub(overlap);\n\n        // adjust velocity\n        if (overlap.x !== 0) {\n            this.vel.x = ~~(0.5 + this.vel.x - overlap.x) || 0;\n            if (this.bounce > 0) {\n                this.vel.x *= -this.bounce;\n            }\n        }\n        if (overlap.y !== 0) {\n            this.vel.y = ~~(0.5 + this.vel.y - overlap.y) || 0;\n            if (this.bounce > 0) {\n                this.vel.y *= -this.bounce;\n            }\n\n            if (!this.ignoreGravity) {\n                // cancel the falling an jumping flags if necessary\n                let dir = this.falling === true ? 1 : this.jumping === true ? -1 : 0;\n                this.falling = overlap.y >= dir;\n                this.jumping = overlap.y <= -dir;\n            }\n        }\n    }\n\n    /**\n     * The forEach() method executes a provided function once per body shape element. <br>\n     * the callback function is invoked with three arguments: <br>\n     *    - The current element being processed in the array <br>\n     *    - The index of element in the array. <br>\n     *    - The array forEach() was called upon. <br>\n     * @param {Function} callback - fnction to execute on each element\n     * @param {object} [thisArg] - value to use as this(i.e reference Object) when executing callback.\n     * @example\n     * // iterate through all shapes of the physic body\n     * mySprite.body.forEach((shape) => {\n     *    shape.doSomething();\n     * });\n     * mySprite.body.forEach((shape, index) => { ... });\n     * mySprite.body.forEach((shape, index, array) => { ... });\n     * mySprite.body.forEach((shape, index, array) => { ... }, thisArg);\n     */\n    forEach(callback, thisArg) {\n        let context = this, i = 0;\n        let shapes = this.shapes;\n\n        let len = shapes.length;\n\n        if (typeof callback !== \"function\") {\n            throw new Error(callback + \" is not a function\");\n        }\n\n        if (arguments.length > 1) {\n            context = thisArg;\n        }\n\n        while (i < len) {\n            callback.call(context, shapes[i], i, shapes);\n            i++;\n        }\n    }\n\n    /**\n     * Returns true if the any of the shape composing the body contains the given point.\n     * @param {number|Vector2d} x -  x coordinate or a vector point to check\n     * @param {number} [y] -  y coordinate\n     * @returns {boolean} true if contains\n     * @example\n     * if (mySprite.body.contains(10, 10)) {\n     *   // do something\n     * }\n     * // or\n     * if (mySprite.body.contains(myVector2d)) {\n     *   // do something\n     * }\n     */\n    contains(...args) {\n        let _x, _y;\n\n        if (args.length === 2) {\n            // x, y\n            [_x, _y] = args;\n        } else {\n            // vector\n            [_x, _y] = [args[0].x, args[0].y];\n        }\n\n        if (this.getBounds().contains(_x, _y)) {\n            // cannot use forEach here as cannot break out with a return\n            for (let i = this.shapes.length, shape; i--, (shape = this.shapes[i]);) {\n                if (shape.contains(_x, _y)) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Rotate this body (counter-clockwise) by the specified angle (in radians).\n     * Unless specified the body will be rotated around its center point\n     * @param {number} angle - The angle to rotate (in radians)\n     * @param {Vector2d|ObservableVector2d} [v=Body.getBounds().center] - an optional point to rotate around\n     * @returns {Body} Reference to this object for method chaining\n     */\n    rotate(angle, v = this.getBounds().center) {\n        if (angle !== 0) {\n            this.bounds.clear();\n            this.forEach((shape) => {\n                shape.rotate(angle, v);\n                this.bounds.addBounds(shape.getBounds());\n                /*\n                if (!(shape instanceof Ellipse)) {\n                    // ellipse position is center\n                    this.bounds.translate(shape.pos);\n                }\n                */\n            });\n            /*\n            if (typeof this.onBodyUpdate === \"function\") {\n                this.onBodyUpdate(this);\n            }\n            */\n        }\n        return this;\n    }\n\n    /**\n     * cap the body velocity (body.maxVel property) to the specified value<br>\n     * @param {number} x - max velocity on x axis\n     * @param {number} y - max velocity on y axis\n     */\n    setMaxVelocity(x, y) {\n        this.maxVel.x = x;\n        this.maxVel.y = y;\n    }\n\n    /**\n     * set the body default friction\n     * @param {number} x - horizontal friction\n     * @param {number} y - vertical friction\n     */\n    setFriction(x = 0, y = 0) {\n        this.friction.x = x;\n        this.friction.y = y;\n    }\n\n    /**\n     * Updates the parent's position as well as computes the new body's velocity based\n     * on the values of force/friction.  Velocity chages are proportional to the\n     * me.timer.tick value (which can be used to scale velocities).  The approach to moving the\n     * parent renderable is to compute new values of the Body.vel property then add them to\n     * the parent.pos value thus changing the postion the amount of Body.vel each time the\n     * update call is made. <br>\n     * Updates to Body.vel are bounded by maxVel (which defaults to viewport size if not set) <br>\n     * At this time a call to Body.Update does not call the onBodyUpdate callback that is listed in the constructor arguments.\n     * @protected\n     * @param {number} dt - time since the last update in milliseconds.\n     * @returns {boolean} true if resulting velocity is different than 0\n     */\n    update(dt) { // eslint-disable-line no-unused-vars\n        // apply timer.tick to delta time for linear interpolation (when enabled)\n        // #761 add delta time in body update\n        let deltaTime = /* dt * */ timer.tick;\n\n        // apply force if defined\n        if (this.force.x !== 0) {\n            this.vel.x += this.force.x * deltaTime;\n        }\n        if (this.force.y !== 0) {\n            this.vel.y += this.force.y * deltaTime;\n        }\n\n        // apply friction if defined\n        if (this.friction.x > 0) {\n            let fx = this.friction.x * deltaTime,\n                nx = this.vel.x + fx,\n                x = this.vel.x - fx;\n\n            this.vel.x = (\n                (nx < 0) ? nx :\n                    (x > 0) ? x  : 0\n            );\n        }\n        if (this.friction.y > 0) {\n            let fy = this.friction.y * deltaTime,\n                ny = this.vel.y + fy,\n                y = this.vel.y - fy;\n\n            this.vel.y = (\n                (ny < 0) ? ny :\n                    (y > 0) ? y  : 0\n            );\n        }\n\n        // cap velocity\n        if (this.vel.y !== 0) {\n            this.vel.y = clamp(this.vel.y, -this.maxVel.y, this.maxVel.y);\n        }\n        if (this.vel.x !== 0) {\n            this.vel.x = clamp(this.vel.x, -this.maxVel.x, this.maxVel.x);\n        }\n\n        // check if falling / jumping\n        this.falling = (this.vel.y * Math.sign(this.force.y)) > 0;\n        this.jumping = (this.falling ? false : this.jumping);\n\n        // update the body ancestor position\n        this.ancestor.pos.add(this.vel);\n\n        // returns true if vel is different from 0\n        return (this.vel.x !== 0 || this.vel.y !== 0);\n    }\n\n    /**\n     * Destroy function<br>\n     * @ignore\n     */\n    destroy() {\n        // push back instance into object pool\n        pool.push(this.bounds);\n        pool.push(this.vel);\n        pool.push(this.force);\n        pool.push(this.friction);\n        pool.push(this.maxVel);\n        this.shapes.forEach((shape) => {\n            pool.push(shape, false);\n        });\n\n        // set to undefined\n        this.onBodyUpdate = undefined;\n        this.ancestor = undefined;\n        this.bounds = undefined;\n        this.vel = undefined;\n        this.force = undefined;\n        this.friction = undefined;\n        this.maxVel = undefined;\n        this.shapes.length = 0;\n\n        // reset some variable to default\n        this.setStatic(false);\n    }\n}\n\n/*\n * Tween.js - Licensed under the MIT license\n * https://github.com/tweenjs/tween.js\n */\n\n/**\n * Easing Function :<br>\n * <p>\n * Easing.Linear.None<br>\n * Easing.Quadratic.In<br>\n * Easing.Quadratic.Out<br>\n * Easing.Quadratic.InOut<br>\n * Easing.Cubic.In<br>\n * Easing.Cubic.Out<br>\n * Easing.Cubic.InOut<br>\n * Easing.Quartic.In<br>\n * Easing.Quartic.Out<br>\n * Easing.Quartic.InOut<br>\n * Easing.Quintic.In<br>\n * Easing.Quintic.Out<br>\n * Easing.Quintic.InOut<br>\n * Easing.Sinusoidal.In<br>\n * Easing.Sinusoidal.Out<br>\n * Easing.Sinusoidal.InOut<br>\n * Easing.Exponential.In<br>\n * Easing.Exponential.Out<br>\n * Easing.Exponential.InOut<br>\n * Easing.Circular.In<br>\n * Easing.Circular.Out<br>\n * Easing.Circular.InOut<br>\n * Easing.Elastic.In<br>\n * Easing.Elastic.Out<br>\n * Easing.Elastic.InOut<br>\n * Easing.Back.In<br>\n * Easing.Back.Out<br>\n * Easing.Back.InOut<br>\n * Easing.Bounce.In<br>\n * Easing.Bounce.Out<br>\n * Easing.Bounce.InOut\n * </p>\n * @public\n * @constant\n * @enum {Function}\n * @name Easing\n * @memberof Tween\n */\nlet Easing = {\n\n    Linear: {\n        /** @ignore */\n        None: function (k) {\n\n            return k;\n\n        }\n\n    },\n\n    Quadratic: {\n        /** @ignore */\n        In: function (k) {\n\n            return k * k;\n\n        },\n        /** @ignore */\n        Out: function (k) {\n\n            return k * (2 - k);\n\n        },\n        /** @ignore */\n        InOut: function (k) {\n\n            if ((k *= 2) < 1) return 0.5 * k * k;\n            return - 0.5 * (--k * (k - 2) - 1);\n\n        }\n\n    },\n\n    Cubic: {\n        /** @ignore */\n        In: function (k) {\n\n            return k * k * k;\n\n        },\n        /** @ignore */\n        Out: function (k) {\n\n            return --k * k * k + 1;\n\n        },\n        /** @ignore */\n        InOut: function (k) {\n\n            if ((k *= 2) < 1) return 0.5 * k * k * k;\n            return 0.5 * ((k -= 2) * k * k + 2);\n\n        }\n\n    },\n\n    Quartic: {\n        /** @ignore */\n        In: function (k) {\n\n            return k * k * k * k;\n\n        },\n        /** @ignore */\n        Out: function (k) {\n\n            return 1 - (--k * k * k * k);\n\n        },\n        /** @ignore */\n        InOut: function (k) {\n\n            if ((k *= 2) < 1) return 0.5 * k * k * k * k;\n            return - 0.5 * ((k -= 2) * k * k * k - 2);\n\n        }\n\n    },\n\n    Quintic: {\n        /** @ignore */\n        In: function (k) {\n\n            return k * k * k * k * k;\n\n        },\n        /** @ignore */\n        Out: function (k) {\n\n            return --k * k * k * k * k + 1;\n\n        },\n        /** @ignore */\n        InOut: function (k) {\n\n            if ((k *= 2) < 1) return 0.5 * k * k * k * k * k;\n            return 0.5 * ((k -= 2) * k * k * k * k + 2);\n\n        }\n\n    },\n\n    Sinusoidal: {\n        /** @ignore */\n        In: function (k) {\n\n            return 1 - Math.cos(k * Math.PI / 2);\n\n        },\n        /** @ignore */\n        Out: function (k) {\n\n            return Math.sin(k * Math.PI / 2);\n\n        },\n        /** @ignore */\n        InOut: function (k) {\n\n            return 0.5 * (1 - Math.cos(Math.PI * k));\n\n        }\n\n    },\n\n    Exponential: {\n        /** @ignore */\n        In: function (k) {\n\n            return k === 0 ? 0 : Math.pow(1024, k - 1);\n\n        },\n        /** @ignore */\n        Out: function (k) {\n\n            return k === 1 ? 1 : 1 - Math.pow(2, - 10 * k);\n\n        },\n        /** @ignore */\n        InOut: function (k) {\n\n            if (k === 0) return 0;\n            if (k === 1) return 1;\n            if ((k *= 2) < 1) return 0.5 * Math.pow(1024, k - 1);\n            return 0.5 * (- Math.pow(2, - 10 * (k - 1)) + 2);\n\n        }\n\n    },\n\n    Circular: {\n        /** @ignore */\n        In: function (k) {\n\n            return 1 - Math.sqrt(1 - k * k);\n\n        },\n        /** @ignore */\n        Out: function (k) {\n\n            return Math.sqrt(1 - (--k * k));\n\n        },\n        /** @ignore */\n        InOut: function (k) {\n\n            if ((k *= 2) < 1) return - 0.5 * (Math.sqrt(1 - k * k) - 1);\n            return 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);\n\n        }\n\n    },\n\n    Elastic: {\n        /** @ignore */\n        In: function (k) {\n            if (k === 0) {\n                return 0;\n            }\n            if (k === 1) {\n                return 1;\n            }\n            return -Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);\n        },\n        /** @ignore */\n        Out: function (k) {\n            if (k === 0) {\n                return 0;\n            }\n            if (k === 1) {\n                return 1;\n            }\n            return Math.pow(2, -10 * k) * Math.sin((k - 0.1) * 5 * Math.PI) + 1;\n\n        },\n        /** @ignore */\n        InOut: function (k) {\n            if (k === 0) {\n                return 0;\n            }\n            if (k === 1) {\n                return 1;\n            }\n            k *= 2;\n            if (k < 1) {\n                return -0.5 * Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);\n            }\n            return 0.5 * Math.pow(2, -10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI) + 1;\n        }\n\n    },\n\n    Back: {\n        /** @ignore */\n        In: function (k) {\n\n            const s = 1.70158;\n            return k * k * ((s + 1) * k - s);\n\n        },\n        /** @ignore */\n        Out: function (k) {\n\n            const s = 1.70158;\n            return --k * k * ((s + 1) * k + s) + 1;\n\n        },\n        /** @ignore */\n        InOut: function (k) {\n\n            const s = 1.70158 * 1.525;\n            if ((k *= 2) < 1) return 0.5 * (k * k * ((s + 1) * k - s));\n            return 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);\n\n        }\n\n    },\n\n    Bounce: {\n        /** @ignore */\n        In: function (k) {\n\n            return 1 - Easing.Bounce.Out(1 - k);\n\n        },\n        /** @ignore */\n        Out: function (k) {\n\n            if (k < (1 / 2.75)) {\n\n                return 7.5625 * k * k;\n\n            } else if (k < (2 / 2.75)) {\n\n                return 7.5625 * (k -= (1.5 / 2.75)) * k + 0.75;\n\n            } else if (k < (2.5 / 2.75)) {\n\n                return 7.5625 * (k -= (2.25 / 2.75)) * k + 0.9375;\n\n            } else {\n\n                return 7.5625 * (k -= (2.625 / 2.75)) * k + 0.984375;\n\n            }\n\n        },\n        /** @ignore */\n        InOut: function (k) {\n\n            if (k < 0.5) return Easing.Bounce.In(k * 2) * 0.5;\n            return Easing.Bounce.Out(k * 2 - 1) * 0.5 + 0.5;\n\n        }\n\n    }\n\n};\n\n/*\n * Tween.js - Licensed under the MIT license\n * https://github.com/tweenjs/tween.js\n */\n\n/**\n * Interpolation Function :<br>\n * <p>\n * Interpolation.Linear<br>\n * Interpolation.Bezier<br>\n * Interpolation.CatmullRom\n * </p>\n * @public\n * @constant\n * @enum {Function}\n * @name Interpolation\n * @memberof Tween\n */\nlet Interpolation = {\n    /** @ignore */\n    Linear: function (v, k) {\n\n        let m = v.length - 1, f = m * k, i = Math.floor(f), fn = Interpolation.Utils.Linear;\n\n        if (k < 0) return fn(v[ 0 ], v[ 1 ], f);\n        if (k > 1) return fn(v[ m ], v[ m - 1 ], m - f);\n\n        return fn(v[ i ], v[ i + 1 > m ? m : i + 1 ], f - i);\n\n    },\n    /** @ignore */\n    Bezier: function (v, k) {\n\n        let b = 0, n = v.length - 1, pw = Math.pow, bn = Interpolation.Utils.Bernstein, i;\n\n        for (i = 0; i <= n; i++) {\n            b += pw(1 - k, n - i) * pw(k, i) * v[ i ] * bn(n, i);\n        }\n\n        return b;\n\n    },\n    /** @ignore */\n    CatmullRom: function (v, k) {\n\n        let m = v.length - 1, f = m * k, i = Math.floor(f), fn = Interpolation.Utils.CatmullRom;\n\n        if (v[ 0 ] === v[ m ]) {\n\n            if (k < 0) i = Math.floor(f = m * (1 + k));\n\n            return fn(v[ (i - 1 + m) % m ], v[ i ], v[ (i + 1) % m ], v[ (i + 2) % m ], f - i);\n\n        } else {\n\n            if (k < 0) return v[ 0 ] - (fn(v[ 0 ], v[ 0 ], v[ 1 ], v[ 1 ], -f) - v[ 0 ]);\n            if (k > 1) return v[ m ] - (fn(v[ m ], v[ m ], v[ m - 1 ], v[ m - 1 ], f - m) - v[ m ]);\n\n            return fn(v[ i ? i - 1 : 0 ], v[ i ], v[ m < i + 1 ? m : i + 1 ], v[ m < i + 2 ? m : i + 2 ], f - i);\n\n        }\n\n    },\n\n    Utils: {\n        /** @ignore */\n        Linear: function (p0, p1, t) {\n\n            return (p1 - p0) * t + p0;\n\n        },\n        /** @ignore */\n        Bernstein: function (n, i) {\n\n            let fc = Interpolation.Utils.Factorial;\n            return fc(n) / fc(i) / fc(n - i);\n\n        },\n        /* @ignore */\n        Factorial: (function () {\n\n            let a = [ 1 ];\n\n            return function (n) {\n\n                let s = 1, i;\n                if (a[ n ]) return a[ n ];\n                for (i = n; i > 1; i--) s *= i;\n                a[ n ] = s;\n                return s;\n\n            };\n\n        })(),\n        /** @ignore */\n        CatmullRom: function (p0, p1, p2, p3, t) {\n\n            let v0 = (p2 - p0) * 0.5, v1 = (p3 - p1) * 0.5, t2 = t * t, t3 = t * t2;\n            return (2 * p1 - 2 * p2 + v0 + v1) * t3 + (- 3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1;\n        }\n    }\n\n};\n\n/*\n * Tween.js - Licensed under the MIT license\n * https://github.com/tweenjs/tween.js\n */\n\n/**\n * @classdesc\n * Javascript Tweening Engine<p>\n * Super simple, fast and easy to use tweening engine which incorporates optimised Robert Penner's equation<p>\n * <a href=\"https://github.com/sole/Tween.js\">https://github.com/sole/Tween.js</a><p>\n * author sole / http://soledadpenades.com<br>\n * author mr.doob / http://mrdoob.com<br>\n * author Robert Eisele / http://www.xarg.org<br>\n * author Philippe / http://philippe.elsass.me<br>\n * author Robert Penner / http://www.robertpenner.com/easing_terms_of_use.html<br>\n * author Paul Lewis / http://www.aerotwist.com/<br>\n * author lechecacharro<br>\n * author Josh Faul / http://jocafa.com/\n */\nclass Tween {\n\n    /**\n     * @param {object} object - object on which to apply the tween\n     * @example\n     * // add a tween to change the object pos.x and pos.y variable to 200 in 3 seconds\n     * tween = new me.Tween(myObject.pos).to({\n     *       x: 200,\n     *       y: 200,\n     *    }, {\n     *       duration: 3000,\n     *       easing: me.Tween.Easing.Bounce.Out,\n     *       autoStart : true\n     * }).onComplete(myFunc);\n     */\n    constructor (object) {\n        this.setProperties(object);\n    }\n\n    /**\n     * reset the tween object to default value\n     * @ignore\n     */\n    onResetEvent(object) {\n        this.setProperties(object);\n    }\n\n    /**\n     * @ignore\n     */\n    setProperties(object) {\n        this._object = object;\n        this._valuesStart = {};\n        this._valuesEnd = {};\n        this._valuesStartRepeat = {};\n        this._duration = 1000;\n        this._repeat = 0;\n        this._yoyo = false;\n        this._reversed = false;\n        this._delayTime = 0;\n        this._startTime = null;\n        this._easingFunction = Easing.Linear.None;\n        this._interpolationFunction = Interpolation.Linear;\n        this._chainedTweens = [];\n        this._onStartCallback = null;\n        this._onStartCallbackFired = false;\n        this._onUpdateCallback = null;\n        this._onCompleteCallback = null;\n        // tweens are synchronized with the game update loop\n        this._tweenTimeTracker = game.lastUpdate;\n\n        // reset flags to default value\n        this.isPersistent = false;\n        // this is not really supported\n        this.updateWhenPaused = false;\n        // comply with the container contract\n        this.isRenderable = false;\n\n        // Set all starting values present on the target object\n        for (let field in object) {\n            if (typeof object !== \"object\") {\n                this._valuesStart[ field ] = parseFloat(object[field]);\n            }\n        }\n    }\n\n    /**\n     * @ignore\n     */\n    _resumeCallback(elapsed) {\n        if (this._startTime) {\n            this._startTime += elapsed;\n        }\n    }\n\n\n\n    /**\n     * subscribe to the resume event when added\n     * @ignore\n     */\n    onActivateEvent() {\n        on(STATE_RESUME, this._resumeCallback, this);\n    }\n\n    /**\n     * Unsubscribe when tween is removed\n     * @ignore\n     */\n    onDeactivateEvent() {\n        off(STATE_RESUME, this._resumeCallback);\n    }\n\n    /**\n     * object properties to be updated and duration\n     * @name to\n     * @memberof Tween\n     * @public\n     * @param {object} properties - hash of properties\n     * @param {object|number} [options] - object of tween properties, or a duration if a numeric value is passed\n     * @param {number} [options.duration] - tween duration\n     * @param {Tween.Easing} [options.easing] - easing function\n     * @param {number} [options.delay] - delay amount expressed in milliseconds\n     * @param {boolean} [options.yoyo] - allows the tween to bounce back to their original value when finished. To be used together with repeat to create endless loops.\n     * @param {number} [options.repeat] - amount of times the tween should be repeated\n     * @param {Tween.Interpolation} [options.interpolation] - interpolation function\n     * @param {boolean} [options.autoStart] - allow this tween to start automatically. Otherwise call me.Tween.start().\n     * @returns {Tween} this instance for object chaining\n     */\n    to(properties, options) {\n\n        this._valuesEnd = properties;\n\n        if (typeof options !== \"undefined\") {\n            if (typeof options === \"number\") {\n                // for backward compatiblity\n                this._duration = options;\n            } else if (typeof options === \"object\") {\n                if (options.duration) { this._duration = options.duration; }\n                if (options.yoyo) { this.yoyo(options.yoyo); }\n                if (options.easing) { this.easing(options.easing); }\n                if (options.repeat) { this.repeat(options.repeat); }\n                if (options.delay) { this.delay(options.delay); }\n                if (options.interpolation) { this.interpolation(options.interpolation); }\n\n                if (options.autoStart) {\n                    this.start();\n                }\n            }\n        }\n\n        return this;\n    }\n\n    /**\n     * start the tween\n     * @name start\n     * @memberof Tween\n     * @public\n     * @param {number} [time] - the current time when the tween was started\n     * @returns {Tween} this instance for object chaining\n     */\n    start(time = timer.getTime()) {\n\n        this._onStartCallbackFired = false;\n\n        // add the tween to the object pool on start\n        game.world.addChild(this);\n\n        this._startTime =  time + this._delayTime;\n\n        for (let property in this._valuesEnd) {\n\n            // check if an Array was provided as property value\n            if (this._valuesEnd[ property ] instanceof Array) {\n\n                if (this._valuesEnd[ property ].length === 0) {\n\n                    continue;\n\n                }\n\n                // create a local copy of the Array with the start value at the front\n                this._valuesEnd[ property ] = [ this._object[ property ] ].concat(this._valuesEnd[ property ]);\n\n            }\n\n            this._valuesStart[ property ] = this._object[ property ];\n\n            if ((this._valuesStart[ property ] instanceof Array) === false) {\n                this._valuesStart[ property ] *= 1.0; // Ensures we're using numbers, not strings\n            }\n\n            this._valuesStartRepeat[ property ] = this._valuesStart[ property ] || 0;\n\n        }\n\n        return this;\n    }\n\n    /**\n     * stop the tween\n     * @name stop\n     * @memberof Tween\n     * @public\n     * @returns {Tween} this instance for object chaining\n     */\n    stop() {\n        // remove the tween from the world container\n        game.world.removeChildNow(this);\n        return this;\n    }\n\n    /**\n     * delay the tween\n     * @name delay\n     * @memberof Tween\n     * @public\n     * @param {number} amount - delay amount expressed in milliseconds\n     * @returns {Tween} this instance for object chaining\n     */\n    delay(amount) {\n\n        this._delayTime = amount;\n        return this;\n\n    }\n\n    /**\n     * Repeat the tween\n     * @name repeat\n     * @memberof Tween\n     * @public\n     * @param {number} times - amount of times the tween should be repeated\n     * @returns {Tween} this instance for object chaining\n     */\n    repeat(times) {\n\n        this._repeat = times;\n        return this;\n\n    }\n\n    /**\n     * Allows the tween to bounce back to their original value when finished.\n     * To be used together with repeat to create endless loops.\n     * @name yoyo\n     * @memberof Tween\n     * @public\n     * @see Tween#repeat\n     * @param {boolean} yoyo\n     * @returns {Tween} this instance for object chaining\n     */\n    yoyo(yoyo) {\n\n        this._yoyo = yoyo;\n        return this;\n\n    }\n\n    /**\n     * set the easing function\n     * @name easing\n     * @memberof Tween\n     * @public\n     * @param {Tween.Easing} easing - easing function\n     * @returns {Tween} this instance for object chaining\n     */\n    easing(easing) {\n        if (typeof easing !== \"function\") {\n            throw new Error(\"invalid easing function for me.Tween.easing()\");\n        }\n        this._easingFunction = easing;\n        return this;\n    }\n\n    /**\n     * set the interpolation function\n     * @name interpolation\n     * @memberof Tween\n     * @public\n     * @param {Tween.Interpolation} interpolation - interpolation function\n     * @returns {Tween} this instance for object chaining\n     */\n    interpolation(interpolation) {\n        this._interpolationFunction = interpolation;\n        return this;\n    }\n\n    /**\n     * chain the tween\n     * @name chain\n     * @memberof Tween\n     * @public\n     * @param {...Tween} chainedTween - Tween(s) to be chained\n     * @returns {Tween} this instance for object chaining\n     */\n    chain() {\n        this._chainedTweens = arguments;\n        return this;\n    }\n\n    /**\n     * onStart callback\n     * @name onStart\n     * @memberof Tween\n     * @public\n     * @param {Function} onStartCallback - callback\n     * @returns {Tween} this instance for object chaining\n     */\n    onStart(onStartCallback) {\n        this._onStartCallback = onStartCallback;\n        return this;\n    }\n\n    /**\n     * onUpdate callback\n     * @name onUpdate\n     * @memberof Tween\n     * @public\n     * @param {Function} onUpdateCallback - callback\n     * @returns {Tween} this instance for object chaining\n     */\n    onUpdate(onUpdateCallback) {\n        this._onUpdateCallback = onUpdateCallback;\n        return this;\n    }\n\n    /**\n     * onComplete callback\n     * @name onComplete\n     * @memberof Tween\n     * @public\n     * @param {Function} onCompleteCallback - callback\n     * @returns {Tween} this instance for object chaining\n     */\n    onComplete(onCompleteCallback) {\n        this._onCompleteCallback = onCompleteCallback;\n        return this;\n    }\n\n    /** @ignore */\n    update(dt) {\n\n        // the original Tween implementation expect\n        // a timestamp and not a time delta\n        this._tweenTimeTracker = (game.lastUpdate > this._tweenTimeTracker) ? game.lastUpdate : this._tweenTimeTracker + dt;\n        let time = this._tweenTimeTracker;\n\n        let property;\n\n        if (time < this._startTime) {\n\n            return true;\n\n        }\n\n        if (this._onStartCallbackFired === false) {\n\n            if (this._onStartCallback !== null) {\n\n                this._onStartCallback.call(this._object);\n\n            }\n\n            this._onStartCallbackFired = true;\n\n        }\n\n        let elapsed = (time - this._startTime) / this._duration;\n        elapsed = elapsed > 1 ? 1 : elapsed;\n\n        let value = this._easingFunction(elapsed);\n\n        for (property in this._valuesEnd) {\n\n            let start = this._valuesStart[ property ] || 0;\n            let end = this._valuesEnd[ property ];\n\n            if (end instanceof Array) {\n\n                this._object[ property ] = this._interpolationFunction(end, value);\n\n            } else {\n\n                // Parses relative end values with start as base (e.g.: +10, -3)\n                if (typeof(end) === \"string\") {\n                    end = start + parseFloat(end);\n                }\n\n                // protect against non numeric properties.\n                if (typeof(end) === \"number\") {\n                    this._object[ property ] = start + (end - start) * value;\n                }\n\n            }\n\n        }\n\n        if (this._onUpdateCallback !== null) {\n\n            this._onUpdateCallback.call(this._object, value);\n\n        }\n\n        if (elapsed === 1) {\n\n            if (this._repeat > 0) {\n\n                if (isFinite(this._repeat)) {\n                    this._repeat--;\n                }\n\n                // reassign starting values, restart by making startTime = now\n                for (property in this._valuesStartRepeat) {\n\n                    if (typeof(this._valuesEnd[ property ]) === \"string\") {\n                        this._valuesStartRepeat[ property ] = this._valuesStartRepeat[ property ] + parseFloat(this._valuesEnd[ property ]);\n                    }\n\n                    if (this._yoyo) {\n                        let tmp = this._valuesStartRepeat[ property ];\n                        this._valuesStartRepeat[ property ] = this._valuesEnd[ property ];\n                        this._valuesEnd[ property ] = tmp;\n                    }\n                    this._valuesStart[ property ] = this._valuesStartRepeat[ property ];\n\n                }\n\n                if (this._yoyo) {\n                    this._reversed = !this._reversed;\n                }\n\n                this._startTime = time + this._delayTime;\n\n                return true;\n\n            } else {\n                // remove the tween from the world container\n                game.world.removeChildNow(this);\n\n                if (this._onCompleteCallback !== null) {\n\n                    this._onCompleteCallback.call(this._object);\n\n                }\n\n                for (let i = 0, numChainedTweens = this._chainedTweens.length; i < numChainedTweens; i ++) {\n\n                    this._chainedTweens[ i ].start(time);\n\n                }\n\n                return false;\n\n            }\n\n        }\n        return true;\n    }\n\n    // export easing function as static class property\n    static get Easing() { return Easing; }\n    static get Interpolation() { return Interpolation; }\n}\n\n/**\n * @classdesc\n * a Vertex Buffer object\n * @class VertexArrayBuffer\n * @ignore\n */\n\nclass VertexArrayBuffer {\n\n    constructor(vertex_size, vertex_per_obj) {\n        // the size of one vertex in float\n        this.vertexSize = vertex_size;\n        // size of an object in vertex\n        this.objSize = vertex_per_obj;\n        // the maximum number of vertices the vertex array buffer can hold\n        this.maxVertex = 256; // (note: this seems to be the sweet spot performance-wise when using batching)\n        // the current number of vertices added to the vertex array buffer\n        this.vertexCount = 0;\n\n        // the actual vertex data buffer\n        this.buffer = new ArrayBuffer(this.maxVertex * this.vertexSize * this.objSize);\n        // Float32 and Uint32 view of the vertex data array buffer\n        this.bufferF32 = new Float32Array(this.buffer);\n        this.bufferU32 = new Uint32Array(this.buffer);\n    }\n\n    /**\n     * clear the vertex array buffer\n     * @ignore\n     */\n    clear() {\n        this.vertexCount = 0;\n    }\n\n\n    /**\n     * return true if full\n     * @ignore\n     */\n    isFull(vertex = this.objSize) {\n        return (this.vertexCount + vertex >= this.maxVertex);\n    }\n\n    /**\n     * resize the vertex buffer, retaining its original contents\n     * @ignore\n     */\n    resize(vertexCount) {\n\n        while (vertexCount > this.maxVertex) {\n            // double the vertex size\n            this.maxVertex <<= 1;\n        }\n\n        // save a reference to the previous data\n        let data = this.bufferF32;\n\n        // recreate ArrayBuffer and views\n        this.buffer = new ArrayBuffer(this.maxVertex * this.vertexSize * this.objSize);\n        this.bufferF32 = new Float32Array(this.buffer);\n        this.bufferU32 = new Uint32Array(this.buffer);\n\n        // copy previous data\n        this.bufferF32.set(data);\n\n        return this;\n    }\n\n    /**\n     * push a new vertex to the buffer\n     * @ignore\n     */\n    push(x, y, u, v, tint) {\n        let offset = this.vertexCount * this.vertexSize;\n\n        if (this.vertexCount >= this.maxVertex) {\n            this.resize(this.vertexCount);\n        }\n\n        this.bufferF32[offset] = x;\n        this.bufferF32[++offset] = y;\n\n        if (typeof u !== \"undefined\") {\n            this.bufferF32[++offset] = u;\n            this.bufferF32[++offset] = v;\n        }\n\n        if (typeof tint !== \"undefined\") {\n            this.bufferU32[++offset] = tint;\n        }\n\n        this.vertexCount++;\n\n        return this;\n    }\n\n    /**\n     * return a reference to the data in Float32 format\n     * @ignore\n     */\n    toFloat32(begin, end) {\n        if (typeof end !== \"undefined\") {\n            return this.bufferF32.subarray(begin, end);\n        } else {\n            return this.bufferF32;\n        }\n    }\n\n    /**\n     * return a reference to the data in Uint32 format\n     * @ignore\n     */\n    toUint32(begin, end) {\n        if (typeof end !== \"undefined\") {\n            return this.bufferU32.subarray(begin, end);\n        } else {\n            return this.bufferU32;\n        }\n    }\n\n    /**\n     * return the size of the vertex in vertex\n     * @ignore\n     */\n    length() {\n        return this.vertexCount;\n    }\n\n    /**\n     * return true if empty\n     * @ignore\n     */\n    isEmpty() {\n        return this.vertexCount === 0;\n    }\n\n}\n\n/**\n * additional import for TypeScript\n * @import WebGLRenderer from \"./../webgl_renderer.js\";\n * @import Matrix3d from \"./../../../math/matrix3.js\";\n */\n\n/**\n * @classdesc\n * A base Compositor object.\n */\nclass Compositor {\n    /**\n     * @param {WebGLRenderer} renderer - the current WebGL renderer session\n     * @param {object} settings - additional settings to initialize this compositors\n     * @param {object[]} settings.attribute - an array of attributes definition\n     * @param {string} settings.attribute.name - name of the attribute in the vertex shader\n     * @param {number} settings.attribute.size - number of components per vertex attribute. Must be 1, 2, 3, or 4.\n     * @param {GLenum} settings.attribute.type - data type of each component in the array\n     * @param {boolean} settings.attribute.normalized - whether integer data values should be normalized into a certain range when being cast to a float\n     * @param {number} settings.attribute.offset - offset in bytes of the first component in the vertex attribute array\n     * @param {object} settings.shader - an array of attributes definition\n     * @param {string} settings.shader.vertex - a string containing the GLSL source code to set\n     * @param {string} settings.shader.fragment - a string containing the GLSL source code to set\n     */\n    constructor (renderer, settings) {\n        this.init(renderer, settings);\n    }\n\n    /**\n     * Initialize the compositor\n     * @ignore\n     */\n    init (renderer, settings) {\n        // the associated renderer\n        this.renderer = renderer;\n\n        // WebGL context\n        this.gl = renderer.gl;\n\n        // Global fill color\n        this.color = renderer.currentColor;\n\n        // Global transformation matrix\n        this.viewMatrix = renderer.currentTransform;\n\n        /**\n         * the default shader created by this compositor\n         * @type {GLShader}\n         */\n        this.defaultShader = undefined;\n\n        /**\n         * the shader currently used by this compositor\n         * @type {GLShader}\n         */\n        this.currentShader = undefined;\n\n        /**\n         * primitive type to render (gl.POINTS, gl.LINE_STRIP, gl.LINE_LOOP, gl.LINES, gl.TRIANGLE_STRIP, gl.TRIANGLE_FAN, gl.TRIANGLES)\n         * @type {number}\n         * @default gl.TRIANGLES\n         */\n        this.mode = this.gl.TRIANGLES;\n\n        /**\n         * an array of vertex attribute properties\n         * @see WebGLCompositor.addAttribute\n         * @type {Array.<Object>}\n         */\n        this.attributes = [];\n\n        /**\n         * the size of a single vertex in bytes\n         * (will automatically be calculated as attributes definitions are added)\n         * @see WebGLCompositor.addAttribute\n         * @type {number}\n         */\n        this.vertexByteSize = 0;\n\n        /**\n         * the size of a single vertex in floats\n         * (will automatically be calculated as attributes definitions are added)\n         * @see WebGLCompositor.addAttribute\n         * @type {number}\n         */\n        this.vertexSize = 0;\n\n        /**\n         * the vertex data buffer used by this compositor\n         * @type {VertexArrayBuffer}\n         */\n        this.vertexData = null;\n\n        // parse given attibrutes\n        if (typeof settings !== \"undefined\" && Array.isArray(settings.attributes)) {\n            settings.attributes.forEach((attr) => {\n                this.addAttribute(attr.name, attr.size, attr.type, attr.normalized, attr.offset);\n                this.vertexData = new VertexArrayBuffer(this.vertexSize, 6);\n            });\n        } else {\n            throw new Error(\"attributes definition missing\");\n        }\n\n        // parse and instantiate the default shader\n        if (typeof settings !== \"undefined\" && typeof settings.shader !== \"undefined\") {\n            this.defaultShader = new GLShader(this.gl, settings.shader.vertex, settings.shader.fragment);\n        } else {\n            throw new Error(\"shader definition missing\");\n        }\n    }\n\n    /**\n     * Reset compositor internal state\n     * @ignore\n     */\n    reset() {\n        // WebGL context\n        this.gl = this.renderer.gl;\n\n        // clear the vertex data buffer\n        this.vertexData.clear();\n    }\n\n    /**\n     * called by the WebGL renderer when a compositor become the current one\n     */\n    bind() {\n        if (this.renderer.currentProgram !== this.defaultShader.program) {\n            this.useShader(this.defaultShader);\n        }\n    }\n\n    /**\n     * Select the shader to use for compositing\n     * @see GLShader\n     * @param {GLShader} shader - a reference to a GLShader instance\n     */\n    useShader(shader) {\n        if (this.renderer.currentProgram !== shader.program) {\n            this.flush();\n            shader.bind();\n            shader.setUniform(\"uProjectionMatrix\", this.renderer.projectionMatrix);\n            shader.setVertexAttributes(this.gl, this.attributes, this.vertexByteSize);\n\n            this.currentShader = shader;\n            this.renderer.currentProgram = this.currentShader.program;\n        }\n    }\n\n    /**\n     * add vertex attribute property definition to the compositor\n     * @param {string} name - name of the attribute in the vertex shader\n     * @param {number} size - number of components per vertex attribute. Must be 1, 2, 3, or 4.\n     * @param {GLenum} type - data type of each component in the array\n     * @param {boolean} normalized - whether integer data values should be normalized into a certain range when being cast to a float\n     * @param {number} offset - offset in bytes of the first component in the vertex attribute array\n     */\n    addAttribute(name, size, type, normalized, offset) {\n        this.attributes.push({\n            name: name,\n            size: size,\n            type: type,\n            normalized: normalized,\n            offset: offset\n        });\n\n        switch (type) {\n            case this.gl.BYTE:\n                this.vertexByteSize += size * Int8Array.BYTES_PER_ELEMENT;\n                break;\n            case this.gl.UNSIGNED_BYTE:\n                this.vertexByteSize += size * Uint8Array.BYTES_PER_ELEMENT;\n                break;\n            case this.gl.SHORT:\n                this.vertexByteSize += size * Int16Array.BYTES_PER_ELEMENT;\n                break;\n            case this.gl.UNSIGNED_SHORT:\n                this.vertexByteSize += size * Uint16Array.BYTES_PER_ELEMENT;\n                break;\n            case this.gl.INT:\n                this.vertexByteSize += size * Int32Array.BYTES_PER_ELEMENT;\n                break;\n            case this.gl.UNSIGNED_INT:\n                this.vertexByteSize += size * Uint32Array.BYTES_PER_ELEMENT;\n                break;\n            case this.gl.FLOAT:\n                this.vertexByteSize += size * Float32Array.BYTES_PER_ELEMENT;\n                break;\n            default:\n                throw new Error(\"Invalid GL Attribute type\");\n        }\n        this.vertexSize = this.vertexByteSize / Float32Array.BYTES_PER_ELEMENT;\n    }\n\n    /**\n     * set/change the current projection matrix\n     * @param {Matrix3d} matrix - the new projection matrix\n     */\n    setProjection(matrix) {\n        this.currentShader.setUniform(\"uProjectionMatrix\", matrix);\n    }\n\n    /**\n     * Flush batched vertex data to the GPU\n     * @param {number} [mode=gl.TRIANGLES] - the GL drawing mode\n     */\n    flush(mode = this.mode) {\n        let vertex = this.vertexData;\n        let vertexCount = vertex.vertexCount;\n\n        if (vertexCount > 0) {\n            let gl = this.gl;\n            let vertexSize = vertex.vertexSize;\n\n            // Copy data into stream buffer\n            if (this.renderer.WebGLVersion > 1) {\n                gl.bufferData(gl.ARRAY_BUFFER, vertex.toFloat32(), gl.STREAM_DRAW, 0, vertexCount * vertexSize);\n            } else {\n                gl.bufferData(gl.ARRAY_BUFFER, vertex.toFloat32(0, vertexCount * vertexSize), gl.STREAM_DRAW);\n            }\n\n            gl.drawArrays(mode, 0, vertexCount);\n\n            // clear the vertex buffer\n            vertex.clear();\n        }\n    }\n}\n\nvar primitiveVertex = \"// Current vertex point\\nattribute vec2 aVertex;\\nattribute vec4 aColor;\\n\\n// Projection matrix\\nuniform mat4 uProjectionMatrix;\\n\\nvarying vec4 vColor;\\n\\nvoid main(void) {\\n    // Transform the vertex position by the projection matrix\\n    gl_Position = uProjectionMatrix * vec4(aVertex, 0.0, 1.0);\\n    // Pass the remaining attributes to the fragment shader\\n    vColor = vec4(aColor.bgr * aColor.a, aColor.a);\\n}\\n\";\n\nvar primitiveFragment = \"varying vec4 vColor;\\n\\nvoid main(void) {\\n    gl_FragColor = vColor;\\n}\\n\";\n\n/**\n * additional import for TypeScript\n * @import Point from \"./../../../geometries/point.js\";\n */\n\n/**\n * @classdesc\n * A WebGL Compositor object. This class handles all of the WebGL state<br>\n * Pushes texture regions or shape geometry into WebGL buffers, automatically flushes to GPU\n * @augments Compositor\n */\nclass PrimitiveCompositor extends Compositor {\n\n    /**\n     * Initialize the compositor\n     * @ignore\n     */\n    init(renderer) {\n        super.init(renderer, {\n            attributes: [\n                {name: \"aVertex\", size: 2, type: renderer.gl.FLOAT, normalized: false, offset: 0 * Float32Array.BYTES_PER_ELEMENT},\n                {name: \"aColor\",  size: 4, type: renderer.gl.UNSIGNED_BYTE, normalized: true, offset: 2 * Float32Array.BYTES_PER_ELEMENT}\n            ],\n            shader: {\n                vertex: primitiveVertex, fragment: primitiveFragment\n            }\n        });\n    }\n\n    /**\n     * Draw an array of vertices\n     * @param {GLenum} mode - primitive type to render (gl.POINTS, gl.LINE_STRIP, gl.LINE_LOOP, gl.LINES, gl.TRIANGLE_STRIP, gl.TRIANGLE_FAN, gl.TRIANGLES)\n     * @param {Point[]} verts - an array of vertices\n     * @param {number} [vertexCount=verts.length] - amount of points defined in the points array\n     */\n    drawVertices(mode, verts, vertexCount = verts.length) {\n        let viewMatrix = this.viewMatrix;\n        let vertexData = this.vertexData;\n        let alpha = this.renderer.getGlobalAlpha();\n        let colorUint32 = this.renderer.currentColor.toUint32(alpha);\n\n        if (vertexData.isFull(vertexCount)) {\n            // is the vertex buffer full if we add more vertices\n            this.flush();\n        }\n\n        // flush if drawing vertices with a different drawing mode\n        if (mode !== this.mode) {\n            this.flush(this.mode);\n            this.mode = mode;\n        }\n\n        if (!viewMatrix.isIdentity()) {\n            verts.forEach((vert) => {\n                viewMatrix.apply(vert);\n                vertexData.push(vert.x, vert.y, undefined, undefined, colorUint32);\n            });\n        } else {\n            verts.forEach((vert) => {\n                vertexData.push(vert.x, vert.y, undefined, undefined, colorUint32);\n            });\n        }\n\n        // force flush for primitive using LINE_STRIP or LINE_LOOP\n        if (this.mode === this.gl.LINE_STRIP || this.mode === this.gl.LINE_LOOP) {\n            this.flush(this.mode);\n        }\n    }\n}\n\nvar quadVertex = \"// Current vertex point\\nattribute vec2 aVertex;\\nattribute vec2 aRegion;\\nattribute vec4 aColor;\\n\\n// Projection matrix\\nuniform mat4 uProjectionMatrix;\\n\\nvarying vec2 vRegion;\\nvarying vec4 vColor;\\n\\nvoid main(void) {\\n    // Transform the vertex position by the projection matrix\\n    gl_Position = uProjectionMatrix * vec4(aVertex, 0.0, 1.0);\\n    // Pass the remaining attributes to the fragment shader\\n    vColor = vec4(aColor.bgr * aColor.a, aColor.a);\\n    vRegion = aRegion;\\n}\\n\";\n\nvar quadFragment = \"uniform sampler2D uSampler;\\nvarying vec4 vColor;\\nvarying vec2 vRegion;\\n\\nvoid main(void) {\\n    gl_FragColor = texture2D(uSampler, vRegion) * vColor;\\n}\\n\";\n\n/**\n * additional import for TypeScript\n * @import {TextureAtlas} from \"./../../texture/atlas.js\";\n */\n\n// a pool of resuable vectors\nlet V_ARRAY = [\n    new Vector2d(),\n    new Vector2d(),\n    new Vector2d(),\n    new Vector2d()\n];\n\n/**\n * @classdesc\n * A WebGL Compositor object. This class handles all of the WebGL state<br>\n * Pushes texture regions or shape geometry into WebGL buffers, automatically flushes to GPU\n * @augments Compositor\n */\nclass QuadCompositor extends Compositor {\n\n    /**\n     * Initialize the compositor\n     * @ignore\n     */\n    init (renderer) {\n        super.init(renderer, {\n            attributes: [\n                {name: \"aVertex\", size: 2, type: renderer.gl.FLOAT, normalized: false, offset: 0 * Float32Array.BYTES_PER_ELEMENT},\n                {name: \"aRegion\", size: 2, type: renderer.gl.FLOAT, normalized: false, offset: 2 * Float32Array.BYTES_PER_ELEMENT},\n                {name: \"aColor\",  size: 4, type: renderer.gl.UNSIGNED_BYTE, normalized: true, offset: 4 * Float32Array.BYTES_PER_ELEMENT}\n            ],\n            shader: {\n                vertex: quadVertex, fragment: quadFragment\n            }\n        });\n\n        // list of active texture units\n        this.currentTextureUnit = -1;\n        this.boundTextures = [];\n    }\n\n    /**\n     * Reset compositor internal state\n     * @ignore\n     */\n    reset() {\n        super.reset();\n\n        // delete all related bound texture\n        for (let i = 0; i < this.renderer.maxTextures; i++) {\n            let texture2D = this.getTexture2D(i);\n            if (typeof texture2D !== \"undefined\") {\n                this.deleteTexture2D(texture2D);\n            }\n        }\n        this.currentTextureUnit = -1;\n    }\n\n    /**\n     * Create a WebGL texture from an image\n     * @param {number} unit - Destination texture unit\n     * @param {Image|HTMLCanvasElement|ImageData|Uint8Array[]|Float32Array[]} [pixels=null] - Source image\n     * @param {number} filter - gl.LINEAR or gl.NEAREST\n     * @param {string} [repeat=\"no-repeat\"] - Image repeat behavior (see {@link ImageLayer#repeat})\n     * @param {number} [w=pixels.width] - Source image width (Only use with UInt8Array[] or Float32Array[] source image)\n     * @param {number} [h=pixels.height] - Source image height (Only use with UInt8Array[] or Float32Array[] source image)\n     * @param {boolean} [premultipliedAlpha=true] - Multiplies the alpha channel into the other color channels\n     * @param {boolean} [mipmap=true] - Whether mipmap levels should be generated for this texture\n     * @returns {WebGLTexture} a WebGL texture\n     */\n    createTexture2D(unit, pixels = null, filter, repeat = \"no-repeat\", w = pixels.width, h = pixels.height, premultipliedAlpha = true, mipmap = true) {\n        let gl = this.gl;\n        let isPOT = isPowerOfTwo(w) && isPowerOfTwo(h);\n        let rs = (repeat.search(/^repeat(-x)?$/) === 0) && (isPOT || this.renderer.WebGLVersion > 1) ? gl.REPEAT : gl.CLAMP_TO_EDGE;\n        let rt = (repeat.search(/^repeat(-y)?$/) === 0) && (isPOT || this.renderer.WebGLVersion > 1) ? gl.REPEAT : gl.CLAMP_TO_EDGE;\n\n        let texture = gl.createTexture();\n\n        this.bindTexture2D(texture, unit);\n\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, rs);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, rt);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, filter);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, filter);\n\n        gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, premultipliedAlpha);\n\n        if (pixels === null || typeof pixels.byteLength !== \"undefined\") {\n            // if pixels is undefined, or if it's Uint8Array/Float32Array TypedArray\n            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, w, h, 0, gl.RGBA, gl.UNSIGNED_BYTE, pixels, 0);\n        } else if (typeof globalThis.OffscreenCanvas !== \"undefined\" && pixels instanceof globalThis.OffscreenCanvas) {\n            // convert to ImageBitmap first (else Safari 16.4 and higher will throw an TypeError exception)\n            const imageBitmap = pixels.transferToImageBitmap();\n            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, imageBitmap);\n            imageBitmap.close();\n        } else {\n            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, pixels);\n        }\n\n        // generate the sprite mimap (used when scaling) if a PowerOfTwo texture\n        if (isPOT && mipmap === true) {\n            gl.generateMipmap(gl.TEXTURE_2D);\n        }\n\n        return texture;\n    }\n\n    /**\n     * delete the given WebGL texture\n     * @param {WebGLTexture} [texture] - a WebGL texture to delete\n     */\n    deleteTexture2D(texture) {\n        this.gl.deleteTexture(texture);\n        this.unbindTexture2D(texture);\n    }\n\n    /**\n     * returns the WebGL texture associated to the given texture unit\n     * @param {number} unit - Texture unit to which a texture is bound\n     * @returns {WebGLTexture} texture a WebGL texture\n     */\n    getTexture2D(unit) {\n        return this.boundTextures[unit];\n    }\n\n    /**\n     * assign the given WebGL texture to the current batch\n     * @param {WebGLTexture} texture - a WebGL texture\n     * @param {number} unit - Texture unit to which the given texture is bound\n     */\n    bindTexture2D(texture, unit) {\n        let gl = this.gl;\n\n        if (texture !== this.boundTextures[unit]) {\n            this.flush();\n            if (this.currentTextureUnit !== unit) {\n                this.currentTextureUnit = unit;\n                gl.activeTexture(gl.TEXTURE0 + unit);\n            }\n\n            gl.bindTexture(gl.TEXTURE_2D, texture);\n            this.boundTextures[unit] = texture;\n\n        } else if (this.currentTextureUnit !== unit) {\n            this.flush();\n            this.currentTextureUnit = unit;\n            gl.activeTexture(gl.TEXTURE0 + unit);\n        }\n    }\n\n    /**\n     * unbind the given WebGL texture, forcing it to be reuploaded\n     * @param {WebGLTexture} [texture] - a WebGL texture\n     * @param {number} [unit] - a WebGL texture\n     * @returns {number} unit the unit number that was associated with the given texture\n     */\n    unbindTexture2D(texture, unit) {\n        if (typeof unit === \"undefined\") {\n            unit = this.boundTextures.indexOf(texture);\n        }\n        if (unit !== -1) {\n            delete this.boundTextures[unit];\n            if (unit === this.currentTextureUnit) {\n                this.currentTextureUnit = -1;\n            }\n        }\n        return unit;\n    }\n\n    /**\n     * @ignore\n     */\n    uploadTexture(texture, w, h, force = false) {\n        let unit = this.renderer.cache.getUnit(texture);\n        let texture2D = this.boundTextures[unit];\n\n        if (typeof texture2D === \"undefined\" || force) {\n            this.createTexture2D(\n                unit,\n                texture.getTexture(),\n                this.renderer.settings.antiAlias ? this.gl.LINEAR : this.gl.NEAREST,\n                texture.repeat,\n                w,\n                h,\n                texture.premultipliedAlpha\n            );\n        } else {\n            this.bindTexture2D(texture2D, unit);\n        }\n\n        return this.currentTextureUnit;\n    }\n\n    /**\n     * Add a textured quad\n     * @param {TextureAtlas} texture - Source texture atlas\n     * @param {number} x - Destination x-coordinate\n     * @param {number} y - Destination y-coordinate\n     * @param {number} w - Destination width\n     * @param {number} h - Destination height\n     * @param {number} u0 - Texture UV (u0) value.\n     * @param {number} v0 - Texture UV (v0) value.\n     * @param {number} u1 - Texture UV (u1) value.\n     * @param {number} v1 - Texture UV (v1) value.\n     * @param {number} tint - tint color to be applied to the texture in UINT32 (argb) format\n     * @param {boolean} reupload - Force the texture to be reuploaded even if already bound\n     */\n    addQuad(texture, x, y, w, h, u0, v0, u1, v1, tint, reupload = false) {\n        let vertexData = this.vertexData;\n\n        if (vertexData.isFull(6)) {\n            // is the vertex buffer full if we add 6 more vertices\n            this.flush();\n        }\n\n        // upload and activate the texture if necessary\n        let unit = this.uploadTexture(texture, w, h, reupload);\n\n        // set fragment sampler accordingly\n        this.currentShader.setUniform(\"uSampler\", unit);\n\n        // Transform vertices\n        let m = this.viewMatrix,\n            vec0 = V_ARRAY[0].set(x, y),\n            vec1 = V_ARRAY[1].set(x + w, y),\n            vec2 = V_ARRAY[2].set(x, y + h),\n            vec3 = V_ARRAY[3].set(x + w, y + h);\n\n        if (!m.isIdentity()) {\n            m.apply(vec0);\n            m.apply(vec1);\n            m.apply(vec2);\n            m.apply(vec3);\n        }\n\n        vertexData.push(vec0.x, vec0.y, u0, v0, tint);\n        vertexData.push(vec1.x, vec1.y, u1, v0, tint);\n        vertexData.push(vec2.x, vec2.y, u0, v1, tint);\n        vertexData.push(vec2.x, vec2.y, u0, v1, tint);\n        vertexData.push(vec1.x, vec1.y, u1, v0, tint);\n        vertexData.push(vec3.x, vec3.y, u1, v1, tint);\n    }\n}\n\n/**\n * additional import for TypeScript\n * @import Rect from \"./../../geometries/rectangle.js\";\n * @import RoundRect from \"./../../geometries/roundrect.js\";\n * @import Polygon from \"./../../geometries/poly.js\";\n * @import Line from \"./../../geometries/line.js\";\n * @import Ellipse from \"./../../geometries/ellipse.js\";\n * @import Matrix3d from \"./../../math/matrix3.js\";\n * @import Compositor from \"./compositors/compositor.js\";\n */\n\n// list of supported compressed texture formats\nlet supportedCompressedTextureFormats;\n\n/**\n * @classdesc\n * a WebGL renderer object\n * @augments Renderer\n */\nclass WebGLRenderer extends Renderer {\n    /**\n     * @param {ApplicationSettings} [options] - optional parameters for the renderer\n     */\n    constructor(options) {\n        // parent contructor\n        super(Object.assign(options, { context: \"webgl\" }));\n\n        /**\n         * The vendor string of the underlying graphics driver.\n         * @type {string}\n         * @default undefined\n         * @readonly\n         */\n        this.GPUVendor = undefined;\n\n        /**\n         * The renderer string of the underlying graphics driver.\n         * @type {string}\n         * @default undefined\n         * @readonly\n         */\n        this.GPURenderer = undefined;\n\n        /**\n         * The WebGL context\n         * @name gl\n         * @type {WebGLRenderingContext}\n         */\n        this.gl = this.renderTarget.context;\n\n        /**\n         * sets or returns the thickness of lines for shape drawing (limited to strokeLine, strokePolygon and strokeRect)\n         * @type {number}\n         * @default 1\n         * @see WebGLRenderer#strokeLine\n         * @see WebGLRenderer#strokePolygon\n         * @see WebGLRenderer#strokeRect\n         */\n        this.lineWidth = 1;\n\n        /**\n         * sets or returns the shape used to join two line segments where they meet.\n         * Out of the three possible values for this property: \"round\", \"bevel\", and \"miter\", only \"round\" is supported for now in WebGL\n         * @type {string}\n         * @default \"round\"\n         */\n        this.lineJoin = \"round\";\n\n        /**\n         * the vertex buffer used by this WebGL Renderer\n         * @type {WebGLBuffer}\n         */\n        this.vertexBuffer = this.gl.createBuffer();\n\n        /**\n         * Maximum number of texture unit supported under the current context\n         * @type {number}\n         * @readonly\n         */\n        this.maxTextures = this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS);\n\n        /**\n         * @ignore\n         */\n        this._colorStack = [];\n\n        /**\n         * @ignore\n         */\n        this._matrixStack = [];\n\n        /**\n         * @ignore\n         */\n        this._scissorStack = [];\n\n        /**\n         * @ignore\n         */\n        this._blendStack = [];\n\n        /**\n         * The current transformation matrix used for transformations on the overall scene\n         * @type {Matrix2d}\n         */\n        this.currentTransform = new Matrix2d();\n\n        /**\n         * The current compositor used by the renderer\n         * @type {Compositor}\n         */\n        this.currentCompositor = undefined;\n\n        /**\n         * a reference to the current shader program used by the renderer\n         * @type {WebGLProgram}\n         */\n        this.currentProgram = undefined;\n\n        /**\n         * The list of active compositors\n         * @type {Map<Compositor>}\n         */\n        this.compositors = new Map();\n\n        // bind the vertex buffer\n        this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.vertexBuffer);\n\n        // Create both quad and primitive compositor\n        this.addCompositor(new (this.settings.compositor || QuadCompositor)(this), \"quad\", true);\n        this.addCompositor(new (this.settings.compositor || PrimitiveCompositor)(this), \"primitive\");\n\n        // depth Test settings\n        this.depthTest = options.depthTest;\n\n        // default WebGL state(s)\n        if (this.depthTest === \"z-buffer\") {\n            this.gl.enable(this.gl.DEPTH_TEST);\n            // https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/depthFunc\n            this.gl.depthFunc(this.gl.LEQUAL);\n            this.gl.depthMask(true);\n        } else {\n            this.gl.disable(this.gl.DEPTH_TEST);\n            this.gl.depthMask(false);\n        }\n\n        this.gl.disable(this.gl.SCISSOR_TEST);\n        this.gl.enable(this.gl.BLEND);\n\n        // set default mode\n        this.setBlendMode(this.settings.blendMode);\n\n        // get GPU vendor and renderer\n        let debugInfo = this.gl.getExtension(\"WEBGL_debug_renderer_info\");\n        if (debugInfo !== null) {\n            this.GPUVendor = this.gl.getParameter(debugInfo.UNMASKED_VENDOR_WEBGL);\n            this.GPURenderer = this.gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL);\n        }\n\n        // a private property that when set will make `setCompositor`\n        // to use this specific shader instead of the default one\n        this.customShader = undefined;\n\n        // Create a texture cache\n        this.cache = new TextureCache(this.maxTextures);\n\n        // set the renderer type\n        this.type =  \"WebGL\" + this.WebGLVersion;\n\n        // to simulate context lost and restore in WebGL:\n        // let ctx = me.video.renderer.context.getExtension('WEBGL_lose_context');\n        // ctx.loseContext()\n        this.getCanvas().addEventListener(\"webglcontextlost\", (e) => {\n            e.preventDefault();\n            this.isContextValid = false;\n            emit(ONCONTEXT_LOST, this);\n        }, false);\n        // ctx.restoreContext()\n        this.getCanvas().addEventListener(\"webglcontextrestored\", () => {\n            this.reset();\n            this.isContextValid = true;\n            emit(ONCONTEXT_RESTORED, this);\n        }, false);\n\n        // reset the renderer on game reset\n        on(GAME_RESET, () => {\n            this.reset();\n        });\n\n        // register to the CANVAS resize channel\n        on(CANVAS_ONRESIZE, (width, height) => {\n            this.flush();\n            this.setViewport(0, 0, width, height);\n        });\n    }\n\n    /**\n     * The WebGL version used by this renderer (1 or 2)\n     * @type {number}\n     * @default 1\n     */\n    get WebGLVersion() {\n        return this.renderTarget.WebGLVersion;\n    }\n\n    /**\n     * return the list of supported compressed texture formats\n     * @return {Object}\n     */\n    getSupportedCompressedTextureFormats() {\n        if (typeof supportedCompressedTextureFormats === \"undefined\") {\n            const gl = this.gl;\n            supportedCompressedTextureFormats =  {\n                astc: gl.getExtension(\"WEBGL_compressed_texture_astc\") || this._gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_astc\"),\n                bptc: gl.getExtension(\"EXT_texture_compression_bptc\") || this._gl.getExtension(\"WEBKIT_EXT_texture_compression_bptc\"),\n                s3tc: gl.getExtension(\"WEBGL_compressed_texture_s3tc\") || this._gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_s3tc\"),\n                s3tc_srgb: gl.getExtension(\"WEBGL_compressed_texture_s3tc_srgb\") || this._gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_s3tc_srgb\"),\n                pvrtc: gl.getExtension(\"WEBGL_compressed_texture_pvrtc\") || this._gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_pvrtc\"),\n                etc1: gl.getExtension(\"WEBGL_compressed_texture_etc1\") || this._gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_etc1\"),\n                etc2: gl.getExtension(\"WEBGL_compressed_texture_etc\") || gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_etc\") || gl.getExtension(\"WEBGL_compressed_texture_es3_0\")\n            };\n        }\n        return supportedCompressedTextureFormats;\n    }\n\n    /**\n     * return true if the given compressed texture format is supported\n     * @param {Number} format\n     * @returns\n     */\n    hasSupportedCompressedFormats(format) {\n        const supportedFormats = this.getSupportedCompressedTextureFormats();\n        for (var supportedFormat in supportedFormats) {\n            for (var extension in supportedFormats[supportedFormat]) {\n                if (format === supportedFormats[supportedFormat][extension]) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Reset context state\n     */\n    reset() {\n        super.reset();\n\n        // clear all stacks\n        this._colorStack.forEach((color) => {\n            pool.push(color);\n        });\n        this._matrixStack.forEach((matrix) => {\n            pool.push(matrix);\n        });\n        this._colorStack.length = 0;\n        this._matrixStack.length = 0;\n        this._blendStack.length = 0;\n\n        // clear gl context\n        this.clear();\n\n        // initial viewport size\n        this.setViewport();\n\n        // rebind the vertex buffer if required (e.g in case of context loss)\n        if (this.gl.getParameter(this.gl.ARRAY_BUFFER_BINDING) !== this.vertexBuffer) {\n            this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.vertexBuffer);\n        }\n\n        this.currentCompositor = undefined;\n        this.currentProgram = undefined;\n        this.customShader = undefined;\n\n        this.compositors.forEach((compositor) => {\n            if (this.isContextValid === false) {\n                // on context lost/restore\n                compositor.init(this);\n            } else {\n                compositor.reset();\n            }\n        });\n\n        this.setCompositor(\"quad\");\n\n        this.gl.disable(this.gl.SCISSOR_TEST);\n    }\n\n    /**\n     * add a new compositor to this renderer\n     * @param {Compositor} compositor - a compositor instance\n     * @param {string} name - a name uniquely identifying this compositor\n     * @param {boolean} [activate=false] - true if the given compositor should be set as the active one\n     */\n    addCompositor(compositor, name = \"default\", activate = false) {\n        // make sure there is no existing compositor with the same name\n        if (typeof this.compositors.get(name) !== \"undefined\") {\n            throw new Error(\"Invalid Compositor name\");\n        }\n\n        // add the new compositor\n        this.compositors.set(name, compositor);\n\n        if (activate === true) {\n            // set as active one\n            this.setCompositor(name);\n        }\n    }\n\n    /**\n     * set the active compositor for this renderer\n     * @param {string} name - a compositor name\n     * @param {GLShader} [shader] - an optional shader program to be used, instead of the default one, when activating the compositor\n     * @returns {Compositor} an instance to the current active compositor\n     */\n    setCompositor(name = \"default\", shader = this.customShader) {\n        let compositor = this.compositors.get(name);\n\n        if (typeof compositor === \"undefined\") {\n            throw new Error(\"Invalid Compositor\");\n        }\n\n        if (this.currentCompositor !== compositor) {\n            if (this.currentCompositor !== undefined) {\n                // flush the current compositor\n                this.currentCompositor.flush();\n            }\n            // set as the active one\n            this.currentCompositor = compositor;\n        }\n\n        if (name === \"quad\" && typeof shader === \"object\") {\n            this.currentCompositor.useShader(shader);\n        } else {\n            // (re)bind the compositor with the default shader (program & attributes)\n            this.currentCompositor.bind();\n        }\n\n        return this.currentCompositor;\n    }\n\n    /**\n     * Reset the gl transform to identity\n     */\n    resetTransform() {\n        this.currentTransform.identity();\n    }\n\n    /**\n     * Create a pattern with the specified repetition\n     * @param {HTMLImageElement|SVGImageElement|HTMLVideoElement|HTMLCanvasElement|ImageBitmap|OffscreenCanvas|VideoFrame} image - Source image to be used as the pattern's image\n     * @param {string} repeat - Define how the pattern should be repeated\n     * @returns {TextureAtlas} the patterned texture created\n     * @see ImageLayer#repeat\n     * @example\n     * let tileable   = renderer.createPattern(image, \"repeat\");\n     * let horizontal = renderer.createPattern(image, \"repeat-x\");\n     * let vertical   = renderer.createPattern(image, \"repeat-y\");\n     * let basic      = renderer.createPattern(image, \"no-repeat\");\n     */\n    createPattern(image, repeat) {\n\n        this.setCompositor(\"quad\");\n\n        if (renderer.WebGLVersion === 1 && (!isPowerOfTwo(image.width) || !isPowerOfTwo(image.height))) {\n            let src = typeof image.src !== \"undefined\" ? image.src : image;\n            throw new Error(\n                \"[WebGL Renderer] \" + src + \" is not a POT texture \" +\n                \"(\" + image.width + \"x\" + image.height + \")\"\n            );\n        }\n\n        let texture = new TextureAtlas(createAtlas(image.width, image.height, \"pattern\", repeat), image);\n\n        // FIXME: Remove old cache entry and texture when changing the repeat mode\n        this.currentCompositor.uploadTexture(texture);\n\n        return texture;\n    }\n\n    /**\n     * Flush the compositor to the frame buffer\n     */\n    flush() {\n        this.currentCompositor.flush();\n    }\n\n    /**\n     * set/change the current projection matrix (WebGL only)\n     * @param {Matrix3d} matrix - the new projection matrix\n     */\n    setProjection(matrix) {\n        super.setProjection(matrix);\n        this.currentCompositor.setProjection(matrix);\n    }\n\n    /**\n     * Sets the WebGL viewport, which specifies the affine transformation of x and y from normalized device coordinates to window coordinates\n     * @param {number} [x = 0] - x the horizontal coordinate for the lower left corner of the viewport origin\n     * @param {number} [y = 0] - y the vertical coordinate for the lower left corner of the viewport origin\n     * @param {number} [w = width of the canvas] - the width of viewport\n     * @param {number} [h = height of the canvas] - the height of viewport\n     */\n    setViewport(x = 0, y = 0, w = this.getCanvas().width, h = this.getCanvas().height) {\n        this.gl.viewport(x, y, w, h);\n    }\n\n    /**\n     * Clear the frame buffer\n     */\n    clear() {\n        let gl = this.gl;\n        gl.clearColor(0, 0, 0, this.settings.transparent ? 0.0 : 1.0);\n        this.lineWidth = 1;\n        if (this.depthTest === \"z-buffer\") {\n            gl.clear(gl.DEPTH_BUFFER_BIT | gl.COLOR_BUFFER_BIT | gl.STENCIL_BUFFER_BIT);\n        } else {\n            gl.clear(gl.COLOR_BUFFER_BIT | gl.STENCIL_BUFFER_BIT);\n        }\n    }\n\n    /**\n     * Clears the gl context with the given color.\n     * @param {Color|string} [color=\"#000000\"] - CSS color.\n     * @param {boolean} [opaque=false] - Allow transparency [default] or clear the surface completely [true]\n     */\n    clearColor(color = \"#000000\", opaque = false) {\n        let glArray;\n        let gl = this.gl;\n\n        if (color instanceof Color) {\n            glArray = color.toArray();\n        } else {\n            let _color = pool.pull(\"me.Color\");\n            // reuse temporary the renderer default color object\n            glArray = _color.parseCSS(color).toArray();\n            pool.push(_color);\n        }\n\n        // clear gl context with the specified color\n        gl.clearColor(glArray[0], glArray[1], glArray[2], (opaque === true) ? 1.0 : glArray[3]);\n        gl.clear(gl.COLOR_BUFFER_BIT);\n    }\n\n    /**\n     * Erase the pixels in the given rectangular area by setting them to transparent black (rgba(0,0,0,0)).\n     * @param {number} x - x axis of the coordinate for the rectangle starting point.\n     * @param {number} y - y axis of the coordinate for the rectangle starting point.\n     * @param {number} width - The rectangle's width.\n     * @param {number} height - The rectangle's height.\n     */\n    clearRect(x, y, width, height) {\n        this.save();\n        this.clipRect(x, y, width, height);\n        this.clearColor();\n        this.restore();\n    }\n\n    /**\n     * Draw an image to the gl context\n     * @param {HTMLImageElement|SVGImageElement|HTMLVideoElement|HTMLCanvasElement|ImageBitmap|OffscreenCanvas|VideoFrame} image - An element to draw into the context.\n     * @param {number} sx - The X coordinate of the top left corner of the sub-rectangle of the source image to draw into the destination context.\n     * @param {number} sy - The Y coordinate of the top left corner of the sub-rectangle of the source image to draw into the destination context.\n     * @param {number} sw - The width of the sub-rectangle of the source image to draw into the destination context. If not specified, the entire rectangle from the coordinates specified by sx and sy to the bottom-right corner of the image is used.\n     * @param {number} sh - The height of the sub-rectangle of the source image to draw into the destination context.\n     * @param {number} dx - The X coordinate in the destination canvas at which to place the top-left corner of the source image.\n     * @param {number} dy - The Y coordinate in the destination canvas at which to place the top-left corner of the source image.\n     * @param {number} dw - The width to draw the image in the destination canvas. This allows scaling of the drawn image. If not specified, the image is not scaled in width when drawn.\n     * @param {number} dh - The height to draw the image in the destination canvas. This allows scaling of the drawn image. If not specified, the image is not scaled in height when drawn.\n     * @example\n     * // Position the image on the canvas:\n     * renderer.drawImage(image, dx, dy);\n     * // Position the image on the canvas, and specify width and height of the image:\n     * renderer.drawImage(image, dx, dy, dWidth, dHeight);\n     * // Clip the image and position the clipped part on the canvas:\n     * renderer.drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight);\n     */\n    drawImage(image, sx, sy, sw, sh, dx, dy, dw, dh) {\n        if (typeof sw === \"undefined\") {\n            sw = dw = image.width;\n            sh = dh = image.height;\n            dx = sx;\n            dy = sy;\n            sx = 0;\n            sy = 0;\n        }\n        else if (typeof dx === \"undefined\") {\n            dx = sx;\n            dy = sy;\n            dw = sw;\n            dh = sh;\n            sw = image.width;\n            sh = image.height;\n            sx = 0;\n            sy = 0;\n        }\n\n        if (this.settings.subPixel === false) {\n            // clamp to pixel grid\n            dx |= 0;\n            dy |= 0;\n        }\n\n        this.setCompositor(\"quad\");\n        // force reuploading if the given image is a HTMLVideoElement\n        let reupload = typeof image.videoWidth !== \"undefined\";\n        let texture = this.cache.get(image);\n        let uvs = texture.getUVs(sx + \",\" + sy + \",\" + sw + \",\" + sh);\n        this.currentCompositor.addQuad(texture, dx, dy, dw, dh, uvs[0], uvs[1], uvs[2], uvs[3], this.currentTint.toUint32(this.getGlobalAlpha()), reupload);\n    }\n\n    /**\n     * Draw a pattern within the given rectangle.\n     * @param {TextureAtlas} pattern - Pattern object\n     * @param {number} x - x position where to draw the pattern\n     * @param {number} y - y position where to draw the pattern\n     * @param {number} width - width of the pattern\n     * @param {number} height - height of the pattern\n     * @see WebGLRenderer#createPattern\n     */\n    drawPattern(pattern, x, y, width, height) {\n        let uvs = pattern.getUVs(\"0,0,\" + width + \",\" + height);\n        this.setCompositor(\"quad\");\n        this.currentCompositor.addQuad(pattern, x, y, width, height, uvs[0], uvs[1], uvs[2], uvs[3], this.currentTint.toUint32(this.getGlobalAlpha()));\n    }\n\n\n    /**\n     * starts a new path by emptying the list of sub-paths. Call this method when you want to create a new path\n     * @example\n     * // First path\n     * renderer.beginPath();\n     * renderer.setColor(\"blue\");\n     * renderer.moveTo(20, 20);\n     * renderer.lineTo(200, 20);\n     * renderer.stroke();\n     * // Second path\n     * renderer.beginPath();\n     * renderer.setColor(\"green\");\n     * renderer.moveTo(20, 20);\n     * renderer.lineTo(120, 120);\n     * renderer.stroke();\n     */\n    beginPath() {\n        this.path2D.beginPath();\n    }\n\n    /**\n     * begins a new sub-path at the point specified by the given (x, y) coordinates.\n     * @param {number} x - The x axis of the point.\n     * @param {number} y - The y axis of the point.\n     */\n    moveTo(x, y) {\n        this.path2D.moveTo(x, y);\n    }\n\n    /**\n     * adds a straight line to the current sub-path by connecting the sub-path's last point to the specified (x, y) coordinates.\n     */\n    lineTo(x, y) {\n        this.path2D.lineTo(x, y);\n    }\n\n    /**\n     * creates a rectangular path whose starting point is at (x, y) and whose size is specified by width and height.\n     * @param {number} x - The x axis of the coordinate for the rectangle starting point.\n     * @param {number} y - The y axis of the coordinate for the rectangle starting point.\n     * @param {number} width - The rectangle's width.\n     * @param {number} height - The rectangle's height.\n     */\n    rect(x, y, width, height) {\n        this.path2D.rect(x, y, width, height);\n    }\n\n    /**\n     * adds a rounded rectangle to the current path.\n     * @param {number} x - The x axis of the coordinate for the rectangle starting point.\n     * @param {number} y - The y axis of the coordinate for the rectangle starting point.\n     * @param {number} width - The rectangle's width.\n     * @param {number} height - The rectangle's height.\n     * @param {number} radius - The corner radius.\n     */\n    roundRect(x, y, width, height, radii) {\n        this.path2D.roundRect(x, y, width, height, radii);\n    }\n\n    /**\n     * stroke the given shape or the current defined path\n     * @param {Rect|RoundRect|Polygon|Line|Ellipse} [shape] - a shape object to stroke\n     * @param {boolean} [fill=false] - fill the shape with the current color if true\n     */\n    stroke(shape, fill) {\n        this.setCompositor(\"primitive\");\n        if (typeof shape === \"undefined\") {\n            if (fill === true) {\n                // draw all triangles\n                this.currentCompositor.drawVertices(this.gl.TRIANGLES, this.path2D.triangulatePath());\n            } else {\n                this.currentCompositor.drawVertices(this.gl.LINES, this.path2D.points);\n            }\n        } else {\n            super.stroke(shape, fill);\n        }\n    }\n\n    /**\n     * fill the given shape or the current defined path\n     * @param {Rect|RoundRect|Polygon|Line|Ellipse} [shape] - a shape object to fill\n     */\n    fill(shape) {\n        this.stroke(shape, true);\n    }\n\n    /**\n     * add a straight line from the current point to the start of the current sub-path. If the shape has already been closed or has only one point, this function does nothing\n    */\n    closePath() {\n        this.path2D.closePath();\n    }\n\n    /**\n     * Returns the WebGLContext instance for the renderer\n     * return a reference to the system 2d Context\n     * @returns {WebGLRenderingContext} the current WebGL context\n     */\n    getContext() {\n        return this.gl;\n    }\n\n    /**\n     * set a blend mode for the given context. <br>\n     * Supported blend mode between Canvas and WebGL remderer : <br>\n     * - \"normal\" : this is the default mode and draws new content on top of the existing content <br>\n     * <img src=\"images/normal-blendmode.png\" width=\"510\"/> <br>\n     * - \"multiply\" : the pixels of the top layer are multiplied with the corresponding pixel of the bottom layer. A darker picture is the result. <br>\n     * <img src=\"images/multiply-blendmode.png\" width=\"510\"/> <br>\n     * - \"additive or lighter\" : where both content overlap the color is determined by adding color values. <br>\n     * <img src=\"images/lighter-blendmode.png\" width=\"510\"/> <br>\n     * - \"screen\" : The pixels are inverted, multiplied, and inverted again. A lighter picture is the result (opposite of multiply) <br>\n     * <img src=\"images/screen-blendmode.png\" width=\"510\"/> <br>\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/globalCompositeOperation\n     * @param {string} [mode=\"normal\"] - blend mode : \"normal\", \"multiply\", \"lighter\", \"additive\", \"screen\"\n     * @param {WebGLRenderingContext} [gl] - a WebGL context\n     */\n    setBlendMode(mode = \"normal\", gl = this.gl) {\n\n        if (this.currentBlendMode !== mode) {\n            this.flush();\n            gl.enable(gl.BLEND);\n            this.currentBlendMode = mode;\n\n            switch (mode) {\n                case \"screen\" :\n                    gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_COLOR);\n                    break;\n\n                case \"lighter\" :\n                case \"additive\" :\n                    gl.blendFunc(gl.ONE, gl.ONE);\n                    break;\n\n                case \"multiply\" :\n                    gl.blendFunc(gl.DST_COLOR, gl.ONE_MINUS_SRC_ALPHA);\n                    break;\n\n                default :\n                    gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n                    this.currentBlendMode = \"normal\";\n                    break;\n            }\n        }\n    }\n\n    /**\n     * restores the most recently saved renderer state by popping the top entry in the drawing state stack\n     * @example\n     * // Save the current state\n     * renderer.save();\n     *\n     * // apply a transform and draw a rect\n     * renderer.tranform(matrix);\n     * renderer.fillRect(10, 10, 100, 100);\n     *\n     * // Restore to the state saved by the most recent call to save()\n     * renderer.restore();\n     */\n    restore() {\n        // do nothing if there is no saved states\n        if (this._matrixStack.length !== 0) {\n            let color = this._colorStack.pop();\n            let matrix = this._matrixStack.pop();\n\n            // restore the previous context\n            this.currentColor.copy(color);\n            this.currentTransform.copy(matrix);\n\n            this.setBlendMode(this._blendStack.pop());\n\n            // recycle objects\n            pool.push(color);\n            pool.push(matrix);\n        }\n\n        if (this._scissorStack.length !== 0) {\n            // FIXME : prevent `scissor` object realloc and GC\n            this.currentScissor.set(this._scissorStack.pop());\n        } else {\n            const canvas = this.getCanvas();\n            // turn off scissor test\n            this.gl.disable(this.gl.SCISSOR_TEST);\n            this.currentScissor[0] = 0;\n            this.currentScissor[1] = 0;\n            this.currentScissor[2] = canvas.width;\n            this.currentScissor[3] = canvas.height;\n        }\n    }\n\n    /**\n     * saves the entire state of the renderer by pushing the current state onto a stack.\n     * @example\n     * // Save the current state\n     * renderer.save();\n     *\n     * // apply a transform and draw a rect\n     * renderer.tranform(matrix);\n     * renderer.fillRect(10, 10, 100, 100);\n     *\n     * // Restore to the state saved by the most recent call to save()\n     * renderer.restore();\n     */\n    save() {\n        this._colorStack.push(this.currentColor.clone());\n        this._matrixStack.push(this.currentTransform.clone());\n\n        if (this.gl.isEnabled(this.gl.SCISSOR_TEST)) {\n            // FIXME avoid slice and object realloc\n            this._scissorStack.push(this.currentScissor.slice());\n        }\n\n        this._blendStack.push(this.getBlendMode());\n    }\n\n    /**\n     * adds a rotation to the transformation matrix.\n     * @param {number} angle - the rotation angle, clockwise in radians\n     * @example\n     * // Rotated rectangle\n     * renderer.rotate((45 * Math.PI) / 180);\n     * renderer.setColor(\"red\");\n     * renderer.fillRect(10, 10, 100, 100);\n     *\n     * // Reset transformation matrix to the identity matrix\n     * renderer.setTransform(1, 0, 0, 1, 0, 0);\n     */\n    rotate(angle) {\n        this.currentTransform.rotate(angle);\n    }\n\n    /**\n     * adds a scaling transformation to the renderer units horizontally and/or vertically\n     * @param {number} x - Scaling factor in the horizontal direction. A negative value flips pixels across the vertical axis. A value of 1 results in no horizontal scaling.\n     * @param {number} y - Scaling factor in the vertical direction. A negative value flips pixels across the horizontal axis. A value of 1 results in no vertical scaling\n     */\n    scale(x, y) {\n        this.currentTransform.scale(x, y);\n    }\n\n    /**\n     * not used by this renderer?\n     * @param {boolean} [enable=false]\n     * @ignore\n     */\n    setAntiAlias(enable = false) {\n        super.setAntiAlias(enable);\n        // TODO: perhaps handle GLNEAREST or other options with texture binding\n    }\n\n    /**\n     * Set the global alpha\n     * @param {number} alpha - 0.0 to 1.0 values accepted.\n     */\n    setGlobalAlpha(alpha) {\n        this.currentColor.alpha = alpha;\n    }\n\n    /**\n     * Return the global alpha\n     * @returns {number} global alpha value\n     */\n    getGlobalAlpha() {\n        return this.currentColor.alpha;\n    }\n\n    /**\n     * Set the current fill & stroke style color.\n     * By default, or upon reset, the value is set to #000000.\n     * @param {Color|string} color - css color string.\n     */\n    setColor(color) {\n        let alpha = this.currentColor.alpha;\n        this.currentColor.copy(color);\n        this.currentColor.alpha *= alpha;\n    }\n\n    /**\n     * Stroke an arc at the specified coordinates with given radius, start and end points\n     * @param {number} x - arc center point x-axis\n     * @param {number} y - arc center point y-axis\n     * @param {number} radius - arc radius\n     * @param {number} start - start angle in radians\n     * @param {number} end - end angle in radians\n     * @param {boolean} [antiClockwise=false] - draw arc anti-clockwise\n     * @param {boolean} [fill=false] - also fill the shape with the current color if true\n     */\n    strokeArc(x, y, radius, start, end, antiClockwise = false, fill = false) {\n        this.setCompositor(\"primitive\");\n        this.path2D.beginPath();\n        this.path2D.arc(x, y, radius, start, end, antiClockwise);\n        if (fill === false) {\n            this.currentCompositor.drawVertices(this.gl.LINES, this.path2D.points);\n        } else {\n            this.currentCompositor.drawVertices(this.gl.TRIANGLES, this.path2D.triangulatePath());\n        }\n    }\n\n    /**\n     * Fill an arc at the specified coordinates with given radius, start and end points\n     * @param {number} x - arc center point x-axis\n     * @param {number} y - arc center point y-axis\n     * @param {number} radius - arc radius\n     * @param {number} start - start angle in radians\n     * @param {number} end - end angle in radians\n     * @param {boolean} [antiClockwise=false] - draw arc anti-clockwise\n     */\n    fillArc(x, y, radius, start, end, antiClockwise = false) {\n        this.strokeArc(x, y, radius, start, end, antiClockwise, true);\n    }\n\n    /**\n     * Stroke an ellipse at the specified coordinates with given radius\n     * @param {number} x - ellipse center point x-axis\n     * @param {number} y - ellipse center point y-axis\n     * @param {number} w - horizontal radius of the ellipse\n     * @param {number} h - vertical radius of the ellipse\n     * @param {boolean} [fill=false] - also fill the shape with the current color if true\n     */\n    strokeEllipse(x, y, w, h, fill = false) {\n        this.setCompositor(\"primitive\");\n        this.path2D.beginPath();\n        this.path2D.ellipse(x, y, w, h, 0, 0, 360);\n        if (fill === false) {\n            this.currentCompositor.drawVertices(this.gl.LINES, this.path2D.points);\n        } else {\n            this.currentCompositor.drawVertices(this.gl.TRIANGLES, this.path2D.triangulatePath());\n        }\n    }\n\n    /**\n     * Fill an ellipse at the specified coordinates with given radius\n     * @param {number} x - ellipse center point x-axis\n     * @param {number} y - ellipse center point y-axis\n     * @param {number} w - horizontal radius of the ellipse\n     * @param {number} h - vertical radius of the ellipse\n     */\n    fillEllipse(x, y, w, h) {\n        this.strokeEllipse(x, y, w, h, true);\n    }\n\n    /**\n     * Stroke a line of the given two points\n     * @param {number} startX - the start x coordinate\n     * @param {number} startY - the start y coordinate\n     * @param {number} endX - the end x coordinate\n     * @param {number} endY - the end y coordinate\n     */\n    strokeLine(startX, startY, endX, endY) {\n        this.setCompositor(\"primitive\");\n        if (this.lineWidth === 1) {\n            this.path2D.beginPath();\n            this.path2D.moveTo(startX, startY);\n            this.path2D.lineTo(endX, endY);\n            this.currentCompositor.drawVertices(this.gl.LINES, this.path2D.points);\n        } else if (this.lineWidth > 1) {\n            const halfWidth = this.lineWidth / 2;\n            const angle = Math.atan2(endY - startY, endX - startX);\n            const dx = Math.sin(angle) * halfWidth;\n            const dy = Math.cos(angle) * halfWidth;\n            const x1 = startX - dx;\n            const y1 = startY + dy;\n            const x2 = startX + dx;\n            const y2 = startY - dy;\n            const x3 = endX + dx;\n            const y3 = endY - dy;\n            const x4 = endX - dx;\n            const y4 = endY + dy;\n\n            this.path2D.beginPath();\n            this.path2D.moveTo(x1, y1);\n            this.path2D.lineTo(x2, y2);\n            this.path2D.lineTo(x3, y3);\n            this.path2D.lineTo(x4, y4);\n            this.path2D.closePath();\n            // draw all triangles\n            this.currentCompositor.drawVertices(this.gl.TRIANGLES, this.path2D.triangulatePath());\n        }\n    }\n\n\n    /**\n     * Fill a line of the given two points\n     * @param {number} startX - the start x coordinate\n     * @param {number} startY - the start y coordinate\n     * @param {number} endX - the end x coordinate\n     * @param {number} endY - the end y coordinate\n     */\n    fillLine(startX, startY, endX, endY) {\n        this.strokeLine(startX, startY, endX, endY);\n    }\n\n    /**\n     * Stroke a Polygon on the screen with a specified color\n     * @param {Polygon} poly - the shape to draw\n     * @param {boolean} [fill=false] - also fill the shape with the current color if true\n     */\n    strokePolygon(poly, fill = false) {\n        const points = poly.points;\n        const len = points.length;\n\n        this.translate(poly.pos.x, poly.pos.y);\n\n        if (fill === false && this.lineWidth > 1) {\n            const radius = this.lineWidth / 2;\n            for (let i = 0; i < len - 1; i++) {\n                const curPoint = points[i];\n                const nextPoint = points[i + 1];\n                this.fillEllipse(nextPoint.x, nextPoint.y, radius, radius);\n                this.strokeLine(curPoint.x, curPoint.y, nextPoint.x, nextPoint.y);\n            }\n            const lastPoint = points[len - 1];\n            const firstPoint = points[0];\n            if (!lastPoint.equals(firstPoint)) {\n                this.fillEllipse(firstPoint.x, firstPoint.y, radius, radius);\n                this.strokeLine(lastPoint.x, lastPoint.y, firstPoint.x, firstPoint.y);\n            }\n        } else {\n            this.setCompositor(\"primitive\");\n            this.path2D.beginPath();\n            for (let i = 0; i < len - 1; i++) {\n                const curPoint = points[i];\n                const nextPoint = points[i + 1];\n                this.path2D.moveTo(curPoint.x, curPoint.y);\n                this.path2D.lineTo(nextPoint.x, nextPoint.y);\n            }\n            this.path2D.closePath();\n            if (fill === false) {\n                this.currentCompositor.drawVertices(this.gl.LINES, this.path2D.points);\n            } else {\n                // draw all triangles\n                this.currentCompositor.drawVertices(this.gl.TRIANGLES, this.path2D.triangulatePath());\n            }\n        }\n\n        this.translate(-poly.pos.x, -poly.pos.y);\n    }\n\n    /**\n     * Fill a me.Polygon on the screen\n     * @param {Polygon} poly - the shape to draw\n     */\n    fillPolygon(poly) {\n        this.strokePolygon(poly, true);\n    }\n\n    /**\n     * Draw a stroke rectangle at the specified coordinates\n     * @param {number} x - x axis of the coordinate for the rectangle starting point.\n     * @param {number} y - y axis of the coordinate for the rectangle starting point.\n     * @param {number} width - The rectangle's width.\n     * @param {number} height - The rectangle's height.\n     * @param {boolean} [fill=false] - also fill the shape with the current color if true\n     */\n    strokeRect(x, y, width, height, fill = false) {\n        if (fill === false && this.lineWidth > 1) {\n            const radius = this.lineWidth / 2;\n            this.strokeLine(x, y, x + width, y);\n            this.strokeLine(x + width, y, x + width, y + height);\n            this.strokeLine(x + width, y + height, x, y + height);\n            this.strokeLine(x, y + height, x, y);\n            this.fillEllipse(x, y, radius, radius);\n            this.fillEllipse(x + width, y, radius, radius);\n            this.fillEllipse(x + width, y + height, radius, radius);\n            this.fillEllipse(x, y + height, radius, radius);\n        } else {\n            this.setCompositor(\"primitive\");\n            this.path2D.beginPath();\n            this.path2D.rect(x, y, width, height);\n            if (fill === false) {\n                this.currentCompositor.drawVertices(this.gl.LINES, this.path2D.points);\n            } else {\n                this.currentCompositor.drawVertices(this.gl.TRIANGLES, this.path2D.triangulatePath());\n            }\n        }\n    }\n\n    /**\n     * Draw a filled rectangle at the specified coordinates\n     * @param {number} x - x axis of the coordinate for the rectangle starting point.\n     * @param {number} y - y axis of the coordinate for the rectangle starting point.\n     * @param {number} width - The rectangle's width.\n     * @param {number} height - The rectangle's height.\n     */\n    fillRect(x, y, width, height) {\n        this.strokeRect(x, y, width, height, true);\n    }\n\n    /**\n     * Stroke a rounded rectangle at the specified coordinates\n     * @param {number} x - x axis of the coordinate for the rounded rectangle starting point.\n     * @param {number} y - y axis of the coordinate for the rounded rectangle starting point.\n     * @param {number} width - The rounded rectangle's width.\n     * @param {number} height - The rounded rectangle's height.\n     * @param {number} radius - The rounded corner's radius.\n     * @param {boolean} [fill=false] - also fill the shape with the current color if true\n     */\n    strokeRoundRect(x, y, width, height, radius, fill = false) {\n        this.setCompositor(\"primitive\");\n        this.path2D.beginPath();\n        this.path2D.roundRect(x, y, width, height, radius);\n        if (fill === false) {\n            this.currentCompositor.drawVertices(this.gl.LINES, this.path2D.points);\n        } else {\n            this.currentCompositor.drawVertices(this.gl.TRIANGLES, this.path2D.triangulatePath());\n        }\n    }\n\n    /**\n     * Draw a rounded filled rectangle at the specified coordinates\n     * @param {number} x - x axis of the coordinate for the rounded rectangle starting point.\n     * @param {number} y - y axis of the coordinate for the rounded rectangle starting point.\n     * @param {number} width - The rounded rectangle's width.\n     * @param {number} height - The rounded rectangle's height.\n     * @param {number} radius - The rounded corner's radius.\n     */\n    fillRoundRect(x, y, width, height, radius) {\n        this.strokeRoundRect(x, y, width, height, radius, true);\n    }\n\n    /**\n     * Stroke a Point at the specified coordinates\n     * @param {number} x - x axis of the coordinate for the point.\n     * @param {number} y - y axis of the coordinate for the point.\n     */\n    strokePoint(x, y) {\n        this.strokeLine(x, y, x + 1, y + 1);\n    }\n\n    /**\n     * Draw a a point at the specified coordinates\n     * @param {number} x - x axis of the coordinate for the point.\n     * @param {number} y - y axis of the coordinate for the point.\n     */\n    fillPoint(x, y) {\n        this.strokePoint(x, y);\n    }\n\n    /**\n     * Reset (overrides) the renderer transformation matrix to the\n     * identity one, and then apply the given transformation matrix.\n     * @param {Matrix2d|number} a - a matrix2d to transform by, or a the a component to multiply the current matrix by\n     * @param {number} b - the b component to multiply the current matrix by\n     * @param {number} c - the c component to multiply the current matrix by\n     * @param {number} d - the d component to multiply the current matrix by\n     * @param {number} e - the e component to multiply the current matrix by\n     * @param {number} f - the f component to multiply the current matrix by\n     */\n    setTransform(a, b, c, d, e, f) {\n        this.resetTransform();\n        this.transform(a, b, c, d, e, f);\n    }\n\n    /**\n     * Multiply given matrix into the renderer tranformation matrix\n     * @see {@link WebGLRenderer.setTransform} which will reset the current transform matrix prior to performing the new transformation\n     * @param {Matrix2d|number} a - a matrix2d to transform by, or a the a component to multiply the current matrix by\n     * @param {number} b - the b component to multiply the current matrix by\n     * @param {number} c - the c component to multiply the current matrix by\n     * @param {number} d - the d component to multiply the current matrix by\n     * @param {number} e - the e component to multiply the current matrix by\n     * @param {number} f - the f component to multiply the current matrix by\n     */\n    transform(a, b, c, d, e, f) {\n        if (typeof a === \"object\") {\n            this.currentTransform.multiply(a);\n        } else {\n            // indivudual component\n            this.currentTransform.transform(a, b, c, d, e, f);\n        }\n        if (this.settings.subPixel === false) {\n            // snap position values to pixel grid\n            let a = this.currentTransform.toArray();\n            a[6] |= 0;\n            a[7] |= 0;\n        }\n    }\n\n    /**\n     * adds a translation transformation to the current matrix.\n     * @param {number} x - Distance to move in the horizontal direction. Positive values are to the right, and negative to the left.\n     * @param {number} y - Distance to move in the vertical direction. Positive values are down, and negative are up.\n     */\n    translate(x, y) {\n        let currentTransform = this.currentTransform;\n        currentTransform.translate(x, y);\n        if (this.settings.subPixel === false) {\n            // snap position values to pixel grid\n            let a = currentTransform.toArray();\n            a[6] |= 0;\n            a[7] |= 0;\n        }\n    }\n\n    /**\n     * clip the given region from the original canvas. Once a region is clipped,\n     * all future drawing will be limited to the clipped region.\n     * You can however save the current region using the save(),\n     * and restore it (with the restore() method) any time in the future.\n     * (<u>this is an experimental feature !</u>)\n     * @param {number} x - x axis of the coordinate for the upper-left corner of the rectangle to start clipping from.\n     * @param {number} y - y axis of the coordinate for the upper-left corner of the rectangle to start clipping from.\n     * @param {number} width - the width of the rectangle to start clipping from.\n     * @param {number} height - the height of the rectangle to start clipping from.\n     */\n    clipRect(x, y, width, height) {\n        let canvas = this.getCanvas();\n        let gl = this.gl;\n        // if requested box is different from the current canvas size\n        if (x !== 0 || y !== 0 || width !== canvas.width || height !== canvas.height) {\n            let currentScissor = this.currentScissor;\n            if (gl.isEnabled(gl.SCISSOR_TEST)) {\n                // if same as the current scissor box do nothing\n                if (currentScissor[0] === x && currentScissor[1] === y &&\n                    currentScissor[2] === width && currentScissor[3] === height) {\n                    return;\n                }\n            }\n            // flush the compositor\n            this.flush();\n            // turn on scissor test\n            gl.enable(this.gl.SCISSOR_TEST);\n            // set the scissor rectangle (note : coordinates are left/bottom)\n            gl.scissor(\n                // scissor does not account for currentTransform, so manually adjust\n                x + this.currentTransform.tx,\n                canvas.height - height - y - this.currentTransform.ty,\n                width,\n                height\n            );\n            // save the new currentScissor box\n            currentScissor[0] = x;\n            currentScissor[1] = y;\n            currentScissor[2] = width;\n            currentScissor[3] = height;\n        } else {\n            // turn off scissor test\n            gl.disable(gl.SCISSOR_TEST);\n        }\n    }\n\n    /**\n     * A mask limits rendering elements to the shape and position of the given mask object.\n     * If the drawing or rendering area is larger than the mask, only the intersecting part of the renderable will be visible.\n     * (Note Mask are not preserved through renderer context save and restore and need so be manually cleared)\n     * @see CanvasRenderer#clearMask\n     * @param {Rect|RoundRect|Polygon|Line|Ellipse} [mask] - a shape defining the mask to be applied\n     * @param {boolean} [invert=false] - either the given shape should define what is visible (default) or the opposite\n     */\n    setMask(mask, invert = false) {\n        let gl = this.gl;\n\n        // flush the compositor\n        this.flush();\n\n        if (this.maskLevel === 0) {\n            // Enable and setup GL state to write to stencil buffer\n            gl.enable(gl.STENCIL_TEST);\n            gl.clear(gl.STENCIL_BUFFER_BIT);\n        }\n\n        this.maskLevel++;\n\n        gl.colorMask(false, false, false, false);\n        gl.stencilFunc(gl.EQUAL, this.maskLevel, 1);\n        gl.stencilOp(gl.REPLACE, gl.REPLACE, gl.REPLACE);\n\n\n        // fill the given mask shape\n        this.fill(mask);\n\n        // flush the compositor\n        this.flush();\n\n        gl.colorMask(true, true, true, true);\n\n        // Use stencil buffer to affect next rendering object\n        if (invert === true) {\n            gl.stencilFunc(gl.EQUAL, this.maskLevel + 1, 1);\n        } else {\n            gl.stencilFunc(gl.NOTEQUAL, this.maskLevel + 1, 1);\n        }\n        gl.stencilOp(gl.KEEP, gl.KEEP, gl.KEEP);\n    }\n\n    /**\n     * disable (remove) the rendering mask set through setMask.\n     * @see WebGLRenderer#setMask\n     */\n    clearMask() {\n        if (this.maskLevel > 0) {\n            // flush the compositor\n            this.flush();\n            this.maskLevel = 0;\n            this.gl.disable(this.gl.STENCIL_TEST);\n        }\n    }\n}\n\n/**\n * additional import for TypeScript\n * @import Color from \"./../math/color.js\";\n * @import CanvasRenderer from \"./../video/canvas/canvas_renderer.js\";\n * @import WebGLRenderer from \"./../video/webgl/webgl_renderer.js\";\n * @import Camera2d from \"./../camera/camera2d.js\";\n */\n\n/**\n * @classdesc\n * a generic Color Layer Object.  Fills the entire Canvas with the color not just the container the object belongs to.\n * @augments Renderable\n */\nclass ColorLayer extends Renderable {\n    /**\n     * @param {string} name - Layer name\n     * @param {Color|string} color - CSS color\n     * @param {number} [z = 0] - z-index position\n     */\n    constructor(name, color, z) {\n        // parent constructor\n        super(0, 0, Infinity, Infinity);\n\n        /**\n         * the layer color component\n         * @public\n         * @type {Color}\n         * @name color\n         * @memberof ColorLayer#\n         */\n        this.color = pool.pull(\"Color\").parseCSS(color);\n\n        this.onResetEvent(name, color, z);\n\n    }\n\n    onResetEvent(name, color, z = 0) {\n        // apply given parameters\n        this.name = name;\n        this.pos.z = z;\n        this.floating = true;\n        // string (#RGB, #ARGB, #RRGGBB, #AARRGGBB)\n        this.color.parseCSS(color);\n    }\n\n    /**\n     * draw this color layer (automatically called by melonJS)\n     * @param {CanvasRenderer|WebGLRenderer} renderer - a renderer instance\n     * @param {Camera2d} [viewport] - the viewport to (re)draw\n     */\n    draw(renderer, viewport) {\n        renderer.save();\n        renderer.clipRect(\n            0, 0,\n            viewport.width, viewport.height\n        );\n        renderer.clearColor(this.color);\n        renderer.restore();\n    }\n\n    /**\n     * Destroy function\n     * @ignore\n     */\n    destroy() {\n        pool.push(this.color);\n        this.color = undefined;\n        super.destroy();\n    }\n\n}\n\n/**\n * additional import for TypeScript\n * @import Vector2d from \"./../math/vector2.js\";\n */\n\n/**\n * @classdesc\n * a generic Image Layer Object\n * @augments Sprite\n */\nclass ImageLayer extends Sprite {\n    /**\n     * @param {number} x - x coordinate\n     * @param {number} y - y coordinate\n     * @param {object} settings - ImageLayer properties\n     * @param {HTMLImageElement|HTMLCanvasElement|string} settings.image - Image reference. See {@link loader.getImage}\n     * @param {string} [settings.name=\"me.ImageLayer\"] - layer name\n     * @param {number} [settings.z=0] - z-index position\n     * @param {number|Vector2d} [settings.ratio=1.0] - Scrolling ratio to be applied. See {@link ImageLayer#ratio}\n     * @param {\"repeat\"|\"repeat-x\"|\"repeat-y\"|\"no-repeat\"} [settings.repeat=\"repeat\"] - define if and how an Image Layer should be repeated. See {@link ImageLayer#repeat}\n     * @param {number|Vector2d} [settings.anchorPoint=<0.0,0.0>] - Define how the image is anchored to the viewport bound. By default, its upper-left corner is anchored to the viewport bounds upper left corner.\n     * @example\n     * // create a repetitive background pattern on the X axis using the citycloud image asset\n     * me.game.world.addChild(new me.ImageLayer(0, 0, {\n     *     image:\"citycloud\",\n     *     repeat :\"repeat-x\"\n     * }), 1);\n     */\n    constructor(x, y, settings) {\n        // call the constructor\n        super(x, y, settings);\n\n        // render in screen coordinates\n        this.floating = true;\n\n        // image drawing offset\n        this.offset.set(x, y);\n\n        /**\n         * Define the image scrolling ratio<br>\n         * Scrolling speed is defined by multiplying the viewport delta position by the specified ratio.\n         * Setting this vector to &lt;0.0,0.0&gt; will disable automatic scrolling.<br>\n         * To specify a value through Tiled, use one of the following format : <br>\n         * - a number, to change the value for both axis <br>\n         * - a json expression like `json:{\"x\":0.5,\"y\":0.5}` if you wish to specify a different value for both x and y\n         * @type {Vector2d}\n         * @default <1.0,1.0>\n         */\n        this.ratio = pool.pull(\"Vector2d\", 1.0, 1.0);\n\n        if (typeof(settings.ratio) !== \"undefined\") {\n            // little hack for backward compatiblity\n            if (isNumeric(settings.ratio)) {\n                this.ratio.set(settings.ratio, +settings.ratio);\n            } else /* vector */ {\n                this.ratio.setV(settings.ratio);\n            }\n        }\n\n        if (typeof(settings.anchorPoint) === \"undefined\") {\n            this.anchorPoint.set(0, 0);\n        }\n        else {\n            if (typeof(settings.anchorPoint) === \"number\") {\n                this.anchorPoint.set(settings.anchorPoint, settings.anchorPoint);\n            }\n            else /* vector */ {\n                this.anchorPoint.setV(settings.anchorPoint);\n            }\n        }\n\n        this.repeat = settings.repeat || \"repeat\";\n\n        // on context lost, all previous textures are destroyed\n        on(ONCONTEXT_RESTORED, this.createPattern, this);\n    }\n\n    /**\n     * Define if and how an Image Layer should be repeated.<br>\n     * By default, an Image Layer is repeated both vertically and horizontally.<br>\n     * Acceptable values : <br>\n     * - 'repeat' - The background image will be repeated both vertically and horizontally <br>\n     * - 'repeat-x' - The background image will be repeated only horizontally.<br>\n     * - 'repeat-y' - The background image will be repeated only vertically.<br>\n     * - 'no-repeat' - The background-image will not be repeated.<br>\n     * @type {string}\n     * @default 'repeat'\n     */\n    get repeat() {\n        return this._repeat;\n    }\n\n    set repeat(value) {\n        this._repeat = value;\n        switch (this._repeat) {\n            case \"no-repeat\" :\n                this.repeatX = false;\n                this.repeatY = false;\n                break;\n            case \"repeat-x\" :\n                this.repeatX = true;\n                this.repeatY = false;\n                break;\n            case \"repeat-y\" :\n                this.repeatX = false;\n                this.repeatY = true;\n                break;\n            default : // \"repeat\"\n                this.repeatX = true;\n                this.repeatY = true;\n                break;\n        }\n        this.resize(game.viewport.width, game.viewport.height);\n        this.createPattern();\n    }\n\n\n    // called when the layer is added to the game world or a container\n    onActivateEvent() {\n        // register to the viewport change notification\n        on(VIEWPORT_ONCHANGE, this.updateLayer, this);\n        on(VIEWPORT_ONRESIZE, this.resize, this);\n        // force a first refresh when the level is loaded\n        on(LEVEL_LOADED, this.updateLayer, this);\n        // in case the level is not added to the root container,\n        // the onActivateEvent call happens after the LEVEL_LOADED event\n        // so we need to force a first update\n        if (this.ancestor.root !== true) {\n            this.updateLayer();\n        }\n    }\n\n    /**\n     * resize the Image Layer to match the given size\n     * @param {number} w - new width\n     * @param {number} h - new height\n     */\n    resize(w, h) {\n        return super.resize(\n            this.repeatX ? Infinity : w,\n            this.repeatY ? Infinity : h\n        );\n    }\n\n    /**\n     * createPattern function\n     * @ignore\n     */\n    createPattern() {\n        this._pattern = renderer.createPattern(this.image, this._repeat);\n    }\n\n    /**\n     * updateLayer function\n     * @ignore\n     */\n    updateLayer() {\n        const rx = this.ratio.x,\n            ry = this.ratio.y;\n\n        const viewport = game.viewport;\n\n        if (rx === 0 && ry === 0) {\n            // static image\n            return;\n        }\n\n        const width = this.width,\n            height = this.height,\n            bw = viewport.bounds.width,\n            bh = viewport.bounds.height,\n            ax = this.anchorPoint.x,\n            ay = this.anchorPoint.y,\n\n            /*\n             * Automatic positioning\n             *\n             * See https://github.com/melonjs/melonJS/issues/741#issuecomment-138431532\n             * for a thorough description of how this works.\n             */\n            x = ax * (rx - 1) * (bw - viewport.width) + this.offset.x - rx * viewport.pos.x,\n            y = ay * (ry - 1) * (bh - viewport.height) + this.offset.y - ry * viewport.pos.y;\n\n\n        // Repeat horizontally; start drawing from left boundary\n        if (this.repeatX) {\n            this.pos.x = x % width;\n        }\n        else {\n            this.pos.x = x;\n        }\n\n        // Repeat vertically; start drawing from top boundary\n        if (this.repeatY) {\n            this.pos.y = y % height;\n        }\n        else {\n            this.pos.y = y;\n        }\n\n        this.isDirty = true;\n    }\n\n    /**\n    * override the default predraw function\n    * as repeat and anchor are managed directly in the draw method\n    * @ignore\n    */\n    preDraw(renderer) {\n        // save the context\n        renderer.save();\n\n        // apply the defined alpha value\n        renderer.setGlobalAlpha(renderer.globalAlpha() * this.getOpacity());\n\n        // apply the defined tint, if any\n        renderer.setTint(this.tint);\n\n        // apply blending if different from \"normal\"\n        if (this.blendMode !== renderer.getBlendMode()) {\n            renderer.setBlendMode(this.blendMode);\n        }\n    }\n\n    /**\n     * draw this ImageLayer (automatically called by melonJS)\n     * @protected\n     * @param {CanvasRenderer|WebGLRenderer} renderer - a renderer instance\n     * @param {Camera2d} [viewport] - the viewport to (re)draw\n     */\n    draw(renderer, viewport) {\n        const width = this.width,\n            height = this.height,\n            bw = viewport.bounds.width,\n            bh = viewport.bounds.height,\n            ax = this.anchorPoint.x,\n            ay = this.anchorPoint.y;\n\n        let x = this.pos.x,\n            y = this.pos.y;\n\n        if (this.ratio.x === 0 && this.ratio.y === 0) {\n            // static image\n            x = x + ax * (bw - width);\n            y = y + ay * (bh - height);\n        }\n\n        renderer.translate(x, y);\n        renderer.drawPattern(\n            this._pattern,\n            0,\n            0,\n            viewport.width * 2,\n            viewport.height * 2\n        );\n    }\n\n    // called when the layer is removed from the game world or a container\n    onDeactivateEvent() {\n        // cancel all event subscriptions\n        off(VIEWPORT_ONCHANGE, this.updateLayer);\n        off(VIEWPORT_ONRESIZE, this.resize);\n        off(LEVEL_LOADED, this.updateLayer);\n    }\n\n    /**\n     * Destroy function\n     * @ignore\n     */\n    destroy() {\n        pool.push(this.ratio);\n        this.ratio = undefined;\n        off(ONCONTEXT_RESTORED, this.createPattern);\n        super.destroy();\n    }\n\n}\n\n/**\n * additional import for TypeScript\n * @import Color from \"./../math/color.js\";\n * @import { TextureAtlas } from \"./../video/texture/atlas.js\";\n */\n\n/**\n * @classdesc\n * A NineSliceSprite is similar to a Sprite, but it uses 9-slice scaling to strech its inner area to fit the size of the Renderable,\n * by proportionally scaling a sprite by splitting it in a grid of nine parts (with only parts 1, 3, 7, 9 not being scaled). <br>\n * <img src=\"images/9-slice-scaling.png\"/><br>\n * @see https://en.wikipedia.org/wiki/9-slice_scaling\n * @augments Sprite\n */\nclass NineSliceSprite extends Sprite {\n    /**\n     * @param {number} x - the x coordinates of the sprite object\n     * @param {number} y - the y coordinates of the sprite object\n     * @param {object} settings - Configuration parameters for the Sprite object\n     * @param {number} settings.width - the width of the Renderable over which the sprite needs to be stretched\n     * @param {number} settings.height - the height of the Renderable over which the sprite needs to be stretched\n     * @param {number} [settings.insetx] - the width of a corner over which the sprite is unscaled (default is a quarter of the sprite width)\n     * @param {number} [settings.insety] - the height of a corner over which the sprite is unscaled (default is a quarter of the sprite height)\n     * @param {HTMLImageElement|HTMLCanvasElement|TextureAtlas|string} settings.image - reference to spritesheet image, a texture atlas or to a texture atlas\n     * @param {string} [settings.name=\"\"] - name of this object\n     * @param {string} [settings.region] - region name of a specific region to use when using a texture atlas, see {@link TextureAtlas}\n     * @param {number} [settings.framewidth] - Width of a single frame within the spritesheet\n     * @param {number} [settings.frameheight] - Height of a single frame within the spritesheet\n     * @param {string|Color} [settings.tint] - a tint to be applied to this sprite\n     * @param {number} [settings.flipX] - flip the sprite on the horizontal axis\n     * @param {number} [settings.flipY] - flip the sprite on the vertical axis\n     * @param {Vector2d} [settings.anchorPoint={x:0.5, y:0.5}] - Anchor point to draw the frame at (defaults to the center of the frame).\n     * @example\n     * this.panelSprite = new me.NineSliceSprite(0, 0, {\n     *     image : game.texture,\n     *     region : \"grey_panel\",\n     *     width : this.width,\n     *     height : this.height\n     * });\n     */\n    constructor(x, y, settings) {\n        // call the super constructor\n        super(x, y, settings);\n\n        // ensure mandatory properties are defined\n        if ((typeof settings.width !== \"number\") || (typeof settings.height !== \"number\")) {\n            throw new Error(\"height and width properties are mandatory\");\n        }\n\n        // adjust the nss sprite size accordingly to the target \"expanded\" size\n        this.width = Math.floor(settings.width);\n        this.height = Math.floor(settings.height);\n\n        // nine slice sprite specific internal variables\n        this.nss_width = this.width;\n        this.nss_height = this.height;\n\n        this.insetx = settings.insetx;\n        this.insety = settings.insety;\n    }\n\n    /**\n     * width of the NineSliceSprite\n     * @type {number}\n     */\n    get width() {\n        return super.width;\n    }\n    set width(value) {\n        super.width = this.nss_width = value;\n    }\n\n    /**\n     * height of the NineSliceSprite\n     * @type {number}\n     */\n    get height() {\n        return super.height;\n    }\n    set height(value) {\n        super.height = this.nss_height = value;\n    }\n\n    /**\n     * @ignore\n     */\n    draw(renderer) {\n        // the frame to draw\n        let frame = this.current;\n\n        // cache the current position and size\n        let dx = this.pos.x,\n            dy = this.pos.y;\n\n        let w = frame.width,\n            h = frame.height;\n\n        // frame offset in the texture/atlas\n        let frame_offset = frame.offset;\n        let g_offset = this.offset;\n\n\n        // remove image's TexturePacker/ShoeBox rotation\n        if (frame.angle !== 0) {\n            renderer.translate(-dx, -dy);\n            renderer.rotate(frame.angle);\n            dx -= h;\n            w = frame.height;\n            h = frame.width;\n        }\n\n        let sx = g_offset.x + frame_offset.x,\n            sy = g_offset.y + frame_offset.y;\n\n        // should this be configurable ?\n        let corner_width = this.insetx || w / 4,\n            corner_height = this.insety || h / 4;\n\n        // OPTIMIZE ME !\n\n        // DRAW CORNERS\n\n        // Top Left\n        renderer.drawImage(\n            this.image,\n            sx,                          // sx\n            sy,                          // sy\n            corner_width, corner_height, // sw,sh\n            dx, dy,                      // dx,dy\n            corner_width, corner_height  // dw,dh\n        );\n\n        // Top Right\n        renderer.drawImage(\n            this.image,\n            sx + w - corner_width,          // sx\n            sy,                             // sy\n            corner_width, corner_height,    // sw,sh\n            dx + this.nss_width - corner_width, // dx\n            dy,                             // dy\n            corner_width, corner_height     // dw,dh\n        );\n        // Bottom Left\n        renderer.drawImage(\n            this.image,\n            sx,                                 // sx\n            sy + h - corner_height,             // sy\n            corner_width, corner_height,        // sw,sh\n            dx,                                 // dx\n            dy + this.nss_height - corner_height,   // dy\n            corner_width, corner_height         // dw,dh\n        );\n        // Bottom Right\n        renderer.drawImage(\n            this.image,\n            sx + w - corner_width,              // sx\n            sy + h - corner_height,             // sy\n            corner_width, corner_height,        // sw,sh\n            dx + this.nss_width - corner_width,     //dx\n            dy + this.nss_height - corner_height,   // dy\n            corner_width, corner_height         // dw,dh\n        );\n\n\n        // DRAW SIDES and CENTER\n        let image_center_width = w - (corner_width << 1);\n        let image_center_height = h - (corner_height << 1);\n\n        let target_center_width = this.nss_width - (corner_width << 1);\n        let target_center_height = this.nss_height - (corner_height << 1);\n\n        //Top center\n        renderer.drawImage(\n            this.image,\n            sx + corner_width,         // sx\n            sy,                        // sy\n            image_center_width,        // sw\n            corner_height,             // sh\n            dx + corner_width,         // dx\n            dy,                        // dy\n            target_center_width,       // dw\n            corner_height              // dh\n        );\n\n        //Bottom center\n        renderer.drawImage(\n            this.image,\n            sx + corner_width,                  // sx\n            sy + h - corner_height,             // sy\n            image_center_width,                 // sw\n            corner_height,                      // sh\n            dx + corner_width,                  // dx\n            dy + this.nss_height - corner_height,   // dx\n            target_center_width,                // dw\n            corner_height                       // dh\n        );\n\n        // Middle Left\n        renderer.drawImage(\n            this.image,\n            sx,                   // sx\n            sy + corner_height,   // sy\n            corner_width,         // sw\n            image_center_height,  // sh\n            dx,                   // dx\n            dy + corner_height,   // dy\n            corner_width,         // dw\n            target_center_height  // dh\n        );\n\n        // Middle Right\n        renderer.drawImage(\n            this.image,\n            sx + w - corner_width,          // sx\n            sy + corner_height,             // sy\n            corner_width,                   // sw\n            image_center_height,            // sh\n            dx + this.nss_width - corner_width, // dx\n            dy + corner_height,             // dy\n            corner_width,                   // dw\n            target_center_height            // dh\n        );\n\n        // Middle Center\n        renderer.drawImage(\n            this.image,\n            sx + corner_width,    // sx\n            sy + corner_height,   // sy\n            image_center_width,   // sw\n            image_center_height,  // sh\n            dx + corner_width,    // dx\n            dy + corner_height,   // dy\n            target_center_width,  // dw\n            target_center_height  // dh\n        );\n    }\n}\n\n/**\n * @classdesc\n * This is a basic clickable and draggable container which you can use in your game UI.\n * Use this for example if you want to display a panel that contains text, images or other UI elements.\n * @augments Container\n */\nclass UIBaseElement extends Container {\n    /**\n     *\n     * @param {number} x - The x position of the container\n     * @param {number} y - The y position of the container\n     * @param {number} w - width of the container\n     * @param {number} h - height of the container\n     */\n    constructor(x, y, w, h) {\n        super(x, y, w, h);\n        /**\n         * object can be clicked or not\n         * @type {boolean}\n         * @default true\n         */\n        this.isClickable = true;\n\n        /**\n         * object can be clicked or not\n         * @type {boolean}\n         * @default false\n         */\n        this.isDraggable = false;\n\n        /**\n         * Tap and hold threshold timeout in ms\n         * @type {number}\n         * @default 250\n         */\n        this.holdThreshold = 250;\n\n        /**\n         * object can be tap and hold\n         * @type {boolean}\n         * @default false\n         */\n        this.isHoldable = false;\n\n        /**\n         * true if the pointer is over the object\n         * @type {boolean}\n         * @default false\n         */\n        this.hover = false;\n\n        /**\n         * false if the pointer is down, or true when the pointer status is up\n         * @type {boolean}\n         * @default false\n         */\n        this.released = true;\n\n        /**\n         * UI base elements use screen coordinates by default\n         * (Note: any child elements added to a UIBaseElement should have their floating property to false)\n         * @see Renderable.floating\n         * @type {boolean}\n         * @default true\n         */\n        this.floating = true;\n\n        // object has been updated (clicked,etc..)\n        this.holdTimeout = -1;\n\n        // enable event detection\n        this.isKinematic = false;\n\n        // update container and children bounds automatically\n        this.enableChildBoundsUpdate = true;\n    }\n\n    /**\n     * function callback for the pointerdown event\n     * @ignore\n     */\n    clicked(event) {\n        // Check if left mouse button is pressed\n        if (event.button === 0 && this.isClickable) {\n            this.isDirty = true;\n            this.released = false;\n            if (this.isHoldable) {\n                timer.clearTimeout(this.holdTimeout);\n                this.holdTimeout = timer.setTimeout(\n                    () => this.hold(),\n                    this.holdThreshold,\n                    false\n                );\n                this.released = false;\n            }\n            if (this.isDraggable) {\n                this.grabOffset.set(event.gameX, event.gameY);\n                this.grabOffset.sub(this.pos);\n            }\n            return this.onClick(event);\n        }\n    }\n\n    /**\n     * function called when the object is pressed (to be extended)\n     * @param {Pointer} event - the event object\n     * @returns {boolean} return false if we need to stop propagating the event\n     */\n    onClick(event) { // eslint-disable-line no-unused-vars\n        return true;\n    }\n\n    /**\n     * function callback for the pointerEnter event\n     * @ignore\n     */\n    enter(event) {\n        this.hover = true;\n        this.isDirty = true;\n        if (this.isDraggable === true) {\n            on(POINTERMOVE, this.pointerMove, this);\n            // to memorize where we grab the object\n            this.grabOffset = pool.pull(\"Vector2d\", 0, 0);\n        }\n        return this.onOver(event);\n    }\n\n    /**\n     * pointermove function\n     * @ignore\n     */\n    pointerMove(event) {\n        if (this.hover === true && this.released === false) {\n            // follow the pointer\n            this.pos.set(event.gameX, event.gameY, this.pos.z);\n            this.pos.sub(this.grabOffset);\n            // mark the container for redraw\n            this.isDirty = true;\n            return this.onMove(event);\n        }\n    }\n\n    /**\n     * function called when the pointer is moved over the object\n     * @param {Pointer} event - the event object\n     */\n    onMove(event) { // eslint-disable-line no-unused-vars\n        // to be extended\n    }\n\n    /**\n     * function called when the pointer is over the object\n     * @param {Pointer} event - the event object\n     */\n    onOver(event) { // eslint-disable-line no-unused-vars\n        // to be extended\n    }\n\n    /**\n     * function callback for the pointerLeave event\n     * @ignore\n     */\n    leave(event) {\n        this.hover = false;\n        this.isDirty = true;\n        if (this.isDraggable === true) {\n            // unregister on the global pointermove event\n            off(POINTERMOVE, this.pointerMove);\n            pool.push(this.grabOffset);\n            this.grabOffset = undefined;\n        }\n        this.release(event);\n        return this.onOut(event);\n    }\n\n    /**\n     * function called when the pointer is leaving the object area\n     * @param {Pointer} event - the event object\n     */\n    onOut(event) { // eslint-disable-line no-unused-vars\n        // to be extended\n    }\n\n    /**\n     * function callback for the pointerup event\n     * @ignore\n     */\n    release(event) {\n        if (this.released === false) {\n            this.released = true;\n            this.isDirty = true;\n            timer.clearTimeout(this.holdTimeout);\n            this.holdTimeout = -1;\n            return this.onRelease(event);\n        }\n    }\n\n    /**\n     * function called when the object is pressed and released (to be extended)\n     * @returns {boolean} return false if we need to stop propagating the event\n     */\n    onRelease() {\n        return true;\n    }\n\n    /**\n     * function callback for the tap and hold timer event\n     * @ignore\n     */\n    hold() {\n        timer.clearTimeout(this.holdTimeout);\n        this.holdTimeout = -1;\n        this.isDirty = true;\n        if (!this.released) {\n            this.onHold();\n        }\n    }\n\n    /**\n     * function called when the object is pressed and held<br>\n     * to be extended <br>\n     */\n    onHold() {}\n\n    /**\n     * function called when added to the game world or a container\n     * @ignore\n     */\n    onActivateEvent() {\n        // register pointer events\n        registerPointerEvent(\"pointerdown\", this, (e) => this.clicked(e));\n        registerPointerEvent(\"pointerup\", this, (e) => this.release(e));\n        registerPointerEvent(\"pointercancel\", this, (e) => this.release(e));\n        registerPointerEvent(\"pointerenter\", this, (e) => this.enter(e));\n        registerPointerEvent(\"pointerleave\", this, (e) => this.leave(e));\n\n        // call the parent function\n        super.onActivateEvent();\n    }\n\n    /**\n     * function called when removed from the game world or a container\n     * @ignore\n     */\n    onDeactivateEvent() {\n        // release pointer events\n        releasePointerEvent(\"pointerdown\", this);\n        releasePointerEvent(\"pointerup\", this);\n        releasePointerEvent(\"pointercancel\", this);\n        releasePointerEvent(\"pointerenter\", this);\n        releasePointerEvent(\"pointerleave\", this);\n        timer.clearTimeout(this.holdTimeout);\n        this.holdTimeout = -1;\n\n        // unregister on the global pointermove event\n        // note: this is just a precaution, in case\n        // the object is being remove from his parent\n        // container before the leave function is called\n        if (this.isDraggable === true) {\n            off(POINTERMOVE, this.pointerMove);\n            if (typeof this.grabOffset !== \"undefined\") {\n                pool.push(this.grabOffset);\n                this.grabOffset = undefined;\n            }\n        }\n\n        // call the parent function\n        super.onDeactivateEvent();\n    }\n}\n\n/**\n * apply the current text style to the given context\n * @ignore\n */\nfunction setContextStyle(context, style) {\n    context.font = style.font;\n    context.fillStyle = style.fillStyle.toRGBA();\n    context.strokeStyle = style.strokeStyle.toRGBA();\n    context.lineWidth = style.lineWidth;\n    context.textAlign = style.textAlign;\n    context.textBaseline = style.textBaseline;\n}\n\n/*\n* ASCII Table\n* http://www.asciitable.com/\n* [ !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz]\n*\n* -> first char \" \" 32d (0x20);\n*/\n\nconst runits = [\"ex\", \"em\", \"pt\", \"px\"];\nconst toPX = [12, 24, 0.75, 1];\n\n/**\n * @classdesc\n * a generic system font object.\n * @augments Renderable\n */\nclass Text extends Renderable {\n    /**\n     * @param {number} x - position of the text object\n     * @param {number} y - position of the text object\n     * @param {object} settings - the text configuration\n     * @param {string} settings.font - a CSS family font name\n     * @param {number|string} settings.size - size, or size + suffix (px, em, pt)\n     * @param {Color|string} [settings.fillStyle=\"#000000\"] - a CSS color value\n     * @param {Color|string} [settings.strokeStyle=\"#000000\"] - a CSS color value\n     * @param {number} [settings.lineWidth=0] - line width, in pixels, when drawing stroke\n     * @param {string} [settings.textAlign=\"left\"] - horizontal text alignment\n     * @param {string} [settings.textBaseline=\"top\"] - the text baseline\n     * @param {number} [settings.lineHeight=1.0] - line spacing height\n     * @param {Vector2d} [settings.anchorPoint={x:0.0, y:0.0}] - anchor point to draw the text at\n     * @param {number} [settings.wordWrapWidth] - the maximum length in CSS pixel for a single segment of text\n     * @param {(string|string[])} [settings.text=\"\"] - a string, or an array of strings\n     * @example\n     * let font = new me.Text(0, 0, {font: \"Arial\", size: 8, fillStyle: this.color});\n     */\n    constructor(x, y, settings) {\n        // call the parent constructor\n        super(x, y, settings.width || 0, settings.height || 0);\n\n        /**\n         * defines the color used to draw the font.\n         * @type {Color}\n         * @default black\n         */\n        this.fillStyle = pool.pull(\"Color\", 0, 0, 0);\n\n        /**\n         * defines the color used to draw the font stroke.<br>\n         * @type {Color}\n         * @default black\n         */\n        this.strokeStyle = pool.pull(\"Color\", 0, 0, 0);\n\n        /**\n         * sets the current line width, in pixels, when drawing stroke\n         * @type {number}\n         * @default 0\n         */\n        this.lineWidth = 0;\n\n        /**\n         * Set the default text alignment (or justification),<br>\n         * possible values are \"left\", \"right\", and \"center\".<br>\n         * @type {string}\n         * @default \"left\"\n         */\n        this.textAlign = \"left\";\n\n        /**\n         * Set the text baseline (e.g. the Y-coordinate for the draw operation), <br>\n         * possible values are \"top\", \"hanging, \"middle, \"alphabetic, \"ideographic, \"bottom\"<br>\n         * @type {string}\n         * @default \"top\"\n         */\n        this.textBaseline = \"top\";\n\n        /**\n         * Set the line spacing height (when displaying multi-line strings). <br>\n         * Current font height will be multiplied with this value to set the line height.\n         * @type {number}\n         * @default 1.0\n         */\n        this.lineHeight = 1.0;\n\n        /**\n         * the maximum length in CSS pixel for a single segment of text.\n         * (use -1 to disable word wrapping)\n         * @type {number}\n         * @default -1\n         */\n        this.wordWrapWidth = -1;\n\n        /**\n         * the font size (in px)\n         * @type {number}\n         * @default 10\n         */\n        this.fontSize = 10;\n\n        /**\n         * the text to be displayed\n         * @private\n         */\n        this._text = [];\n\n        // initalize the object based on the given settings\n        this.onResetEvent(x, y, settings);\n    }\n\n    /** @ignore */\n    onResetEvent(x, y, settings) {\n\n        if (typeof this.fillStyle === \"undefined\") {\n            this.fillStyle = pool.pull(\"Color\", 0, 0, 0);\n        }\n\n        if (typeof this.strokeStyle === \"undefined\") {\n            this.strokeStyle = pool.pull(\"Color\", 0, 0, 0);\n        }\n\n        if (typeof settings.fillStyle !== \"undefined\") {\n            if (settings.fillStyle instanceof Color) {\n                this.fillStyle.copy(settings.fillStyle);\n            } else {\n                // string (#RGB, #ARGB, #RRGGBB, #AARRGGBB)\n                this.fillStyle.parseCSS(settings.fillStyle);\n            }\n        }\n\n        if (typeof settings.strokeStyle !== \"undefined\") {\n            if (settings.strokeStyle instanceof Color) {\n                this.strokeStyle.copy(settings.strokeStyle);\n            } else {\n                // string (#RGB, #ARGB, #RRGGBB, #AARRGGBB)\n                this.strokeStyle.parseCSS(settings.strokeStyle);\n            }\n        }\n\n        this.lineWidth = settings.lineWidth || 0;\n        this.textAlign = settings.textAlign || \"left\";\n        this.textBaseline = settings.textBaseline || \"top\";\n        this.lineHeight = settings.lineHeight || 1.0;\n        this.wordWrapWidth = settings.wordWrapWidth || -1;\n        this.fontSize = 10;\n\n        // anchor point\n        if (typeof settings.anchorPoint !== \"undefined\") {\n            this.anchorPoint.setV(settings.anchorPoint);\n        } else {\n            this.anchorPoint.set(0, 0);\n        }\n\n        // if floating was specified through settings\n        if (typeof settings.floating !== \"undefined\") {\n            this.floating = !!settings.floating;\n        }\n\n        // font name and type\n        this.setFont(settings.font, settings.size);\n\n        // aditional\n        if (settings.bold === true) {\n            this.bold();\n        }\n        if (settings.italic === true) {\n            this.italic();\n        }\n\n        // the canvas Texture used to render this text\n        // XXX: offscreenCanvas is currently disabled for text rendering due to issue in WebGL mode\n        this.canvasTexture = pool.pull(\"CanvasRenderTarget\", 2, 2, { offscreenCanvas: false });\n\n        // instance to text metrics functions\n        this.metrics = new TextMetrics(this);\n\n        // set the text\n        this.setText(settings.text);\n    }\n\n    /**\n     * make the font bold\n     * @returns {Text} this object for chaining\n     */\n    bold() {\n        this.font = \"bold \" + this.font;\n        this.isDirty = true;\n        return this;\n    }\n\n    /**\n     * make the font italic\n     * @returns {Text} this object for chaining\n     */\n    italic() {\n        this.font = \"italic \" + this.font;\n        this.isDirty = true;\n        return this;\n    }\n\n    /**\n     * set the font family and size\n     * @param {string} font - a CSS font name\n     * @param {number|string} [size=10] - size in px, or size + suffix (px, em, pt)\n     * @returns {Text} this object for chaining\n     * @example\n     * font.setFont(\"Arial\", 20);\n     * font.setFont(\"Arial\", \"1.5em\");\n     */\n    setFont(font, size = 10) {\n        // font name and type\n        let font_names = font.split(\",\").map((value) => {\n            value = value.trim();\n            return (\n                !/(^\".*\"$)|(^'.*'$)/.test(value)\n            ) ? \"\\\"\" + value + \"\\\"\" : value;\n        });\n\n        // font size\n        if (typeof size === \"number\") {\n            this.fontSize = size;\n            size += \"px\";\n        } else /* string */ {\n            // extract the units and convert if necessary\n            let CSSval = size.match(/([-+]?[\\d.]*)(.*)/);\n            this.fontSize = parseFloat(CSSval[1]);\n            if (CSSval[2]) {\n                this.fontSize *= toPX[runits.indexOf(CSSval[2])];\n            } else {\n                // no unit define, assume px\n                size += \"px\";\n            }\n        }\n        this.height = this.fontSize;\n        this.font = size + \" \" + font_names.join(\",\");\n\n        this.isDirty = true;\n\n        return this;\n    }\n\n    /**\n     * change the text to be displayed\n     * @param {number|string|string[]} value - a string, or an array of strings\n     * @returns {Text} this object for chaining\n     */\n    setText(value = \"\") {\n        let bounds = this.getBounds();\n\n        // set the next text\n        if (this._text.toString() !== value.toString()) {\n            if (!Array.isArray(value)) {\n                this._text = (\"\" + value).split(\"\\n\");\n            } else {\n                this._text = value;\n            }\n        }\n\n        // word wrap if necessary\n        if (this._text.length > 0 && this.wordWrapWidth > 0) {\n            this._text = this.metrics.wordWrap(this._text, this.wordWrapWidth, this.canvasTexture.context);\n        }\n\n        // calculcate the text size and update the bounds accordingly\n        bounds.addBounds(this.metrics.measureText(this._text, this.canvasTexture.context), true);\n\n        // update the offScreenCanvas texture if required\n        let width = Math.ceil(this.metrics.width),\n            height = Math.ceil(this.metrics.height);\n\n        if (renderer.WebGLVersion === 1) {\n            // round size to next Pow2\n            width = nextPowerOfTwo(this.metrics.width);\n            height = nextPowerOfTwo(this.metrics.height);\n        }\n\n        // invalidate the texture\n        this.canvasTexture.invalidate(renderer);\n\n        // resize the cache canvas if necessary\n        if (this.canvasTexture.width < width || this.canvasTexture.height < height) {\n            this.canvasTexture.resize(width, height);\n        }\n\n        this.canvasTexture.clear();\n        this._drawFont(this.canvasTexture.context, this._text,  this.pos.x - this.metrics.x, this.pos.y - this.metrics.y);\n\n        this.isDirty = true;\n\n        return this;\n    }\n\n    /**\n     * measure the given text size in pixels\n     * @param {CanvasRenderer|WebGLRenderer} renderer - reference to the active renderer\n     * @param {string} [text] - the text to be measured\n     * @returns {TextMetrics} a TextMetrics object defining the dimensions of the given piece of text\n     */\n    measureText(renderer, text = this._text) {\n        return this.metrics.measureText(text, this.canvasTexture.context);\n    }\n\n\n    /**\n     * draw a text at the specified coord\n     * @param {CanvasRenderer|WebGLRenderer} renderer - Reference to the destination renderer instance\n     * @param {string} [text]\n     * @param {number} [x]\n     * @param {number} [y]\n     */\n    draw(renderer, text, x = this.pos.x, y = this.pos.y) {\n        // \"hacky patch\" for backward compatibilty\n        if (typeof this.ancestor === \"undefined\") {\n\n            // update position if changed\n            if (this.pos.x !== x || this.pos.y !== y) {\n                this.pos.x = x;\n                this.pos.y = y;\n                this.isDirty = true;\n            }\n\n            // update text cache\n            this.setText(text);\n\n            // save the previous context\n            renderer.save();\n\n            // apply the defined alpha value\n            renderer.setGlobalAlpha(renderer.globalAlpha() * this.getOpacity());\n\n        }\n\n        // adjust x,y position based on the bounding box\n        x = this.metrics.x;\n        y = this.metrics.y;\n\n        // clamp to pixel grid if required\n        if (renderer.settings.subPixel === false) {\n            x = ~~x;\n            y = ~~y;\n        }\n\n        // draw the text\n        renderer.drawImage(this.canvasTexture.canvas, x, y);\n\n        // for backward compatibilty\n        if (typeof this.ancestor === \"undefined\") {\n            // restore previous context\n            renderer.restore();\n        }\n    }\n\n    /**\n     * draw a stroke text at the specified coord, as defined by the `lineWidth` and `fillStroke` properties.\n     * @deprecated since 15.0.0\n     * @param {CanvasRenderer|WebGLRenderer} renderer - Reference to the destination renderer instance\n     * @param {string} text\n     * @param {number} x\n     * @param {number} y\n     */\n    drawStroke(renderer, text, x, y) {\n        this.draw(renderer, text, x, y);\n    }\n\n    /**\n     * @ignore\n     */\n    _drawFont(context, text, x, y) {\n        setContextStyle(context, this);\n\n        for (let i = 0; i < text.length; i++) {\n            const string = text[i].trimEnd();\n            // draw the string\n            if (this.fillStyle.alpha > 0) {\n                context.fillText(string, x, y);\n            }\n            // stroke the text\n            if (this.lineWidth > 0 && this.strokeStyle.alpha > 0) {\n                context.strokeText(string, x, y);\n            }\n            // add leading space\n            y += this.metrics.lineHeight();\n        }\n        return this.metrics;\n    }\n\n    /**\n     * Destroy function\n     * @ignore\n     */\n    destroy() {\n        if (typeof renderer.gl !== \"undefined\") {\n            // make sure the right compositor is active\n            renderer.setCompositor(\"quad\");\n            renderer.currentCompositor.deleteTexture2D(renderer.currentCompositor.getTexture2D(this.glTextureUnit));\n            this.glTextureUnit = undefined;\n        }\n        renderer.cache.delete(this.canvasTexture.canvas);\n        pool.push(this.canvasTexture);\n        this.canvasTexture = undefined;\n        pool.push(this.fillStyle);\n        pool.push(this.strokeStyle);\n        this.fillStyle = this.strokeStyle = undefined;\n        this.metrics = undefined;\n        this._text.length = 0;\n        super.destroy();\n    }\n}\n\n/**\n * @classdesc\n * a Text Metrics object that contains helper for text manipulation\n * @augments Bounds\n */\nclass TextMetrics extends Bounds {\n\n    /**\n     * @param {Text|BitmapText} ancestor - the parent object that contains this TextMetrics object\n     */\n    constructor(ancestor) {\n\n        // parent constructor\n        super();\n\n        /**\n         * a reference to the parent object that contains this TextMetrics object\n         * @public\n         * @type {Renderable}\n         * @default undefined\n         */\n        this.ancestor = ancestor;\n\n        this.setMinMax(0, 0, 0, 0);\n    }\n\n    /**\n     * Returns the height of a segment of inline text in CSS pixels.\n     * @returns {number} the height of a segment of inline text in CSS pixels.\n     */\n    lineHeight() {\n        if (this.ancestor instanceof Text) {\n            return this.ancestor.fontSize * this.ancestor.lineHeight;\n        } else { // it's a BitmapText\n            return this.ancestor.fontData.capHeight * this.ancestor.lineHeight * this.ancestor.fontScale.y;\n        }\n    }\n\n    /**\n     * Returns the width of the given segment of inline text in CSS pixels.\n     * @param {string} text - the text to be measured\n     * @param {CanvasRenderingContext2D} [context] - reference to an active 2d context for canvas rendering\n     * @returns {number} the width of the given segment of inline text in CSS pixels.\n     */\n    lineWidth(text, context) {\n        if (this.ancestor instanceof Text) {\n            return context.measureText(text).width;\n        } else { // it's a BitmapText\n            let characters = text.split(\"\");\n            const charactersLength = characters.length;\n            let width = 0;\n            let lastGlyph = null;\n            for (let i = 0; i < charactersLength; i++) {\n                let ch = characters[i].charCodeAt(0);\n                let glyph = this.ancestor.fontData.glyphs[ch];\n                if (typeof glyph !== \"undefined\") {\n                    let kerning = (lastGlyph && lastGlyph.kerning) ? lastGlyph.getKerning(ch) : 0;\n                    width += (glyph.xadvance + kerning) * this.ancestor.fontScale.x;\n                    lastGlyph = glyph;\n                }\n            }\n            return width;\n        }\n    }\n\n    /**\n     * measure the given text size in CSS pixels\n     * @param {string} text - the text to be measured\n     * @param {CanvasRenderingContext2D} [context] - reference to an active 2d context for canvas rendering\n     * @returns {TextMetrics} this\n     */\n    measureText(text, context) {\n        let strings;\n\n        if (!Array.isArray(text)) {\n            strings = (\"\" + text).split(\"\\n\");\n        } else {\n            strings = text;\n        }\n\n        if (typeof context !== \"undefined\") {\n            // save the previous context\n            context.save();\n\n            // apply the style font\n            setContextStyle(context, this.ancestor);\n        }\n\n        // compute the bounding box size\n        this.width = this.height = 0;\n\n        for (let i = 0; i < strings.length; i++) {\n            this.width = Math.max(this.lineWidth(strings[i].trimEnd(), context), this.width);\n            this.height += this.lineHeight();\n        }\n        this.width = Math.ceil(this.width);\n        this.height = Math.ceil(this.height);\n\n        // compute the bounding box position\n        this.x = Math.floor((this.ancestor.textAlign === \"right\" ? this.ancestor.pos.x - this.width : (\n            this.ancestor.textAlign === \"center\" ? this.ancestor.pos.x - (this.width / 2) : this.ancestor.pos.x\n        )));\n        this.y = Math.floor((this.ancestor.textBaseline.search(/^(top|hanging)$/) === 0) ? this.ancestor.pos.y : (\n            this.ancestor.textBaseline === \"middle\" ? this.ancestor.pos.y - (this.lineHeight() / 2) : this.ancestor.pos.y - this.lineHeight()\n        ));\n\n        if (typeof context !== \"undefined\") {\n            // restore the context\n            context.restore();\n        }\n\n        return this;\n    }\n\n    /**\n     * wrap the given text based on the given width\n     * @param {string|string[]} text - the text to be wrapped\n     * @param {number} width - maximum width of one segment of text in css pixel\n     * @param {CanvasRenderingContext2D} [context] - reference to an active 2d context for canvas rendering\n     * @returns {string[]} an array of string representing wrapped text\n     */\n    wordWrap(text, width, context) {\n        let words;\n        let currentLine = \"\";\n        let output = [];\n\n        if (Array.isArray(text)) {\n            // join into a single string\n            text = text.join(\" \");\n        }\n        // word splitting to be improved as it replaces \\n by space if present\n        words = text.replace(/[\\r\\n]+/g, \" \").split(\" \");\n\n        if (typeof context !== \"undefined\") {\n            // save the previous context\n            context.save();\n\n            // apply the style font\n            setContextStyle(context, this.ancestor);\n        }\n\n        for (let i = 0; i < words.length; i++) {\n            let word = words[i];\n            let lineWidth = this.lineWidth(currentLine + word + \" \", context);\n            if (lineWidth < width) {\n                // add the word to the current line\n                currentLine += word + \" \";\n            } else {\n                output.push(currentLine + \"\\n\");\n                currentLine = word + \" \";\n            }\n        }\n        // last line\n        output.push(currentLine);\n\n        if (typeof context !== \"undefined\") {\n            // restore the context\n            context.restore();\n        }\n\n        return output;\n    }\n}\n\n/**\n * @classdesc\n * a bitmap font object\n * @augments Renderable\n */\nclass BitmapText extends Renderable {\n    /**\n     * @param {number} x - position of the text object\n     * @param {number} y - position of the text object\n     * @param {object} settings - the text configuration\n     * @param {string|Image} settings.font - a font name to identify the corresponing source image\n     * @param {string} [settings.fontData=settings.font] - the bitmap font data corresponding name, or the bitmap font data itself\n     * @param {number} [settings.size] - size a scaling ratio\n     * @param {Color|string} [settings.fillStyle] - a CSS color value used to tint the bitmapText (@see BitmapText.tint)\n     * @param {number} [settings.lineWidth=1] - line width, in pixels, when drawing stroke\n     * @param {string} [settings.textAlign=\"left\"] - horizontal text alignment\n     * @param {string} [settings.textBaseline=\"top\"] - the text baseline\n     * @param {number} [settings.lineHeight=1.0] - line spacing height\n     * @param {Vector2d} [settings.anchorPoint={x:0.0, y:0.0}] - anchor point to draw the text at\n     * @param {number} [settings.wordWrapWidth] - the maximum length in CSS pixel for a single segment of text\n     * @param {(string|string[])} [settings.text] - a string, or an array of strings\n     * @example\n     * // Use me.loader.preload or me.loader.load to load assets\n     * me.loader.preload([\n     *     { name: \"arial\", type: \"binary\" src: \"data/font/arial.fnt\" },\n     *     { name: \"arial\", type: \"image\" src: \"data/font/arial.png\" },\n     * ])\n     * // Then create an instance of your bitmap font:\n     * let myFont = new me.BitmapText(x, y, {font:\"arial\", text:\"Hello\"});\n     * // two possibilities for using \"myFont\"\n     * // either call the draw function from your Renderable draw function\n     * myFont.draw(renderer, \"Hello!\", 0, 0);\n     * // or just add it to the word container\n     * me.game.world.addChild(myFont);\n     */\n    constructor(x, y, settings) {\n        // call the parent constructor\n        super(x, y, settings.width || 0, settings.height || 0);\n\n        /**\n         * Set the default text alignment (or justification),<br>\n         * possible values are \"left\", \"right\", and \"center\".\n         * @public\n         * @type {string}\n         * @default \"left\"\n         */\n        this.textAlign = settings.textAlign || \"left\";\n\n        /**\n         * Set the text baseline (e.g. the Y-coordinate for the draw operation), <br>\n         * possible values are \"top\", \"hanging, \"middle, \"alphabetic, \"ideographic, \"bottom\"<br>\n         * @public\n         * @type {string}\n         * @default \"top\"\n         */\n        this.textBaseline = settings.textBaseline || \"top\";\n\n        /**\n         * Set the line spacing height (when displaying multi-line strings). <br>\n         * Current font height will be multiplied with this value to set the line height.\n         * @public\n         * @type {number}\n         * @default 1.0\n         */\n        this.lineHeight = settings.lineHeight || 1.0;\n\n        /**\n         * the maximum length in CSS pixel for a single segment of text.\n         * (use -1 to disable word wrapping)\n         * @public\n         * @type {number}\n         * @default -1\n         */\n        this.wordWrapWidth = settings.wordWrapWidth || -1;\n\n        /**\n         * the text to be displayed\n         * @private\n         */\n        this._text = [];\n\n        /**\n         * scaled font size\n         * @private\n         */\n        this.fontScale = pool.pull(\"Vector2d\", 1.0, 1.0);\n\n        /**\n         * font image\n         * @private\n         */\n        this.fontImage = (typeof settings.font === \"object\") ? settings.font : getImage(settings.font);\n\n        if (typeof settings.fontData !== \"string\") {\n            /**\n             * font data\n             * @private\n             */\n            // use settings.font to retreive the data from the loader\n            this.fontData = pool.pull(\"BitmapTextData\", getBinary(settings.font));\n        } else {\n            this.fontData = pool.pull(\"BitmapTextData\",\n                // if starting/includes \"info face\" the whole data string was passed as parameter\n                (settings.fontData.includes(\"info face\")) ? settings.fontData : getBinary(settings.fontData)\n            );\n        }\n\n        // if floating was specified through settings\n        if (typeof settings.floating !== \"undefined\") {\n            this.floating = !!settings.floating;\n        }\n\n        // apply given fillstyle\n        if (typeof settings.fillStyle !== \"undefined\") {\n            this.fillStyle = settings.fillStyle;\n        }\n\n        // update anchorPoint if provided\n        if (typeof settings.anchorPoint !== \"undefined\") {\n            this.anchorPoint.set(settings.anchorPoint.x, settings.anchorPoint.y);\n        } else {\n            this.anchorPoint.set(0, 0);\n        }\n\n        // instance to text metrics functions\n        this.metrics = new TextMetrics(this);\n\n        // resize if necessary\n        if (typeof settings.size === \"number\" && settings.size !== 1.0) {\n            this.resize(settings.size);\n        }\n\n        // set the text\n        this.setText(settings.text);\n    }\n\n    /**\n     * change the font settings\n     * @param {string} textAlign - (\"left\", \"center\", \"right\")\n     * @param {number} [scale]\n     * @returns {BitmapText} this object for chaining\n     */\n    set(textAlign, scale) {\n        this.textAlign = textAlign;\n        // updated scaled Size\n        if (scale) {\n            this.resize(scale);\n        }\n        this.isDirty = true;\n\n        return this;\n    }\n\n    /**\n     * change the text to be displayed\n     * @param {number|string|string[]} value - a string, or an array of strings\n     * @returns {BitmapText} this object for chaining\n     */\n    setText(value = \"\") {\n        if (this._text.toString() !== value.toString()) {\n            if (!Array.isArray(value)) {\n                this._text = (\"\" + value).split(\"\\n\");\n            } else {\n                this._text = value;\n            }\n            this.isDirty = true;\n        }\n\n        if (this._text.length > 0 && this.wordWrapWidth > 0) {\n            this._text = this.metrics.wordWrap(this._text, this.wordWrapWidth);\n        }\n\n        this.updateBounds();\n\n        return this;\n    }\n\n    /**\n     * update the bounding box for this Bitmap Text.\n     * @param {boolean} [absolute=true] - update the bounds size and position in (world) absolute coordinates\n     * @returns {Bounds} this Bitmap Text bounding box Rectangle object\n     */\n    updateBounds(absolute = true) {\n        let bounds = this.getBounds();\n\n        bounds.clear();\n\n        if (typeof this.metrics !== \"undefined\") {\n            let ax, ay;\n\n            bounds.addBounds(this.metrics.measureText(this._text));\n\n            switch (this.textAlign) {\n                case \"right\":\n                    ax = this.metrics.width * 1.0;\n                    break;\n\n                case \"center\":\n                    ax = this.metrics.width * 0.5;\n                    break;\n\n                default :\n                    ax = 0; //this.metrics.width * 0.0;\n                    break;\n            }\n\n            // adjust y pos based on alignment value\n            switch (this.textBaseline) {\n                case \"middle\":\n                    ay = this.metrics.height * 0.5;\n                    break;\n\n                case \"ideographic\":\n                case \"alphabetic\":\n                case \"bottom\":\n                    ay = this.metrics.height * 1.0;\n                    break;\n\n                default :\n                    ay = 0; //this.metrics.height * 0.0;\n                    break;\n            }\n\n            // translate the bounds accordingly\n            bounds.translate(ax, ay);\n        }\n\n        if (absolute === true) {\n            if (typeof this.ancestor !== \"undefined\" && typeof this.ancestor.getAbsolutePosition === \"function\" && this.floating !== true) {\n                bounds.translate(this.ancestor.getAbsolutePosition());\n            }\n        }\n\n        return bounds;\n    }\n\n    /**\n     * defines the color used to tint the bitmap text\n     * @public\n     * @type {Color}\n     * @see Renderable#tint\n     */\n    get fillStyle() {\n        return this.tint;\n    }\n    set fillStyle(value) {\n        if (value instanceof Color) {\n            this.tint.copy(value);\n        } else {\n            // string (#RGB, #ARGB, #RRGGBB, #AARRGGBB)\n            this.tint.parseCSS(value);\n        }\n    }\n\n    /**\n     * change the font display size\n     * @param {number} scale - ratio\n     * @returns {BitmapText} this object for chaining\n     */\n    resize(scale) {\n        this.fontScale.set(scale, scale);\n\n        this.updateBounds();\n\n        this.isDirty = true;\n\n        return this;\n    }\n\n    /**\n     * measure the given text size in pixels\n     * @param {string} [text]\n     * @returns {TextMetrics} a TextMetrics object with two properties: `width` and `height`, defining the output dimensions\n     */\n    measureText(text = this._text) {\n        return this.metrics.measureText(text);\n    }\n\n    /**\n     * draw the bitmap font\n     * @param {CanvasRenderer|WebGLRenderer} renderer - Reference to the destination renderer instance\n     * @param {string} [text]\n     * @param {number} [x]\n     * @param {number} [y]\n     */\n    draw(renderer, text, x, y) {\n        // save the previous global alpha value\n        let _alpha = renderer.globalAlpha();\n\n        // allows to provide backward compatibility when\n        // adding Bitmap Font to an object container\n        if (typeof this.ancestor === \"undefined\") {\n            // update cache\n            this.setText(text);\n            renderer.setGlobalAlpha(_alpha * this.getOpacity());\n        } else {\n            // added directly to an object container\n            x = this.pos.x;\n            y = this.pos.y;\n        }\n\n        let lX = x;\n        let stringHeight = this.metrics.lineHeight();\n        let maxWidth = 0;\n\n        for (let i = 0; i < this._text.length; i++) {\n            x = lX;\n            const string = this._text[i].trimEnd();\n            // adjust x pos based on alignment value\n            let stringWidth = this.metrics.lineWidth(string);\n            switch (this.textAlign) {\n                case \"right\":\n                    x -= stringWidth;\n                    break;\n\n                case \"center\":\n                    x -= stringWidth * 0.5;\n                    break;\n\n                default :\n                    break;\n            }\n\n            // adjust y pos based on alignment value\n            switch (this.textBaseline) {\n                case \"middle\":\n                    y -= stringHeight * 0.5;\n                    break;\n\n                case \"ideographic\":\n                case \"alphabetic\":\n                case \"bottom\":\n                    y -= stringHeight;\n                    break;\n\n                default :\n                    break;\n            }\n\n            // update initial position if required\n            if (this.isDirty === true && typeof this.ancestor === \"undefined\") {\n                if (i === 0) {\n                    this.pos.y = y;\n                }\n                if (maxWidth < stringWidth) {\n                    maxWidth = stringWidth;\n                    this.pos.x = x;\n                }\n            }\n\n            // draw the string\n            let lastGlyph = null;\n            for (let c = 0, len = string.length; c < len; c++) {\n                // calculate the char index\n                let ch = string.charCodeAt(c);\n                let glyph = this.fontData.glyphs[ch];\n\n                if (typeof glyph !== \"undefined\") {\n                    let glyphWidth = glyph.width;\n                    let glyphHeight = glyph.height;\n                    let kerning = (lastGlyph && lastGlyph.kerning) ? lastGlyph.getKerning(ch) : 0;\n                    let scaleX = this.fontScale.x;\n                    let scaleY = this.fontScale.y;\n\n                    // draw it\n                    if (glyphWidth !== 0 && glyphHeight !== 0) {\n                        // some browser throw an exception when drawing a 0 width or height image\n                        renderer.drawImage(this.fontImage,\n                            glyph.x, glyph.y,\n                            glyphWidth, glyphHeight,\n                            x + glyph.xoffset * scaleX,\n                            y + glyph.yoffset * scaleY,\n                            glyphWidth * scaleX, glyphHeight * scaleY\n                        );\n                    }\n\n                    // increment position\n                    x += (glyph.xadvance + kerning) * scaleX;\n                    lastGlyph = glyph;\n                } else {\n                    console.warn(\"BitmapText: no defined Glyph in for \" + String.fromCharCode(ch));\n                }\n            }\n            // increment line\n            y += stringHeight;\n        }\n\n        if (typeof this.ancestor === \"undefined\") {\n            // restore the previous global alpha value\n            renderer.setGlobalAlpha(_alpha);\n        }\n\n        // clear the dirty flag here for\n        // backward compatibility\n        this.isDirty = false;\n    }\n\n    /**\n     * Destroy function\n     * @ignore\n     */\n    destroy() {\n        pool.push(this.fontScale);\n        this.fontScale = undefined;\n        pool.push(this.fontData);\n        this.fontData = undefined;\n        this._text.length = 0;\n        this.metrics = undefined;\n        super.destroy();\n    }\n\n}\n\n/**\n * @classdesc\n * This is a basic base text button which you can use in your Game UI.\n * @augments UIBaseElement\n */\nclass UITextButton extends UIBaseElement {\n    /**\n     * A Bitmap Text Button with an outlined background border, filled with background color.\n     * It uses a RoundRect as background and changes the background color on hovering over.\n     * The background will be drawn with 0.5 opacity, so that the background of the button is\n     * slightly shining through.\n     * @param {number} x - x pos of the button\n     * @param {number} y - y pos of the button\n     * @param {string} [settings.font] - The name of the BitmapText font to use\n     * @param {number} [settings.size=1] - The scale factor of the BitmapText\n     * @param {string} [settings.text] - The text to display\n     * @param {string} [settings.bindKey] - The key to bind the action to (default: none)\n     * @param {string} [settings.hoverOffColor=\"#00aa0080\"] - The css value of a color to be used if the pointer is not hovering over the button\n     * @param {string} [settings.hoverOnColor=\"#00ff00ff\"] - The css value of a color to be used if the pointer hovers over the button\n     * @param {string} [settings.borderStrokeColor=\"#000000\"] - The css value of a color to be used to draw the border\n     * @param {string} [settings.fillStyle] - The css value of a tint color to be used to tint the BitmapText\n     * @param {string} [settings.textAlign=\"center\"] - horizontal text alignment\n     * @param {string} [settings.textBaseline=\"middle\"] - the text baseline\n     * @param {number} [settings.borderWidth] - Width of the button\n     * @param {number} [settings.borderHeight] - Height of the button\n     * @example\n     * // Create a new Button\n     * class PlayButton extends UITextButton {\n     *      constructor(x,y) {\n     *          super(x,y, {\n     *              font: 'my-font',\n     *              text: 'Play',\n     *              // if you omit the next two, size is calculated by the size of the text\n     *              borderWidth: 200,\n     *              borderHeight: 20,\n     *              backgroundColor: '#00aa0080',\n     *              hoverColor: '#00ff00ff'\n     *          });\n     *      }\n     *\n     *      onClick(){\n     *          state.change(state.PLAY);\n     *      }\n     * }\n     *\n     * world.addChild(new PlayButton(15,200));\n     */\n    constructor(x, y, settings) {\n        super(x, y);\n\n        /**\n         * The key to bind the action to\n         * @type {string}\n         */\n        this.bindKey = settings.bindKey || -1;\n\n        /**\n         * The css value of a color to be used if the pointer is nothovering over the button\n         * @type {string}\n         */\n        // keep settings.backgroundColor for backward compatibility\n        this.hoverOffColor = settings.hoverOffColor || settings.backgroundColor || \"#00aa0080\";\n\n        /**\n         * The css value of a color to be used if the pointer hovers over the button\n         * @type {string}\n         */\n        // keep settings.hoverColor for backward compatibility\n        this.hoverOnColor = settings.hoverOnColor || settings.hoverColor || \"#00ff00ff\";\n\n        /**\n         * The css value of a color to be used to draw the border\n         * @type {string}\n         */\n        this.borderStrokeColor = settings.borderStrokeColor || \"#000000\";\n\n        /**\n         * Set the default text alignment (or justification),<br>\n         * possible values are \"left\", \"right\", and \"center\".\n         * @public\n         * @type {string}\n         * @default \"center\"\n         */\n        this.textAlign = settings.textAlign = settings.textAlign || \"center\";\n\n        /**\n         * Set the text baseline (e.g. the Y-coordinate for the draw operation), <br>\n         * possible values are \"top\", \"hanging, \"middle, \"alphabetic, \"ideographic, \"bottom\"<br>\n         * @public\n         * @type {string}\n         * @default \"middle\"\n         */\n        this.textBaseline = settings.textBaseline = settings.textBaseline || \"middle\";\n\n        /**\n         * the bitmapText used by the UITextButton class\n         * @type {BitmapText}\n         */\n        this.bitmapText = new BitmapText(0, 0, settings);\n\n        // \"detect\" the button size\n        this.dimensions = this.bitmapText.measureText();\n        settings.borderWidth = settings.borderWidth || this.dimensions.width + 16;\n        settings.borderHeight = settings.borderHeight || this.dimensions.height + 16;\n\n        // create the round rect button\n        this.border = new RoundRect(x, y, settings.borderWidth, settings.borderHeight);\n\n        // resize the container accordingly\n        this.resize(\n            this.border.getBounds().width,\n            this.border.getBounds().height\n        );\n\n        // adjust size position\n        this.bitmapText.pos.set(this.width / 2, this.height / 2);\n\n        // add bitmapText to the UI container\n        this.addChild(this.bitmapText);\n    }\n\n    draw(renderer) {\n        if (this.hover === true) {\n            renderer.setColor(this.hoverOnColor);\n        } else {\n            renderer.setColor(this.hoverOffColor);\n        }\n        renderer.fill(this.border);\n        renderer.setColor(this.borderStrokeColor);\n        renderer.stroke(this.border);\n        super.draw(renderer);\n    }\n}\n\n/**\n * @classdesc\n * This is a basic sprite based button which you can use in your Game UI.\n * @augments Sprite\n */\nclass UISpriteElement extends Sprite {\n    /**\n     * @param {number} x - the x coordinate of the UISpriteElement Object\n     * @param {number} y - the y coordinate of the UISpriteElement Object\n     * @param {object} settings - See {@link Sprite}\n     * @example\n     * // create a basic GUI Object\n     * class myButton extends UISpriteElement {\n     *    constructor(x, y) {\n     *       // call the UISpriteElement parent constructor\n     *       super(x, y, {\n     *          image: \"button\",\n     *          framewidth: 100,\n     *          frameheight: 50\n     *       });\n     *    }\n     *\n     *    // output something in the console\n     *    // when the object is clicked\n     *    onClick(event) {\n     *       console.log(\"clicked!\");\n     *       // don't propagate the event\n     *       return false;\n     *    }\n     * });\n     *\n     * // add the object at pos (10,10)\n     * world.addChild(new myButton(10,10));\n     */\n    constructor(x, y, settings) {\n\n        // call the parent constructor\n        super(x, y, settings);\n\n        /**\n         * object can be clicked or not\n         * @type {boolean}\n         * @default true\n         */\n        this.isClickable = true;\n\n        /**\n         * Tap and hold threshold timeout in ms\n         * @type {number}\n         * @default 250\n         */\n        this.holdThreshold = 250;\n\n        /**\n         * object can be tap and hold\n         * @type {boolean}\n         * @default false\n         */\n        this.isHoldable = false;\n\n        /**\n         * true if the pointer is over the object\n         * @type {boolean}\n         * @default false\n         */\n        this.hover = false;\n\n        // object has been updated (clicked,etc..)\n        this.holdTimeout = -1;\n        this.released = true;\n\n        /**\n         * if this UISpriteElement should use screen coordinates or local coordinates\n         * (Note: any UISpriteElement elements added to a floating parent container should have their floating property to false)\n         * @see Renderable.floating\n         * @type {boolean}\n         * @default true\n         */\n        this.floating = true;\n\n        // enable event detection\n        this.isKinematic = false;\n    }\n\n    /**\n     * function callback for the pointerdown event\n     * @ignore\n     */\n    clicked(event) {\n        // Check if left mouse button is pressed\n        if (event.button === 0 && this.isClickable) {\n            this.isDirty = true;\n            this.released = false;\n            if (this.isHoldable) {\n                timer.clearTimeout(this.holdTimeout);\n                this.holdTimeout = timer.setTimeout(() => this.hold(), this.holdThreshold, false);\n                this.released = false;\n            }\n            return this.onClick(event);\n        }\n    }\n\n    /**\n     * function called when the object is pressed (to be extended)\n     * @param {Pointer} event - the event object\n     * @returns {boolean} return false if we need to stop propagating the event\n     */\n    onClick(event) { // eslint-disable-line no-unused-vars\n        return false;\n    }\n\n    /**\n     * function callback for the pointerEnter event\n     * @ignore\n     */\n    enter(event) {\n        this.hover = true;\n        this.isDirty = true;\n        return this.onOver(event);\n    }\n\n    /**\n     * function called when the pointer is over the object\n     * @param {Pointer} event - the event object\n     */\n    onOver(event) { // eslint-disable-line no-unused-vars\n        // to be extended\n    }\n\n    /**\n     * function callback for the pointerLeave event\n     * @ignore\n     */\n    leave(event) {\n        this.hover = false;\n        this.isDirty = true;\n        this.release(event);\n        return this.onOut(event);\n    }\n\n    /**\n     * function called when the pointer is leaving the object area\n     * @param {Pointer} event - the event object\n     */\n    onOut(event) { // eslint-disable-line no-unused-vars\n        // to be extended\n    }\n\n    /**\n     * function callback for the pointerup event\n     * @ignore\n     */\n    release(event) {\n        if (this.released === false) {\n            this.released = true;\n            this.isDirty = true;\n            timer.clearTimeout(this.holdTimeout);\n            this.holdTimeout = -1;\n            return this.onRelease(event);\n        }\n    }\n\n    /**\n     * function called when the object is pressed and released (to be extended)\n     * @returns {boolean} return false if we need to stop propagating the event\n     */\n    onRelease() {\n        return false;\n    }\n\n    /**\n     * function callback for the tap and hold timer event\n     * @ignore\n     */\n    hold() {\n        timer.clearTimeout(this.holdTimeout);\n        this.holdTimeout = -1;\n        this.isDirty = true;\n        if (!this.released) {\n            this.onHold();\n        }\n    }\n\n    /**\n     * function called when the object is pressed and held<br>\n     * to be extended <br>\n     */\n    onHold() {\n    }\n\n    /**\n     * function called when added to the game world or a container\n     * @ignore\n     */\n    onActivateEvent() {\n        // register pointer events\n        registerPointerEvent(\"pointerdown\", this, (e) => this.clicked(e));\n        registerPointerEvent(\"pointerup\", this, (e) => this.release(e));\n        registerPointerEvent(\"pointercancel\", this, (e) => this.release(e));\n        registerPointerEvent(\"pointerenter\", this, (e) => this.enter(e));\n        registerPointerEvent(\"pointerleave\", this, (e) => this.leave(e));\n    }\n\n    /**\n     * function called when removed from the game world or a container\n     * @ignore\n     */\n    onDeactivateEvent() {\n        // release pointer events\n        releasePointerEvent(\"pointerdown\", this);\n        releasePointerEvent(\"pointerup\", this);\n        releasePointerEvent(\"pointercancel\", this);\n        releasePointerEvent(\"pointerenter\", this);\n        releasePointerEvent(\"pointerleave\", this);\n        timer.clearTimeout(this.holdTimeout);\n        this.holdTimeout = -1;\n    }\n}\n\n/**\n * @classdesc\n * a basic collectable helper class for immovable object (e.g. a coin)\n * @augments Sprite\n */\nclass Collectable extends Sprite {\n    /**\n     * @param {number} x - the x coordinates of the collectable\n     * @param {number} y - the y coordinates of the collectable\n     * @param {object} settings - See {@link Sprite}\n     */\n    constructor(x, y, settings) {\n\n        // call the super constructor\n        super(x, y, settings);\n\n        this.name = settings.name;\n        this.type = settings.type;\n        this.id = settings.id;\n\n        // add and configure the physic body\n        let shape = settings.shapes;\n        if (typeof shape === \"undefined\") {\n            shape = pool.pull(\"Polygon\", 0, 0, [\n                pool.pull(\"Vector2d\", 0,          0),\n                pool.pull(\"Vector2d\", this.width, 0),\n                pool.pull(\"Vector2d\", this.width, this.height)\n            ]);\n        }\n        this.body = new Body(this, shape);\n        this.body.collisionType = collision.types.COLLECTABLE_OBJECT;\n        // by default only collides with PLAYER_OBJECT\n        this.body.setCollisionMask(collision.types.PLAYER_OBJECT);\n        this.body.setStatic(true);\n\n        // Update anchorPoint\n        if (settings.anchorPoint) {\n            this.anchorPoint.set(settings.anchorPoint.x, settings.anchorPoint.y);\n        } else {\n            // for backward compatibility\n            this.anchorPoint.set(0, 0);\n        }\n\n    }\n\n}\n\n/**\n * additional import for TypeScript\n * @import ResponseObject from \"./../physics/response.js\";\n */\n\n/**\n * @classdesc\n * trigger an event when colliding with another object\n * @augments Renderable\n */\nclass Trigger extends Renderable {\n    /**\n     * @param {number} x - the x coordinates of the trigger area\n     * @param {number} y - the y coordinates of the trigger area\n     * @param {number} [settings.width] - width of the trigger area\n     * @param {number} [settings.height] - height of the trigger area\n     * @param {Rect[]|Polygon[]|Line[]|Ellipse[]} [settings.shapes] - collision shape(s) that will trigger the event\n     * @param {string} [settings.duration] - Fade duration (in ms)\n     * @param {string|Color} [settings.color] - Fade color\n     * @param {string} [settings.event=\"level\"] - the type of event to trigger (only \"level\" supported for now)\n     * @param {string} [settings.to] - level to load if level trigger\n     * @param {string|Container} [settings.container] - Target container. See {@link level.load}\n     * @param {Function} [settings.onLoaded] - Level loaded callback. See {@link level.load}\n     * @param {boolean} [settings.flatten] - Flatten all objects into the target container. See {@link level.load}\n     * @param {boolean} [settings.setViewportBounds] - Resize the viewport to match the level. See {@link level.load}\n     * @example\n     * world.addChild(new me.Trigger(\n     *     x, y, {\n     *         shapes: [new me.Rect(0, 0, 100, 100)],\n     *         \"duration\" : 250,\n     *         \"color\" : \"#000\",\n     *         \"to\" : \"mymap2\"\n     *     }\n     * ));\n     */\n    constructor(x, y, settings) {\n        // call the parent constructor\n        super(x, y, settings.width || 0, settings.height || 0);\n\n        // for backward compatibility\n        this.anchorPoint.set(0, 0);\n\n        this.fade = settings.fade;\n        this.duration = settings.duration;\n        this.fading = false;\n\n        // Tiled Settings\n        this.name = \"Trigger\";\n        this.type = settings.type;\n        this.id = settings.id;\n\n        // a temp variable\n        this.gotolevel = settings.to;\n\n        // Collect the defined trigger settings\n        this.triggerSettings = {\n            // the default (and only for now) action\n            event: \"level\"\n        };\n\n        [ \"type\", \"container\", \"onLoaded\", \"flatten\", \"setViewportBounds\", \"to\" ].forEach((property) => {\n            if (typeof settings[property] !== \"undefined\") {\n                this.triggerSettings[property] = settings[property];\n            }\n        });\n\n        // add and configure the physic body\n        let shape = settings.shapes;\n        if (typeof shape === \"undefined\") {\n            shape = pool.pull(\"Polygon\", 0, 0, [\n                pool.pull(\"Vector2d\", 0,          0),\n                pool.pull(\"Vector2d\", this.width, 0),\n                pool.pull(\"Vector2d\", this.width, this.height)\n            ]);\n        }\n        this.body = new Body(this, shape);\n        this.body.collisionType = collision.types.ACTION_OBJECT;\n        // by default only collides with PLAYER_OBJECT\n        this.body.setCollisionMask(collision.types.PLAYER_OBJECT);\n        this.body.setStatic(true);\n        this.resize(this.body.getBounds().width, this.body.getBounds().height);\n    }\n\n    /**\n     * @ignore\n     */\n    getTriggerSettings() {\n        let world = this.ancestor.getRootAncestor();\n        // Lookup for the container instance\n        if (typeof(this.triggerSettings.container) === \"string\") {\n            this.triggerSettings.container = world.getChildByName(this.triggerSettings.container)[0];\n        }\n        return this.triggerSettings;\n    }\n\n    /**\n     * @ignore\n     */\n    onFadeComplete() {\n        let world = this.ancestor.getRootAncestor();\n        level.load(this.gotolevel, this.getTriggerSettings());\n        world.app.viewport.fadeOut(this.fade, this.duration);\n    }\n\n    /**\n     * trigger this event\n     * @name triggerEvent\n     * @memberof Trigger\n     * @protected\n     */\n    triggerEvent() {\n        let triggerSettings = this.getTriggerSettings();\n        let world = this.ancestor.getRootAncestor();\n\n        if (triggerSettings.event === \"level\") {\n            this.gotolevel = triggerSettings.to;\n            // load a level\n            //console.log(\"going to : \", to);\n            if (this.fade && this.duration) {\n                if (!this.fading) {\n                    this.fading = true;\n                    world.app.viewport.fadeIn(this.fade, this.duration,\n                        () => this.onFadeComplete());\n                }\n            } else {\n                level.load(this.gotolevel, triggerSettings);\n            }\n        } else {\n            throw new Error(\"Trigger invalid type\");\n        }\n    }\n\n    /**\n     * onCollision callback, triggered in case of collision with this trigger\n     * @name onCollision\n     * @memberof Trigger\n     * @param {ResponseObject} response - the collision response object\n     * @param {Renderable} other - the other renderable touching this one (a reference to response.a or response.b)\n     * @returns {boolean} true if the object should respond to the collision (its position and velocity will be corrected)\n     */\n    onCollision(response, other) { // eslint-disable-line no-unused-vars\n        if (this.name === \"Trigger\") {\n            this.triggerEvent.apply(this);\n        }\n        return false;\n    }\n\n}\n\n/**\n * additional import for TypeScript\n * @import Color from \"./../math/color.js\";\n * @import Ellipse from \"./../geometries/ellipse.js\";\n * @import CanvasRenderer from \"./../video/canvas/canvas_renderer.js\";\n * @import WebGLRenderer from \"./../video/webgl/webgl_renderer.js\";\n */\n\n\n/** @ignore */\nfunction createGradient(light) {\n    let context = light.texture.context;\n\n    let x1 = light.texture.width / 2,\n        y1 = light.texture.height / 2;\n\n    let radiusX = light.radiusX,\n        radiusY = light.radiusY;\n\n    let scaleX, scaleY, invScaleX, invScaleY;\n    let gradient;\n\n\n    light.texture.clear();\n\n    if (radiusX >= radiusY) {\n        scaleX = 1;\n        invScaleX = 1;\n        scaleY = radiusY / radiusX;\n        invScaleY = radiusX / radiusY;\n        gradient = context.createRadialGradient(x1, y1 * invScaleY, 0, x1, radiusY * invScaleY, radiusX);\n    }\n    else {\n        scaleY = 1;\n        invScaleY = 1;\n        scaleX = radiusX / radiusY;\n        invScaleX = radiusY / radiusX;\n        gradient = context.createRadialGradient(x1 * invScaleX, y1, 0, x1 * invScaleX, y1, radiusY);\n    }\n\n    gradient.addColorStop(0, light.color.toRGBA(light.intensity));\n    gradient.addColorStop(1, light.color.toRGBA(0.0));\n\n    context.fillStyle = gradient;\n\n    context.setTransform(scaleX, 0, 0, scaleY, 0, 0);\n    context.fillRect(0, 0, light.texture.width * invScaleX, light.texture.height * invScaleY);\n}\n\n/**\n * @classdesc\n * A 2D point light.\n * Note: this is a very experimental and work in progress feature, that provides a simple spot light effect.\n * The light effect is best rendered in WebGL, as they are few limitations when using the Canvas Renderer\n * (multiple lights are not supported, alpha component of the ambient light is ignored)\n * @see stage.lights\n */\nclass Light2d extends Renderable {\n    /**\n    * @param {number} x - The horizontal position of the light.\n    * @param {number} y - The vertical position of the light.\n    * @param {number} radiusX - The horizontal radius of the light.\n    * @param {number} [radiusY=radiusX] - The vertical radius of the light.\n    * @param {Color|string} [color=\"#FFF\"] - the color of the light\n    * @param {number} [intensity=0.7] - The intensity of the light.\n    */\n    constructor(x, y, radiusX, radiusY = radiusX, color = \"#FFF\", intensity = 0.7) {\n        // call the parent constructor\n        super(x, y, radiusX * 2, radiusY * 2);\n\n        /**\n         * the color of the light\n         * @type {Color}\n         * @default \"#FFF\"\n         */\n        this.color = pool.pull(\"Color\").parseCSS(color);\n\n        /**\n         * The horizontal radius of the light\n         * @type {number}\n         */\n        this.radiusX = radiusX;\n\n        /**\n         * The vertical radius of the light\n         * @type {number}\n         */\n        this.radiusY = radiusY;\n\n        /**\n         * The intensity of the light\n         * @type {number}\n         * @default 0.7\n         */\n        this.intensity = intensity;\n\n        /**\n         * the default blend mode to be applied when rendering this light\n         * @type {string}\n         * @default \"lighter\"\n         * @see CanvasRenderer#setBlendMode\n         * @see WebGLRenderer#setBlendMode\n         */\n        this.blendMode = \"lighter\";\n\n        /** @ignore */\n        this.visibleArea = pool.pull(\"Ellipse\", this.centerX, this.centerY, this.width, this.height);\n\n        /** @ignore */\n        this.texture = pool.pull(\"CanvasRenderTarget\", this.width, this.height, { offscreenCanvas: false });\n\n        this.anchorPoint.set(0, 0);\n\n        createGradient(this);\n    }\n\n    /**\n     * returns a geometry representing the visible area of this light\n     * @name getVisibleArea\n     * @memberof Light2d\n     * @returns {Ellipse} the light visible mask\n     */\n    getVisibleArea() {\n        return this.visibleArea.setShape(this.getBounds().centerX, this.getBounds().centerY, this.width, this.height);\n    }\n\n    /**\n     * update function\n     * @param {number} dt - time since the last update in milliseconds.\n     * @returns {boolean} true if dirty\n     */\n    update(dt) { // eslint-disable-line no-unused-vars\n        return true;\n    }\n\n    /**\n     * draw this Light2d (automatically called by melonJS)\n     * @name draw\n     * @memberof Light2d\n     * @param {CanvasRenderer|WebGLRenderer} renderer - a renderer instance\n     * @param {Camera2d} [viewport] - the viewport to (re)draw\n     */\n    draw(renderer, viewport) {   // eslint-disable-line no-unused-vars\n        renderer.drawImage(this.texture.canvas, this.getBounds().x, this.getBounds().y);\n    }\n\n    /**\n     * Destroy function<br>\n     * @ignore\n     */\n    destroy() {\n        pool.push(this.color);\n        this.color = undefined;\n        pool.push(this.texture);\n        this.texture = undefined;\n        pool.push(this.visibleArea);\n        this.visibleArea = undefined;\n        super.destroy();\n    }\n}\n\n// bitmap constants\nconst LOG2_PAGE_SIZE = 9;\nconst PAGE_SIZE = 1 << LOG2_PAGE_SIZE;\n\n/**\n * a glyph representing a single character in a font\n * @ignore\n */\nclass Glyph {\n    /**\n     * @ignore\n     */\n    constructor() {\n        this.id = 0;\n        this.x = 0;\n        this.y = 0;\n        this.width = 0;\n        this.height = 0;\n        this.u = 0;\n        this.v = 0;\n        this.u2 = 0;\n        this.v2 = 0;\n        this.xoffset = 0;\n        this.yoffset = 0;\n        this.xadvance = 0;\n        this.fixedWidth = false;\n    }\n\n    /**\n     * @ignore\n     */\n    getKerning(ch) {\n        if (this.kerning) {\n            let page = this.kerning[ch >>> LOG2_PAGE_SIZE];\n            if (page) {\n                return page[ch & PAGE_SIZE - 1] || 0;\n            }\n        }\n        return 0;\n    }\n\n    /**\n     * @ignore\n     */\n    setKerning(ch, value) {\n        if (!this.kerning) {\n            this.kerning = {};\n        }\n        let page = this.kerning[ch >>> LOG2_PAGE_SIZE];\n        if (typeof page === \"undefined\") {\n            this.kerning[ch >>> LOG2_PAGE_SIZE] = {};\n            page = this.kerning[ch >>> LOG2_PAGE_SIZE];\n        }\n        page[ch & PAGE_SIZE - 1] = value;\n    }\n}\n\n// bitmap constants\nconst capChars = [\"M\", \"N\", \"B\", \"D\", \"C\", \"E\", \"F\", \"K\", \"A\", \"G\", \"H\", \"I\", \"J\", \"L\", \"O\", \"P\", \"Q\", \"R\", \"S\", \"T\", \"U\", \"V\", \"W\", \"X\", \"Y\", \"Z\"];\n\n/**\n * Gets the value from a string of pairs.\n * @ignore\n */\nfunction getValueFromPair(string, pattern) {\n    let value = string.match(pattern);\n    if (!value) {\n        throw new Error(\"Could not find pattern \" + pattern + \" in string: \" + string);\n    }\n\n    return value[0].split(\"=\")[1];\n}\n\n/**\n * Gets the first glyph in the map that is not a space character\n * @ignore\n * @name _getFirstGlyph\n * @memberof BitmapTextData\n * @param {object} glyphs - the map of glyphs, each key is a char code\n * @returns {Glyph}\n */\nfunction getFirstGlyph(glyphs) {\n    let keys = Object.keys(glyphs);\n    for (let i = 0; i < keys.length; i++) {\n        if (keys[i] > 32) {\n            return glyphs[keys[i]];\n        }\n    }\n    return null;\n}\n\n/**\n * Creates a glyph to use for the space character\n * @ignore\n * @name createSpaceGlyph\n * @memberof BitmapTextData\n * @param {object} glyphs - the map of glyphs, each key is a char code\n */\nfunction createSpaceGlyph(glyphs) {\n    let spaceCharCode = \" \".charCodeAt(0);\n    let glyph = glyphs[spaceCharCode];\n    if (!glyph) {\n        glyph = new Glyph();\n        glyph.id = spaceCharCode;\n        glyph.xadvance = getFirstGlyph(glyphs).xadvance;\n        glyphs[spaceCharCode] = glyph;\n    }\n}\n\n/**\n * Class for storing relevant data from the font file.\n * @ignore\n */\nclass BitmapTextData {\n\n    /**\n    * @param {string} data - The bitmap font data pulled from the resource loader using me.loader.getBinary()\n    */\n    constructor(data) {\n        this.onResetEvent(data);\n    }\n\n    /**\n     * @ignore\n     */\n    onResetEvent(data) {\n        this.padTop = 0;\n        this.padRight = 0;\n        this.padBottom = 0;\n        this.padLeft = 0;\n        this.lineHeight = 0;\n        // The distance from the top of most uppercase characters to the baseline. Since the drawing position is the cap height of\n        // the first line, the cap height can be used to get the location of the baseline.\n        this.capHeight = 1;\n        // The distance from the bottom of the glyph that extends the lowest to the baseline. This number is negative.\n        this.descent = 0;\n\n        /**\n         * The map of glyphs, each key is a char code.\n         * @name glyphs\n         * @type {object}\n         * @memberof BitmapTextData\n         */\n        this.glyphs = {};\n\n        // parse the data\n        this.parse(data);\n    }\n\n    /**\n     * This parses the font data text and builds a map of glyphs containing the data for each character\n     * @name parse\n     * @memberof BitmapTextData\n     * @param {string} fontData\n     */\n    parse(fontData) {\n        if (!fontData) {\n            throw new Error(\"File containing font data was empty, cannot load the bitmap font.\");\n        }\n        let lines = fontData.split(/\\r\\n|\\n/);\n        let padding = fontData.match(/padding\\=\\d+,\\d+,\\d+,\\d+/g);\n        if (!padding) {\n            throw new Error(\"Padding not found in first line\");\n        }\n        let paddingValues = padding[0].split(\"=\")[1].split(\",\");\n        this.padTop = parseFloat(paddingValues[0]);\n        this.padLeft = parseFloat(paddingValues[1]);\n        this.padBottom = parseFloat(paddingValues[2]);\n        this.padRight = parseFloat(paddingValues[3]);\n\n        this.lineHeight = parseFloat(getValueFromPair(lines[1], /lineHeight\\=\\d+/g));\n\n        let baseLine = parseFloat(getValueFromPair(lines[1], /base\\=\\d+/g));\n        let padY = this.padTop + this.padBottom;\n        let glyph = null;\n\n\n        for (let i = 4; i < lines.length; i++) {\n            let line = lines[i];\n            let characterValues = line.split(/=|\\s+/);\n            if (!line || /^kernings/.test(line)) {\n                continue;\n            }\n            if (/^kerning\\s/.test(line)) {\n                let first = parseFloat(characterValues[2]);\n                let second = parseFloat(characterValues[4]);\n                let amount = parseFloat(characterValues[6]);\n\n                glyph = this.glyphs[first];\n                if (glyph !== null && typeof glyph !== \"undefined\") {\n                    glyph.setKerning(second, amount);\n                }\n            } else {\n                glyph = new Glyph();\n\n                let ch = parseFloat(characterValues[2]);\n                glyph.id = ch;\n                glyph.x = parseFloat(characterValues[4]);\n                glyph.y = parseFloat(characterValues[6]);\n                glyph.width = parseFloat(characterValues[8]);\n                glyph.height = parseFloat(characterValues[10]);\n                glyph.xoffset = parseFloat(characterValues[12]);\n                glyph.yoffset = parseFloat(characterValues[14]);\n                glyph.xadvance = parseFloat(characterValues[16]);\n\n                if (glyph.width > 0 && glyph.height > 0) {\n                    this.descent = Math.min(baseLine + glyph.yoffset, this.descent);\n                }\n\n                this.glyphs[ch] = glyph;\n            }\n        }\n\n        this.descent += this.padBottom;\n\n        createSpaceGlyph(this.glyphs);\n\n        let capGlyph = null;\n        for (let i = 0; i < capChars.length; i++) {\n            let capChar = capChars[i];\n            capGlyph = this.glyphs[capChar.charCodeAt(0)];\n            if (capGlyph) {\n                break;\n            }\n        }\n        if (!capGlyph) {\n            for (let charCode in this.glyphs) {\n                if (this.glyphs.hasOwnProperty(charCode)) {\n                    glyph = this.glyphs[charCode];\n                    if (glyph.height === 0 || glyph.width === 0) {\n                        continue;\n                    }\n                    this.capHeight = Math.max(this.capHeight, glyph.height);\n                }\n            }\n        } else {\n            this.capHeight = capGlyph.height;\n        }\n        this.capHeight -= padY;\n    }\n}\n\n/**\n * @classdesc\n * A Draggable base object\n * @see DropTarget\n * @augments Renderable\n */\nclass Draggable extends Renderable {\n    /**\n     * @param {number} x - the x coordinates of the draggable object\n     * @param {number} y - the y coordinates of the draggable object\n     * @param {number} width - draggable object width\n     * @param {number} height - draggable object height\n     */\n    constructor(x, y, width, height) {\n        super(x, y, width, height);\n        this.isKinematic = false;\n        this.dragging = false;\n        this.dragId = null;\n        this.grabOffset = new Vector2d(0, 0);\n        this.initEvents();\n    }\n\n    /**\n     * Initializes the events the modules needs to listen to\n     * It translates the pointer events to me.events\n     * in order to make them pass through the system and to make\n     * this module testable. Then we subscribe this module to the\n     * transformed events.\n     * @name initEvents\n     * @memberof Draggable\n     * @private\n     */\n    initEvents() {\n        registerPointerEvent(\"pointerdown\", this, (e) => emit(DRAGSTART, e, this));\n        registerPointerEvent(\"pointerup\", this,  (e) => emit(DRAGEND, e, this));\n        registerPointerEvent(\"pointercancel\", this, (e) => emit(DRAGEND, e, this));\n        on(POINTERMOVE, (e) => this.dragMove(e));\n        on(DRAGSTART, (e, draggable) => {\n            if (draggable === this) {\n                this.dragStart(e);\n            }\n        });\n        on(DRAGEND, (e, draggable) => {\n            if (draggable === this) {\n                this.dragEnd(e);\n            }\n        });\n    }\n\n    /**\n     * Gets called when the user starts dragging the entity\n     * @name dragStart\n     * @memberof Draggable\n     * @param {object} e - the pointer event\n     * @returns {boolean} false if the object is being dragged\n     */\n    dragStart(e) {\n        if (this.dragging === false) {\n            this.dragging = true;\n            this.grabOffset.set(e.gameX, e.gameY);\n            this.grabOffset.sub(this.pos);\n            return false;\n        }\n    }\n\n    /**\n     * Gets called when the user drags this entity around\n     * @name dragMove\n     * @memberof Draggable\n     * @param {object} e - the pointer event\n     */\n    dragMove(e) {\n        if (this.dragging === true) {\n            this.pos.set(e.gameX, e.gameY, this.pos.z); //TODO : z ?\n            this.pos.sub(this.grabOffset);\n        }\n    }\n\n    /**\n     * Gets called when the user stops dragging the entity\n     * @name dragEnd\n     * @memberof Draggable\n     * @returns {boolean} false if the object stopped being dragged\n     */\n    dragEnd() {\n        if (this.dragging === true) {\n            this.dragging = false;\n            return false;\n        }\n    }\n\n    /**\n     * Destructor\n     * @name destroy\n     * @memberof Draggable\n     * @ignore\n     */\n    destroy() {\n        off(POINTERMOVE, this.dragMove);\n        off(DRAGSTART, this.dragStart);\n        off(DRAGEND, this.dragEnd);\n        releasePointerEvent(\"pointerdown\", this);\n        releasePointerEvent(\"pointerup\", this);\n        releasePointerEvent(\"pointercancel\", this);\n        super.destroy();\n    }\n}\n\n/**\n * additional import for TypeScript\n * @import { Draggable } from \"./draggable.js\";\n */\n\n/**\n * @classdesc\n * a base drop target object\n * @see Draggable\n * @augments Renderable\n */\nclass DropTarget extends Renderable {\n    /**\n     * @param {number} x - the x coordinates of the drop target\n     * @param {number} y - the y coordinates of the drop target\n     * @param {number} width - drop target width\n     * @param {number} height - drop target height\n     */\n    constructor(x, y, width, height) {\n        super(x, y, width, height);\n\n        this.isKinematic = false;\n\n        /**\n         * constant for the overlaps method\n         * @public\n         * @constant\n         * @type {string}\n         * @name CHECKMETHOD_OVERLAP\n         * @memberof DropTarget\n         */\n        this.CHECKMETHOD_OVERLAP = \"overlaps\";\n\n        /**\n         * constant for the contains method\n         * @public\n         * @constant\n         * @type {string}\n         * @name CHECKMETHOD_CONTAINS\n         * @memberof DropTarget\n         */\n        this.CHECKMETHOD_CONTAINS = \"contains\";\n\n        /**\n         * the checkmethod we want to use\n         * @public\n         * @constant\n         * @type {string}\n         * @name checkMethod\n         * @default \"overlaps\"\n         * @memberof DropTarget\n         */\n        this.checkMethod = this.CHECKMETHOD_OVERLAP;\n\n        on(DRAGEND, this.checkOnMe, this);\n\n    }\n\n    /**\n     * Sets the collision method which is going to be used to check a valid drop\n     * @name setCheckMethod\n     * @memberof DropTarget\n     * @param {string} checkMethod - the checkmethod (defaults to CHECKMETHOD_OVERLAP)\n     */\n    setCheckMethod(checkMethod) {\n        //  We can improve this check,\n        //  because now you can use every method in theory\n        if (typeof(this.getBounds()[this.checkMethod]) === \"function\") {\n            this.checkMethod = checkMethod;\n        }\n    }\n\n    /**\n     * Checks if a dropped entity is dropped on the current entity\n     * @name checkOnMe\n     * @memberof DropTarget\n     * @param {object} e - the triggering event\n     * @param {Draggable} draggable - the draggable object that is dropped\n     */\n    checkOnMe(e, draggable) {\n        if (draggable && this.getBounds()[this.checkMethod](draggable.getBounds())) {\n            // call the drop method on the current entity\n            this.drop(draggable);\n        }\n    }\n\n    /**\n     * Gets called when a draggable entity is dropped on the current entity\n     * @name drop\n     * @memberof DropTarget\n     * @param {Draggable} draggable - the draggable object that is dropped\n     */\n    drop(draggable) {  // eslint-disable-line no-unused-vars\n\n    }\n\n    /**\n     * Destructor\n     * @name destroy\n     * @memberof DropTarget\n     * @ignore\n     */\n    destroy() {\n        off(DRAGEND, this.checkOnMe);\n        super.destroy();\n    }\n}\n\n/*\n* Separating Axis Theorem implementation, based on the SAT.js library by Jim Riecken <jimr@jimr.ca>\n* Available under the MIT License - https://github.com/jriecken/sat-js\n*/\n\n/**\n * @import Entity from \"./../renderable/entity/entity.js\";\n * @import Container from \"./../renderable/container.js\";\n * @import Renderable from \"./../renderable/renderable.js\";\n * @import Sprite from \"./../renderable/sprite.js\";\n * @import NineSliceSprite from \"./../renderable/nineslicesprite.js\";\n * @import Polygon from \"./../geometries/poly.js\";\n * @import Ellipse from \"./../geometries/ellipse.js\";\n */\n\n/**\n * Constants for Vornoi regions\n * @ignore\n */\nconst LEFT_VORNOI_REGION = -1;\n\n/**\n * Constants for Vornoi regions\n * @ignore\n */\nconst MIDDLE_VORNOI_REGION = 0;\n\n/**\n * Constants for Vornoi regions\n * @ignore\n */\nconst RIGHT_VORNOI_REGION = 1;\n\n\n/**\n * A pool of `Vector` objects that are used in calculations to avoid allocating memory.\n * @type {Array.<Vector2d>}\n * @ignore\n */\nlet T_VECTORS = [];\nfor (let v = 0; v < 10; v++) { T_VECTORS.push(new Vector2d()); }\n\n/**\n * A pool of arrays of numbers used in calculations to avoid allocating memory.\n * @type {Array.<Array.<number>>}\n * @ignore\n */\nlet T_ARRAYS = [];\nfor (let a = 0; a < 5; a++) { T_ARRAYS.push([]); }\n\n\n/**\n * Flattens the specified array of points onto a unit vector axis,\n * resulting in a one dimensional range of the minimum and\n * maximum value on that axis.\n * @ignore\n * @param {Array.<Vector2d>} points - The points to flatten.\n * @param {Vector2d} normal - The unit vector axis to flatten on.\n * @param {Array.<number>} result - An array.  After calling this function,\n *   result[0] will be the minimum value,\n *   result[1] will be the maximum value.\n */\nfunction flattenPointsOn(points, normal, result) {\n    let min = Number.MAX_VALUE;\n    let max = -Number.MAX_VALUE;\n    let len = points.length;\n    for (let i = 0; i < len; i++) {\n        // The magnitude of the projection of the point onto the normal\n        const dot = points[i].dot(normal);\n        if (dot < min) { min = dot; }\n        if (dot > max) { max = dot; }\n    }\n    result[0] = min;\n    result[1] = max;\n}\n\n/**\n * Check whether two convex polygons are separated by the specified\n * axis (must be a unit vector).\n * @ignore\n * @param {Vector2d} aPos - The position of the first polygon.\n * @param {Vector2d} bPos - The position of the second polygon.\n * @param {Array.<Vector2d>} aPoints - The points in the first polygon.\n * @param {Array.<Vector2d>} bPoints - The points in the second polygon.\n * @param {Vector2d} axis - The axis (unit sized) to test against.  The points of both polygons\n *   will be projected onto this axis.\n * @param {Response=} response - A Response object (optional) which will be populated\n *   if the axis is not a separating axis.\n * @returns {boolean} true if it is a separating axis, false otherwise.  If false,\n *   and a response is passed in, information about how much overlap and\n *   the direction of the overlap will be populated.\n */\nfunction isSeparatingAxis(aPos, bPos, aPoints, bPoints, axis, response) {\n    let rangeA = T_ARRAYS.pop();\n    let rangeB = T_ARRAYS.pop();\n    // The magnitude of the offset between the two polygons\n    let offsetV = T_VECTORS.pop().copy(bPos).sub(aPos);\n    let projectedOffset = offsetV.dot(axis);\n\n    // Project the polygons onto the axis.\n    flattenPointsOn(aPoints, axis, rangeA);\n    flattenPointsOn(bPoints, axis, rangeB);\n    // Move B's range to its position relative to A.\n    rangeB[0] += projectedOffset;\n    rangeB[1] += projectedOffset;\n    // Check if there is a gap. If there is, this is a separating axis and we can stop\n    if (rangeA[0] > rangeB[1] || rangeB[0] > rangeA[1]) {\n        T_VECTORS.push(offsetV);\n        T_ARRAYS.push(rangeA);\n        T_ARRAYS.push(rangeB);\n        return true;\n    }\n\n    // This is not a separating axis. If we're calculating a response, calculate the overlap.\n    if (response) {\n        let overlap = 0;\n        // A starts further left than B\n        if (rangeA[0] < rangeB[0]) {\n            response.aInB = false;\n            // A ends before B does. We have to pull A out of B\n            if (rangeA[1] < rangeB[1]) {\n                overlap = rangeA[1] - rangeB[0];\n                response.bInA = false;\n            // B is fully inside A.  Pick the shortest way out.\n            } else {\n                let option1 = rangeA[1] - rangeB[0];\n                let option2 = rangeB[1] - rangeA[0];\n                overlap = option1 < option2 ? option1 : -option2;\n            }\n        // B starts further left than A\n        } else {\n            response.bInA = false;\n            // B ends before A ends. We have to push A out of B\n            if (rangeA[1] > rangeB[1]) {\n                overlap = rangeA[0] - rangeB[1];\n                response.aInB = false;\n            // A is fully inside B.  Pick the shortest way out.\n            } else {\n                let option11 = rangeA[1] - rangeB[0];\n                let option22 = rangeB[1] - rangeA[0];\n                overlap = option11 < option22 ? option11 : -option22;\n            }\n        }\n\n        // If this is the smallest amount of overlap we've seen so far, set it as the minimum overlap.\n        let absOverlap = Math.abs(overlap);\n        if (absOverlap < response.overlap) {\n            response.overlap = absOverlap;\n            response.overlapN.copy(axis);\n            if (overlap < 0) {\n                response.overlapN.negateSelf();\n            }\n        }\n    }\n    T_VECTORS.push(offsetV);\n    T_ARRAYS.push(rangeA);\n    T_ARRAYS.push(rangeB);\n    return false;\n}\n\n\n/**\n * Calculates which Vornoi region a point is on a line segment. <br>\n * It is assumed that both the line and the point are relative to `(0,0)`<br>\n * <pre>\n *             |       (0)      |\n *      (-1)  [S]--------------[E]  (1)\n *             |       (0)      |\n * </pre>\n *\n * @ignore\n * @param {Vector2d} line - The line segment.\n * @param {Vector2d} point - The point.\n * @returns  {number} LEFT_VORNOI_REGION (-1) if it is the left region,\n *          MIDDLE_VORNOI_REGION (0) if it is the middle region,\n *          RIGHT_VORNOI_REGION (1) if it is the right region.\n */\nfunction vornoiRegion(line, point) {\n    let len2 = line.length2();\n    let dp = point.dot(line);\n    if (dp < 0) {\n        // If the point is beyond the start of the line, it is in the\n        // left vornoi region.\n        return LEFT_VORNOI_REGION;\n    } else if (dp > len2) {\n        // If the point is beyond the end of the line, it is in the\n        // right vornoi region.\n        return RIGHT_VORNOI_REGION;\n    } else {\n        // Otherwise, it's in the middle one.\n        return MIDDLE_VORNOI_REGION;\n    }\n}\n\n/**\n * Checks whether polygons collide.\n * @ignore\n * @param {Renderable|Container|Entity|Sprite|NineSliceSprite} a - a reference to the object A.\n * @param {Polygon} polyA - a reference to the object A Polygon to be tested\n * @param {Renderable|Container|Entity|Sprite|NineSliceSprite} b - a reference to the object B.\n * @param {Polygon} polyB - a reference to the object B Polygon to be tested\n * @param {Response=} response - Response object (optional) that will be populated if they intersect.\n * @returns {boolean} true if they intersect, false if they don't.\n */\nfunction testPolygonPolygon(a, polyA, b, polyB, response) {\n    // specific point for\n    let aPoints = polyA.points;\n    let aNormals = polyA.normals;\n    let aLen = aNormals.length;\n    let bPoints = polyB.points;\n    let bNormals = polyB.normals;\n    let bLen = bNormals.length;\n    // aboslute shape position\n    let posA = T_VECTORS.pop().copy(a.pos).add(a.ancestor.getAbsolutePosition()).add(polyA.pos);\n    let posB = T_VECTORS.pop().copy(b.pos).add(b.ancestor.getAbsolutePosition()).add(polyB.pos);\n\n    // If any of the edge normals of A is a separating axis, no intersection.\n    for (let i = 0; i < aLen; i++) {\n        if (isSeparatingAxis(posA, posB, aPoints, bPoints, aNormals[i], response)) {\n            T_VECTORS.push(posA);\n            T_VECTORS.push(posB);\n            return false;\n        }\n    }\n\n    // If any of the edge normals of B is a separating axis, no intersection.\n    for (let i = 0; i < bLen; i++) {\n        if (isSeparatingAxis(posA, posB, aPoints, bPoints, bNormals[i], response)) {\n            T_VECTORS.push(posA);\n            T_VECTORS.push(posB);\n            return false;\n        }\n    }\n\n    // Since none of the edge normals of A or B are a separating axis, there is an intersection\n    // and we've already calculated the smallest overlap (in isSeparatingAxis).  Calculate the\n    // final overlap vector.\n    if (response) {\n        response.a = a;\n        response.b = b;\n        response.overlapV.copy(response.overlapN).scale(response.overlap);\n    }\n    T_VECTORS.push(posA);\n    T_VECTORS.push(posB);\n    return true;\n}\n\n/**\n * Check if two Ellipse collide.\n * @ignore\n * @param {Renderable|Container|Entity|Sprite|NineSliceSprite} a - a reference to the object A.\n * @param {Ellipse} ellipseA - a reference to the object A Ellipse to be tested\n * @param {Renderable|Container|Entity|Sprite|NineSliceSprite} b - a reference to the object B.\n * @param {Ellipse} ellipseB - a reference to the object B Ellipse to be tested\n * @param {Response=} response - Response object (optional) that will be populated if\n *   the circles intersect.\n * @returns {boolean} true if the circles intersect, false if they don't.\n */\nfunction testEllipseEllipse(a, ellipseA, b, ellipseB, response) {\n    // Check if the distance between the centers of the two\n    // circles is greater than their combined radius.\n    let differenceV = T_VECTORS.pop().copy(b.pos).add(b.ancestor.getAbsolutePosition()).add(ellipseB.pos)\n        .sub(a.pos).add(a.ancestor.getAbsolutePosition()).sub(ellipseA.pos);\n    let radiusA = ellipseA.radius;\n    let radiusB = ellipseB.radius;\n    let totalRadius = radiusA + radiusB;\n    let totalRadiusSq = totalRadius * totalRadius;\n    let distanceSq = differenceV.length2();\n    // If the distance is bigger than the combined radius, they don't intersect.\n    if (distanceSq > totalRadiusSq) {\n        T_VECTORS.push(differenceV);\n        return false;\n    }\n    // They intersect.  If we're calculating a response, calculate the overlap.\n    if (response) {\n        let dist = Math.sqrt(distanceSq);\n        response.a = a;\n        response.b = b;\n        response.overlap = totalRadius - dist;\n        response.overlapN.copy(differenceV.normalize());\n        response.overlapV.copy(differenceV).scale(response.overlap);\n        response.aInB = radiusA <= radiusB && dist <= radiusB - radiusA;\n        response.bInA = radiusB <= radiusA && dist <= radiusA - radiusB;\n    }\n    T_VECTORS.push(differenceV);\n    return true;\n}\n\n/**\n * Check if a polygon and an ellipse collide.\n * @ignore\n * @param {Renderable|Container|Entity|Sprite|NineSliceSprite} a - a reference to the object A.\n * @param {Polygon} polyA - a reference to the object A Polygon to be tested\n * @param {Renderable|Container|Entity|Sprite|NineSliceSprite} b - a reference to the object B.\n * @param {Ellipse} ellipseB - a reference to the object B Ellipse to be tested\n * @param {Response=} response - Response object (optional) that will be populated if they intersect.\n * @returns {boolean} true if they intersect, false if they don't.\n */\nfunction testPolygonEllipse(a, polyA, b, ellipseB, response) {\n    // Get the position of the circle relative to the polygon.\n    let circlePos = T_VECTORS.pop().copy(b.pos).add(b.ancestor.getAbsolutePosition()).add(ellipseB.pos)\n        .sub(a.pos).add(a.ancestor.getAbsolutePosition()).sub(polyA.pos);\n    let radius = ellipseB.radius;\n    let radius2 = radius * radius;\n    let points = polyA.points;\n    let edges = polyA.edges;\n    let len = edges.length;\n    let edge = T_VECTORS.pop();\n    let normal = T_VECTORS.pop();\n    let point = T_VECTORS.pop();\n    let dist = 0;\n\n    // For each edge in the polygon:\n    for (let i = 0; i < len; i++) {\n        const next = i === len - 1 ? 0 : i + 1;\n        const prev = i === 0 ? len - 1 : i - 1;\n        let overlap = 0;\n        let overlapN = null;\n\n        // Get the edge.\n        edge.copy(edges[i]);\n        // Calculate the center of the circle relative to the starting point of the edge.\n        point.copy(circlePos).sub(points[i]);\n\n        // If the distance between the center of the circle and the point\n        // is bigger than the radius, the polygon is definitely not fully in\n        // the circle.\n        if (response && point.length2() > radius2) {\n            response.aInB = false;\n        }\n\n        // Calculate which Vornoi region the center of the circle is in.\n        let region = vornoiRegion(edge, point);\n        let inRegion = true;\n        // If it's the left region:\n        if (region === LEFT_VORNOI_REGION) {\n            let point2 = null;\n            if (len > 1) {\n                // We need to make sure we're in the RIGHT_VORNOI_REGION of the previous edge.\n                edge.copy(edges[prev]);\n                // Calculate the center of the circle relative the starting point of the previous edge\n                point2 = T_VECTORS.pop().copy(circlePos).sub(points[prev]);\n                region = vornoiRegion(edge, point2);\n                if (region !== RIGHT_VORNOI_REGION) {\n                    inRegion = false;\n                }\n            }\n\n            if (inRegion) {\n                // It's in the region we want.  Check if the circle intersects the point.\n                dist = point.length();\n                if (dist > radius) {\n                    // No intersection\n                    T_VECTORS.push(circlePos);\n                    T_VECTORS.push(edge);\n                    T_VECTORS.push(normal);\n                    T_VECTORS.push(point);\n                    if (point2) {\n                        T_VECTORS.push(point2);\n                    }\n                    return false;\n                } else if (response) {\n                    // It intersects, calculate the overlap.\n                    response.bInA = false;\n                    overlapN = point.normalize();\n                    overlap = radius - dist;\n                }\n            }\n\n            if (point2) {\n                T_VECTORS.push(point2);\n            }\n        // If it's the right region:\n        } else if (region === RIGHT_VORNOI_REGION) {\n            if (len > 1) {\n                // We need to make sure we're in the left region on the next edge\n                edge.copy(edges[next]);\n                // Calculate the center of the circle relative to the starting point of the next edge.\n                point.copy(circlePos).sub(points[next]);\n                region = vornoiRegion(edge, point);\n                if (region !== LEFT_VORNOI_REGION) {\n                    inRegion = false;\n                }\n            }\n\n            if (inRegion) {\n                // It's in the region we want.  Check if the circle intersects the point.\n                dist = point.length();\n                if (dist > radius) {\n                    // No intersection\n                    T_VECTORS.push(circlePos);\n                    T_VECTORS.push(edge);\n                    T_VECTORS.push(normal);\n                    T_VECTORS.push(point);\n                    return false;\n                } else if (response) {\n                    // It intersects, calculate the overlap.\n                    response.bInA = false;\n                    overlapN = point.normalize();\n                    overlap = radius - dist;\n                }\n            }\n        // Otherwise, it's the middle region:\n        } else {\n            // Need to check if the circle is intersecting the edge,\n            // Get the normal.\n            normal.copy(polyA.normals[i]);\n            // Find the perpendicular distance between the center of the\n            // circle and the edge.\n            dist = point.dot(normal);\n            let distAbs = Math.abs(dist);\n            // If the circle is on the outside of the edge, there is no intersection.\n            if ((len === 1 || dist > 0) && distAbs > radius) {\n                // No intersection\n                T_VECTORS.push(circlePos);\n                T_VECTORS.push(edge);\n                T_VECTORS.push(normal);\n                T_VECTORS.push(point);\n                return false;\n            } else if (response) {\n                // It intersects, calculate the overlap.\n                overlapN = normal;\n                overlap = radius - dist;\n                // If the center of the circle is on the outside of the edge, or part of the\n                // circle is on the outside, the circle is not fully inside the polygon.\n                if (dist >= 0 || overlap < 2 * radius) {\n                    response.bInA = false;\n                }\n            }\n        }\n\n        // If this is the smallest overlap we've seen, keep it.\n        // (overlapN may be null if the circle was in the wrong Vornoi region).\n        if (overlapN && response && Math.abs(overlap) < Math.abs(response.overlap)) {\n            response.overlap = overlap;\n            response.overlapN.copy(overlapN);\n        }\n    }\n\n    // Calculate the final overlap vector - based on the smallest overlap.\n    if (response) {\n        response.a = a;\n        response.b = b;\n        response.overlapV.copy(response.overlapN).scale(response.overlap);\n    }\n    T_VECTORS.push(circlePos);\n    T_VECTORS.push(edge);\n    T_VECTORS.push(normal);\n    T_VECTORS.push(point);\n    return true;\n}\n\n/**\n * Check if an ellipse and a polygon collide. <br>\n * **NOTE:** This is slightly less efficient than testPolygonEllipse as it just\n * runs testPolygonEllipse and reverses the response at the end.\n * @ignore\n * @param {Renderable|Container|Entity|Sprite|NineSliceSprite} a - a reference to the object A.\n * @param {Ellipse} ellipseA - a reference to the object A Ellipse to be tested\n * @param {Renderable|Container|Entity|Sprite|NineSliceSprite} b - a reference to the object B.\n * @param {Polygon} polyB - a reference to the object B Polygon to be tested\n * @param {Response=} response - Response object (optional) that will be populated if\n *   they intersect.\n * @returns {boolean} true if they intersect, false if they don't.\n */\nfunction testEllipsePolygon(a, ellipseA, b, polyB, response) {\n    // Test the polygon against the circle.\n    let result = testPolygonEllipse(b, polyB, a, ellipseA, response);\n    if (result && response) {\n        // Swap A and B in the response.\n        let resa = response.a;\n        let aInB = response.aInB;\n        response.overlapN.negateSelf();\n        response.overlapV.negateSelf();\n        response.a = response.b;\n        response.b = resa;\n        response.aInB = response.bInA;\n        response.bInA = aInB;\n    }\n    return result;\n}\n\nvar SAT = {\n\t__proto__: null,\n\ttestEllipseEllipse: testEllipseEllipse,\n\ttestEllipsePolygon: testEllipsePolygon,\n\ttestPolygonEllipse: testPolygonEllipse,\n\ttestPolygonPolygon: testPolygonPolygon\n};\n\n/**\n * @classdesc\n * An object representing the result of an intersection.\n * @property {Renderable} a The first object participating in the intersection\n * @property {Renderable} b The second object participating in the intersection\n * @property {number} overlap Magnitude of the overlap on the shortest colliding axis\n * @property {Vector2d} overlapV The overlap vector (i.e. `overlapN.scale(overlap, overlap)`). If this vector is subtracted from the position of a, a and b will no longer be colliding\n * @property {Vector2d} overlapN The shortest colliding axis (unit-vector)\n * @property {boolean} aInB Whether the first object is entirely inside the second\n * @property {boolean} bInA Whether the second object is entirely inside the first\n * @property {number} indexShapeA The index of the colliding shape for the object a body\n * @property {number} indexShapeB The index of the colliding shape for the object b body\n * @name ResponseObject\n * @public\n */\nclass ResponseObject {\n    constructor() {\n        this.a = null;\n        this.b = null;\n        this.overlapN = new Vector2d();\n        this.overlapV = new Vector2d();\n        this.aInB = true;\n        this.bInA = true;\n        this.indexShapeA = -1;\n        this.indexShapeB = -1;\n        this.overlap = Number.MAX_VALUE;\n    }\n\n    /**\n     * Set some values of the response back to their defaults. <br>\n     * Call this between tests if you are going to reuse a single <br>\n     * Response object for multiple intersection tests <br>\n     * (recommended as it will avoid allocating extra memory) <br>\n     * @name clear\n     * @public\n     * @returns {object} this object for chaining\n     */\n    clear () {\n        this.aInB = true;\n        this.bInA = true;\n        this.overlap = Number.MAX_VALUE;\n        this.indexShapeA = -1;\n        this.indexShapeB = -1;\n        return this;\n    }\n}\n\n/**\n * @import Entity from \"./../renderable/entity/entity.js\";\n * @import Container from \"./../renderable/container.js\";\n * @import Renderable from \"./../renderable/renderable.js\";\n * @import Sprite from \"./../renderable/sprite.js\";\n * @import NineSliceSprite from \"./../renderable/nineslicesprite.js\";\n * @import Line from \"./../geometries/line.js\";\n */\n\n// a dummy object when using Line for raycasting\nlet dummyObj = {\n    pos : new Vector2d(0, 0),\n    ancestor : {\n        _absPos : new Vector2d(0, 0),\n        getAbsolutePosition : function () {\n            return this._absPos;\n        }\n    }\n};\n\n// some cache bounds object used for collision detection\nlet boundsA = new Bounds();\nlet boundsB = new Bounds();\n\n/**\n * the Detector class contains methods for detecting collisions between bodies using a broadphase algorithm.\n */\nclass Detector {\n    /**\n     * @param {Container} world - the physic world this detector is bind to\n     */\n    constructor(world) {\n        // @ignore\n        this.world = world;\n\n        /**\n         * the default response object used for collisions\n         * (will be automatically populated by the collides functions)\n         * @type {ResponseObject}\n         */\n        this.response = new ResponseObject();\n    }\n\n    /**\n     * determine if two objects should collide (based on both respective objects body collision mask and type).<br>\n     * you can redefine this function if you need any specific rules over what should collide with what.\n     * @param {Renderable|Container|Entity|Sprite|NineSliceSprite} a - a reference to the object A.\n     * @param {Renderable|Container|Entity|Sprite|NineSliceSprite} b - a reference to the object B.\n     * @returns {boolean} true if they should collide, false otherwise\n     */\n    shouldCollide(a, b) {\n        let bodyA = a.body,\n            bodyB = b.body;\n        return (\n            (typeof bodyA === \"object\" && typeof bodyB === \"object\") &&\n            a !== b &&\n            a.isKinematic !== true && b.isKinematic !== true &&\n            bodyA.shapes.length > 0 && bodyB.shapes.length > 0 &&\n            !(bodyA.isStatic === true && bodyB.isStatic === true) &&\n            (bodyA.collisionMask & bodyB.collisionType) !== 0 &&\n            (bodyA.collisionType & bodyB.collisionMask) !== 0\n        );\n    }\n\n    /**\n     * detect collision between two bodies.\n     * @param {Body} bodyA - a reference to body A.\n     * @param {Body} bodyB - a reference to body B.\n     * @returns {boolean} true if colliding\n     */\n    collides(bodyA, bodyB, response = this.response) {\n        // for each shape in body A\n        for (let indexA = bodyA.shapes.length, shapeA; indexA--, (shapeA = bodyA.shapes[indexA]);) {\n            // for each shape in body B\n            for (let indexB = bodyB.shapes.length, shapeB; indexB--, (shapeB = bodyB.shapes[indexB]);) {\n                // full SAT collision check\n                if (SAT[\"test\" + shapeA.type + shapeB.type].call(\n                    this,\n                    bodyA.ancestor, // a reference to the object A\n                    shapeA,\n                    bodyB.ancestor,  // a reference to the object B\n                    shapeB,\n                    // clear response object before reusing\n                    response.clear()) === true\n                ) {\n\n                    // set the shape index\n                    response.indexShapeA = indexA;\n                    response.indexShapeB = indexB;\n\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n\n    /**\n     * find all the collisions for the specified object using a broadphase algorithm\n     * @ignore\n     * @param {Renderable|Container|Entity|Sprite|NineSliceSprite} objA - object to be tested for collision\n     * @returns {boolean} in case of collision, false otherwise\n     */\n    collisions(objA) {\n        let collisionCounter = 0;\n        // retreive a list of potential colliding objects from the game world\n        let candidates = this.world.broadphase.retrieve(objA);\n\n        boundsA.addBounds(objA.getBounds(), true);\n        boundsA.addBounds(objA.body.getBounds());\n\n        candidates.forEach((objB) => {\n            // check if both objects \"should\" collide\n            if (this.shouldCollide(objA, objB)) {\n\n                boundsB.addBounds(objB.getBounds(), true);\n                boundsB.addBounds(objB.body.getBounds());\n\n                // fast AABB check if both bounding boxes are overlaping\n                if (boundsA.overlaps(boundsB)) {\n\n                    if (this.collides(objA.body, objB.body)) {\n                        // we touched something !\n                        collisionCounter++;\n\n                        // execute the onCollision callback\n                        if (objA.onCollision && objA.onCollision(this.response, objB) !== false && objA.body.isStatic === false) {\n                            objA.body.respondToCollision.call(objA.body, this.response);\n                        }\n                        if (objB.onCollision && objB.onCollision(this.response, objA) !== false && objB.body.isStatic === false) {\n                            objB.body.respondToCollision.call(objB.body, this.response);\n                        }\n                    }\n                }\n            }\n        });\n        // we could return the amount of objects we collided with ?\n        return collisionCounter > 0;\n    }\n\n    /**\n     * Checks for object colliding with the given line\n     * @ignore\n     * @param {Line} line - line to be tested for collision\n     * @param {Array.<Renderable>} [result] - a user defined array that will be populated with intersecting physic objects.\n     * @returns {Array.<Renderable>} an array of intersecting physic objects\n     * @example\n     *    // define a line accross the viewport\n     *    let ray = new me.Line(\n     *        // absolute position of the line\n     *        0, 0, [\n     *        // starting point relative to the initial position\n     *        new me.Vector2d(0, 0),\n     *        // ending point\n     *        new me.Vector2d(me.game.viewport.width, me.game.viewport.height)\n     *    ]);\n     *\n     *    // check for collition\n     *    result = me.collision.rayCast(ray);\n     *\n     *    if (result.length > 0) {\n     *        // ...\n     *    }\n     */\n    rayCast(line, result = []) {\n        let collisionCounter = 0;\n\n        // retrieve a list of potential colliding objects from the game world\n        let candidates = this.world.broadphase.retrieve(line);\n\n        for (let i = candidates.length, objB; i--, (objB = candidates[i]);) {\n\n            // fast AABB check if both bounding boxes are overlaping\n            if (objB.body && line.getBounds().overlaps(objB.getBounds())) {\n\n                // go trough all defined shapes in B (if any)\n                const bLen = objB.body.shapes.length;\n                if (objB.body.shapes.length === 0) {\n                    continue;\n                }\n\n                let shapeA = line;\n\n                // go through all defined shapes in B\n                let indexB = 0;\n                do {\n                    let shapeB = objB.body.getShape(indexB);\n\n                    // full SAT collision check\n                    if (SAT[\"test\" + shapeA.type + shapeB.type]\n                        .call(\n                            this,\n                            dummyObj, // a reference to the object A\n                            shapeA,\n                            objB,  // a reference to the object B\n                            shapeB\n                        )) {\n                        // we touched something !\n                        result[collisionCounter] = objB;\n                        collisionCounter++;\n                    }\n                    indexB++;\n                } while (indexB < bLen);\n            }\n        }\n\n        // cap result in case it was not empty\n        result.length = collisionCounter;\n\n        // return the list of colliding objects\n        return result;\n    }\n}\n\n/**\n * @import Application from \"./../application/application.js\";\n */\n\n/**\n * @classdesc\n * an object representing the physic world, and responsible for managing and updating all childs and physics\n * @augments Container\n */\nclass World extends Container {\n    /**\n     * @param {number} [x=0] - position of the container (accessible via the inherited pos.x property)\n     * @param {number} [y=0] - position of the container (accessible via the inherited pos.y property)\n     * @param {number} [width=game.viewport.width] - width of the container\n     * @param {number} [height=game.viewport.height] - height of the container\n     */\n    constructor(x = 0, y = 0, width = Infinity, height = Infinity) {\n        // call the super constructor\n        super(x, y, width, height, true);\n\n        // world is the root container\n        this.name = \"rootContainer\";\n\n        // to mimic the previous behavior\n        this.anchorPoint.set(0, 0);\n\n        /**\n         * the application (game) this physic world belong to\n         * @type {Application}\n         */\n        this.app = undefined;\n\n        /**\n         * the physic engine used by melonJS\n         * @see ApplicationSettings.physic\n         * @type {string}\n         * @default \"builtin\"\n         * @example\n         * // disable builtin physic\n         * me.game.world.physic = \"none\";\n         */\n        this.physic = \"builtin\";\n\n        /**\n         * the rate at which the game world is updated,\n         * may be greater than or lower than the display fps\n         * @default 60\n         * @see timer.maxfps\n         */\n        this.fps = 60;\n\n        /**\n         * world gravity\n         * @type {Vector2d}\n         * @default <0,0.98>\n         */\n        this.gravity = new Vector2d(0, 0.98);\n\n        /**\n         * Enabled pre-rendering for all tile layers. <br>\n         * If false layers are rendered dynamically, if true layers are first fully rendered into an offscreen canvas.<br>\n         * the \"best\" rendering method depends of your game (amount of layer, layer size, amount of tiles per layer, etc.)<br>\n         * Note : rendering method is also configurable per layer by adding a boolean \"preRender\" property to your layer in Tiled ({@link https://doc.mapeditor.org/en/stable/manual/custom-properties/#adding-properties}).\n         * @type {boolean}\n         * @default false\n         */\n        this.preRender = false;\n\n        /**\n         * the active physic bodies in this simulation\n         * @type {Set<Body>}\n         */\n        this.bodies = new Set();\n\n        /**\n         * the instance of the game world quadtree used for broadphase (used by the builtin physic and pointer event implementation)\n         * @type {QuadTree}\n         */\n        this.broadphase = new QuadTree(this, this.getBounds().clone(), collision.maxChildren, collision.maxDepth);\n\n        /**\n         * the collision detector instance used by this world instance\n         * @type {Detector}\n         */\n        this.detector = new Detector(this);\n\n        // reset the world container on the game reset signal\n        on(GAME_RESET, this.reset, this);\n\n        // update the broadband world bounds if a new level is loaded\n        on(LEVEL_LOADED, () => {\n            // reset the quadtree\n            this.broadphase.clear(this.getBounds());\n        });\n    }\n\n    /**\n     * reset the game world\n     */\n    reset() {\n        // clear the quadtree\n        this.broadphase.clear();\n\n        // reset the anchorPoint\n        this.anchorPoint.set(0, 0);\n\n        // call the parent method\n        super.reset();\n\n        // empty the list of active physic bodies\n        // Note: this should be empty already when calling the parent method\n        this.bodies.clear();\n    }\n\n    /**\n     * Add a physic body to the game world\n     * @see Container.addChild\n     * @param {Body} body\n     * @returns {World} this game world\n     */\n    addBody(body) {\n        //add it to the list of active body if builtin physic is enabled\n        if (this.physic === \"builtin\") {\n            this.bodies.add(body);\n        }\n        return this;\n    }\n\n    /**\n     * Remove a physic body from the game world\n     * @see Container.removeChild\n     * @param {Body} body\n     * @returns {World} this game world\n     */\n    removeBody(body) {\n        //remove from the list of active body if builtin physic is enabled\n        if (this.physic === \"builtin\") {\n            this.bodies.delete(body);\n        }\n        return this;\n    }\n\n    /**\n     * Apply gravity to the given body\n     * @private\n     * @param {Body} body\n     */\n    bodyApplyGravity(body) {\n        // apply gravity to the current velocity\n        if (!body.ignoreGravity && body.gravityScale !== 0) {\n            let gravity = this.gravity;\n\n            // apply gravity if defined\n            body.force.x += (body.mass * gravity.x) * body.gravityScale;\n            body.force.y += (body.mass * gravity.y) * body.gravityScale;\n        }\n    }\n\n    /**\n     * update the game world\n     * @param {number} dt - the time passed since the last frame update\n     * @returns {boolean} true if the world is dirty\n     */\n    update(dt) {\n        // only update the quadtree if necessary\n        if (this.physic === \"builtin\" || hasRegisteredEvents() === true) {\n            // clear the quadtree\n            this.broadphase.clear();\n            // insert the world container (children) into the quadtree\n            this.broadphase.insertContainer(this);\n        }\n\n        // update the builtin physic simulation\n        this.step(dt);\n\n        // call the super constructor\n        return super.update(dt);\n    }\n\n    /**\n     * update the builtin physic simulation by one step (called by the game world update method)\n     * @param {number} dt - the time passed since the last frame update\n     */\n    step(dt) {\n        if (this.physic === \"builtin\") {\n            let isPaused = state.isPaused();\n            // iterate through all bodies\n            this.bodies.forEach((body) => {\n                if (!body.isStatic) {\n                    let ancestor = body.ancestor;\n                    // if the game is not paused, and ancestor can be updated\n                    if (!(isPaused && (!ancestor.updateWhenPaused)) && (ancestor.inViewport || ancestor.alwaysUpdate)) {\n                        // apply gravity to this body\n                        this.bodyApplyGravity(body);\n                        // body update function (this moves it)\n                        if (body.update(dt) === true) {\n                            // mark ancestor as dirty\n                            ancestor.isDirty = true;\n                        }\n                        // handle collisions against other objects\n                        this.detector.collisions(ancestor);\n                        // clear body force\n                        body.force.set(0, 0);\n                    }\n                }\n            });\n        }\n        emit(WORLD_STEP, dt);\n    }\n}\n\n/**\n * ParticleEmitterSettings contains the default settings for ParticleEmitter\n * @see ParticleEmitter\n * @namespace ParticleEmitterSettings\n */\nconst ParticleEmitterSettings = {\n    /**\n     * Width of the particle spawn area.\n     * @type {number}\n     * @name width\n     * @memberof ParticleEmitterSettings\n     * @default 1\n     */\n    width : 1,\n\n    /**\n     * Height of the particle spawn area\n     * @public\n     * @type {number}\n     * @name height\n     * @memberof ParticleEmitterSettings\n     * @default 1\n     */\n    height : 1,\n\n    /**\n     * image used for particles texture\n     * (by default melonJS will create an white 8x8 texture image)\n     * @public\n     * @type {HTMLCanvasElement}\n     * @name image\n     * @memberof ParticleEmitterSettings\n     * @default undefined\n     * @see ParticleEmitterSettings.textureSize\n     */\n    image : undefined,\n\n    /**\n     * default texture size used for particles if no image is specified\n     * (by default melonJS will create an white 8x8 texture image)\n     * @public\n     * @type {number}\n     * @name textureSize\n     * @memberof ParticleEmitterSettings\n     * @default 8\n     * @see ParticleEmitterSettings.image\n     */\n    textureSize : 8,\n\n    /**\n     * tint to be applied to particles\n     * @public\n     * @type {string}\n     * @name tint\n     * @memberof ParticleEmitterSettings\n     * @default \"#fff\"\n     */\n    tint : \"#fff\",\n\n    /**\n     * Total number of particles in the emitter\n     * @public\n     * @type {number}\n     * @name totalParticles\n     * @default 50\n     * @memberof ParticleEmitterSettings\n     */\n    totalParticles : 50,\n\n    /**\n     * Start angle for particle launch in Radians\n     * @public\n     * @type {number}\n     * @name angle\n     * @default Math.PI / 2\n     * @memberof ParticleEmitterSettings\n     */\n    angle : Math.PI / 2,\n\n    /**\n     * letiation in the start angle for particle launch in Radians.\n     * @public\n     * @type {number}\n     * @name angleVariation\n     * @default 0\n     * @memberof ParticleEmitterSettings\n     */\n    angleVariation : 0,\n\n    /**\n     * Minimum time each particle lives once it is emitted in ms.\n     * @public\n     * @type {number}\n     * @name minLife\n     * @default 1000\n     * @memberof ParticleEmitterSettings\n     */\n    minLife : 1000,\n\n    /**\n     * Maximum time each particle lives once it is emitted in ms.\n     * @public\n     * @type {number}\n     * @name maxLife\n     * @default 3000\n     * @memberof ParticleEmitterSettings\n     */\n    maxLife : 3000,\n\n    /**\n     * Start speed of particles.<br>\n     * @public\n     * @type {number}\n     * @name speed\n     * @default 2\n     * @memberof ParticleEmitterSettings\n     */\n    speed : 2,\n\n    /**\n     * letiation in the start speed of particles\n     * @public\n     * @type {number}\n     * @name speedVariation\n     * @default 1\n     * @memberof ParticleEmitterSettings\n     */\n    speedVariation : 1,\n\n    /**\n     * Minimum start rotation for particles sprites in Radians\n     * @public\n     * @type {number}\n     * @name minRotation\n     * @default 0\n     * @memberof ParticleEmitterSettings\n     */\n    minRotation : 0,\n\n    /**\n     * Maximum start rotation for particles sprites in Radians\n     * @public\n     * @type {number}\n     * @name maxRotation\n     * @default 0\n     * @memberof ParticleEmitterSettings\n     */\n    maxRotation : 0,\n\n    /**\n     * Minimum start scale ratio for particles (1 = no scaling)\n     * @public\n     * @type {number}\n     * @name minStartScale\n     * @default 1\n     * @memberof ParticleEmitterSettings\n     */\n    minStartScale : 1,\n\n    /**\n     * Maximum start scale ratio for particles (1 = no scaling)\n     * @public\n     * @type {number}\n     * @name maxStartScale\n     * @default 1\n     * @memberof ParticleEmitterSettings\n     */\n    maxStartScale : 1,\n\n    /**\n     * Minimum end scale ratio for particles\n     * @public\n     * @type {number}\n     * @name minEndScale\n     * @default 0\n     * @memberof ParticleEmitterSettings\n     */\n    minEndScale : 0,\n\n    /**\n     * Maximum end scale ratio for particles\n     * @public\n     * @type {number}\n     * @name maxEndScale\n     * @default 0\n     * @memberof ParticleEmitterSettings\n     */\n    maxEndScale : 0,\n\n    /**\n     * Vertical force (Gravity) for each particle\n     * @public\n     * @type {number}\n     * @name gravity\n     * @default 0\n     * @memberof ParticleEmitterSettings\n     * @see game.world.gravity\n     */\n    gravity : 0,\n\n    /**\n     * Horizontal force (like a Wind) for each particle\n     * @public\n     * @type {number}\n     * @name wind\n     * @default 0\n     * @memberof ParticleEmitterSettings\n     */\n    wind : 0,\n\n    /**\n     * Update the rotation of particle in accordance the particle trajectory.<br>\n     * The particle sprite should aim at zero angle (draw from left to right).<br>\n     * Override the particle minRotation and maxRotation.<br>\n     * @public\n     * @type {boolean}\n     * @name followTrajectory\n     * @default false\n     * @memberof ParticleEmitterSettings\n     */\n    followTrajectory : false,\n\n    /**\n     * Enable the Texture Additive by composite operation (\"additive\" blendMode)\n     * @public\n     * @type {boolean}\n     * @name textureAdditive\n     * @default false\n     * @memberof ParticleEmitterSettings\n     * @see ParticleEmitterSettings.blendMode\n     */\n    textureAdditive : false,\n\n    /**\n     * the blend mode to be applied when rendering particles.\n     * (note: this will superseed the `textureAdditive` setting if different than \"normal\")\n     * @public\n     * @type {string}\n     * @name blendMode\n     * @default normal\n     * @memberof ParticleEmitterSettings\n     * @see CanvasRenderer#setBlendMode\n     * @see WebGLRenderer#setBlendMode\n     */\n    blendMode : \"normal\",\n\n    /**\n     * Update particles only in the viewport, remove it when out of viewport.\n     * @public\n     * @type {boolean}\n     * @name onlyInViewport\n     * @default true\n     * @memberof ParticleEmitterSettings\n     */\n    onlyInViewport : true,\n\n    /**\n     * Render particles in screen space.\n     * @public\n     * @type {boolean}\n     * @name floating\n     * @default false\n     * @memberof ParticleEmitterSettings\n     */\n    floating : false,\n\n    /**\n     * Maximum number of particles launched each time in this emitter (used only if emitter is Stream).\n     * @public\n     * @type {number}\n     * @name maxParticles\n     * @default 10\n     * @memberof ParticleEmitterSettings\n     */\n    maxParticles : 10,\n\n    /**\n     * How often a particle is emitted in ms (used only if emitter is a Stream).\n     * @public\n     * @type {number}\n     * @name frequency\n     * @default 100\n     * @memberof ParticleEmitterSettings\n     */\n    frequency : 100,\n\n    /**\n     * Duration that the emitter releases particles in ms (used only if emitter is Stream).\n     * After this period, the emitter stop the launch of particles.\n     * @public\n     * @type {number}\n     * @name duration\n     * @default Infinity\n     * @memberof ParticleEmitterSettings\n     */\n    duration : Infinity,\n\n    /**\n     * Skip n frames after updating the particle system once.\n     * This can be used to reduce the performance impact of emitters with many particles.\n     * @public\n     * @type {number}\n     * @name framesToSkip\n     * @default 0\n     * @memberof ParticleEmitterSettings\n     */\n    framesToSkip : 0\n};\n\n/**\n * @ignore\n */\nfunction createDefaultParticleTexture(w = 8, h = 8) {\n    let defaultParticleTexture = pool.pull(\"CanvasRenderTarget\", w, h, { offscreenCanvas: true });\n\n    defaultParticleTexture.context.fillStyle = \"#fff\";\n    defaultParticleTexture.context.fillRect(0, 0, w, h);\n\n    return defaultParticleTexture;\n}\n\n/**\n * @classdesc\n * Particle Emitter Object.\n * @augments Container\n */\nclass ParticleEmitter extends Container {\n    /**\n     * @param {number} x - x position of the particle emitter\n     * @param {number} y - y position of the particle emitter\n     * @param {ParticleEmitterSettings} [settings=ParticleEmitterSettings] - the settings for the particle emitter.\n     * @example\n     * // Create a particle emitter at position 100, 100\n     * let emitter = new ParticleEmitter(100, 100, {\n     *     width: 16,\n     *     height : 16,\n     *     tint: \"#f00\",\n     *     totalParticles: 32,\n     *     angle: 0,\n     *     angleVariation: 6.283185307179586,\n     *     maxLife: 5,\n     *     speed: 3\n     * });\n     *\n     * // Add the emitter to the game world\n     * me.game.world.addChild(emitter);\n     *\n     * // Launch all particles one time and stop, like a explosion\n     * emitter.burstParticles();\n     *\n     * // Launch constantly the particles, like a fountain\n     * emitter.streamParticles();\n     *\n     * // At the end, remove emitter from the game world\n     * // call this in onDestroyEvent function\n     * me.game.world.removeChild(emitter);\n     */\n    constructor(x, y, settings = {}) {\n        // call the super constructor\n        super(\n            x, y,\n            settings.width | 1,\n            settings.height | 1\n        );\n\n        /**\n         * the current (active) emitter settings\n         * @public\n         * @type {ParticleEmitterSettings}\n         * @name settings\n         * @memberof ParticleEmitter\n         */\n        this.settings = {};\n\n        // center the emitter around the given coordinates\n        this.centerOn(x, y);\n\n        // Emitter is Stream, launch particles constantly\n        /** @ignore */\n        this._stream = false;\n\n        // Frequency timer (in ms) for emitter launch new particles\n        // used only in stream emitter\n        /** @ignore */\n        this._frequencyTimer = 0;\n\n        // Time of live (in ms) for emitter launch new particles\n        // used only in stream emitter\n        /** @ignore */\n        this._durationTimer = 0;\n\n        // Emitter is emitting particles\n        /** @ignore */\n        this._enabled = false;\n\n        // Emitter will always update\n        this.alwaysUpdate = true;\n\n        // don't sort the particles by z-index\n        this.autoSort = false;\n\n        // count the updates\n        this._updateCount = 0;\n\n        // internally store how much time was skipped when frames are skipped\n        this._dt = 0;\n\n        //this.anchorPoint.set(0, 0);\n\n        // Reset the emitter to defaults\n        this.reset(settings);\n    }\n\n    /**\n     * Reset the emitter with particle emitter settings.\n     * @param {ParticleEmitterSettings} settings - [optional] object with emitter settings. See {@link ParticleEmitterSettings}\n     */\n    reset(settings = {}) {\n        Object.assign(this.settings, ParticleEmitterSettings, settings);\n\n        if (typeof this.settings.image === \"undefined\") {\n            this._defaultParticle = createDefaultParticleTexture(settings.textureSize, settings.textureSize);\n            this.settings.image = this._defaultParticle.canvas;\n        }\n\n        this.floating = this.settings.floating;\n\n        this.isDirty = true;\n    }\n\n    /**\n     * returns a random point on the x axis within the bounds of this emitter\n     * @returns {number}\n     */\n    getRandomPointX() {\n        return randomFloat(0, this.getBounds().width);\n    }\n\n    /**\n     * returns a random point on the y axis within the bounds this emitter\n     * @returns {number}\n     */\n    getRandomPointY() {\n        return randomFloat(0, this.getBounds().height);\n    }\n\n    // Add count particles in the game world\n    /** @ignore */\n    addParticles(count) {\n        for (let i = 0; i < count; i++) {\n            // Add particle to the container\n            this.addChild(pool.pull(\"Particle\", this), this.pos.z);\n        }\n        this.isDirty = true;\n    }\n\n    /**\n     * Emitter is of type stream and is launching particles\n     * @returns {boolean} Emitter is Stream and is launching particles\n     */\n    isRunning() {\n        return this._enabled && this._stream;\n    }\n\n    /**\n     * Launch particles from emitter constantly (e.g. for stream)\n     * @param {number} [duration] - time that the emitter releases particles in ms\n     */\n    streamParticles(duration) {\n        this._enabled = true;\n        this._stream = true;\n        this.settings.frequency = Math.max(1, this.settings.frequency);\n        this._durationTimer = (typeof duration === \"number\") ? duration : this.settings.duration;\n    }\n\n    /**\n     * Stop the emitter from generating new particles (used only if emitter is Stream)\n     */\n    stopStream() {\n        this._enabled = false;\n    }\n\n    /**\n     * Launch all particles from emitter and stop (e.g. for explosion)\n     * @param {number} [total] - number of particles to launch\n     */\n    burstParticles(total) {\n        this._enabled = true;\n        this._stream = false;\n        this.addParticles((typeof total === \"number\") ? total : this.settings.totalParticles);\n        this._enabled = false;\n    }\n\n    /**\n     * @ignore\n     */\n    update(dt) {\n        // skip frames if necessary\n        if (++this._updateCount > this.settings.framesToSkip) {\n            this._updateCount = 0;\n        }\n        if (this._updateCount > 0) {\n            this._dt += dt;\n            return this.isDirty;\n        }\n\n        // apply skipped delta time\n        dt += this._dt;\n        this._dt = 0;\n\n        // Update particles\n        this.isDirty |= super.update(dt);\n\n        // Launch new particles, if emitter is Stream\n        if ((this._enabled) && (this._stream)) {\n            // Check if the emitter has duration set\n            if (this._durationTimer !== Infinity) {\n                this._durationTimer -= dt;\n\n                if (this._durationTimer <= 0) {\n                    this.stopStream();\n                    return this.isDirty;\n                }\n            }\n\n            // Increase the emitter launcher timer\n            this._frequencyTimer += dt;\n\n            // Check for new particles launch\n            const particlesCount = this.children.length;\n            if ((particlesCount < this.settings.totalParticles) && (this._frequencyTimer >= this.settings.frequency)) {\n                if ((particlesCount + this.settings.maxParticles) <= this.settings.totalParticles) {\n                    this.addParticles(this.settings.maxParticles);\n                }\n                else {\n                    this.addParticles(this.settings.totalParticles - particlesCount);\n                }\n                this._frequencyTimer = 0;\n                this.isDirty = true;\n            }\n        }\n        return this.isDirty;\n    }\n\n    /**\n     * Destroy function\n     * @ignore\n     */\n    destroy() {\n        // call the parent destroy method\n        super.destroy(arguments);\n        // clean emitter specific Properties\n        if (typeof this._defaultParticle !== \"undefined\") {\n            pool.push(this._defaultParticle);\n            this._defaultParticle = undefined;\n        }\n        this.settings.image = undefined;\n        this.settings = undefined;\n    }\n}\n\n/**\n * @import ParticleEmitter from \"./emitter.js\";\n */\n\n/**\n * @classdesc\n * Single Particle Object.\n * @augments Renderable\n */\nclass Particle extends Renderable {\n    /**\n     * @param {ParticleEmitter} emitter - the particle emitter\n     */\n    constructor(emitter) {\n        // Call the super constructor\n        super(\n            emitter.getRandomPointX(),\n            emitter.getRandomPointY(),\n            emitter.settings.image.width,\n            emitter.settings.image.height\n        );\n        this.onResetEvent(emitter, true);\n    }\n\n    /**\n     * @ignore\n     */\n    onResetEvent(emitter, newInstance = false) {\n        if (newInstance === false) {\n            this.pos.set(\n                emitter.getRandomPointX(),\n                emitter.getRandomPointY()\n            );\n            this.resize(\n                emitter.settings.image.width,\n                emitter.settings.image.height\n            );\n            this.currentTransform.identity();\n        } else {\n            // particle velocity\n            this.vel = pool.pull(\"Vector2d\");\n        }\n\n        this.image = emitter.settings.image;\n\n        // Particle will always update\n        this.alwaysUpdate = true;\n\n        if (typeof emitter.settings.tint === \"string\") {\n            this.tint.parseCSS(emitter.settings.tint);\n        }\n\n        if (emitter.settings.textureAdditive === true) {\n            this.blendMode = \"additive\";\n        }\n\n        if (emitter.settings.blendMode !== \"normal\") {\n            this.blendMode = emitter.settings.blendMode;\n        }\n\n        // Set the start particle Angle and Speed as defined in emitter\n        let angle = emitter.settings.angle + ((emitter.settings.angleVariation > 0) ? (randomFloat(0, 2) - 1) * emitter.settings.angleVariation : 0);\n        let speed = emitter.settings.speed + ((emitter.settings.speedVariation > 0) ? (randomFloat(0, 2) - 1) * emitter.settings.speedVariation : 0);\n\n        // Set the start particle Velocity\n        this.vel.set(speed * Math.cos(angle), -speed * Math.sin(angle));\n\n        // Set the start particle Time of Life as defined in emitter\n        this.life = randomFloat(emitter.settings.minLife, emitter.settings.maxLife);\n        this.startLife = this.life;\n\n        // Set the start and end particle Scale as defined in emitter\n        // clamp the values as minimum and maximum scales range\n        this.startScale = clamp(\n            randomFloat(emitter.settings.minStartScale, emitter.settings.maxStartScale),\n            emitter.settings.minStartScale,\n            emitter.settings.maxStartScale\n        );\n        this.endScale = clamp(\n            randomFloat(emitter.settings.minEndScale, emitter.settings.maxEndScale),\n            emitter.settings.minEndScale,\n            emitter.settings.maxEndScale\n        );\n\n        // Set the particle Gravity and Wind (horizontal gravity) as defined in emitter\n        this.gravity = emitter.settings.gravity;\n        this.wind = emitter.settings.wind;\n\n        // Set if the particle update the rotation in accordance the trajectory\n        this.followTrajectory = emitter.settings.followTrajectory;\n\n        // Set if the particle update only in Viewport\n        this.onlyInViewport = emitter.settings.onlyInViewport;\n\n        // cache inverse of the expected delta time\n        this._deltaInv = timer.maxfps / 1000;\n\n        // Set the start particle rotation as defined in emitter\n        // if the particle not follow trajectory\n        if (!emitter.settings.followTrajectory) {\n            this.angle = randomFloat(emitter.settings.minRotation, emitter.settings.maxRotation);\n        }\n    }\n\n    /**\n     * Update the Particle <br>\n     * This is automatically called by the game manager {@link game}\n     * @ignore\n     * @param {number} dt - time since the last update in milliseconds\n     */\n    update(dt) {\n        // move things forward independent of the current frame rate\n        let skew = dt * this._deltaInv;\n\n        // Decrease particle life\n        this.life = this.life > dt ? this.life - dt : 0;\n\n        if (this.life <= 0) {\n            this.ancestor.removeChild(this);\n            return false;\n        }\n\n        // Calculate the particle Age Ratio\n        let ageRatio = this.life / this.startLife;\n\n        // Resize the particle as particle Age Ratio\n        let scale = this.startScale;\n        if (this.startScale > this.endScale) {\n            scale *= ageRatio;\n            scale = (scale < this.endScale) ? this.endScale : scale;\n        }\n        else if (this.startScale < this.endScale) {\n            scale /= ageRatio;\n            scale = (scale > this.endScale) ? this.endScale : scale;\n        }\n\n        // Set the particle opacity as Age Ratio\n        this.alpha = ageRatio;\n\n        // Adjust the particle velocity\n        this.vel.x += this.wind * skew;\n        this.vel.y += this.gravity * skew;\n\n        // If necessary update the rotation of particle in accordance the particle trajectory\n        let angle = this.followTrajectory ? Math.atan2(this.vel.y, this.vel.x) : this.angle;\n\n        this.pos.x += this.vel.x * skew;\n        this.pos.y += this.vel.y * skew;\n\n        // Update particle transform\n        this.currentTransform.setTransform(\n            scale, 0, 0,\n            0, scale, 0,\n            this.pos.x, this.pos.y, 1\n        ).rotate(angle);\n\n        // mark as dirty if the particle is not dead yet\n        this.isDirty = this.inViewport || !this.onlyInViewport;\n\n        return super.update(dt);\n    }\n\n    /**\n     * @ignore\n     */\n    draw(renderer) {\n        let w = this.width, h = this.height;\n        renderer.drawImage(\n            this.image,\n            0, 0,\n            w, h,\n            -w / 2, -h / 2,\n            w, h\n        );\n    }\n}\n\n/**\n * @import Line from \"./../../geometries/line.js\";\n * @import Rect from \"./../../geometries/rectangle.js\";\n * @import Ellipse from \"./../../geometries/ellipse.js\";\n * @import Polygon from \"./../../geometries/poly.js\";\n * @import Bounds from \"./../../physics/bounds.js\";\n * @import CanvasRenderer from \"./../../video/canvas/canvas_renderer.js\";\n * @import WebGLRenderer from \"./../../video/webgl/webgl_renderer.js\";\n **/\n\n/**\n * @classdesc\n * a Generic Object Entity\n * @augments Renderable\n */\nclass Entity extends Renderable {\n    /**\n     * @param {number} x - the x coordinates of the entity object\n     * @param {number} y - the y coordinates of the entity object\n     * @param {object} settings - Entity properties, to be defined through Tiled or when calling the entity constructor\n     * <img src=\"images/object_properties.png\"/>\n     * @param {number} settings.width - the physical width the entity takes up in game\n     * @param {number} settings.height - the physical height the entity takes up in game\n     * @param {string} [settings.name] - object entity name\n     * @param {string} [settings.id] - object unique IDs\n     * @param {Image|string} [settings.image] - resource name of a spritesheet to use for the entity renderable component\n     * @param {Vector2d} [settings.anchorPoint=0.0] - Entity anchor point\n     * @param {number} [settings.framewidth=settings.width] - width of a single frame in the given spritesheet\n     * @param {number} [settings.frameheight=settings.width] - height of a single frame in the given spritesheet\n     * @param {string} [settings.type] - object type\n     * @param {number} [settings.collisionMask] - Mask collision detection for this object\n     * @param {Rect[]|Polygon[]|Line[]|Ellipse[]} [settings.shapes] - the initial list of collision shapes (usually populated through Tiled)\n     */\n    constructor(x, y, settings) {\n\n        // ensure mandatory properties are defined\n        if ((typeof settings.width !== \"number\") || (typeof settings.height !== \"number\")) {\n            throw new Error(\"height and width properties are mandatory when passing settings parameters to an object entity\");\n        }\n\n        // call the super constructor\n        super(x, y, settings.width, settings.height);\n\n        /**\n         * The array of renderable children of this entity.\n         * @ignore\n         */\n        this.children = [];\n\n        if (settings.image) {\n            // set the frame size to the given entity size, if not defined in settings\n            settings.framewidth = settings.framewidth || settings.width;\n            settings.frameheight = settings.frameheight || settings.height;\n            this.renderable = new Sprite(0, 0, settings);\n        }\n\n        // Update anchorPoint\n        if (settings.anchorPoint) {\n            this.anchorPoint.setMuted(settings.anchorPoint.x, settings.anchorPoint.y);\n        } else {\n            // for backward compatibility\n            this.anchorPoint.setMuted(0, 0);\n        }\n\n        // set the sprite name if specified\n        if (typeof (settings.name) === \"string\") {\n            this.name = settings.name;\n        }\n\n        /**\n         * object type (as defined in Tiled)\n         * @type {string}\n         */\n        this.type = settings.type || \"\";\n\n        /**\n         * object unique ID (as defined in Tiled)\n         * @type {number}\n         */\n        this.id = settings.id || \"\";\n\n        /**\n         * dead/living state of the entity<br>\n         * default value : true\n         * @type {boolean}\n         */\n        this.alive = true;\n\n        // initialize the default body\n        if (typeof settings.shapes === \"undefined\") {\n            settings.shapes = pool.pull(\"Polygon\", 0, 0, [\n                pool.pull(\"Vector2d\", 0,          0),\n                pool.pull(\"Vector2d\", this.width, 0),\n                pool.pull(\"Vector2d\", this.width, this.height),\n                pool.pull(\"Vector2d\", 0,          this.height)\n            ]);\n        }\n\n        /**\n         * the entity body object\n         * @type {Body}\n         */\n        this.body = new Body(this, settings.shapes, () => this.onBodyUpdate());\n\n        // resize the entity if required\n        if (this.width === 0 && this.height === 0) {\n            this.resize(this.body.getBounds().width, this.body.getBounds().height);\n        }\n\n        // set the  collision mask and type (if defined)\n        this.body.setCollisionMask(settings.collisionMask);\n        this.body.setCollisionType(settings.collisionType);\n\n        // disable for entities\n        this.autoTransform = false;\n    }\n\n\n    /**\n     * The entity renderable component (can be any objects deriving from me.Renderable, like me.Sprite for example)\n     * @type {Renderable}\n     */\n\n    get renderable() {\n        return this.children[0];\n    }\n\n    set renderable(value) {\n        if (value instanceof Renderable) {\n            this.children[0] = value;\n            this.children[0].ancestor = this;\n            this.updateBounds();\n        } else {\n            throw new Error(value + \"should extend me.Renderable\");\n        }\n    }\n\n    /** @ignore */\n    update(dt) {\n        if (this.renderable) {\n            this.isDirty |= this.renderable.update(dt);\n        }\n        return super.update(dt);\n    }\n\n    /**\n     * update the bounding box for this entity.\n     * @param {boolean} [absolute=true] - update the bounds size and position in (world) absolute coordinates\n     * @returns {Bounds} this entity bounding box Rectangle object\n     */\n    updateBounds(absolute = true) {\n        let bounds = this.getBounds();\n\n        bounds.clear();\n        bounds.addFrame(\n            0,\n            0,\n            this.width,\n            this.height\n        );\n\n        // add each renderable bounds\n        if (this.children && this.children.length > 0) {\n            bounds.addBounds(this.children[0].getBounds());\n        }\n\n        if (this.body) {\n            bounds.addBounds(this.body.getBounds());\n        }\n\n        if (absolute === true) {\n            let absPos = this.getAbsolutePosition();\n            bounds.centerOn(absPos.x + bounds.x + bounds.width / 2,  absPos.y + bounds.y + bounds.height / 2);\n        }\n\n        return bounds;\n    }\n\n    /**\n     * update the bounds when the body is modified\n     */\n    onBodyUpdate() {\n        this.updateBounds();\n    }\n\n    preDraw(renderer) {\n        renderer.save();\n\n        // translate to the entity position\n        renderer.translate(\n            this.pos.x + this.body.getBounds().x,\n            this.pos.y + this.body.getBounds().y\n        );\n\n        if (this.renderable instanceof Renderable) {\n            // draw the child renderable's anchorPoint at the entity's\n            // anchor point.  the entity's anchor point is a scale from\n            // body position to body width/height\n            renderer.translate(\n                this.anchorPoint.x * this.body.getBounds().width,\n                this.anchorPoint.y * this.body.getBounds().height\n            );\n        }\n    }\n\n    /**\n     * draw this entity (automatically called by melonJS)\n     * @param {CanvasRenderer|WebGLRenderer} renderer - a renderer instance\n     * @param {Camera2d} [viewport] - the viewport to (re)draw\n     */\n    draw(renderer, viewport) {\n        let renderable = this.renderable;\n        if (renderable instanceof Renderable) {\n            // predraw (apply transforms)\n            renderable.preDraw(renderer);\n\n            // draw the object\n            renderable.draw(renderer, viewport);\n\n            // postdraw (clean-up);\n            renderable.postDraw(renderer);\n        }\n    }\n\n    /**\n     * Destroy function\n     * @ignore\n     */\n    destroy() {\n        // free some property objects\n        if (this.renderable) {\n            this.renderable.destroy.apply(this.renderable, arguments);\n            this.children.splice(0, 1);\n        }\n\n        // call the parent destroy method\n        super.destroy(arguments);\n    }\n\n    /**\n     * onDeactivateEvent Notification function\n     */\n    onDeactivateEvent() {\n        if (this.renderable && this.renderable.onDeactivateEvent) {\n            this.renderable.onDeactivateEvent();\n        }\n    }\n\n}\n\n/**\n * Auto-detect the best renderer to use\n * @ignore\n */\nfunction autoDetectRenderer(options) {\n    try {\n        if (isWebGLSupported(options)) {\n            return new WebGLRenderer(options);\n        }\n    } catch (e) {\n        console.log(\"Error creating WebGL renderer :\" + e.message);\n    }\n    return new CanvasRenderer(options);\n}\n\n/**\n * additional import for TypeScript\n * @import Application from \"./application.js\";\n */\n\n/**\n * scale the \"displayed\" canvas by the given scalar.\n * this will modify the size of canvas element directly.\n * Only use this if you are not using the automatic scaling feature.\n * @private\n * @param {Application} game - the game application instance triggering the resize\n * @param {number} x - x scaling multiplier\n * @param {number} y - y scaling multiplier\n */\nfunction scale(game, x, y) {\n    let renderer = game.renderer;\n    let canvas = renderer.getCanvas();\n    let context = renderer.getContext();\n    let settings = renderer.settings;\n    let pixelRatio = devicePixelRatio;\n\n    let w = settings.zoomX = canvas.width * x * pixelRatio;\n    let h = settings.zoomY = canvas.height * y * pixelRatio;\n\n    // update the global scale variable\n    renderer.scaleRatio.set(x * pixelRatio, y * pixelRatio);\n\n    // adjust CSS style based on device pixel ratio\n    canvas.style.width = (w / pixelRatio) + \"px\";\n    canvas.style.height = (h / pixelRatio) + \"px\";\n\n    // if anti-alias and blend mode were resetted (e.g. Canvas mode)\n    renderer.setAntiAlias(context, settings.antiAlias);\n    renderer.setBlendMode(settings.blendMode, context);\n\n    // force repaint\n    game.repaint();\n}\n\n/**\n * callback for window resize event\n * @private\n * @param {Application} game - the game application instance triggering the resize\n */\nfunction onresize(game) {\n    let renderer = game.renderer;\n    let settings = renderer.settings;\n    let scaleX = settings.scale, scaleY = settings.scale;\n    let nodeBounds;\n\n    if (settings.autoScale) {\n\n        // set max the canvas max size if CSS values are defined\n        let canvasMaxWidth = Infinity;\n        let canvasMaxHeight = Infinity;\n\n        if (globalThis.getComputedStyle) {\n            let style = globalThis.getComputedStyle(renderer.getCanvas(), null);\n            canvasMaxWidth = parseInt(style.maxWidth, 10) || Infinity;\n            canvasMaxHeight = parseInt(style.maxHeight, 10) || Infinity;\n        }\n\n        if (typeof game.settings.scaleTarget !== \"undefined\") {\n            // get the bounds of the given scale target\n            nodeBounds = getElementBounds(game.settings.scaleTarget);\n        } else {\n            // get the maximum canvas size within the parent div containing the canvas container\n            nodeBounds = getParentBounds(game.getParentElement());\n        }\n\n        let _max_width = Math.min(canvasMaxWidth, nodeBounds.width);\n        let _max_height = Math.min(canvasMaxHeight, nodeBounds.height);\n\n        // calculate final canvas width & height\n        let screenRatio = _max_width / _max_height;\n\n        if ((settings.scaleMethod === \"fill-min\" && screenRatio > renderer.designRatio) ||\n            (settings.scaleMethod === \"fill-max\" && screenRatio < renderer.designRatio) ||\n            (settings.scaleMethod === \"flex-width\")\n        ) {\n            // resize the display canvas to fill the parent container\n            let sWidth = Math.min(canvasMaxWidth, settings.height * screenRatio);\n            scaleX = scaleY = _max_width / sWidth;\n            renderer.resize(Math.floor(sWidth), settings.height);\n        }\n        else if ((settings.scaleMethod === \"fill-min\" && screenRatio < renderer.designRatio) ||\n                 (settings.scaleMethod === \"fill-max\" && screenRatio > renderer.designRatio) ||\n                 (settings.scaleMethod === \"flex-height\")\n        ) {\n            // resize the display canvas to fill the parent container\n            let sHeight = Math.min(canvasMaxHeight, settings.width * (_max_height / _max_width));\n            scaleX = scaleY = _max_height / sHeight;\n            renderer.resize(settings.width, Math.floor(sHeight));\n        }\n        else if (settings.scaleMethod === \"flex\") {\n            // resize the display canvas to fill the parent container\n            renderer.resize(Math.floor(_max_width), Math.floor(_max_height));\n        }\n        else if (settings.scaleMethod === \"stretch\") {\n            // scale the display canvas to fit with the parent container\n            scaleX = _max_width / settings.width;\n            scaleY = _max_height / settings.height;\n        }\n        else {\n            // scale the display canvas to fit the parent container\n            // make sure we maintain the original aspect ratio\n            if (screenRatio < renderer.designRatio) {\n                scaleX = scaleY = _max_width / settings.width;\n            }\n            else {\n                scaleX = scaleY = _max_height / settings.height;\n            }\n        }\n    }\n    // adjust scaling ratio\n    scale(game, scaleX, scaleY);\n}\n\n/**\n * additional import for TypeScript\n * @import Application from \"./application.js\";\n */\n\n/**\n * display information\n * @param {Application} app - the game application instance calling this function\n */\nfunction consoleHeader(app) {\n    let renderType = app.renderer.type;\n    let gpu_renderer = (typeof app.renderer.GPURenderer === \"string\") ? \" (\" + app.renderer.GPURenderer + \")\" : \"\";\n    let depthTesting = renderType.includes(\"WebGL\") && app.renderer.depthTest === \"z-buffer\" ? \"Depth Test | \" : \"\";\n    let audioType = hasWebAudio ? \"Web Audio\" : \"HTML5 Audio\";\n\n    // output video information in the console\n    console.log(\n        renderType + \" renderer\" + gpu_renderer + \" | \" + depthTesting +\n        audioType + \" | \" +\n        \"pixel ratio \" + devicePixelRatio + \" | \" +\n        (platform.nodeJS ? \"node.js\" : platform.isMobile ? \"mobile\" : \"desktop\") + \" | \" +\n        getScreenOrientation() + \" | \" +\n        language\n    );\n\n    console.log(\"resolution: \" + \"requested \" + app.settings.width + \"x\" + app.settings.height +\n        \", got \" + app.renderer.width + \"x\" + app.renderer.height\n    );\n}\n\n/**\n * additional import for TypeScript\n * @import WebGLRenderer from \"./../video/webgl/webgl_renderer.js\";\n * @import Camera2d from \"./../camera/camera2d.js\";\n */\n\n/**\n * @classdesc\n * An Application represents a single melonJS game, and is responsible for updating (each frame) all the related object status and draw them.\n * @see game\n */\nclass Application {\n    /**\n     * @param {number} width - The width of the canvas viewport\n     * @param {number} height - The height of the canvas viewport\n     * @param {ApplicationSettings} [options] - The optional parameters for the application and default renderer\n     * @throws Will throw an exception if it fails to instantiate a renderer\n     */\n    constructor(width, height, options) {\n\n        /**\n         * the parent HTML element holding the main canvas of this application\n         * @type {HTMLElement}\n         */\n        this.parentElement = undefined;\n\n        /**\n         * a reference to the active Canvas or WebGL active renderer renderer\n         * @type {CanvasRenderer|WebGLRenderer}\n         */\n        this.renderer = undefined;\n\n        /**\n         * the active stage \"default\" camera\n         * @type {Camera2d}\n         */\n        this.viewport = undefined;\n\n        /**\n         * a reference to the game world, <br>\n         * a world is a virtual environment containing all the game objects\n         * @type {World}\n         */\n        this.world = undefined;\n\n        /**\n         * when true, all objects will be added under the root world container.<br>\n         * When false, a `me.Container` object will be created for each corresponding groups\n         * @type {boolean}\n         * @default true\n         */\n        this.mergeGroup = true;\n\n        /**\n         * Last time the game update loop was executed. <br>\n         * Use this value to implement frame prediction in drawing events,\n         * for creating smooth motion while running game update logic at\n         * a lower fps.\n         * @type {DOMHighResTimeStamp}\n         */\n        this.lastUpdate = 0;\n\n        /**\n         * true when this app instance has been initialized\n         * @type {boolean}\n         * @default false\n         */\n        this.isInitialized = false;\n\n        /**\n         * the given settings used when creating this application\n         * @type {ApplicationSettings}\n         */\n        this.settings = undefined;\n\n        /**\n         * Specify whether to pause this app when losing focus\n         * @type {boolean}\n         * @default true\n         * @example\n         *  // keep the default game instance running even when loosing focus\n         *  me.game.pauseOnBlur = false;\n         */\n        this.pauseOnBlur = true;\n\n        /**\n         * Specify whether to unpause this app when gaining back focus\n         * @type {boolean}\n         * @default true\n         */\n        this.resumeOnFocus = true;\n\n        /**\n         * Specify whether to stop this app when losing focus\n         * @type {boolean}\n         * @default false\n         */\n        this.stopOnBlur = false;\n\n        // to know when we have to refresh the display\n        this.isDirty = true;\n\n        // always refresh the display when updatesPerSecond are lower than fps\n        this.isAlwaysDirty = false;\n\n        // frame counter for frameSkipping\n        // reset the frame counter\n        this.frameCounter = 0;\n        this.frameRate = 1;\n\n        // time accumulation for multiple update calls\n        this.accumulator = 0.0;\n        this.accumulatorMax = 0.0;\n        this.accumulatorUpdateDelta = 0;\n\n        // min update step size\n        this.stepSize = 1000 / 60;\n        this.updateDelta = 0;\n        this.lastUpdateStart = null;\n        this.updateAverageDelta = 0;\n\n        // when using the default game application, legacy is set to true\n        // and init is called through the legacy video.init() call\n        if (options.legacy !== true) {\n            this.init(width, height, options);\n        }\n    }\n\n    /**\n     * init the game instance (create a physic world, update starting time, etc..)\n     * @param {number} width - The width of the canvas viewport\n     * @param {number} height - The height of the canvas viewport\n     * @param {ApplicationSettings} [options] - The optional parameters for the application and default renderer\n     */\n    init(width, height, options) {\n\n        this.settings = Object.assign(ApplicationSettings, options || {});\n\n        // sanitize potential given parameters\n        this.settings.width = width;\n        this.settings.height = height;\n        this.settings.transparent = !!(this.settings.transparent);\n        this.settings.antiAlias = !!(this.settings.antiAlias);\n        this.settings.failIfMajorPerformanceCaveat = !!(this.settings.failIfMajorPerformanceCaveat);\n        this.settings.depthTest = this.settings.depthTest === \"z-buffer\" ? \"z-buffer\" : \"sorting\";\n        this.settings.subPixel = !!(this.settings.subPixel);\n        this.settings.verbose = !!(this.settings.verbose);\n        if (this.settings.scaleMethod.search(/^(fill-(min|max)|fit|flex(-(width|height))?|stretch)$/) !== -1) {\n            this.settings.autoScale = (this.settings.scale === \"auto\") || true;\n        } else {\n            // default scaling method\n            this.settings.scaleMethod = \"fit\";\n            this.settings.autoScale = (this.settings.scale === \"auto\") || false;\n        }\n\n        // override renderer settings if &webgl or &canvas is defined in the URL\n        let uriFragment = getUriFragment();\n        if (uriFragment.webgl === true || uriFragment.webgl1 === true || uriFragment.webgl2 === true) {\n            this.settings.renderer = WEBGL;\n            if (uriFragment.webgl1 === true) {\n                this.settings.preferWebGL1 = true;\n            }\n        } else if (uriFragment.canvas === true) {\n            this.settings.renderer = CANVAS;\n        }\n\n        // normalize scale\n        this.settings.scale = (this.settings.autoScale) ? 1.0 : (+this.settings.scale || 1.0);\n\n        // default scaled size value\n        this.settings.zoomX = width * this.settings.scale;\n        this.settings.zoomY = height * this.settings.scale;\n\n        // identify parent element and/or the html target for resizing\n        this.parentElement = getElement(this.settings.parent);\n        if (typeof this.settings.scaleTarget !== \"undefined\") {\n            this.settings.scaleTarget = getElement(this.settings.scaleTarget);\n        }\n\n        if (typeof this.settings.renderer === \"number\") {\n            switch (this.settings.renderer) {\n                case AUTO:\n                case WEBGL:\n                    this.renderer = autoDetectRenderer(this.settings);\n                    break;\n                default:\n                    this.renderer = new CanvasRenderer(this.settings);\n                    break;\n            }\n        } else {\n            let CustomRenderer = this.settings.renderer;\n            // a renderer class\n            this.renderer = new CustomRenderer(this.settings);\n        }\n\n        // register to the channel\n        on(WINDOW_ONRESIZE, () => onresize(this), this);\n        on(WINDOW_ONORIENTATION_CHANGE, () => onresize(this), this);\n\n        // add our canvas (default to document.body if settings.parent is undefined)\n        this.parentElement.appendChild(this.renderer.getCanvas());\n\n        // Mobile browser hacks\n        if (platform.isMobile) {\n            // Prevent the webview from moving on a swipe\n            enableSwipe(false);\n        }\n\n        // trigger an initial resize();\n        onresize(this);\n\n        // add an observer to detect when the dom tree is modified\n        if (\"MutationObserver\" in globalThis) {\n            // Create an observer instance linked to the callback function\n            let observer = new MutationObserver(() => onresize(this));\n\n            // Start observing the target node for configured mutations\n            observer.observe(this.parentElement, {\n                attributes: false, childList: true, subtree: true\n            });\n        }\n\n        if (this.settings.consoleHeader !== false) {\n            consoleHeader(this);\n        }\n\n        // create a new physic world\n        this.world = new World(0, 0, this.settings.width, this.settings.height);\n\n        // set the reference to this application instance\n        this.world.app = this;\n        // set the reference to this application instance\n        this.world.physic = this.settings.physic;\n\n        // app starting time\n        this.lastUpdate = globalThis.performance.now();\n        // manually sort child if depthTest setting is \"sorting\"\n        this.world.autoSort = !(this.renderer.type === \"WEBGL\" && this.settings.depthTest === \"z-buffer\");\n\n        this.isInitialized = true;\n\n        emit(GAME_INIT, this);\n        on(STATE_CHANGE, this.repaint, this);\n        on(STATE_RESTART, this.repaint, this);\n        on(STATE_RESUME, this.repaint, this);\n        on(STAGE_RESET, this.reset, this);\n        on(TICK, (time) => {\n            // update all game objects\n            this.update(time);\n            // render all game objects\n            this.draw();\n        }, this);\n\n\n        // on blur event, pause the current\n        on(BLUR, () => {\n            if (this.stopOnBlur === true) {\n                state.stop(true);\n            }\n            if (this.pauseOnBlur === true) {\n                state.pause(true);\n            }\n        });\n\n        // on focus event, restart or resume the current\n        on(FOCUS, () => {\n            if (this.stopOnBlur === true) {\n                state.restart(true);\n            }\n            if (this.resumeOnFocus === true) {\n                state.resume(true);\n            }\n        });\n    }\n\n    /**\n     * reset the game Object manager\n     * destroy all current objects\n     */\n    reset() {\n        // point to the current active stage \"default\" camera\n        let current = state.get();\n        if (typeof current !== \"undefined\") {\n            this.viewport = current.cameras.get(\"default\");\n        }\n\n        // publish reset notification\n        emit(GAME_RESET);\n\n        // Refresh internal variables for framerate  limiting\n        this.updateFrameRate();\n    }\n\n    /**\n     * Specify the property to be used when sorting renderables for this application game world.\n     * Accepted values : \"x\", \"y\", \"z\", \"depth\"\n     * @type {string}\n     * @see World.sortOn\n     */\n    get sortOn() {\n        return this.world.sortOn;\n    }\n    set sortOn(value) {\n        this.world.sortOn = value;\n    }\n\n    /**\n     * Fired when a level is fully loaded and all renderable instantiated. <br>\n     * Additionnaly the level id will also be passed to the called function.\n     * @example\n     * // call myFunction () everytime a level is loaded\n     * me.game.onLevelLoaded = this.myFunction.bind(this);\n     */\n    onLevelLoaded() {}\n\n    /**\n     * Update the renderer framerate using the system config variables.\n     * @see timer.maxfps\n     * @see World.fps\n     */\n    updateFrameRate() {\n        // reset the frame counter\n        this.frameCounter = 0;\n        this.frameRate = ~~(0.5 + 60 / timer.maxfps);\n\n        // set step size based on the updatesPerSecond\n        this.stepSize = (1000 / this.world.fps);\n        this.accumulator = 0.0;\n        this.accumulatorMax = this.stepSize * 10;\n\n        // display should always re-draw when update speed doesn't match fps\n        // this means the user intends to write position prediction drawing logic\n        this.isAlwaysDirty = (timer.maxfps > this.world.fps);\n    }\n\n    /**\n     * Returns the parent HTML Element holding the main canvas of this application\n     * @returns {HTMLElement} the parent HTML element\n     */\n    getParentElement() {\n        return this.parentElement;\n    }\n\n    /**\n     * force the redraw (not update) of all objects\n     */\n    repaint() {\n        this.isDirty = true;\n    }\n\n    /**\n     * update all objects related to this game active scene/stage\n     * @param {number} time - current timestamp as provided by the RAF callback\n     */\n    update(time) {\n        // handle frame skipping if required\n        if ((++this.frameCounter % this.frameRate) === 0) {\n            // reset the frame counter\n            this.frameCounter = 0;\n\n            // publish notification\n            emit(GAME_BEFORE_UPDATE, time);\n\n            this.accumulator += timer.getDelta();\n            this.accumulator = Math.min(this.accumulator, this.accumulatorMax);\n\n            this.updateDelta = (timer.interpolation) ? timer.getDelta() : this.stepSize;\n            this.accumulatorUpdateDelta = (timer.interpolation) ? this.updateDelta : Math.max(this.updateDelta, this.updateAverageDelta);\n\n            while (this.accumulator >= this.accumulatorUpdateDelta || timer.interpolation) {\n                this.lastUpdateStart = globalThis.performance.now();\n\n                // game update event\n                if (state.isPaused() !== true) {\n                    emit(GAME_UPDATE, time);\n                }\n\n                // update all objects (and pass the elapsed time since last frame)\n                this.isDirty = this.world.update(this.updateDelta);\n                this.isDirty = state.current().update(this.updateDelta) || this.isDirty;\n\n                this.lastUpdate = globalThis.performance.now();\n                this.updateAverageDelta = this.lastUpdate - this.lastUpdateStart;\n\n                this.accumulator -= this.accumulatorUpdateDelta;\n                if (timer.interpolation) {\n                    this.accumulator = 0;\n                    break;\n                }\n            }\n\n            // publish notification\n            emit(GAME_AFTER_UPDATE, this.lastUpdate);\n        }\n    }\n\n    /**\n     * draw the active scene/stage associated to this game\n     */\n    draw() {\n        if (this.renderer.isContextValid === true && (this.isDirty || this.isAlwaysDirty)) {\n            // publish notification\n            emit(GAME_BEFORE_DRAW, globalThis.performance.now());\n\n            // prepare renderer to draw a new frame\n            this.renderer.clear();\n\n            // render the stage\n            state.current().draw(this.renderer, this.world);\n\n            // set back to flag\n            this.isDirty = false;\n\n            // flush/render our frame\n            this.renderer.flush();\n\n            // publish notification\n            emit(GAME_AFTER_DRAW, globalThis.performance.now());\n        }\n    }\n}\n\n/**\n * @import Application from \"./../application/application.js\";\n */\n\n/**\n * Contains all registered plugins.\n * @name cache\n * @memberof plugin\n */\nlet cache = {};\n\n/**\n * @namespace plugin\n */\n\n/**\n * a base Object class for plugin\n * (plugin must be installed using the register function)\n * @class\n * @name BasePlugin\n * @memberof plugin\n */\nclass BasePlugin {\n\n    /**\n     * @param {Application} [app] - a reference to the app/game that registered this plugin\n     */\n    constructor(app = game) {\n        /**\n         * define the minimum required version of melonJS<br>\n         * this can be overridden by the plugin\n         * @type {string}\n         * @default \"17.4.0\"\n         */\n        this.version = \"17.4.0\";\n\n        /**\n         * a reference to the app/game that registered this plugin\n         * @type {Application}\n         */\n        this.app = app;\n    }\n}\n\n/**\n * @class\n * @name Base\n * @memberof plugin\n * @deprecated since 15.1.6, see {@link plugin.BasePlugin}\n */\nclass Base extends BasePlugin {\n\n    constructor() {\n        warning(\"plugin.Base\", \"plugin.BasePlugin\", \"15.1.6\");\n        super();\n    }\n}\n\n/**\n * patch a melonJS function\n * @name patch\n * @memberof plugin\n * @param {object} proto - target object\n * @param {string} name - target function\n * @param {Function} fn - replacement function\n * @example\n * // redefine the me.game.update function with a new one\n * me.plugin.patch(me.game, \"update\", function () {\n *   // display something in the console\n *   console.log(\"duh\");\n *   // call the original me.game.update function\n *   this._patched();\n * });\n */\nfunction patch(proto, name, fn) {\n    // use the object prototype if possible\n    if (typeof proto.prototype !== \"undefined\") {\n        proto = proto.prototype;\n    }\n    // reuse the logic behind object extends\n    if (typeof(proto[name]) === \"function\") {\n        // save the original function\n        let _parent = proto[name];\n        // override the function with the new one\n        Object.defineProperty(proto, name, {\n            \"configurable\" : true,\n            \"value\" : (function (name, fn) {\n                return function () {\n                    this._patched = _parent;\n                    let ret = fn.apply(this, arguments);\n                    this._patched = null;\n                    return ret;\n                };\n            })(name, fn)\n        });\n    }\n    else {\n        throw new Error(name + \" is not an existing function\");\n    }\n}\n\n/**\n * Register a plugin.\n * @name register\n * @memberof plugin\n * @param {BasePlugin} plugin - Plugin object to instantiate and register\n * @param {string} [name=plugin.constructor.name] - a unique name for this plugin\n * @param {...*} [args] - all extra parameters will be passed to the plugin constructor\n * @example\n * // register a new plugin\n * me.plugin.register(TestPlugin, \"testPlugin\");\n * // the `testPlugin` class instance can also be accessed through me.plugin.cache\n * me.plugin.cache.testPlugin.myfunction ();\n */\nfunction register(plugin, name = plugin.toString().match(/ (\\w+)/)[1]) {\n    // ensure me.plugins[name] is not already \"used\"\n    if (cache[name]) {\n        throw new Error(\"plugin \" + name + \" already registered\");\n    }\n\n    // get extra arguments\n    let _args = [];\n    if (arguments.length > 2) {\n        // store extra arguments if any\n        _args = Array.prototype.slice.call(arguments, 1);\n    }\n\n    // try to instantiate the plugin\n    _args[0] = plugin;\n    let instance = new (plugin.bind.apply(plugin, _args))();\n\n    // inheritance check\n    if (typeof instance === \"undefined\" || !(instance instanceof BasePlugin)) {\n        throw new Error(\"Plugin should extend the BasePlugin Class !\");\n    }\n\n    // compatibility testing\n    if (checkVersion(instance.version, version) > 0) {\n        throw new Error(\"Plugin version mismatch, expected: \" + instance.version + \", got: \" + version);\n    }\n\n    // create a reference to the new plugin\n    cache[name] = instance;\n}\n\n/**\n * returns the the plugin instance with the specified class type or registered name\n * @name get\n * @memberof plugin\n * @param {object|string} classType - the Class Object or registered name of the plugin to retreive\n * @returns {BasePlugin} a plugin instance or undefined\n */\nfunction get(classType) {\n    for (const name in cache) {\n        if ((typeof classType === \"string\" && classType === name) || cache[name] instanceof classType) {\n            return cache[name];\n        }\n    }\n}\n\nvar plugin = {\n\t__proto__: null,\n\tBase: Base,\n\tBasePlugin: BasePlugin,\n\tcache: cache,\n\tget: get,\n\tpatch: patch,\n\tregister: register\n};\n\n/*\n * placeholder for all deprecated classes and corresponding alias for backward compatibility\n */\n\n/**\n * Alias of {@link TextureAtlas}\n * @public\n * @name Texture\n * @class\n * @memberof Renderer#\n * @deprecated since 10.4.0\n * @see TextureAtlas\n */\nObject.defineProperty(Renderer.prototype, \"Texture\", {\n    /**\n     * @ignore\n     */\n    get : function () {\n        warning(\"me.video.renderer.Texture\", \"me.TextureAtlas\", \"10.4.0\");\n        return TextureAtlas;\n    }\n});\n\n/**\n * @classdesc\n * Used to make a game entity draggable\n * @augments Entity\n * @deprecated since 10.5.0\n * @see Draggable\n */\nclass DraggableEntity extends Draggable {\n    /**\n     * @param {number} x - the x coordinates of the draggable object\n     * @param {number} y - the y coordinates of the draggable object\n     * @param {object} settings - Entity properties (see {@link Entity})\n     */\n    constructor(x, y, settings) {\n        warning(\"DraggableEntity\", \"Draggable\", \"10.5.0\");\n        super(x, y, settings.width, settings.height);\n    }\n}\n\n/**\n * @classdesc\n * Used to make a game entity a droptarget\n * @augments Entity\n * @deprecated since 10.5.0\n * @see DropTarget\n */\nclass DroptargetEntity extends DropTarget {\n    /**\n     * @param {number} x - the x coordinates of the draggable object\n     * @param {number} y - the y coordinates of the draggable object\n     * @param {object} settings - Entity properties (see {@link Entity})\n     */\n    constructor(x, y, settings) {\n        warning(\"DroptargetEntity\", \"DropTarget\", \"10.5.0\");\n        super(x, y, settings.width, settings.height);\n    }\n}\n\n/**\n * return a reference to the screen canvas\n * @name getScreenCanvas\n * @memberof Renderer\n * @returns {HTMLCanvasElement}\n * @deprecated since 13.1.0\n * @see getCanvas();\n */\nRenderer.prototype.getScreenCanvas = function() {\n    warning(\"getScreenCanvas\", \"getCanvas\", \"13.1.0\");\n    return this.getCanvas();\n};\n\n/**\n * return a reference to the screen canvas corresponding 2d Context<br>\n * (will return buffered context if double buffering is enabled, or a reference to the Screen Context)\n * @name getScreenContext\n * @memberof Renderer\n * @returns {CanvasRenderingContext2D}\n * @deprecated since 13.1.0\n * @see getContext();\n */\nRenderer.prototype.getScreenContext = function()  {\n    warning(\"getScreenContext\", \"getContext\", \"13.1.0\");\n    return this.getContext();\n};\n\n/**\n * @classdesc\n * A very basic object to manage GUI elements\n * @augments Sprite\n * @deprecated since 14.0.0\n * @see UISpriteElement\n */\nclass GUI_Object extends UISpriteElement {\n    /**\n     * @param {number} x - the x coordinate of the GUI Object\n     * @param {number} y - the y coordinate of the GUI Object\n     * @param {object} settings - See {@link Sprite}\n     */\n    constructor(x, y, settings) {\n        warning(\"GUI_Object\", \"UISpriteElement or UITextButton\", \"14.0.0\");\n        super(x, y, settings);\n    }\n}\n\n\n/**\n * return the width of the system Canvas\n * @public\n * @name getWidth\n * @class\n * @memberof Renderer#\n * @deprecated since 15.12.0\n * @see width\n */\nRenderer.prototype.getWidth = function()  {\n    warning(\"getWidth\", \"width\", \"15.12.0\");\n    return this.width;\n};\n\n/**\n * return the height of the system Canvas\n * @public\n * @name getHeight\n * @memberof Renderer#\n * @deprecated since 15.12.0\n * @see height\n */\nRenderer.prototype.getHeight = function()  {\n    warning(\"getHeight\", \"height\", \"15.12.0\");\n    return this.height;\n};\n\n/**\n * @classdesc\n * @deprecated since 17.1.0\n * @see CanvasRenderTarget\n */\nclass CanvasTexture extends CanvasRenderTarget {\n    /**\n     * @param {number} width - the desired width of the canvas\n     * @param {number} height - the desired height of the canvas\n     * @param {object} attributes - The attributes to create both the canvas and context\n     * @param {boolean} [attributes.context=\"2d\"] - the context type to be created (\"2d\", \"webgl\", \"webgl2\")\n     * @param {boolean} [attributes.offscreenCanvas=false] - will create an offscreenCanvas if true instead of a standard canvas\n     * @param {boolean} [attributes.willReadFrequently=false] - Indicates whether or not a lot of read-back operations are planned\n     * @param {boolean} [attributes.antiAlias=false] - Whether to enable anti-aliasing, use false (default) for a pixelated effect.\n     */\n    constructor(width, height, attributes) {\n        warning(\"CanvasTexture\", \"CanvasRenderTarget\", \"17.1.0\");\n        super(width, height, attributes);\n    }\n}\n\n/**\n * return the height of the system Canvas\n * @public\n * @name setLineWidth\n * @memberof CanvasRenderer#\n * @deprecated since 17.3.0\n * @see lineWidth\n */\nCanvasRenderer.prototype.setLineWidth = function(width)  {\n    warning(\"setLineWidth\", \"lineWidth\", \"17.3.0\");\n    this.lineWidth = width;\n};\n\n/**\n * return the height of the system Canvas\n * @public\n * @name setLineWidth\n * @memberof WebGLRenderer#\n * @deprecated since 17.3.0\n * @see lineWidth\n */\nWebGLRenderer.prototype.setLineWidth = function(width)  {\n    warning(\"setLineWidth\", \"lineWidth\", \"17.3.0\");\n    this.lineWidth = width;\n};\n\n// ES5/ES6 polyfills\n\n\n/**\n * current melonJS version\n * @static\n * @constant\n * @name version\n * @type {string}\n */\nconst version = \"17.4.0\";\n\n/**\n * a flag indicating that melonJS is fully initialized\n * @type {boolean}\n * @default false\n * @readonly\n */\nlet initialized = false;\n\n/**\n * disable melonJS auto-initialization\n * @type {boolean}\n * @default false\n * @see boot\n */\nlet skipAutoInit = false;\n\n/**\n * game is a default instance of a melonJS Application and represents your current game,\n * it contains all the objects, tilemap layers, current viewport, collision map, etc...<br>\n * @namespace game\n * @see Application\n */\nconst game = new Application(0, 0, {legacy:true});\n\n/**\n * initialize the melonJS library.\n * this is automatically called unless me.skipAutoInit is set to true,\n * to allow asynchronous loaders to work.\n * @name boot\n * @see skipAutoInit\n * @public\n */\nfunction boot() {\n    // don't do anything if already initialized (should not happen anyway)\n    if (initialized === true) {\n        return;\n    }\n\n    // output melonJS version in the console\n    console.log(\"melonJS 2 (v\" + version + \") | http://melonjs.org\");\n\n    // register all built-ins objects into the object pool\n    pool.register(\"me.Entity\", Entity);\n    pool.register(\"me.Collectable\", Collectable);\n    pool.register(\"me.Trigger\", Trigger);\n    pool.register(\"me.Light2d\", Light2d);\n    pool.register(\"me.Tween\", Tween, true);\n    pool.register(\"me.Color\", Color, true);\n    pool.register(\"me.Particle\", Particle, true);\n    pool.register(\"me.Sprite\", Sprite);\n    pool.register(\"me.NineSliceSprite\", NineSliceSprite);\n    pool.register(\"me.Renderable\", Renderable);\n    pool.register(\"me.Text\", Text, true);\n    pool.register(\"me.BitmapText\", BitmapText);\n    pool.register(\"me.BitmapTextData\", BitmapTextData, true);\n    pool.register(\"me.ImageLayer\", ImageLayer);\n    pool.register(\"me.ColorLayer\", ColorLayer, true);\n    pool.register(\"me.Vector2d\", Vector2d, true);\n    pool.register(\"me.Vector3d\", Vector3d, true);\n    pool.register(\"me.ObservableVector2d\", ObservableVector2d, true);\n    pool.register(\"me.ObservableVector3d\", ObservableVector3d, true);\n    pool.register(\"me.Matrix2d\", Matrix2d, true);\n    pool.register(\"me.Matrix3d\", Matrix3d, true);\n    pool.register(\"me.Rect\", Rect, true);\n    pool.register(\"me.RoundRect\", RoundRect, true);\n    pool.register(\"me.Polygon\", Polygon, true);\n    pool.register(\"me.Line\", Line, true);\n    pool.register(\"me.Point\", Point, true);\n    pool.register(\"me.Ellipse\", Ellipse, true);\n    pool.register(\"me.Bounds\", Bounds, true);\n\n    // duplicate all entries if use with no namespace (e.g. es6)\n    pool.register(\"Entity\", Entity);\n    pool.register(\"Collectable\", Collectable);\n    pool.register(\"Trigger\", Trigger);\n    pool.register(\"Light2d\", Light2d);\n    pool.register(\"Tween\", Tween, true);\n    pool.register(\"Color\", Color, true);\n    pool.register(\"Particle\", Particle, true);\n    pool.register(\"Sprite\", Sprite);\n    pool.register(\"NineSliceSprite\", NineSliceSprite);\n    pool.register(\"Renderable\", Renderable);\n    pool.register(\"Text\", Text, true);\n    pool.register(\"BitmapText\", BitmapText);\n    pool.register(\"BitmapTextData\", BitmapTextData, true);\n    pool.register(\"ImageLayer\", ImageLayer);\n    pool.register(\"ColorLayer\", ColorLayer, true);\n    pool.register(\"Vector2d\", Vector2d, true);\n    pool.register(\"Vector3d\", Vector3d, true);\n    pool.register(\"ObservableVector2d\", ObservableVector2d, true);\n    pool.register(\"ObservableVector3d\", ObservableVector3d, true);\n    pool.register(\"Matrix2d\", Matrix2d, true);\n    pool.register(\"Matrix3d\", Matrix3d, true);\n    pool.register(\"Rect\", Rect, true);\n    pool.register(\"RoundRect\", RoundRect, true);\n    pool.register(\"Polygon\", Polygon, true);\n    pool.register(\"Line\", Line, true);\n    pool.register(\"Point\", Point, true);\n    pool.register(\"Ellipse\", Ellipse, true);\n    pool.register(\"Bounds\", Bounds, true);\n    pool.register(\"CanvasRenderTarget\", CanvasRenderTarget, true);\n\n    // publish Boot notification\n    emit(BOOT);\n\n    // enable/disable the cache\n    setNocache(getUriFragment().nocache || false);\n\n    // automatically enable keyboard events\n    initKeyboardEvent();\n\n    // mark melonJS as initialized\n    initialized = true;\n\n    /// if auto init is disable and this function was called manually\n    if (skipAutoInit === true) {\n        emit(DOM_READY);\n    }\n}\n\n// call the library init function when ready\nonReady(() => {\n    if (skipAutoInit === false) {\n        boot();\n    }\n});\n\nexport { AUTO, Application, BitmapText, BitmapTextData, Body, Bounds, CANVAS, Camera2d, CanvasRenderTarget, CanvasRenderer, CanvasTexture, Collectable, Color, ColorLayer, Compositor, Container, Draggable, DraggableEntity, DropTarget, DroptargetEntity, Ellipse, Entity, GLShader, GUI_Object, ImageLayer, Light2d, Line, math as Math, Matrix2d, Matrix3d, NineSliceSprite, ObservableVector2d, ObservableVector3d, Particle, ParticleEmitter, ParticleEmitterSettings, Point, Pointer, Polygon, PrimitiveCompositor, QuadCompositor, QuadTree, Rect, Renderable, Renderer, RoundRect, Sprite, Stage, TMXHexagonalRenderer, TMXIsometricRenderer, TMXLayer, TMXOrthogonalRenderer, TMXRenderer, TMXStaggeredRenderer, TMXTileMap, TMXTileset, TMXTilesetGroup, TMXUtils, Text, TextureAtlas, Tile, Trigger, Tween, UIBaseElement, UISpriteElement, UITextButton, Vector2d, Vector3d, WEBGL, WebGLRenderer, World, audio, boot, collision, device, event, game, initialized, input, level, loader, plugin, cache as plugins, pool, save, skipAutoInit, state, timer, utils, version, video };\n"],
  "mappings": "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",
  "names": ["error", "test", "error", "input", "error", "input", "error", "defineProperty", "error", "state", "defineProperty", "error", "state", "toString", "error", "trunc", "index", "index", "keys", "hasOwn", "ownKeys", "keys", "defineProperty", "getOwnPropertyDescriptor", "getOwnPropertyDescriptor", "error", "trimStart", "trimEnd", "input", "x", "y", "w", "corners", "upperLeft", "upperRight", "lowerRight", "lowerLeft", "radii", "match", "split", "error", "init", "min", "max", "t", "g", "alpha", "f", "scale", "data", "stop", "intersects", "level", "index", "has", "once", "event", "EventEmitter", "emit", "on", "HowlerGlobal", "self", "Howler", "sound", "muted", "test", "ua", "e", "i", "audio", "Howl", "Sound", "id", "seek", "play", "diff", "rate", "cache", "keys", "error", "iOS", "version", "panner", "mute", "name", "enable", "screen", "orientation", "activeEventList", "pointer", "normalizedEvents", "touchEvent", "scale", "eventType", "range", "match", "shader", "type", "alpha", "position", "renderer", "img", "onload", "onerror", "MAX_SAFE_COMPONENT_LENGTH", "MAX_SAFE_BUILD_LENGTH", "MAX_LENGTH", "debug", "re", "t", "max", "prerelease", "major", "minor", "patch", "Range", "parseOptions", "Comparator", "SemVer", "set", "ANY", "cmp", "versions", "min", "comparator", "gt", "lt", "eq", "input", "sign", "atlas", "alpha", "f", "data", "orientation", "renderer", "index", "index2", "compare", "prop", "replacement", "version", "zOrder", "g", "level", "onload", "onerror", "error", "enable", "id", "state", "pauseTrack", "timerId", "t", "t2", "a", "event", "scale", "keys", "min", "max", "game", "name", "fn", "plugin"]
}
